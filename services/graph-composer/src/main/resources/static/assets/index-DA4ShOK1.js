(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(r){if(r.ep)return;r.ep=!0;const l=t(r);fetch(r.href,l)}})();var og={exports:{}},tu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var US;function IN(){if(US)return tu;US=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,r,l){var o=null;if(l!==void 0&&(o=""+l),r.key!==void 0&&(o=""+r.key),"key"in r){l={};for(var u in r)u!=="key"&&(l[u]=r[u])}else l=r;return r=l.ref,{$$typeof:i,type:n,key:o,ref:r!==void 0?r:null,props:l}}return tu.Fragment=e,tu.jsx=t,tu.jsxs=t,tu}var jS;function FN(){return jS||(jS=1,og.exports=IN()),og.exports}var P=FN(),ug={exports:{}},Le={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HS;function YN(){if(HS)return Le;HS=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),o=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function O(R){return R===null||typeof R!="object"?null:(R=g&&R[g]||R["@@iterator"],typeof R=="function"?R:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,x={};function w(R,G,Z){this.props=R,this.context=G,this.refs=x,this.updater=Z||b}w.prototype.isReactComponent={},w.prototype.setState=function(R,G){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,G,"setState")},w.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function T(){}T.prototype=w.prototype;function E(R,G,Z){this.props=R,this.context=G,this.refs=x,this.updater=Z||b}var D=E.prototype=new T;D.constructor=E,v(D,w.prototype),D.isPureReactComponent=!0;var _=Array.isArray,A={H:null,A:null,T:null,S:null,V:null},B=Object.prototype.hasOwnProperty;function C(R,G,Z,ne,he,Me){return Z=Me.ref,{$$typeof:i,type:R,key:G,ref:Z!==void 0?Z:null,props:Me}}function U(R,G){return C(R.type,G,void 0,void 0,void 0,R.props)}function $(R){return typeof R=="object"&&R!==null&&R.$$typeof===i}function K(R){var G={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(Z){return G[Z]})}var L=/\/+/g;function Q(R,G){return typeof R=="object"&&R!==null&&R.key!=null?K(""+R.key):G.toString(36)}function Y(){}function te(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(Y,Y):(R.status="pending",R.then(function(G){R.status==="pending"&&(R.status="fulfilled",R.value=G)},function(G){R.status==="pending"&&(R.status="rejected",R.reason=G)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function ae(R,G,Z,ne,he){var Me=typeof R;(Me==="undefined"||Me==="boolean")&&(R=null);var Ce=!1;if(R===null)Ce=!0;else switch(Me){case"bigint":case"string":case"number":Ce=!0;break;case"object":switch(R.$$typeof){case i:case e:Ce=!0;break;case p:return Ce=R._init,ae(Ce(R._payload),G,Z,ne,he)}}if(Ce)return he=he(R),Ce=ne===""?"."+Q(R,0):ne,_(he)?(Z="",Ce!=null&&(Z=Ce.replace(L,"$&/")+"/"),ae(he,G,Z,"",function(Zt){return Zt})):he!=null&&($(he)&&(he=U(he,Z+(he.key==null||R&&R.key===he.key?"":(""+he.key).replace(L,"$&/")+"/")+Ce)),G.push(he)),1;Ce=0;var nt=ne===""?".":ne+":";if(_(R))for(var Ke=0;Ke<R.length;Ke++)ne=R[Ke],Me=nt+Q(ne,Ke),Ce+=ae(ne,G,Z,Me,he);else if(Ke=O(R),typeof Ke=="function")for(R=Ke.call(R),Ke=0;!(ne=R.next()).done;)ne=ne.value,Me=nt+Q(ne,Ke++),Ce+=ae(ne,G,Z,Me,he);else if(Me==="object"){if(typeof R.then=="function")return ae(te(R),G,Z,ne,he);throw G=String(R),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return Ce}function j(R,G,Z){if(R==null)return R;var ne=[],he=0;return ae(R,ne,"","",function(Me){return G.call(Z,Me,he++)}),ne}function se(R){if(R._status===-1){var G=R._result;G=G(),G.then(function(Z){(R._status===0||R._status===-1)&&(R._status=1,R._result=Z)},function(Z){(R._status===0||R._status===-1)&&(R._status=2,R._result=Z)}),R._status===-1&&(R._status=0,R._result=G)}if(R._status===1)return R._result.default;throw R._result}var de=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)};function pe(){}return Le.Children={map:j,forEach:function(R,G,Z){j(R,function(){G.apply(this,arguments)},Z)},count:function(R){var G=0;return j(R,function(){G++}),G},toArray:function(R){return j(R,function(G){return G})||[]},only:function(R){if(!$(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},Le.Component=w,Le.Fragment=t,Le.Profiler=r,Le.PureComponent=E,Le.StrictMode=n,Le.Suspense=h,Le.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,Le.__COMPILER_RUNTIME={__proto__:null,c:function(R){return A.H.useMemoCache(R)}},Le.cache=function(R){return function(){return R.apply(null,arguments)}},Le.cloneElement=function(R,G,Z){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var ne=v({},R.props),he=R.key,Me=void 0;if(G!=null)for(Ce in G.ref!==void 0&&(Me=void 0),G.key!==void 0&&(he=""+G.key),G)!B.call(G,Ce)||Ce==="key"||Ce==="__self"||Ce==="__source"||Ce==="ref"&&G.ref===void 0||(ne[Ce]=G[Ce]);var Ce=arguments.length-2;if(Ce===1)ne.children=Z;else if(1<Ce){for(var nt=Array(Ce),Ke=0;Ke<Ce;Ke++)nt[Ke]=arguments[Ke+2];ne.children=nt}return C(R.type,he,void 0,void 0,Me,ne)},Le.createContext=function(R){return R={$$typeof:o,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:l,_context:R},R},Le.createElement=function(R,G,Z){var ne,he={},Me=null;if(G!=null)for(ne in G.key!==void 0&&(Me=""+G.key),G)B.call(G,ne)&&ne!=="key"&&ne!=="__self"&&ne!=="__source"&&(he[ne]=G[ne]);var Ce=arguments.length-2;if(Ce===1)he.children=Z;else if(1<Ce){for(var nt=Array(Ce),Ke=0;Ke<Ce;Ke++)nt[Ke]=arguments[Ke+2];he.children=nt}if(R&&R.defaultProps)for(ne in Ce=R.defaultProps,Ce)he[ne]===void 0&&(he[ne]=Ce[ne]);return C(R,Me,void 0,void 0,null,he)},Le.createRef=function(){return{current:null}},Le.forwardRef=function(R){return{$$typeof:u,render:R}},Le.isValidElement=$,Le.lazy=function(R){return{$$typeof:p,_payload:{_status:-1,_result:R},_init:se}},Le.memo=function(R,G){return{$$typeof:d,type:R,compare:G===void 0?null:G}},Le.startTransition=function(R){var G=A.T,Z={};A.T=Z;try{var ne=R(),he=A.S;he!==null&&he(Z,ne),typeof ne=="object"&&ne!==null&&typeof ne.then=="function"&&ne.then(pe,de)}catch(Me){de(Me)}finally{A.T=G}},Le.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},Le.use=function(R){return A.H.use(R)},Le.useActionState=function(R,G,Z){return A.H.useActionState(R,G,Z)},Le.useCallback=function(R,G){return A.H.useCallback(R,G)},Le.useContext=function(R){return A.H.useContext(R)},Le.useDebugValue=function(){},Le.useDeferredValue=function(R,G){return A.H.useDeferredValue(R,G)},Le.useEffect=function(R,G,Z){var ne=A.H;if(typeof Z=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ne.useEffect(R,G)},Le.useId=function(){return A.H.useId()},Le.useImperativeHandle=function(R,G,Z){return A.H.useImperativeHandle(R,G,Z)},Le.useInsertionEffect=function(R,G){return A.H.useInsertionEffect(R,G)},Le.useLayoutEffect=function(R,G){return A.H.useLayoutEffect(R,G)},Le.useMemo=function(R,G){return A.H.useMemo(R,G)},Le.useOptimistic=function(R,G){return A.H.useOptimistic(R,G)},Le.useReducer=function(R,G,Z){return A.H.useReducer(R,G,Z)},Le.useRef=function(R){return A.H.useRef(R)},Le.useState=function(R){return A.H.useState(R)},Le.useSyncExternalStore=function(R,G,Z){return A.H.useSyncExternalStore(R,G,Z)},Le.useTransition=function(){return A.H.useTransition()},Le.version="19.1.1",Le}var VS;function iO(){return VS||(VS=1,ug.exports=YN()),ug.exports}var M=iO(),cg={exports:{}},nu={},hg={exports:{}},fg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XS;function ZN(){return XS||(XS=1,(function(i){function e(j,se){var de=j.length;j.push(se);e:for(;0<de;){var pe=de-1>>>1,R=j[pe];if(0<r(R,se))j[pe]=se,j[de]=R,de=pe;else break e}}function t(j){return j.length===0?null:j[0]}function n(j){if(j.length===0)return null;var se=j[0],de=j.pop();if(de!==se){j[0]=de;e:for(var pe=0,R=j.length,G=R>>>1;pe<G;){var Z=2*(pe+1)-1,ne=j[Z],he=Z+1,Me=j[he];if(0>r(ne,de))he<R&&0>r(Me,ne)?(j[pe]=Me,j[he]=de,pe=he):(j[pe]=ne,j[Z]=de,pe=Z);else if(he<R&&0>r(Me,de))j[pe]=Me,j[he]=de,pe=he;else break e}}return se}function r(j,se){var de=j.sortIndex-se.sortIndex;return de!==0?de:j.id-se.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;i.unstable_now=function(){return l.now()}}else{var o=Date,u=o.now();i.unstable_now=function(){return o.now()-u}}var h=[],d=[],p=1,g=null,O=3,b=!1,v=!1,x=!1,w=!1,T=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function _(j){for(var se=t(d);se!==null;){if(se.callback===null)n(d);else if(se.startTime<=j)n(d),se.sortIndex=se.expirationTime,e(h,se);else break;se=t(d)}}function A(j){if(x=!1,_(j),!v)if(t(h)!==null)v=!0,B||(B=!0,Q());else{var se=t(d);se!==null&&ae(A,se.startTime-j)}}var B=!1,C=-1,U=5,$=-1;function K(){return w?!0:!(i.unstable_now()-$<U)}function L(){if(w=!1,B){var j=i.unstable_now();$=j;var se=!0;try{e:{v=!1,x&&(x=!1,E(C),C=-1),b=!0;var de=O;try{t:{for(_(j),g=t(h);g!==null&&!(g.expirationTime>j&&K());){var pe=g.callback;if(typeof pe=="function"){g.callback=null,O=g.priorityLevel;var R=pe(g.expirationTime<=j);if(j=i.unstable_now(),typeof R=="function"){g.callback=R,_(j),se=!0;break t}g===t(h)&&n(h),_(j)}else n(h);g=t(h)}if(g!==null)se=!0;else{var G=t(d);G!==null&&ae(A,G.startTime-j),se=!1}}break e}finally{g=null,O=de,b=!1}se=void 0}}finally{se?Q():B=!1}}}var Q;if(typeof D=="function")Q=function(){D(L)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,te=Y.port2;Y.port1.onmessage=L,Q=function(){te.postMessage(null)}}else Q=function(){T(L,0)};function ae(j,se){C=T(function(){j(i.unstable_now())},se)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(j){j.callback=null},i.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<j?Math.floor(1e3/j):5},i.unstable_getCurrentPriorityLevel=function(){return O},i.unstable_next=function(j){switch(O){case 1:case 2:case 3:var se=3;break;default:se=O}var de=O;O=se;try{return j()}finally{O=de}},i.unstable_requestPaint=function(){w=!0},i.unstable_runWithPriority=function(j,se){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var de=O;O=j;try{return se()}finally{O=de}},i.unstable_scheduleCallback=function(j,se,de){var pe=i.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?pe+de:pe):de=pe,j){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=de+R,j={id:p++,callback:se,priorityLevel:j,startTime:de,expirationTime:R,sortIndex:-1},de>pe?(j.sortIndex=de,e(d,j),t(h)===null&&j===t(d)&&(x?(E(C),C=-1):x=!0,ae(A,de-pe))):(j.sortIndex=R,e(h,j),v||b||(v=!0,B||(B=!0,Q()))),j},i.unstable_shouldYield=K,i.unstable_wrapCallback=function(j){var se=O;return function(){var de=O;O=se;try{return j.apply(this,arguments)}finally{O=de}}}})(fg)),fg}var GS;function KN(){return GS||(GS=1,hg.exports=ZN()),hg.exports}var dg={exports:{}},dn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WS;function JN(){if(WS)return dn;WS=1;var i=iO();function e(h){var d="https://react.dev/errors/"+h;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+h+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(h,d,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:g==null?null:""+g,children:h,containerInfo:d,implementation:p}}var o=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(h,d){if(h==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return dn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,dn.createPortal=function(h,d){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return l(h,d,null,p)},dn.flushSync=function(h){var d=o.T,p=n.p;try{if(o.T=null,n.p=2,h)return h()}finally{o.T=d,n.p=p,n.d.f()}},dn.preconnect=function(h,d){typeof h=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,n.d.C(h,d))},dn.prefetchDNS=function(h){typeof h=="string"&&n.d.D(h)},dn.preinit=function(h,d){if(typeof h=="string"&&d&&typeof d.as=="string"){var p=d.as,g=u(p,d.crossOrigin),O=typeof d.integrity=="string"?d.integrity:void 0,b=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;p==="style"?n.d.S(h,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:g,integrity:O,fetchPriority:b}):p==="script"&&n.d.X(h,{crossOrigin:g,integrity:O,fetchPriority:b,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},dn.preinitModule=function(h,d){if(typeof h=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var p=u(d.as,d.crossOrigin);n.d.M(h,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&n.d.M(h)},dn.preload=function(h,d){if(typeof h=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var p=d.as,g=u(p,d.crossOrigin);n.d.L(h,p,{crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},dn.preloadModule=function(h,d){if(typeof h=="string")if(d){var p=u(d.as,d.crossOrigin);n.d.m(h,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else n.d.m(h)},dn.requestFormReset=function(h){n.d.r(h)},dn.unstable_batchedUpdates=function(h,d){return h(d)},dn.useFormState=function(h,d,p){return o.H.useFormState(h,d,p)},dn.useFormStatus=function(){return o.H.useHostTransitionStatus()},dn.version="19.1.1",dn}var IS;function eM(){if(IS)return dg.exports;IS=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),dg.exports=JN(),dg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FS;function tM(){if(FS)return nu;FS=1;var i=KN(),e=iO(),t=eM();function n(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function l(s){var a=s,c=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(c=a.return),s=a.return;while(s)}return a.tag===3?c:null}function o(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function u(s){if(l(s)!==s)throw Error(n(188))}function h(s){var a=s.alternate;if(!a){if(a=l(s),a===null)throw Error(n(188));return a!==s?null:s}for(var c=s,f=a;;){var m=c.return;if(m===null)break;var y=m.alternate;if(y===null){if(f=m.return,f!==null){c=f;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===c)return u(m),s;if(y===f)return u(m),a;y=y.sibling}throw Error(n(188))}if(c.return!==f.return)c=m,f=y;else{for(var S=!1,k=m.child;k;){if(k===c){S=!0,c=m,f=y;break}if(k===f){S=!0,f=m,c=y;break}k=k.sibling}if(!S){for(k=y.child;k;){if(k===c){S=!0,c=y,f=m;break}if(k===f){S=!0,f=y,c=m;break}k=k.sibling}if(!S)throw Error(n(189))}}if(c.alternate!==f)throw Error(n(190))}if(c.tag!==3)throw Error(n(188));return c.stateNode.current===c?s:a}function d(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=d(s),a!==null)return a;s=s.sibling}return null}var p=Object.assign,g=Symbol.for("react.element"),O=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),E=Symbol.for("react.consumer"),D=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),$=Symbol.for("react.activity"),K=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function Q(s){return s===null||typeof s!="object"?null:(s=L&&s[L]||s["@@iterator"],typeof s=="function"?s:null)}var Y=Symbol.for("react.client.reference");function te(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===Y?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case v:return"Fragment";case w:return"Profiler";case x:return"StrictMode";case A:return"Suspense";case B:return"SuspenseList";case $:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case b:return"Portal";case D:return(s.displayName||"Context")+".Provider";case E:return(s._context.displayName||"Context")+".Consumer";case _:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case C:return a=s.displayName||null,a!==null?a:te(s.type)||"Memo";case U:a=s._payload,s=s._init;try{return te(s(a))}catch{}}return null}var ae=Array.isArray,j=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de={pending:!1,data:null,method:null,action:null},pe=[],R=-1;function G(s){return{current:s}}function Z(s){0>R||(s.current=pe[R],pe[R]=null,R--)}function ne(s,a){R++,pe[R]=s.current,s.current=a}var he=G(null),Me=G(null),Ce=G(null),nt=G(null);function Ke(s,a){switch(ne(Ce,a),ne(Me,s),ne(he,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?mS(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=mS(a),s=gS(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}Z(he),ne(he,s)}function Zt(){Z(he),Z(Me),Z(Ce)}function Cn(s){s.memoizedState!==null&&ne(nt,s);var a=he.current,c=gS(a,s.type);a!==c&&(ne(Me,s),ne(he,c))}function mr(s){Me.current===s&&(Z(he),Z(Me)),nt.current===s&&(Z(nt),Yo._currentValue=de)}var Ws=Object.prototype.hasOwnProperty,Ci=i.unstable_scheduleCallback,Yr=i.unstable_cancelCallback,zl=i.unstable_shouldYield,Zr=i.unstable_requestPaint,xn=i.unstable_now,Pl=i.unstable_getCurrentPriorityLevel,Is=i.unstable_ImmediatePriority,ro=i.unstable_UserBlockingPriority,Fs=i.unstable_NormalPriority,vc=i.unstable_LowPriority,so=i.unstable_IdlePriority,Sc=i.log,Kn=i.unstable_setDisableYieldValue,Kr=null,Kt=null;function $n(s){if(typeof Sc=="function"&&Kn(s),Kt&&typeof Kt.setStrictMode=="function")try{Kt.setStrictMode(Kr,s)}catch{}}var hn=Math.clz32?Math.clz32:tp,Jd=Math.log,ep=Math.LN2;function tp(s){return s>>>=0,s===0?32:31-(Jd(s)/ep|0)|0}var Bl=256,_l=4194304;function H(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function J(s,a,c){var f=s.pendingLanes;if(f===0)return 0;var m=0,y=s.suspendedLanes,S=s.pingedLanes;s=s.warmLanes;var k=f&134217727;return k!==0?(f=k&~y,f!==0?m=H(f):(S&=k,S!==0?m=H(S):c||(c=k&~s,c!==0&&(m=H(c))))):(k=f&~y,k!==0?m=H(k):S!==0?m=H(S):c||(c=f&~s,c!==0&&(m=H(c)))),m===0?0:a!==0&&a!==m&&(a&y)===0&&(y=m&-m,c=a&-a,y>=c||y===32&&(c&4194048)!==0)?a:m}function ue(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function oe(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function me(){var s=Bl;return Bl<<=1,(Bl&4194048)===0&&(Bl=256),s}function Ee(){var s=_l;return _l<<=1,(_l&62914560)===0&&(_l=4194304),s}function Ae(s){for(var a=[],c=0;31>c;c++)a.push(s);return a}function ke(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function _e(s,a,c,f,m,y){var S=s.pendingLanes;s.pendingLanes=c,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=c,s.entangledLanes&=c,s.errorRecoveryDisabledLanes&=c,s.shellSuspendCounter=0;var k=s.entanglements,N=s.expirationTimes,X=s.hiddenUpdates;for(c=S&~c;0<c;){var ee=31-hn(c),le=1<<ee;k[ee]=0,N[ee]=-1;var W=X[ee];if(W!==null)for(X[ee]=null,ee=0;ee<W.length;ee++){var I=W[ee];I!==null&&(I.lane&=-536870913)}c&=~le}f!==0&&Ue(s,f,0),y!==0&&m===0&&s.tag!==0&&(s.suspendedLanes|=y&~(S&~a))}function Ue(s,a,c){s.pendingLanes|=a,s.suspendedLanes&=~a;var f=31-hn(a);s.entangledLanes|=a,s.entanglements[f]=s.entanglements[f]|1073741824|c&4194090}function et(s,a){var c=s.entangledLanes|=a;for(s=s.entanglements;c;){var f=31-hn(c),m=1<<f;m&a|s[f]&a&&(s[f]|=a),c&=~m}}function lt(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function it(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Fe(){var s=se.p;return s!==0?s:(s=window.event,s===void 0?32:PS(s.type))}function Et(s,a){var c=se.p;try{return se.p=s,a()}finally{se.p=c}}var qt=Math.random().toString(36).slice(2),zt="__reactFiber$"+qt,Rt="__reactProps$"+qt,mi="__reactContainer$"+qt,Jr="__reactEvents$"+qt,$l="__reactListeners$"+qt,xc="__reactHandles$"+qt,lo="__reactResources$"+qt,Ll="__reactMarker$"+qt;function Ys(s){delete s[zt],delete s[Rt],delete s[Jr],delete s[$l],delete s[xc]}function ql(s){var a=s[zt];if(a)return a;for(var c=s.parentNode;c;){if(a=c[mi]||c[zt]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(s=vS(s);s!==null;){if(c=s[zt])return c;s=vS(s)}return a}s=c,c=s.parentNode}return null}function Ul(s){if(s=s[zt]||s[mi]){var a=s.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return s}return null}function ao(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(n(33))}function jl(s){var a=s[lo];return a||(a=s[lo]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Vt(s){s[Ll]=!0}var rb=new Set,sb={};function Zs(s,a){Hl(s,a),Hl(s+"Capture",a)}function Hl(s,a){for(sb[s]=a,s=0;s<a.length;s++)rb.add(a[s])}var qE=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),lb={},ab={};function UE(s){return Ws.call(ab,s)?!0:Ws.call(lb,s)?!1:qE.test(s)?ab[s]=!0:(lb[s]=!0,!1)}function wc(s,a,c){if(UE(a))if(c===null)s.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var f=a.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+c)}}function kc(s,a,c){if(c===null)s.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+c)}}function gr(s,a,c,f){if(f===null)s.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(c);return}s.setAttributeNS(a,c,""+f)}}var np,ob;function Vl(s){if(np===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);np=a&&a[1]||"",ob=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+np+s+ob}var ip=!1;function rp(s,a){if(!s||ip)return"";ip=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(a){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(I){var W=I}Reflect.construct(s,[],le)}else{try{le.call()}catch(I){W=I}s.call(le.prototype)}}else{try{throw Error()}catch(I){W=I}(le=s())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(I){if(I&&W&&typeof I.stack=="string")return[I.stack,W.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=f.DetermineComponentFrameRoot(),S=y[0],k=y[1];if(S&&k){var N=S.split(`
`),X=k.split(`
`);for(m=f=0;f<N.length&&!N[f].includes("DetermineComponentFrameRoot");)f++;for(;m<X.length&&!X[m].includes("DetermineComponentFrameRoot");)m++;if(f===N.length||m===X.length)for(f=N.length-1,m=X.length-1;1<=f&&0<=m&&N[f]!==X[m];)m--;for(;1<=f&&0<=m;f--,m--)if(N[f]!==X[m]){if(f!==1||m!==1)do if(f--,m--,0>m||N[f]!==X[m]){var ee=`
`+N[f].replace(" at new "," at ");return s.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",s.displayName)),ee}while(1<=f&&0<=m);break}}}finally{ip=!1,Error.prepareStackTrace=c}return(c=s?s.displayName||s.name:"")?Vl(c):""}function jE(s){switch(s.tag){case 26:case 27:case 5:return Vl(s.type);case 16:return Vl("Lazy");case 13:return Vl("Suspense");case 19:return Vl("SuspenseList");case 0:case 15:return rp(s.type,!1);case 11:return rp(s.type.render,!1);case 1:return rp(s.type,!0);case 31:return Vl("Activity");default:return""}}function ub(s){try{var a="";do a+=jE(s),s=s.return;while(s);return a}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function Jn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function cb(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function HE(s){var a=cb(s)?"checked":"value",c=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),f=""+s[a];if(!s.hasOwnProperty(a)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var m=c.get,y=c.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return m.call(this)},set:function(S){f=""+S,y.call(this,S)}}),Object.defineProperty(s,a,{enumerable:c.enumerable}),{getValue:function(){return f},setValue:function(S){f=""+S},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function Tc(s){s._valueTracker||(s._valueTracker=HE(s))}function hb(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var c=a.getValue(),f="";return s&&(f=cb(s)?s.checked?"true":"false":s.value),s=f,s!==c?(a.setValue(s),!0):!1}function Cc(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var VE=/[\n"\\]/g;function ei(s){return s.replace(VE,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function sp(s,a,c,f,m,y,S,k){s.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?s.type=S:s.removeAttribute("type"),a!=null?S==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+Jn(a)):s.value!==""+Jn(a)&&(s.value=""+Jn(a)):S!=="submit"&&S!=="reset"||s.removeAttribute("value"),a!=null?lp(s,S,Jn(a)):c!=null?lp(s,S,Jn(c)):f!=null&&s.removeAttribute("value"),m==null&&y!=null&&(s.defaultChecked=!!y),m!=null&&(s.checked=m&&typeof m!="function"&&typeof m!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?s.name=""+Jn(k):s.removeAttribute("name")}function fb(s,a,c,f,m,y,S,k){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(s.type=y),a!=null||c!=null){if(!(y!=="submit"&&y!=="reset"||a!=null))return;c=c!=null?""+Jn(c):"",a=a!=null?""+Jn(a):c,k||a===s.value||(s.value=a),s.defaultValue=a}f=f??m,f=typeof f!="function"&&typeof f!="symbol"&&!!f,s.checked=k?s.checked:!!f,s.defaultChecked=!!f,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(s.name=S)}function lp(s,a,c){a==="number"&&Cc(s.ownerDocument)===s||s.defaultValue===""+c||(s.defaultValue=""+c)}function Xl(s,a,c,f){if(s=s.options,a){a={};for(var m=0;m<c.length;m++)a["$"+c[m]]=!0;for(c=0;c<s.length;c++)m=a.hasOwnProperty("$"+s[c].value),s[c].selected!==m&&(s[c].selected=m),m&&f&&(s[c].defaultSelected=!0)}else{for(c=""+Jn(c),a=null,m=0;m<s.length;m++){if(s[m].value===c){s[m].selected=!0,f&&(s[m].defaultSelected=!0);return}a!==null||s[m].disabled||(a=s[m])}a!==null&&(a.selected=!0)}}function db(s,a,c){if(a!=null&&(a=""+Jn(a),a!==s.value&&(s.value=a),c==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=c!=null?""+Jn(c):""}function pb(s,a,c,f){if(a==null){if(f!=null){if(c!=null)throw Error(n(92));if(ae(f)){if(1<f.length)throw Error(n(93));f=f[0]}c=f}c==null&&(c=""),a=c}c=Jn(a),s.defaultValue=c,f=s.textContent,f===c&&f!==""&&f!==null&&(s.value=f)}function Gl(s,a){if(a){var c=s.firstChild;if(c&&c===s.lastChild&&c.nodeType===3){c.nodeValue=a;return}}s.textContent=a}var XE=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function mb(s,a,c){var f=a.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?f?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":f?s.setProperty(a,c):typeof c!="number"||c===0||XE.has(a)?a==="float"?s.cssFloat=c:s[a]=(""+c).trim():s[a]=c+"px"}function gb(s,a,c){if(a!=null&&typeof a!="object")throw Error(n(62));if(s=s.style,c!=null){for(var f in c)!c.hasOwnProperty(f)||a!=null&&a.hasOwnProperty(f)||(f.indexOf("--")===0?s.setProperty(f,""):f==="float"?s.cssFloat="":s[f]="");for(var m in a)f=a[m],a.hasOwnProperty(m)&&c[m]!==f&&mb(s,m,f)}else for(var y in a)a.hasOwnProperty(y)&&mb(s,y,a[y])}function ap(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var GE=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),WE=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ac(s){return WE.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var op=null;function up(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Wl=null,Il=null;function yb(s){var a=Ul(s);if(a&&(s=a.stateNode)){var c=s[Rt]||null;e:switch(s=a.stateNode,a.type){case"input":if(sp(s,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),a=c.name,c.type==="radio"&&a!=null){for(c=s;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+ei(""+a)+'"][type="radio"]'),a=0;a<c.length;a++){var f=c[a];if(f!==s&&f.form===s.form){var m=f[Rt]||null;if(!m)throw Error(n(90));sp(f,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(a=0;a<c.length;a++)f=c[a],f.form===s.form&&hb(f)}break e;case"textarea":db(s,c.value,c.defaultValue);break e;case"select":a=c.value,a!=null&&Xl(s,!!c.multiple,a,!1)}}}var cp=!1;function Ob(s,a,c){if(cp)return s(a,c);cp=!0;try{var f=s(a);return f}finally{if(cp=!1,(Wl!==null||Il!==null)&&(fh(),Wl&&(a=Wl,s=Il,Il=Wl=null,yb(a),s)))for(a=0;a<s.length;a++)yb(s[a])}}function oo(s,a){var c=s.stateNode;if(c===null)return null;var f=c[Rt]||null;if(f===null)return null;c=f[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(s=s.type,f=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!f;break e;default:s=!1}if(s)return null;if(c&&typeof c!="function")throw Error(n(231,a,typeof c));return c}var yr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hp=!1;if(yr)try{var uo={};Object.defineProperty(uo,"passive",{get:function(){hp=!0}}),window.addEventListener("test",uo,uo),window.removeEventListener("test",uo,uo)}catch{hp=!1}var es=null,fp=null,Ec=null;function bb(){if(Ec)return Ec;var s,a=fp,c=a.length,f,m="value"in es?es.value:es.textContent,y=m.length;for(s=0;s<c&&a[s]===m[s];s++);var S=c-s;for(f=1;f<=S&&a[c-f]===m[y-f];f++);return Ec=m.slice(s,1<f?1-f:void 0)}function Rc(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function Nc(){return!0}function vb(){return!1}function An(s){function a(c,f,m,y,S){this._reactName=c,this._targetInst=m,this.type=f,this.nativeEvent=y,this.target=S,this.currentTarget=null;for(var k in s)s.hasOwnProperty(k)&&(c=s[k],this[k]=c?c(y):y[k]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Nc:vb,this.isPropagationStopped=vb,this}return p(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Nc)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Nc)},persist:function(){},isPersistent:Nc}),a}var Ks={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mc=An(Ks),co=p({},Ks,{view:0,detail:0}),IE=An(co),dp,pp,ho,Dc=p({},co,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gp,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==ho&&(ho&&s.type==="mousemove"?(dp=s.screenX-ho.screenX,pp=s.screenY-ho.screenY):pp=dp=0,ho=s),dp)},movementY:function(s){return"movementY"in s?s.movementY:pp}}),Sb=An(Dc),FE=p({},Dc,{dataTransfer:0}),YE=An(FE),ZE=p({},co,{relatedTarget:0}),mp=An(ZE),KE=p({},Ks,{animationName:0,elapsedTime:0,pseudoElement:0}),JE=An(KE),eR=p({},Ks,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),tR=An(eR),nR=p({},Ks,{data:0}),xb=An(nR),iR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lR(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=sR[s])?!!a[s]:!1}function gp(){return lR}var aR=p({},co,{key:function(s){if(s.key){var a=iR[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=Rc(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?rR[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gp,charCode:function(s){return s.type==="keypress"?Rc(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Rc(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),oR=An(aR),uR=p({},Dc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wb=An(uR),cR=p({},co,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gp}),hR=An(cR),fR=p({},Ks,{propertyName:0,elapsedTime:0,pseudoElement:0}),dR=An(fR),pR=p({},Dc,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),mR=An(pR),gR=p({},Ks,{newState:0,oldState:0}),yR=An(gR),OR=[9,13,27,32],yp=yr&&"CompositionEvent"in window,fo=null;yr&&"documentMode"in document&&(fo=document.documentMode);var bR=yr&&"TextEvent"in window&&!fo,kb=yr&&(!yp||fo&&8<fo&&11>=fo),Tb=" ",Cb=!1;function Ab(s,a){switch(s){case"keyup":return OR.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Eb(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Fl=!1;function vR(s,a){switch(s){case"compositionend":return Eb(a);case"keypress":return a.which!==32?null:(Cb=!0,Tb);case"textInput":return s=a.data,s===Tb&&Cb?null:s;default:return null}}function SR(s,a){if(Fl)return s==="compositionend"||!yp&&Ab(s,a)?(s=bb(),Ec=fp=es=null,Fl=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return kb&&a.locale!=="ko"?null:a.data;default:return null}}var xR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rb(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!xR[s.type]:a==="textarea"}function Nb(s,a,c,f){Wl?Il?Il.push(f):Il=[f]:Wl=f,a=Oh(a,"onChange"),0<a.length&&(c=new Mc("onChange","change",null,c,f),s.push({event:c,listeners:a}))}var po=null,mo=null;function wR(s){cS(s,0)}function Qc(s){var a=ao(s);if(hb(a))return s}function Mb(s,a){if(s==="change")return a}var Db=!1;if(yr){var Op;if(yr){var bp="oninput"in document;if(!bp){var Qb=document.createElement("div");Qb.setAttribute("oninput","return;"),bp=typeof Qb.oninput=="function"}Op=bp}else Op=!1;Db=Op&&(!document.documentMode||9<document.documentMode)}function zb(){po&&(po.detachEvent("onpropertychange",Pb),mo=po=null)}function Pb(s){if(s.propertyName==="value"&&Qc(mo)){var a=[];Nb(a,mo,s,up(s)),Ob(wR,a)}}function kR(s,a,c){s==="focusin"?(zb(),po=a,mo=c,po.attachEvent("onpropertychange",Pb)):s==="focusout"&&zb()}function TR(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Qc(mo)}function CR(s,a){if(s==="click")return Qc(a)}function AR(s,a){if(s==="input"||s==="change")return Qc(a)}function ER(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var Ln=typeof Object.is=="function"?Object.is:ER;function go(s,a){if(Ln(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var c=Object.keys(s),f=Object.keys(a);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var m=c[f];if(!Ws.call(a,m)||!Ln(s[m],a[m]))return!1}return!0}function Bb(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function _b(s,a){var c=Bb(s);s=0;for(var f;c;){if(c.nodeType===3){if(f=s+c.textContent.length,s<=a&&f>=a)return{node:c,offset:a-s};s=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Bb(c)}}function $b(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?$b(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function Lb(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=Cc(s.document);a instanceof s.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)s=a.contentWindow;else break;a=Cc(s.document)}return a}function vp(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var RR=yr&&"documentMode"in document&&11>=document.documentMode,Yl=null,Sp=null,yo=null,xp=!1;function qb(s,a,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;xp||Yl==null||Yl!==Cc(f)||(f=Yl,"selectionStart"in f&&vp(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),yo&&go(yo,f)||(yo=f,f=Oh(Sp,"onSelect"),0<f.length&&(a=new Mc("onSelect","select",null,a,c),s.push({event:a,listeners:f}),a.target=Yl)))}function Js(s,a){var c={};return c[s.toLowerCase()]=a.toLowerCase(),c["Webkit"+s]="webkit"+a,c["Moz"+s]="moz"+a,c}var Zl={animationend:Js("Animation","AnimationEnd"),animationiteration:Js("Animation","AnimationIteration"),animationstart:Js("Animation","AnimationStart"),transitionrun:Js("Transition","TransitionRun"),transitionstart:Js("Transition","TransitionStart"),transitioncancel:Js("Transition","TransitionCancel"),transitionend:Js("Transition","TransitionEnd")},wp={},Ub={};yr&&(Ub=document.createElement("div").style,"AnimationEvent"in window||(delete Zl.animationend.animation,delete Zl.animationiteration.animation,delete Zl.animationstart.animation),"TransitionEvent"in window||delete Zl.transitionend.transition);function el(s){if(wp[s])return wp[s];if(!Zl[s])return s;var a=Zl[s],c;for(c in a)if(a.hasOwnProperty(c)&&c in Ub)return wp[s]=a[c];return s}var jb=el("animationend"),Hb=el("animationiteration"),Vb=el("animationstart"),NR=el("transitionrun"),MR=el("transitionstart"),DR=el("transitioncancel"),Xb=el("transitionend"),Gb=new Map,kp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");kp.push("scrollEnd");function gi(s,a){Gb.set(s,a),Zs(a,[s])}var Wb=new WeakMap;function ti(s,a){if(typeof s=="object"&&s!==null){var c=Wb.get(s);return c!==void 0?c:(a={value:s,source:a,stack:ub(a)},Wb.set(s,a),a)}return{value:s,source:a,stack:ub(a)}}var ni=[],Kl=0,Tp=0;function zc(){for(var s=Kl,a=Tp=Kl=0;a<s;){var c=ni[a];ni[a++]=null;var f=ni[a];ni[a++]=null;var m=ni[a];ni[a++]=null;var y=ni[a];if(ni[a++]=null,f!==null&&m!==null){var S=f.pending;S===null?m.next=m:(m.next=S.next,S.next=m),f.pending=m}y!==0&&Ib(c,m,y)}}function Pc(s,a,c,f){ni[Kl++]=s,ni[Kl++]=a,ni[Kl++]=c,ni[Kl++]=f,Tp|=f,s.lanes|=f,s=s.alternate,s!==null&&(s.lanes|=f)}function Cp(s,a,c,f){return Pc(s,a,c,f),Bc(s)}function Jl(s,a){return Pc(s,null,null,a),Bc(s)}function Ib(s,a,c){s.lanes|=c;var f=s.alternate;f!==null&&(f.lanes|=c);for(var m=!1,y=s.return;y!==null;)y.childLanes|=c,f=y.alternate,f!==null&&(f.childLanes|=c),y.tag===22&&(s=y.stateNode,s===null||s._visibility&1||(m=!0)),s=y,y=y.return;return s.tag===3?(y=s.stateNode,m&&a!==null&&(m=31-hn(c),s=y.hiddenUpdates,f=s[m],f===null?s[m]=[a]:f.push(a),a.lane=c|536870912),y):null}function Bc(s){if(50<jo)throw jo=0,Dm=null,Error(n(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var ea={};function QR(s,a,c,f){this.tag=s,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qn(s,a,c,f){return new QR(s,a,c,f)}function Ap(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Or(s,a){var c=s.alternate;return c===null?(c=qn(s.tag,a,s.key,s.mode),c.elementType=s.elementType,c.type=s.type,c.stateNode=s.stateNode,c.alternate=s,s.alternate=c):(c.pendingProps=a,c.type=s.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=s.flags&65011712,c.childLanes=s.childLanes,c.lanes=s.lanes,c.child=s.child,c.memoizedProps=s.memoizedProps,c.memoizedState=s.memoizedState,c.updateQueue=s.updateQueue,a=s.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=s.sibling,c.index=s.index,c.ref=s.ref,c.refCleanup=s.refCleanup,c}function Fb(s,a){s.flags&=65011714;var c=s.alternate;return c===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,a=c.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function _c(s,a,c,f,m,y){var S=0;if(f=s,typeof s=="function")Ap(s)&&(S=1);else if(typeof s=="string")S=PN(s,c,he.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case $:return s=qn(31,c,a,m),s.elementType=$,s.lanes=y,s;case v:return tl(c.children,m,y,a);case x:S=8,m|=24;break;case w:return s=qn(12,c,a,m|2),s.elementType=w,s.lanes=y,s;case A:return s=qn(13,c,a,m),s.elementType=A,s.lanes=y,s;case B:return s=qn(19,c,a,m),s.elementType=B,s.lanes=y,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case T:case D:S=10;break e;case E:S=9;break e;case _:S=11;break e;case C:S=14;break e;case U:S=16,f=null;break e}S=29,c=Error(n(130,s===null?"null":typeof s,"")),f=null}return a=qn(S,c,a,m),a.elementType=s,a.type=f,a.lanes=y,a}function tl(s,a,c,f){return s=qn(7,s,f,a),s.lanes=c,s}function Ep(s,a,c){return s=qn(6,s,null,a),s.lanes=c,s}function Rp(s,a,c){return a=qn(4,s.children!==null?s.children:[],s.key,a),a.lanes=c,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var ta=[],na=0,$c=null,Lc=0,ii=[],ri=0,nl=null,br=1,vr="";function il(s,a){ta[na++]=Lc,ta[na++]=$c,$c=s,Lc=a}function Yb(s,a,c){ii[ri++]=br,ii[ri++]=vr,ii[ri++]=nl,nl=s;var f=br;s=vr;var m=32-hn(f)-1;f&=~(1<<m),c+=1;var y=32-hn(a)+m;if(30<y){var S=m-m%5;y=(f&(1<<S)-1).toString(32),f>>=S,m-=S,br=1<<32-hn(a)+m|c<<m|f,vr=y+s}else br=1<<y|c<<m|f,vr=s}function Np(s){s.return!==null&&(il(s,1),Yb(s,1,0))}function Mp(s){for(;s===$c;)$c=ta[--na],ta[na]=null,Lc=ta[--na],ta[na]=null;for(;s===nl;)nl=ii[--ri],ii[ri]=null,vr=ii[--ri],ii[ri]=null,br=ii[--ri],ii[ri]=null}var wn=null,Ct=null,rt=!1,rl=null,Ai=!1,Dp=Error(n(519));function sl(s){var a=Error(n(418,""));throw vo(ti(a,s)),Dp}function Zb(s){var a=s.stateNode,c=s.type,f=s.memoizedProps;switch(a[zt]=s,a[Rt]=f,c){case"dialog":We("cancel",a),We("close",a);break;case"iframe":case"object":case"embed":We("load",a);break;case"video":case"audio":for(c=0;c<Vo.length;c++)We(Vo[c],a);break;case"source":We("error",a);break;case"img":case"image":case"link":We("error",a),We("load",a);break;case"details":We("toggle",a);break;case"input":We("invalid",a),fb(a,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0),Tc(a);break;case"select":We("invalid",a);break;case"textarea":We("invalid",a),pb(a,f.value,f.defaultValue,f.children),Tc(a)}c=f.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||a.textContent===""+c||f.suppressHydrationWarning===!0||pS(a.textContent,c)?(f.popover!=null&&(We("beforetoggle",a),We("toggle",a)),f.onScroll!=null&&We("scroll",a),f.onScrollEnd!=null&&We("scrollend",a),f.onClick!=null&&(a.onclick=bh),a=!0):a=!1,a||sl(s)}function Kb(s){for(wn=s.return;wn;)switch(wn.tag){case 5:case 13:Ai=!1;return;case 27:case 3:Ai=!0;return;default:wn=wn.return}}function Oo(s){if(s!==wn)return!1;if(!rt)return Kb(s),rt=!0,!1;var a=s.tag,c;if((c=a!==3&&a!==27)&&((c=a===5)&&(c=s.type,c=!(c!=="form"&&c!=="button")||Im(s.type,s.memoizedProps)),c=!c),c&&Ct&&sl(s),Kb(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));e:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8)if(c=s.data,c==="/$"){if(a===0){Ct=Oi(s.nextSibling);break e}a--}else c!=="$"&&c!=="$!"&&c!=="$?"||a++;s=s.nextSibling}Ct=null}}else a===27?(a=Ct,gs(s.type)?(s=Km,Km=null,Ct=s):Ct=a):Ct=wn?Oi(s.stateNode.nextSibling):null;return!0}function bo(){Ct=wn=null,rt=!1}function Jb(){var s=rl;return s!==null&&(Nn===null?Nn=s:Nn.push.apply(Nn,s),rl=null),s}function vo(s){rl===null?rl=[s]:rl.push(s)}var Qp=G(null),ll=null,Sr=null;function ts(s,a,c){ne(Qp,a._currentValue),a._currentValue=c}function xr(s){s._currentValue=Qp.current,Z(Qp)}function zp(s,a,c){for(;s!==null;){var f=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,f!==null&&(f.childLanes|=a)):f!==null&&(f.childLanes&a)!==a&&(f.childLanes|=a),s===c)break;s=s.return}}function Pp(s,a,c,f){var m=s.child;for(m!==null&&(m.return=s);m!==null;){var y=m.dependencies;if(y!==null){var S=m.child;y=y.firstContext;e:for(;y!==null;){var k=y;y=m;for(var N=0;N<a.length;N++)if(k.context===a[N]){y.lanes|=c,k=y.alternate,k!==null&&(k.lanes|=c),zp(y.return,c,s),f||(S=null);break e}y=k.next}}else if(m.tag===18){if(S=m.return,S===null)throw Error(n(341));S.lanes|=c,y=S.alternate,y!==null&&(y.lanes|=c),zp(S,c,s),S=null}else S=m.child;if(S!==null)S.return=m;else for(S=m;S!==null;){if(S===s){S=null;break}if(m=S.sibling,m!==null){m.return=S.return,S=m;break}S=S.return}m=S}}function So(s,a,c,f){s=null;for(var m=a,y=!1;m!==null;){if(!y){if((m.flags&524288)!==0)y=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var S=m.alternate;if(S===null)throw Error(n(387));if(S=S.memoizedProps,S!==null){var k=m.type;Ln(m.pendingProps.value,S.value)||(s!==null?s.push(k):s=[k])}}else if(m===nt.current){if(S=m.alternate,S===null)throw Error(n(387));S.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(s!==null?s.push(Yo):s=[Yo])}m=m.return}s!==null&&Pp(a,s,c,f),a.flags|=262144}function qc(s){for(s=s.firstContext;s!==null;){if(!Ln(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function al(s){ll=s,Sr=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function fn(s){return e1(ll,s)}function Uc(s,a){return ll===null&&al(s),e1(s,a)}function e1(s,a){var c=a._currentValue;if(a={context:a,memoizedValue:c,next:null},Sr===null){if(s===null)throw Error(n(308));Sr=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else Sr=Sr.next=a;return c}var zR=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(c,f){s.push(f)}};this.abort=function(){a.aborted=!0,s.forEach(function(c){return c()})}},PR=i.unstable_scheduleCallback,BR=i.unstable_NormalPriority,Ut={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Bp(){return{controller:new zR,data:new Map,refCount:0}}function xo(s){s.refCount--,s.refCount===0&&PR(BR,function(){s.controller.abort()})}var wo=null,_p=0,ia=0,ra=null;function _R(s,a){if(wo===null){var c=wo=[];_p=0,ia=Lm(),ra={status:"pending",value:void 0,then:function(f){c.push(f)}}}return _p++,a.then(t1,t1),a}function t1(){if(--_p===0&&wo!==null){ra!==null&&(ra.status="fulfilled");var s=wo;wo=null,ia=0,ra=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function $R(s,a){var c=[],f={status:"pending",value:null,reason:null,then:function(m){c.push(m)}};return s.then(function(){f.status="fulfilled",f.value=a;for(var m=0;m<c.length;m++)(0,c[m])(a)},function(m){for(f.status="rejected",f.reason=m,m=0;m<c.length;m++)(0,c[m])(void 0)}),f}var n1=j.S;j.S=function(s,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&_R(s,a),n1!==null&&n1(s,a)};var ol=G(null);function $p(){var s=ol.current;return s!==null?s:yt.pooledCache}function jc(s,a){a===null?ne(ol,ol.current):ne(ol,a.pool)}function i1(){var s=$p();return s===null?null:{parent:Ut._currentValue,pool:s}}var ko=Error(n(460)),r1=Error(n(474)),Hc=Error(n(542)),Lp={then:function(){}};function s1(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Vc(){}function l1(s,a,c){switch(c=s[c],c===void 0?s.push(a):c!==a&&(a.then(Vc,Vc),a=c),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,o1(s),s;default:if(typeof a.status=="string")a.then(Vc,Vc);else{if(s=yt,s!==null&&100<s.shellSuspendCounter)throw Error(n(482));s=a,s.status="pending",s.then(function(f){if(a.status==="pending"){var m=a;m.status="fulfilled",m.value=f}},function(f){if(a.status==="pending"){var m=a;m.status="rejected",m.reason=f}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,o1(s),s}throw To=a,ko}}var To=null;function a1(){if(To===null)throw Error(n(459));var s=To;return To=null,s}function o1(s){if(s===ko||s===Hc)throw Error(n(483))}var ns=!1;function qp(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Up(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function is(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function rs(s,a,c){var f=s.updateQueue;if(f===null)return null;if(f=f.shared,(at&2)!==0){var m=f.pending;return m===null?a.next=a:(a.next=m.next,m.next=a),f.pending=a,a=Bc(s),Ib(s,null,c),a}return Pc(s,f,a,c),Bc(s)}function Co(s,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194048)!==0)){var f=a.lanes;f&=s.pendingLanes,c|=f,a.lanes=c,et(s,c)}}function jp(s,a){var c=s.updateQueue,f=s.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var m=null,y=null;if(c=c.firstBaseUpdate,c!==null){do{var S={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};y===null?m=y=S:y=y.next=S,c=c.next}while(c!==null);y===null?m=y=a:y=y.next=a}else m=y=a;c={baseState:f.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:f.shared,callbacks:f.callbacks},s.updateQueue=c;return}s=c.lastBaseUpdate,s===null?c.firstBaseUpdate=a:s.next=a,c.lastBaseUpdate=a}var Hp=!1;function Ao(){if(Hp){var s=ra;if(s!==null)throw s}}function Eo(s,a,c,f){Hp=!1;var m=s.updateQueue;ns=!1;var y=m.firstBaseUpdate,S=m.lastBaseUpdate,k=m.shared.pending;if(k!==null){m.shared.pending=null;var N=k,X=N.next;N.next=null,S===null?y=X:S.next=X,S=N;var ee=s.alternate;ee!==null&&(ee=ee.updateQueue,k=ee.lastBaseUpdate,k!==S&&(k===null?ee.firstBaseUpdate=X:k.next=X,ee.lastBaseUpdate=N))}if(y!==null){var le=m.baseState;S=0,ee=X=N=null,k=y;do{var W=k.lane&-536870913,I=W!==k.lane;if(I?(Ye&W)===W:(f&W)===W){W!==0&&W===ia&&(Hp=!0),ee!==null&&(ee=ee.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var Pe=s,Qe=k;W=a;var ht=c;switch(Qe.tag){case 1:if(Pe=Qe.payload,typeof Pe=="function"){le=Pe.call(ht,le,W);break e}le=Pe;break e;case 3:Pe.flags=Pe.flags&-65537|128;case 0:if(Pe=Qe.payload,W=typeof Pe=="function"?Pe.call(ht,le,W):Pe,W==null)break e;le=p({},le,W);break e;case 2:ns=!0}}W=k.callback,W!==null&&(s.flags|=64,I&&(s.flags|=8192),I=m.callbacks,I===null?m.callbacks=[W]:I.push(W))}else I={lane:W,tag:k.tag,payload:k.payload,callback:k.callback,next:null},ee===null?(X=ee=I,N=le):ee=ee.next=I,S|=W;if(k=k.next,k===null){if(k=m.shared.pending,k===null)break;I=k,k=I.next,I.next=null,m.lastBaseUpdate=I,m.shared.pending=null}}while(!0);ee===null&&(N=le),m.baseState=N,m.firstBaseUpdate=X,m.lastBaseUpdate=ee,y===null&&(m.shared.lanes=0),fs|=S,s.lanes=S,s.memoizedState=le}}function u1(s,a){if(typeof s!="function")throw Error(n(191,s));s.call(a)}function c1(s,a){var c=s.callbacks;if(c!==null)for(s.callbacks=null,s=0;s<c.length;s++)u1(c[s],a)}var sa=G(null),Xc=G(0);function h1(s,a){s=Rr,ne(Xc,s),ne(sa,a),Rr=s|a.baseLanes}function Vp(){ne(Xc,Rr),ne(sa,sa.current)}function Xp(){Rr=Xc.current,Z(sa),Z(Xc)}var ss=0,Ve=null,ut=null,Pt=null,Gc=!1,la=!1,ul=!1,Wc=0,Ro=0,aa=null,LR=0;function Nt(){throw Error(n(321))}function Gp(s,a){if(a===null)return!1;for(var c=0;c<a.length&&c<s.length;c++)if(!Ln(s[c],a[c]))return!1;return!0}function Wp(s,a,c,f,m,y){return ss=y,Ve=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,j.H=s===null||s.memoizedState===null?I1:F1,ul=!1,y=c(f,m),ul=!1,la&&(y=d1(a,c,f,m)),f1(s),y}function f1(s){j.H=Jc;var a=ut!==null&&ut.next!==null;if(ss=0,Pt=ut=Ve=null,Gc=!1,Ro=0,aa=null,a)throw Error(n(300));s===null||Xt||(s=s.dependencies,s!==null&&qc(s)&&(Xt=!0))}function d1(s,a,c,f){Ve=s;var m=0;do{if(la&&(aa=null),Ro=0,la=!1,25<=m)throw Error(n(301));if(m+=1,Pt=ut=null,s.updateQueue!=null){var y=s.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}j.H=GR,y=a(c,f)}while(la);return y}function qR(){var s=j.H,a=s.useState()[0];return a=typeof a.then=="function"?No(a):a,s=s.useState()[0],(ut!==null?ut.memoizedState:null)!==s&&(Ve.flags|=1024),a}function Ip(){var s=Wc!==0;return Wc=0,s}function Fp(s,a,c){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~c}function Yp(s){if(Gc){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}Gc=!1}ss=0,Pt=ut=Ve=null,la=!1,Ro=Wc=0,aa=null}function En(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?Ve.memoizedState=Pt=s:Pt=Pt.next=s,Pt}function Bt(){if(ut===null){var s=Ve.alternate;s=s!==null?s.memoizedState:null}else s=ut.next;var a=Pt===null?Ve.memoizedState:Pt.next;if(a!==null)Pt=a,ut=s;else{if(s===null)throw Ve.alternate===null?Error(n(467)):Error(n(310));ut=s,s={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},Pt===null?Ve.memoizedState=Pt=s:Pt=Pt.next=s}return Pt}function Zp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function No(s){var a=Ro;return Ro+=1,aa===null&&(aa=[]),s=l1(aa,s,a),a=Ve,(Pt===null?a.memoizedState:Pt.next)===null&&(a=a.alternate,j.H=a===null||a.memoizedState===null?I1:F1),s}function Ic(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return No(s);if(s.$$typeof===D)return fn(s)}throw Error(n(438,String(s)))}function Kp(s){var a=null,c=Ve.updateQueue;if(c!==null&&(a=c.memoCache),a==null){var f=Ve.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(a={data:f.data.map(function(m){return m.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),c===null&&(c=Zp(),Ve.updateQueue=c),c.memoCache=a,c=a.data[a.index],c===void 0)for(c=a.data[a.index]=Array(s),f=0;f<s;f++)c[f]=K;return a.index++,c}function wr(s,a){return typeof a=="function"?a(s):a}function Fc(s){var a=Bt();return Jp(a,ut,s)}function Jp(s,a,c){var f=s.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=c;var m=s.baseQueue,y=f.pending;if(y!==null){if(m!==null){var S=m.next;m.next=y.next,y.next=S}a.baseQueue=m=y,f.pending=null}if(y=s.baseState,m===null)s.memoizedState=y;else{a=m.next;var k=S=null,N=null,X=a,ee=!1;do{var le=X.lane&-536870913;if(le!==X.lane?(Ye&le)===le:(ss&le)===le){var W=X.revertLane;if(W===0)N!==null&&(N=N.next={lane:0,revertLane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),le===ia&&(ee=!0);else if((ss&W)===W){X=X.next,W===ia&&(ee=!0);continue}else le={lane:0,revertLane:X.revertLane,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},N===null?(k=N=le,S=y):N=N.next=le,Ve.lanes|=W,fs|=W;le=X.action,ul&&c(y,le),y=X.hasEagerState?X.eagerState:c(y,le)}else W={lane:le,revertLane:X.revertLane,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},N===null?(k=N=W,S=y):N=N.next=W,Ve.lanes|=le,fs|=le;X=X.next}while(X!==null&&X!==a);if(N===null?S=y:N.next=k,!Ln(y,s.memoizedState)&&(Xt=!0,ee&&(c=ra,c!==null)))throw c;s.memoizedState=y,s.baseState=S,s.baseQueue=N,f.lastRenderedState=y}return m===null&&(f.lanes=0),[s.memoizedState,f.dispatch]}function em(s){var a=Bt(),c=a.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=s;var f=c.dispatch,m=c.pending,y=a.memoizedState;if(m!==null){c.pending=null;var S=m=m.next;do y=s(y,S.action),S=S.next;while(S!==m);Ln(y,a.memoizedState)||(Xt=!0),a.memoizedState=y,a.baseQueue===null&&(a.baseState=y),c.lastRenderedState=y}return[y,f]}function p1(s,a,c){var f=Ve,m=Bt(),y=rt;if(y){if(c===void 0)throw Error(n(407));c=c()}else c=a();var S=!Ln((ut||m).memoizedState,c);S&&(m.memoizedState=c,Xt=!0),m=m.queue;var k=y1.bind(null,f,m,s);if(Mo(2048,8,k,[s]),m.getSnapshot!==a||S||Pt!==null&&Pt.memoizedState.tag&1){if(f.flags|=2048,oa(9,Yc(),g1.bind(null,f,m,c,a),null),yt===null)throw Error(n(349));y||(ss&124)!==0||m1(f,a,c)}return c}function m1(s,a,c){s.flags|=16384,s={getSnapshot:a,value:c},a=Ve.updateQueue,a===null?(a=Zp(),Ve.updateQueue=a,a.stores=[s]):(c=a.stores,c===null?a.stores=[s]:c.push(s))}function g1(s,a,c,f){a.value=c,a.getSnapshot=f,O1(a)&&b1(s)}function y1(s,a,c){return c(function(){O1(a)&&b1(s)})}function O1(s){var a=s.getSnapshot;s=s.value;try{var c=a();return!Ln(s,c)}catch{return!0}}function b1(s){var a=Jl(s,2);a!==null&&Xn(a,s,2)}function tm(s){var a=En();if(typeof s=="function"){var c=s;if(s=c(),ul){$n(!0);try{c()}finally{$n(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wr,lastRenderedState:s},a}function v1(s,a,c,f){return s.baseState=c,Jp(s,ut,typeof f=="function"?f:wr)}function UR(s,a,c,f,m){if(Kc(s))throw Error(n(485));if(s=a.action,s!==null){var y={payload:m,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){y.listeners.push(S)}};j.T!==null?c(!0):y.isTransition=!1,f(y),c=a.pending,c===null?(y.next=a.pending=y,S1(a,y)):(y.next=c.next,a.pending=c.next=y)}}function S1(s,a){var c=a.action,f=a.payload,m=s.state;if(a.isTransition){var y=j.T,S={};j.T=S;try{var k=c(m,f),N=j.S;N!==null&&N(S,k),x1(s,a,k)}catch(X){nm(s,a,X)}finally{j.T=y}}else try{y=c(m,f),x1(s,a,y)}catch(X){nm(s,a,X)}}function x1(s,a,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(f){w1(s,a,f)},function(f){return nm(s,a,f)}):w1(s,a,c)}function w1(s,a,c){a.status="fulfilled",a.value=c,k1(a),s.state=c,a=s.pending,a!==null&&(c=a.next,c===a?s.pending=null:(c=c.next,a.next=c,S1(s,c)))}function nm(s,a,c){var f=s.pending;if(s.pending=null,f!==null){f=f.next;do a.status="rejected",a.reason=c,k1(a),a=a.next;while(a!==f)}s.action=null}function k1(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function T1(s,a){return a}function C1(s,a){if(rt){var c=yt.formState;if(c!==null){e:{var f=Ve;if(rt){if(Ct){t:{for(var m=Ct,y=Ai;m.nodeType!==8;){if(!y){m=null;break t}if(m=Oi(m.nextSibling),m===null){m=null;break t}}y=m.data,m=y==="F!"||y==="F"?m:null}if(m){Ct=Oi(m.nextSibling),f=m.data==="F!";break e}}sl(f)}f=!1}f&&(a=c[0])}}return c=En(),c.memoizedState=c.baseState=a,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:T1,lastRenderedState:a},c.queue=f,c=X1.bind(null,Ve,f),f.dispatch=c,f=tm(!1),y=am.bind(null,Ve,!1,f.queue),f=En(),m={state:a,dispatch:null,action:s,pending:null},f.queue=m,c=UR.bind(null,Ve,m,y,c),m.dispatch=c,f.memoizedState=s,[a,c,!1]}function A1(s){var a=Bt();return E1(a,ut,s)}function E1(s,a,c){if(a=Jp(s,a,T1)[0],s=Fc(wr)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var f=No(a)}catch(S){throw S===ko?Hc:S}else f=a;a=Bt();var m=a.queue,y=m.dispatch;return c!==a.memoizedState&&(Ve.flags|=2048,oa(9,Yc(),jR.bind(null,m,c),null)),[f,y,s]}function jR(s,a){s.action=a}function R1(s){var a=Bt(),c=ut;if(c!==null)return E1(a,c,s);Bt(),a=a.memoizedState,c=Bt();var f=c.queue.dispatch;return c.memoizedState=s,[a,f,!1]}function oa(s,a,c,f){return s={tag:s,create:c,deps:f,inst:a,next:null},a=Ve.updateQueue,a===null&&(a=Zp(),Ve.updateQueue=a),c=a.lastEffect,c===null?a.lastEffect=s.next=s:(f=c.next,c.next=s,s.next=f,a.lastEffect=s),s}function Yc(){return{destroy:void 0,resource:void 0}}function N1(){return Bt().memoizedState}function Zc(s,a,c,f){var m=En();f=f===void 0?null:f,Ve.flags|=s,m.memoizedState=oa(1|a,Yc(),c,f)}function Mo(s,a,c,f){var m=Bt();f=f===void 0?null:f;var y=m.memoizedState.inst;ut!==null&&f!==null&&Gp(f,ut.memoizedState.deps)?m.memoizedState=oa(a,y,c,f):(Ve.flags|=s,m.memoizedState=oa(1|a,y,c,f))}function M1(s,a){Zc(8390656,8,s,a)}function D1(s,a){Mo(2048,8,s,a)}function Q1(s,a){return Mo(4,2,s,a)}function z1(s,a){return Mo(4,4,s,a)}function P1(s,a){if(typeof a=="function"){s=s();var c=a(s);return function(){typeof c=="function"?c():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function B1(s,a,c){c=c!=null?c.concat([s]):null,Mo(4,4,P1.bind(null,a,s),c)}function im(){}function _1(s,a){var c=Bt();a=a===void 0?null:a;var f=c.memoizedState;return a!==null&&Gp(a,f[1])?f[0]:(c.memoizedState=[s,a],s)}function $1(s,a){var c=Bt();a=a===void 0?null:a;var f=c.memoizedState;if(a!==null&&Gp(a,f[1]))return f[0];if(f=s(),ul){$n(!0);try{s()}finally{$n(!1)}}return c.memoizedState=[f,a],f}function rm(s,a,c){return c===void 0||(ss&1073741824)!==0?s.memoizedState=a:(s.memoizedState=c,s=Uv(),Ve.lanes|=s,fs|=s,c)}function L1(s,a,c,f){return Ln(c,a)?c:sa.current!==null?(s=rm(s,c,f),Ln(s,a)||(Xt=!0),s):(ss&42)===0?(Xt=!0,s.memoizedState=c):(s=Uv(),Ve.lanes|=s,fs|=s,a)}function q1(s,a,c,f,m){var y=se.p;se.p=y!==0&&8>y?y:8;var S=j.T,k={};j.T=k,am(s,!1,a,c);try{var N=m(),X=j.S;if(X!==null&&X(k,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var ee=$R(N,f);Do(s,a,ee,Vn(s))}else Do(s,a,f,Vn(s))}catch(le){Do(s,a,{then:function(){},status:"rejected",reason:le},Vn())}finally{se.p=y,j.T=S}}function HR(){}function sm(s,a,c,f){if(s.tag!==5)throw Error(n(476));var m=U1(s).queue;q1(s,m,a,de,c===null?HR:function(){return j1(s),c(f)})}function U1(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:de,baseState:de,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wr,lastRenderedState:de},next:null};var c={};return a.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wr,lastRenderedState:c},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function j1(s){var a=U1(s).next.queue;Do(s,a,{},Vn())}function lm(){return fn(Yo)}function H1(){return Bt().memoizedState}function V1(){return Bt().memoizedState}function VR(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var c=Vn();s=is(c);var f=rs(a,s,c);f!==null&&(Xn(f,a,c),Co(f,a,c)),a={cache:Bp()},s.payload=a;return}a=a.return}}function XR(s,a,c){var f=Vn();c={lane:f,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},Kc(s)?G1(a,c):(c=Cp(s,a,c,f),c!==null&&(Xn(c,s,f),W1(c,a,f)))}function X1(s,a,c){var f=Vn();Do(s,a,c,f)}function Do(s,a,c,f){var m={lane:f,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(Kc(s))G1(a,m);else{var y=s.alternate;if(s.lanes===0&&(y===null||y.lanes===0)&&(y=a.lastRenderedReducer,y!==null))try{var S=a.lastRenderedState,k=y(S,c);if(m.hasEagerState=!0,m.eagerState=k,Ln(k,S))return Pc(s,a,m,0),yt===null&&zc(),!1}catch{}finally{}if(c=Cp(s,a,m,f),c!==null)return Xn(c,s,f),W1(c,a,f),!0}return!1}function am(s,a,c,f){if(f={lane:2,revertLane:Lm(),action:f,hasEagerState:!1,eagerState:null,next:null},Kc(s)){if(a)throw Error(n(479))}else a=Cp(s,c,f,2),a!==null&&Xn(a,s,2)}function Kc(s){var a=s.alternate;return s===Ve||a!==null&&a===Ve}function G1(s,a){la=Gc=!0;var c=s.pending;c===null?a.next=a:(a.next=c.next,c.next=a),s.pending=a}function W1(s,a,c){if((c&4194048)!==0){var f=a.lanes;f&=s.pendingLanes,c|=f,a.lanes=c,et(s,c)}}var Jc={readContext:fn,use:Ic,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useLayoutEffect:Nt,useInsertionEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useSyncExternalStore:Nt,useId:Nt,useHostTransitionStatus:Nt,useFormState:Nt,useActionState:Nt,useOptimistic:Nt,useMemoCache:Nt,useCacheRefresh:Nt},I1={readContext:fn,use:Ic,useCallback:function(s,a){return En().memoizedState=[s,a===void 0?null:a],s},useContext:fn,useEffect:M1,useImperativeHandle:function(s,a,c){c=c!=null?c.concat([s]):null,Zc(4194308,4,P1.bind(null,a,s),c)},useLayoutEffect:function(s,a){return Zc(4194308,4,s,a)},useInsertionEffect:function(s,a){Zc(4,2,s,a)},useMemo:function(s,a){var c=En();a=a===void 0?null:a;var f=s();if(ul){$n(!0);try{s()}finally{$n(!1)}}return c.memoizedState=[f,a],f},useReducer:function(s,a,c){var f=En();if(c!==void 0){var m=c(a);if(ul){$n(!0);try{c(a)}finally{$n(!1)}}}else m=a;return f.memoizedState=f.baseState=m,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:m},f.queue=s,s=s.dispatch=XR.bind(null,Ve,s),[f.memoizedState,s]},useRef:function(s){var a=En();return s={current:s},a.memoizedState=s},useState:function(s){s=tm(s);var a=s.queue,c=X1.bind(null,Ve,a);return a.dispatch=c,[s.memoizedState,c]},useDebugValue:im,useDeferredValue:function(s,a){var c=En();return rm(c,s,a)},useTransition:function(){var s=tm(!1);return s=q1.bind(null,Ve,s.queue,!0,!1),En().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,c){var f=Ve,m=En();if(rt){if(c===void 0)throw Error(n(407));c=c()}else{if(c=a(),yt===null)throw Error(n(349));(Ye&124)!==0||m1(f,a,c)}m.memoizedState=c;var y={value:c,getSnapshot:a};return m.queue=y,M1(y1.bind(null,f,y,s),[s]),f.flags|=2048,oa(9,Yc(),g1.bind(null,f,y,c,a),null),c},useId:function(){var s=En(),a=yt.identifierPrefix;if(rt){var c=vr,f=br;c=(f&~(1<<32-hn(f)-1)).toString(32)+c,a=""+a+"R"+c,c=Wc++,0<c&&(a+="H"+c.toString(32)),a+=""}else c=LR++,a=""+a+"r"+c.toString(32)+"";return s.memoizedState=a},useHostTransitionStatus:lm,useFormState:C1,useActionState:C1,useOptimistic:function(s){var a=En();a.memoizedState=a.baseState=s;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=c,a=am.bind(null,Ve,!0,c),c.dispatch=a,[s,a]},useMemoCache:Kp,useCacheRefresh:function(){return En().memoizedState=VR.bind(null,Ve)}},F1={readContext:fn,use:Ic,useCallback:_1,useContext:fn,useEffect:D1,useImperativeHandle:B1,useInsertionEffect:Q1,useLayoutEffect:z1,useMemo:$1,useReducer:Fc,useRef:N1,useState:function(){return Fc(wr)},useDebugValue:im,useDeferredValue:function(s,a){var c=Bt();return L1(c,ut.memoizedState,s,a)},useTransition:function(){var s=Fc(wr)[0],a=Bt().memoizedState;return[typeof s=="boolean"?s:No(s),a]},useSyncExternalStore:p1,useId:H1,useHostTransitionStatus:lm,useFormState:A1,useActionState:A1,useOptimistic:function(s,a){var c=Bt();return v1(c,ut,s,a)},useMemoCache:Kp,useCacheRefresh:V1},GR={readContext:fn,use:Ic,useCallback:_1,useContext:fn,useEffect:D1,useImperativeHandle:B1,useInsertionEffect:Q1,useLayoutEffect:z1,useMemo:$1,useReducer:em,useRef:N1,useState:function(){return em(wr)},useDebugValue:im,useDeferredValue:function(s,a){var c=Bt();return ut===null?rm(c,s,a):L1(c,ut.memoizedState,s,a)},useTransition:function(){var s=em(wr)[0],a=Bt().memoizedState;return[typeof s=="boolean"?s:No(s),a]},useSyncExternalStore:p1,useId:H1,useHostTransitionStatus:lm,useFormState:R1,useActionState:R1,useOptimistic:function(s,a){var c=Bt();return ut!==null?v1(c,ut,s,a):(c.baseState=s,[s,c.queue.dispatch])},useMemoCache:Kp,useCacheRefresh:V1},ua=null,Qo=0;function eh(s){var a=Qo;return Qo+=1,ua===null&&(ua=[]),l1(ua,s,a)}function zo(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function th(s,a){throw a.$$typeof===g?Error(n(525)):(s=Object.prototype.toString.call(a),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function Y1(s){var a=s._init;return a(s._payload)}function Z1(s){function a(q,z){if(s){var V=q.deletions;V===null?(q.deletions=[z],q.flags|=16):V.push(z)}}function c(q,z){if(!s)return null;for(;z!==null;)a(q,z),z=z.sibling;return null}function f(q){for(var z=new Map;q!==null;)q.key!==null?z.set(q.key,q):z.set(q.index,q),q=q.sibling;return z}function m(q,z){return q=Or(q,z),q.index=0,q.sibling=null,q}function y(q,z,V){return q.index=V,s?(V=q.alternate,V!==null?(V=V.index,V<z?(q.flags|=67108866,z):V):(q.flags|=67108866,z)):(q.flags|=1048576,z)}function S(q){return s&&q.alternate===null&&(q.flags|=67108866),q}function k(q,z,V,ie){return z===null||z.tag!==6?(z=Ep(V,q.mode,ie),z.return=q,z):(z=m(z,V),z.return=q,z)}function N(q,z,V,ie){var Ne=V.type;return Ne===v?ee(q,z,V.props.children,ie,V.key):z!==null&&(z.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===U&&Y1(Ne)===z.type)?(z=m(z,V.props),zo(z,V),z.return=q,z):(z=_c(V.type,V.key,V.props,null,q.mode,ie),zo(z,V),z.return=q,z)}function X(q,z,V,ie){return z===null||z.tag!==4||z.stateNode.containerInfo!==V.containerInfo||z.stateNode.implementation!==V.implementation?(z=Rp(V,q.mode,ie),z.return=q,z):(z=m(z,V.children||[]),z.return=q,z)}function ee(q,z,V,ie,Ne){return z===null||z.tag!==7?(z=tl(V,q.mode,ie,Ne),z.return=q,z):(z=m(z,V),z.return=q,z)}function le(q,z,V){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=Ep(""+z,q.mode,V),z.return=q,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case O:return V=_c(z.type,z.key,z.props,null,q.mode,V),zo(V,z),V.return=q,V;case b:return z=Rp(z,q.mode,V),z.return=q,z;case U:var ie=z._init;return z=ie(z._payload),le(q,z,V)}if(ae(z)||Q(z))return z=tl(z,q.mode,V,null),z.return=q,z;if(typeof z.then=="function")return le(q,eh(z),V);if(z.$$typeof===D)return le(q,Uc(q,z),V);th(q,z)}return null}function W(q,z,V,ie){var Ne=z!==null?z.key:null;if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return Ne!==null?null:k(q,z,""+V,ie);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case O:return V.key===Ne?N(q,z,V,ie):null;case b:return V.key===Ne?X(q,z,V,ie):null;case U:return Ne=V._init,V=Ne(V._payload),W(q,z,V,ie)}if(ae(V)||Q(V))return Ne!==null?null:ee(q,z,V,ie,null);if(typeof V.then=="function")return W(q,z,eh(V),ie);if(V.$$typeof===D)return W(q,z,Uc(q,V),ie);th(q,V)}return null}function I(q,z,V,ie,Ne){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return q=q.get(V)||null,k(z,q,""+ie,Ne);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case O:return q=q.get(ie.key===null?V:ie.key)||null,N(z,q,ie,Ne);case b:return q=q.get(ie.key===null?V:ie.key)||null,X(z,q,ie,Ne);case U:var Xe=ie._init;return ie=Xe(ie._payload),I(q,z,V,ie,Ne)}if(ae(ie)||Q(ie))return q=q.get(V)||null,ee(z,q,ie,Ne,null);if(typeof ie.then=="function")return I(q,z,V,eh(ie),Ne);if(ie.$$typeof===D)return I(q,z,V,Uc(z,ie),Ne);th(z,ie)}return null}function Pe(q,z,V,ie){for(var Ne=null,Xe=null,De=z,ze=z=0,Wt=null;De!==null&&ze<V.length;ze++){De.index>ze?(Wt=De,De=null):Wt=De.sibling;var tt=W(q,De,V[ze],ie);if(tt===null){De===null&&(De=Wt);break}s&&De&&tt.alternate===null&&a(q,De),z=y(tt,z,ze),Xe===null?Ne=tt:Xe.sibling=tt,Xe=tt,De=Wt}if(ze===V.length)return c(q,De),rt&&il(q,ze),Ne;if(De===null){for(;ze<V.length;ze++)De=le(q,V[ze],ie),De!==null&&(z=y(De,z,ze),Xe===null?Ne=De:Xe.sibling=De,Xe=De);return rt&&il(q,ze),Ne}for(De=f(De);ze<V.length;ze++)Wt=I(De,q,ze,V[ze],ie),Wt!==null&&(s&&Wt.alternate!==null&&De.delete(Wt.key===null?ze:Wt.key),z=y(Wt,z,ze),Xe===null?Ne=Wt:Xe.sibling=Wt,Xe=Wt);return s&&De.forEach(function(Ss){return a(q,Ss)}),rt&&il(q,ze),Ne}function Qe(q,z,V,ie){if(V==null)throw Error(n(151));for(var Ne=null,Xe=null,De=z,ze=z=0,Wt=null,tt=V.next();De!==null&&!tt.done;ze++,tt=V.next()){De.index>ze?(Wt=De,De=null):Wt=De.sibling;var Ss=W(q,De,tt.value,ie);if(Ss===null){De===null&&(De=Wt);break}s&&De&&Ss.alternate===null&&a(q,De),z=y(Ss,z,ze),Xe===null?Ne=Ss:Xe.sibling=Ss,Xe=Ss,De=Wt}if(tt.done)return c(q,De),rt&&il(q,ze),Ne;if(De===null){for(;!tt.done;ze++,tt=V.next())tt=le(q,tt.value,ie),tt!==null&&(z=y(tt,z,ze),Xe===null?Ne=tt:Xe.sibling=tt,Xe=tt);return rt&&il(q,ze),Ne}for(De=f(De);!tt.done;ze++,tt=V.next())tt=I(De,q,ze,tt.value,ie),tt!==null&&(s&&tt.alternate!==null&&De.delete(tt.key===null?ze:tt.key),z=y(tt,z,ze),Xe===null?Ne=tt:Xe.sibling=tt,Xe=tt);return s&&De.forEach(function(WN){return a(q,WN)}),rt&&il(q,ze),Ne}function ht(q,z,V,ie){if(typeof V=="object"&&V!==null&&V.type===v&&V.key===null&&(V=V.props.children),typeof V=="object"&&V!==null){switch(V.$$typeof){case O:e:{for(var Ne=V.key;z!==null;){if(z.key===Ne){if(Ne=V.type,Ne===v){if(z.tag===7){c(q,z.sibling),ie=m(z,V.props.children),ie.return=q,q=ie;break e}}else if(z.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===U&&Y1(Ne)===z.type){c(q,z.sibling),ie=m(z,V.props),zo(ie,V),ie.return=q,q=ie;break e}c(q,z);break}else a(q,z);z=z.sibling}V.type===v?(ie=tl(V.props.children,q.mode,ie,V.key),ie.return=q,q=ie):(ie=_c(V.type,V.key,V.props,null,q.mode,ie),zo(ie,V),ie.return=q,q=ie)}return S(q);case b:e:{for(Ne=V.key;z!==null;){if(z.key===Ne)if(z.tag===4&&z.stateNode.containerInfo===V.containerInfo&&z.stateNode.implementation===V.implementation){c(q,z.sibling),ie=m(z,V.children||[]),ie.return=q,q=ie;break e}else{c(q,z);break}else a(q,z);z=z.sibling}ie=Rp(V,q.mode,ie),ie.return=q,q=ie}return S(q);case U:return Ne=V._init,V=Ne(V._payload),ht(q,z,V,ie)}if(ae(V))return Pe(q,z,V,ie);if(Q(V)){if(Ne=Q(V),typeof Ne!="function")throw Error(n(150));return V=Ne.call(V),Qe(q,z,V,ie)}if(typeof V.then=="function")return ht(q,z,eh(V),ie);if(V.$$typeof===D)return ht(q,z,Uc(q,V),ie);th(q,V)}return typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint"?(V=""+V,z!==null&&z.tag===6?(c(q,z.sibling),ie=m(z,V),ie.return=q,q=ie):(c(q,z),ie=Ep(V,q.mode,ie),ie.return=q,q=ie),S(q)):c(q,z)}return function(q,z,V,ie){try{Qo=0;var Ne=ht(q,z,V,ie);return ua=null,Ne}catch(De){if(De===ko||De===Hc)throw De;var Xe=qn(29,De,null,q.mode);return Xe.lanes=ie,Xe.return=q,Xe}finally{}}}var ca=Z1(!0),K1=Z1(!1),si=G(null),Ei=null;function ls(s){var a=s.alternate;ne(jt,jt.current&1),ne(si,s),Ei===null&&(a===null||sa.current!==null||a.memoizedState!==null)&&(Ei=s)}function J1(s){if(s.tag===22){if(ne(jt,jt.current),ne(si,s),Ei===null){var a=s.alternate;a!==null&&a.memoizedState!==null&&(Ei=s)}}else as()}function as(){ne(jt,jt.current),ne(si,si.current)}function kr(s){Z(si),Ei===s&&(Ei=null),Z(jt)}var jt=G(0);function nh(s){for(var a=s;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||Zm(c)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function om(s,a,c,f){a=s.memoizedState,c=c(f,a),c=c==null?a:p({},a,c),s.memoizedState=c,s.lanes===0&&(s.updateQueue.baseState=c)}var um={enqueueSetState:function(s,a,c){s=s._reactInternals;var f=Vn(),m=is(f);m.payload=a,c!=null&&(m.callback=c),a=rs(s,m,f),a!==null&&(Xn(a,s,f),Co(a,s,f))},enqueueReplaceState:function(s,a,c){s=s._reactInternals;var f=Vn(),m=is(f);m.tag=1,m.payload=a,c!=null&&(m.callback=c),a=rs(s,m,f),a!==null&&(Xn(a,s,f),Co(a,s,f))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var c=Vn(),f=is(c);f.tag=2,a!=null&&(f.callback=a),a=rs(s,f,c),a!==null&&(Xn(a,s,c),Co(a,s,c))}};function ev(s,a,c,f,m,y,S){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(f,y,S):a.prototype&&a.prototype.isPureReactComponent?!go(c,f)||!go(m,y):!0}function tv(s,a,c,f){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,f),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,f),a.state!==s&&um.enqueueReplaceState(a,a.state,null)}function cl(s,a){var c=a;if("ref"in a){c={};for(var f in a)f!=="ref"&&(c[f]=a[f])}if(s=s.defaultProps){c===a&&(c=p({},c));for(var m in s)c[m]===void 0&&(c[m]=s[m])}return c}var ih=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function nv(s){ih(s)}function iv(s){console.error(s)}function rv(s){ih(s)}function rh(s,a){try{var c=s.onUncaughtError;c(a.value,{componentStack:a.stack})}catch(f){setTimeout(function(){throw f})}}function sv(s,a,c){try{var f=s.onCaughtError;f(c.value,{componentStack:c.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function cm(s,a,c){return c=is(c),c.tag=3,c.payload={element:null},c.callback=function(){rh(s,a)},c}function lv(s){return s=is(s),s.tag=3,s}function av(s,a,c,f){var m=c.type.getDerivedStateFromError;if(typeof m=="function"){var y=f.value;s.payload=function(){return m(y)},s.callback=function(){sv(a,c,f)}}var S=c.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(s.callback=function(){sv(a,c,f),typeof m!="function"&&(ds===null?ds=new Set([this]):ds.add(this));var k=f.stack;this.componentDidCatch(f.value,{componentStack:k!==null?k:""})})}function WR(s,a,c,f,m){if(c.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(a=c.alternate,a!==null&&So(a,c,m,!0),c=si.current,c!==null){switch(c.tag){case 13:return Ei===null?zm():c.alternate===null&&At===0&&(At=3),c.flags&=-257,c.flags|=65536,c.lanes=m,f===Lp?c.flags|=16384:(a=c.updateQueue,a===null?c.updateQueue=new Set([f]):a.add(f),Bm(s,f,m)),!1;case 22:return c.flags|=65536,f===Lp?c.flags|=16384:(a=c.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([f])},c.updateQueue=a):(c=a.retryQueue,c===null?a.retryQueue=new Set([f]):c.add(f)),Bm(s,f,m)),!1}throw Error(n(435,c.tag))}return Bm(s,f,m),zm(),!1}if(rt)return a=si.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=m,f!==Dp&&(s=Error(n(422),{cause:f}),vo(ti(s,c)))):(f!==Dp&&(a=Error(n(423),{cause:f}),vo(ti(a,c))),s=s.current.alternate,s.flags|=65536,m&=-m,s.lanes|=m,f=ti(f,c),m=cm(s.stateNode,f,m),jp(s,m),At!==4&&(At=2)),!1;var y=Error(n(520),{cause:f});if(y=ti(y,c),Uo===null?Uo=[y]:Uo.push(y),At!==4&&(At=2),a===null)return!0;f=ti(f,c),c=a;do{switch(c.tag){case 3:return c.flags|=65536,s=m&-m,c.lanes|=s,s=cm(c.stateNode,f,s),jp(c,s),!1;case 1:if(a=c.type,y=c.stateNode,(c.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(ds===null||!ds.has(y))))return c.flags|=65536,m&=-m,c.lanes|=m,m=lv(m),av(m,s,c,f),jp(c,m),!1}c=c.return}while(c!==null);return!1}var ov=Error(n(461)),Xt=!1;function Jt(s,a,c,f){a.child=s===null?K1(a,null,c,f):ca(a,s.child,c,f)}function uv(s,a,c,f,m){c=c.render;var y=a.ref;if("ref"in f){var S={};for(var k in f)k!=="ref"&&(S[k]=f[k])}else S=f;return al(a),f=Wp(s,a,c,S,y,m),k=Ip(),s!==null&&!Xt?(Fp(s,a,m),Tr(s,a,m)):(rt&&k&&Np(a),a.flags|=1,Jt(s,a,f,m),a.child)}function cv(s,a,c,f,m){if(s===null){var y=c.type;return typeof y=="function"&&!Ap(y)&&y.defaultProps===void 0&&c.compare===null?(a.tag=15,a.type=y,hv(s,a,y,f,m)):(s=_c(c.type,null,f,a,a.mode,m),s.ref=a.ref,s.return=a,a.child=s)}if(y=s.child,!Om(s,m)){var S=y.memoizedProps;if(c=c.compare,c=c!==null?c:go,c(S,f)&&s.ref===a.ref)return Tr(s,a,m)}return a.flags|=1,s=Or(y,f),s.ref=a.ref,s.return=a,a.child=s}function hv(s,a,c,f,m){if(s!==null){var y=s.memoizedProps;if(go(y,f)&&s.ref===a.ref)if(Xt=!1,a.pendingProps=f=y,Om(s,m))(s.flags&131072)!==0&&(Xt=!0);else return a.lanes=s.lanes,Tr(s,a,m)}return hm(s,a,c,f,m)}function fv(s,a,c){var f=a.pendingProps,m=f.children,y=s!==null?s.memoizedState:null;if(f.mode==="hidden"){if((a.flags&128)!==0){if(f=y!==null?y.baseLanes|c:c,s!==null){for(m=a.child=s.child,y=0;m!==null;)y=y|m.lanes|m.childLanes,m=m.sibling;a.childLanes=y&~f}else a.childLanes=0,a.child=null;return dv(s,a,f,c)}if((c&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&jc(a,y!==null?y.cachePool:null),y!==null?h1(a,y):Vp(),J1(a);else return a.lanes=a.childLanes=536870912,dv(s,a,y!==null?y.baseLanes|c:c,c)}else y!==null?(jc(a,y.cachePool),h1(a,y),as(),a.memoizedState=null):(s!==null&&jc(a,null),Vp(),as());return Jt(s,a,m,c),a.child}function dv(s,a,c,f){var m=$p();return m=m===null?null:{parent:Ut._currentValue,pool:m},a.memoizedState={baseLanes:c,cachePool:m},s!==null&&jc(a,null),Vp(),J1(a),s!==null&&So(s,a,f,!0),null}function sh(s,a){var c=a.ref;if(c===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(n(284));(s===null||s.ref!==c)&&(a.flags|=4194816)}}function hm(s,a,c,f,m){return al(a),c=Wp(s,a,c,f,void 0,m),f=Ip(),s!==null&&!Xt?(Fp(s,a,m),Tr(s,a,m)):(rt&&f&&Np(a),a.flags|=1,Jt(s,a,c,m),a.child)}function pv(s,a,c,f,m,y){return al(a),a.updateQueue=null,c=d1(a,f,c,m),f1(s),f=Ip(),s!==null&&!Xt?(Fp(s,a,y),Tr(s,a,y)):(rt&&f&&Np(a),a.flags|=1,Jt(s,a,c,y),a.child)}function mv(s,a,c,f,m){if(al(a),a.stateNode===null){var y=ea,S=c.contextType;typeof S=="object"&&S!==null&&(y=fn(S)),y=new c(f,y),a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=um,a.stateNode=y,y._reactInternals=a,y=a.stateNode,y.props=f,y.state=a.memoizedState,y.refs={},qp(a),S=c.contextType,y.context=typeof S=="object"&&S!==null?fn(S):ea,y.state=a.memoizedState,S=c.getDerivedStateFromProps,typeof S=="function"&&(om(a,c,S,f),y.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(S=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),S!==y.state&&um.enqueueReplaceState(y,y.state,null),Eo(a,f,y,m),Ao(),y.state=a.memoizedState),typeof y.componentDidMount=="function"&&(a.flags|=4194308),f=!0}else if(s===null){y=a.stateNode;var k=a.memoizedProps,N=cl(c,k);y.props=N;var X=y.context,ee=c.contextType;S=ea,typeof ee=="object"&&ee!==null&&(S=fn(ee));var le=c.getDerivedStateFromProps;ee=typeof le=="function"||typeof y.getSnapshotBeforeUpdate=="function",k=a.pendingProps!==k,ee||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(k||X!==S)&&tv(a,y,f,S),ns=!1;var W=a.memoizedState;y.state=W,Eo(a,f,y,m),Ao(),X=a.memoizedState,k||W!==X||ns?(typeof le=="function"&&(om(a,c,le,f),X=a.memoizedState),(N=ns||ev(a,c,N,f,W,X,S))?(ee||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(a.flags|=4194308)):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=f,a.memoizedState=X),y.props=f,y.state=X,y.context=S,f=N):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),f=!1)}else{y=a.stateNode,Up(s,a),S=a.memoizedProps,ee=cl(c,S),y.props=ee,le=a.pendingProps,W=y.context,X=c.contextType,N=ea,typeof X=="object"&&X!==null&&(N=fn(X)),k=c.getDerivedStateFromProps,(X=typeof k=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(S!==le||W!==N)&&tv(a,y,f,N),ns=!1,W=a.memoizedState,y.state=W,Eo(a,f,y,m),Ao();var I=a.memoizedState;S!==le||W!==I||ns||s!==null&&s.dependencies!==null&&qc(s.dependencies)?(typeof k=="function"&&(om(a,c,k,f),I=a.memoizedState),(ee=ns||ev(a,c,ee,f,W,I,N)||s!==null&&s.dependencies!==null&&qc(s.dependencies))?(X||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(f,I,N),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(f,I,N)),typeof y.componentDidUpdate=="function"&&(a.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof y.componentDidUpdate!="function"||S===s.memoizedProps&&W===s.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||S===s.memoizedProps&&W===s.memoizedState||(a.flags|=1024),a.memoizedProps=f,a.memoizedState=I),y.props=f,y.state=I,y.context=N,f=ee):(typeof y.componentDidUpdate!="function"||S===s.memoizedProps&&W===s.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||S===s.memoizedProps&&W===s.memoizedState||(a.flags|=1024),f=!1)}return y=f,sh(s,a),f=(a.flags&128)!==0,y||f?(y=a.stateNode,c=f&&typeof c.getDerivedStateFromError!="function"?null:y.render(),a.flags|=1,s!==null&&f?(a.child=ca(a,s.child,null,m),a.child=ca(a,null,c,m)):Jt(s,a,c,m),a.memoizedState=y.state,s=a.child):s=Tr(s,a,m),s}function gv(s,a,c,f){return bo(),a.flags|=256,Jt(s,a,c,f),a.child}var fm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function dm(s){return{baseLanes:s,cachePool:i1()}}function pm(s,a,c){return s=s!==null?s.childLanes&~c:0,a&&(s|=li),s}function yv(s,a,c){var f=a.pendingProps,m=!1,y=(a.flags&128)!==0,S;if((S=y)||(S=s!==null&&s.memoizedState===null?!1:(jt.current&2)!==0),S&&(m=!0,a.flags&=-129),S=(a.flags&32)!==0,a.flags&=-33,s===null){if(rt){if(m?ls(a):as(),rt){var k=Ct,N;if(N=k){e:{for(N=k,k=Ai;N.nodeType!==8;){if(!k){k=null;break e}if(N=Oi(N.nextSibling),N===null){k=null;break e}}k=N}k!==null?(a.memoizedState={dehydrated:k,treeContext:nl!==null?{id:br,overflow:vr}:null,retryLane:536870912,hydrationErrors:null},N=qn(18,null,null,0),N.stateNode=k,N.return=a,a.child=N,wn=a,Ct=null,N=!0):N=!1}N||sl(a)}if(k=a.memoizedState,k!==null&&(k=k.dehydrated,k!==null))return Zm(k)?a.lanes=32:a.lanes=536870912,null;kr(a)}return k=f.children,f=f.fallback,m?(as(),m=a.mode,k=lh({mode:"hidden",children:k},m),f=tl(f,m,c,null),k.return=a,f.return=a,k.sibling=f,a.child=k,m=a.child,m.memoizedState=dm(c),m.childLanes=pm(s,S,c),a.memoizedState=fm,f):(ls(a),mm(a,k))}if(N=s.memoizedState,N!==null&&(k=N.dehydrated,k!==null)){if(y)a.flags&256?(ls(a),a.flags&=-257,a=gm(s,a,c)):a.memoizedState!==null?(as(),a.child=s.child,a.flags|=128,a=null):(as(),m=f.fallback,k=a.mode,f=lh({mode:"visible",children:f.children},k),m=tl(m,k,c,null),m.flags|=2,f.return=a,m.return=a,f.sibling=m,a.child=f,ca(a,s.child,null,c),f=a.child,f.memoizedState=dm(c),f.childLanes=pm(s,S,c),a.memoizedState=fm,a=m);else if(ls(a),Zm(k)){if(S=k.nextSibling&&k.nextSibling.dataset,S)var X=S.dgst;S=X,f=Error(n(419)),f.stack="",f.digest=S,vo({value:f,source:null,stack:null}),a=gm(s,a,c)}else if(Xt||So(s,a,c,!1),S=(c&s.childLanes)!==0,Xt||S){if(S=yt,S!==null&&(f=c&-c,f=(f&42)!==0?1:lt(f),f=(f&(S.suspendedLanes|c))!==0?0:f,f!==0&&f!==N.retryLane))throw N.retryLane=f,Jl(s,f),Xn(S,s,f),ov;k.data==="$?"||zm(),a=gm(s,a,c)}else k.data==="$?"?(a.flags|=192,a.child=s.child,a=null):(s=N.treeContext,Ct=Oi(k.nextSibling),wn=a,rt=!0,rl=null,Ai=!1,s!==null&&(ii[ri++]=br,ii[ri++]=vr,ii[ri++]=nl,br=s.id,vr=s.overflow,nl=a),a=mm(a,f.children),a.flags|=4096);return a}return m?(as(),m=f.fallback,k=a.mode,N=s.child,X=N.sibling,f=Or(N,{mode:"hidden",children:f.children}),f.subtreeFlags=N.subtreeFlags&65011712,X!==null?m=Or(X,m):(m=tl(m,k,c,null),m.flags|=2),m.return=a,f.return=a,f.sibling=m,a.child=f,f=m,m=a.child,k=s.child.memoizedState,k===null?k=dm(c):(N=k.cachePool,N!==null?(X=Ut._currentValue,N=N.parent!==X?{parent:X,pool:X}:N):N=i1(),k={baseLanes:k.baseLanes|c,cachePool:N}),m.memoizedState=k,m.childLanes=pm(s,S,c),a.memoizedState=fm,f):(ls(a),c=s.child,s=c.sibling,c=Or(c,{mode:"visible",children:f.children}),c.return=a,c.sibling=null,s!==null&&(S=a.deletions,S===null?(a.deletions=[s],a.flags|=16):S.push(s)),a.child=c,a.memoizedState=null,c)}function mm(s,a){return a=lh({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function lh(s,a){return s=qn(22,s,null,a),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function gm(s,a,c){return ca(a,s.child,null,c),s=mm(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function Ov(s,a,c){s.lanes|=a;var f=s.alternate;f!==null&&(f.lanes|=a),zp(s.return,a,c)}function ym(s,a,c,f,m){var y=s.memoizedState;y===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:m}:(y.isBackwards=a,y.rendering=null,y.renderingStartTime=0,y.last=f,y.tail=c,y.tailMode=m)}function bv(s,a,c){var f=a.pendingProps,m=f.revealOrder,y=f.tail;if(Jt(s,a,f.children,c),f=jt.current,(f&2)!==0)f=f&1|2,a.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Ov(s,c,a);else if(s.tag===19)Ov(s,c,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}f&=1}switch(ne(jt,f),m){case"forwards":for(c=a.child,m=null;c!==null;)s=c.alternate,s!==null&&nh(s)===null&&(m=c),c=c.sibling;c=m,c===null?(m=a.child,a.child=null):(m=c.sibling,c.sibling=null),ym(a,!1,m,c,y);break;case"backwards":for(c=null,m=a.child,a.child=null;m!==null;){if(s=m.alternate,s!==null&&nh(s)===null){a.child=m;break}s=m.sibling,m.sibling=c,c=m,m=s}ym(a,!0,c,null,y);break;case"together":ym(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Tr(s,a,c){if(s!==null&&(a.dependencies=s.dependencies),fs|=a.lanes,(c&a.childLanes)===0)if(s!==null){if(So(s,a,c,!1),(c&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(n(153));if(a.child!==null){for(s=a.child,c=Or(s,s.pendingProps),a.child=c,c.return=a;s.sibling!==null;)s=s.sibling,c=c.sibling=Or(s,s.pendingProps),c.return=a;c.sibling=null}return a.child}function Om(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&qc(s)))}function IR(s,a,c){switch(a.tag){case 3:Ke(a,a.stateNode.containerInfo),ts(a,Ut,s.memoizedState.cache),bo();break;case 27:case 5:Cn(a);break;case 4:Ke(a,a.stateNode.containerInfo);break;case 10:ts(a,a.type,a.memoizedProps.value);break;case 13:var f=a.memoizedState;if(f!==null)return f.dehydrated!==null?(ls(a),a.flags|=128,null):(c&a.child.childLanes)!==0?yv(s,a,c):(ls(a),s=Tr(s,a,c),s!==null?s.sibling:null);ls(a);break;case 19:var m=(s.flags&128)!==0;if(f=(c&a.childLanes)!==0,f||(So(s,a,c,!1),f=(c&a.childLanes)!==0),m){if(f)return bv(s,a,c);a.flags|=128}if(m=a.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),ne(jt,jt.current),f)break;return null;case 22:case 23:return a.lanes=0,fv(s,a,c);case 24:ts(a,Ut,s.memoizedState.cache)}return Tr(s,a,c)}function vv(s,a,c){if(s!==null)if(s.memoizedProps!==a.pendingProps)Xt=!0;else{if(!Om(s,c)&&(a.flags&128)===0)return Xt=!1,IR(s,a,c);Xt=(s.flags&131072)!==0}else Xt=!1,rt&&(a.flags&1048576)!==0&&Yb(a,Lc,a.index);switch(a.lanes=0,a.tag){case 16:e:{s=a.pendingProps;var f=a.elementType,m=f._init;if(f=m(f._payload),a.type=f,typeof f=="function")Ap(f)?(s=cl(f,s),a.tag=1,a=mv(null,a,f,s,c)):(a.tag=0,a=hm(null,a,f,s,c));else{if(f!=null){if(m=f.$$typeof,m===_){a.tag=11,a=uv(null,a,f,s,c);break e}else if(m===C){a.tag=14,a=cv(null,a,f,s,c);break e}}throw a=te(f)||f,Error(n(306,a,""))}}return a;case 0:return hm(s,a,a.type,a.pendingProps,c);case 1:return f=a.type,m=cl(f,a.pendingProps),mv(s,a,f,m,c);case 3:e:{if(Ke(a,a.stateNode.containerInfo),s===null)throw Error(n(387));f=a.pendingProps;var y=a.memoizedState;m=y.element,Up(s,a),Eo(a,f,null,c);var S=a.memoizedState;if(f=S.cache,ts(a,Ut,f),f!==y.cache&&Pp(a,[Ut],c,!0),Ao(),f=S.element,y.isDehydrated)if(y={element:f,isDehydrated:!1,cache:S.cache},a.updateQueue.baseState=y,a.memoizedState=y,a.flags&256){a=gv(s,a,f,c);break e}else if(f!==m){m=ti(Error(n(424)),a),vo(m),a=gv(s,a,f,c);break e}else{switch(s=a.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Ct=Oi(s.firstChild),wn=a,rt=!0,rl=null,Ai=!0,c=K1(a,null,f,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(bo(),f===m){a=Tr(s,a,c);break e}Jt(s,a,f,c)}a=a.child}return a;case 26:return sh(s,a),s===null?(c=kS(a.type,null,a.pendingProps,null))?a.memoizedState=c:rt||(c=a.type,s=a.pendingProps,f=vh(Ce.current).createElement(c),f[zt]=a,f[Rt]=s,tn(f,c,s),Vt(f),a.stateNode=f):a.memoizedState=kS(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return Cn(a),s===null&&rt&&(f=a.stateNode=SS(a.type,a.pendingProps,Ce.current),wn=a,Ai=!0,m=Ct,gs(a.type)?(Km=m,Ct=Oi(f.firstChild)):Ct=m),Jt(s,a,a.pendingProps.children,c),sh(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&rt&&((m=f=Ct)&&(f=xN(f,a.type,a.pendingProps,Ai),f!==null?(a.stateNode=f,wn=a,Ct=Oi(f.firstChild),Ai=!1,m=!0):m=!1),m||sl(a)),Cn(a),m=a.type,y=a.pendingProps,S=s!==null?s.memoizedProps:null,f=y.children,Im(m,y)?f=null:S!==null&&Im(m,S)&&(a.flags|=32),a.memoizedState!==null&&(m=Wp(s,a,qR,null,null,c),Yo._currentValue=m),sh(s,a),Jt(s,a,f,c),a.child;case 6:return s===null&&rt&&((s=c=Ct)&&(c=wN(c,a.pendingProps,Ai),c!==null?(a.stateNode=c,wn=a,Ct=null,s=!0):s=!1),s||sl(a)),null;case 13:return yv(s,a,c);case 4:return Ke(a,a.stateNode.containerInfo),f=a.pendingProps,s===null?a.child=ca(a,null,f,c):Jt(s,a,f,c),a.child;case 11:return uv(s,a,a.type,a.pendingProps,c);case 7:return Jt(s,a,a.pendingProps,c),a.child;case 8:return Jt(s,a,a.pendingProps.children,c),a.child;case 12:return Jt(s,a,a.pendingProps.children,c),a.child;case 10:return f=a.pendingProps,ts(a,a.type,f.value),Jt(s,a,f.children,c),a.child;case 9:return m=a.type._context,f=a.pendingProps.children,al(a),m=fn(m),f=f(m),a.flags|=1,Jt(s,a,f,c),a.child;case 14:return cv(s,a,a.type,a.pendingProps,c);case 15:return hv(s,a,a.type,a.pendingProps,c);case 19:return bv(s,a,c);case 31:return f=a.pendingProps,c=a.mode,f={mode:f.mode,children:f.children},s===null?(c=lh(f,c),c.ref=a.ref,a.child=c,c.return=a,a=c):(c=Or(s.child,f),c.ref=a.ref,a.child=c,c.return=a,a=c),a;case 22:return fv(s,a,c);case 24:return al(a),f=fn(Ut),s===null?(m=$p(),m===null&&(m=yt,y=Bp(),m.pooledCache=y,y.refCount++,y!==null&&(m.pooledCacheLanes|=c),m=y),a.memoizedState={parent:f,cache:m},qp(a),ts(a,Ut,m)):((s.lanes&c)!==0&&(Up(s,a),Eo(a,null,null,c),Ao()),m=s.memoizedState,y=a.memoizedState,m.parent!==f?(m={parent:f,cache:f},a.memoizedState=m,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=m),ts(a,Ut,f)):(f=y.cache,ts(a,Ut,f),f!==m.cache&&Pp(a,[Ut],c,!0))),Jt(s,a,a.pendingProps.children,c),a.child;case 29:throw a.pendingProps}throw Error(n(156,a.tag))}function Cr(s){s.flags|=4}function Sv(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!RS(a)){if(a=si.current,a!==null&&((Ye&4194048)===Ye?Ei!==null:(Ye&62914560)!==Ye&&(Ye&536870912)===0||a!==Ei))throw To=Lp,r1;s.flags|=8192}}function ah(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?Ee():536870912,s.lanes|=a,pa|=a)}function Po(s,a){if(!rt)switch(s.tailMode){case"hidden":a=s.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s.tail=null:c.sibling=null;break;case"collapsed":c=s.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:f.sibling=null}}function kt(s){var a=s.alternate!==null&&s.alternate.child===s.child,c=0,f=0;if(a)for(var m=s.child;m!==null;)c|=m.lanes|m.childLanes,f|=m.subtreeFlags&65011712,f|=m.flags&65011712,m.return=s,m=m.sibling;else for(m=s.child;m!==null;)c|=m.lanes|m.childLanes,f|=m.subtreeFlags,f|=m.flags,m.return=s,m=m.sibling;return s.subtreeFlags|=f,s.childLanes=c,a}function FR(s,a,c){var f=a.pendingProps;switch(Mp(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(a),null;case 1:return kt(a),null;case 3:return c=a.stateNode,f=null,s!==null&&(f=s.memoizedState.cache),a.memoizedState.cache!==f&&(a.flags|=2048),xr(Ut),Zt(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(s===null||s.child===null)&&(Oo(a)?Cr(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Jb())),kt(a),null;case 26:return c=a.memoizedState,s===null?(Cr(a),c!==null?(kt(a),Sv(a,c)):(kt(a),a.flags&=-16777217)):c?c!==s.memoizedState?(Cr(a),kt(a),Sv(a,c)):(kt(a),a.flags&=-16777217):(s.memoizedProps!==f&&Cr(a),kt(a),a.flags&=-16777217),null;case 27:mr(a),c=Ce.current;var m=a.type;if(s!==null&&a.stateNode!=null)s.memoizedProps!==f&&Cr(a);else{if(!f){if(a.stateNode===null)throw Error(n(166));return kt(a),null}s=he.current,Oo(a)?Zb(a):(s=SS(m,f,c),a.stateNode=s,Cr(a))}return kt(a),null;case 5:if(mr(a),c=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==f&&Cr(a);else{if(!f){if(a.stateNode===null)throw Error(n(166));return kt(a),null}if(s=he.current,Oo(a))Zb(a);else{switch(m=vh(Ce.current),s){case 1:s=m.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:s=m.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":s=m.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":s=m.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":s=m.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof f.is=="string"?m.createElement("select",{is:f.is}):m.createElement("select"),f.multiple?s.multiple=!0:f.size&&(s.size=f.size);break;default:s=typeof f.is=="string"?m.createElement(c,{is:f.is}):m.createElement(c)}}s[zt]=a,s[Rt]=f;e:for(m=a.child;m!==null;){if(m.tag===5||m.tag===6)s.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===a)break e;for(;m.sibling===null;){if(m.return===null||m.return===a)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}a.stateNode=s;e:switch(tn(s,c,f),c){case"button":case"input":case"select":case"textarea":s=!!f.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Cr(a)}}return kt(a),a.flags&=-16777217,null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==f&&Cr(a);else{if(typeof f!="string"&&a.stateNode===null)throw Error(n(166));if(s=Ce.current,Oo(a)){if(s=a.stateNode,c=a.memoizedProps,f=null,m=wn,m!==null)switch(m.tag){case 27:case 5:f=m.memoizedProps}s[zt]=a,s=!!(s.nodeValue===c||f!==null&&f.suppressHydrationWarning===!0||pS(s.nodeValue,c)),s||sl(a)}else s=vh(s).createTextNode(f),s[zt]=a,a.stateNode=s}return kt(a),null;case 13:if(f=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(m=Oo(a),f!==null&&f.dehydrated!==null){if(s===null){if(!m)throw Error(n(318));if(m=a.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(n(317));m[zt]=a}else bo(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;kt(a),m=!1}else m=Jb(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=m),m=!0;if(!m)return a.flags&256?(kr(a),a):(kr(a),null)}if(kr(a),(a.flags&128)!==0)return a.lanes=c,a;if(c=f!==null,s=s!==null&&s.memoizedState!==null,c){f=a.child,m=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(m=f.alternate.memoizedState.cachePool.pool);var y=null;f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(y=f.memoizedState.cachePool.pool),y!==m&&(f.flags|=2048)}return c!==s&&c&&(a.child.flags|=8192),ah(a,a.updateQueue),kt(a),null;case 4:return Zt(),s===null&&Hm(a.stateNode.containerInfo),kt(a),null;case 10:return xr(a.type),kt(a),null;case 19:if(Z(jt),m=a.memoizedState,m===null)return kt(a),null;if(f=(a.flags&128)!==0,y=m.rendering,y===null)if(f)Po(m,!1);else{if(At!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(y=nh(s),y!==null){for(a.flags|=128,Po(m,!1),s=y.updateQueue,a.updateQueue=s,ah(a,s),a.subtreeFlags=0,s=c,c=a.child;c!==null;)Fb(c,s),c=c.sibling;return ne(jt,jt.current&1|2),a.child}s=s.sibling}m.tail!==null&&xn()>ch&&(a.flags|=128,f=!0,Po(m,!1),a.lanes=4194304)}else{if(!f)if(s=nh(y),s!==null){if(a.flags|=128,f=!0,s=s.updateQueue,a.updateQueue=s,ah(a,s),Po(m,!0),m.tail===null&&m.tailMode==="hidden"&&!y.alternate&&!rt)return kt(a),null}else 2*xn()-m.renderingStartTime>ch&&c!==536870912&&(a.flags|=128,f=!0,Po(m,!1),a.lanes=4194304);m.isBackwards?(y.sibling=a.child,a.child=y):(s=m.last,s!==null?s.sibling=y:a.child=y,m.last=y)}return m.tail!==null?(a=m.tail,m.rendering=a,m.tail=a.sibling,m.renderingStartTime=xn(),a.sibling=null,s=jt.current,ne(jt,f?s&1|2:s&1),a):(kt(a),null);case 22:case 23:return kr(a),Xp(),f=a.memoizedState!==null,s!==null?s.memoizedState!==null!==f&&(a.flags|=8192):f&&(a.flags|=8192),f?(c&536870912)!==0&&(a.flags&128)===0&&(kt(a),a.subtreeFlags&6&&(a.flags|=8192)):kt(a),c=a.updateQueue,c!==null&&ah(a,c.retryQueue),c=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),f=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),f!==c&&(a.flags|=2048),s!==null&&Z(ol),null;case 24:return c=null,s!==null&&(c=s.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),xr(Ut),kt(a),null;case 25:return null;case 30:return null}throw Error(n(156,a.tag))}function YR(s,a){switch(Mp(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return xr(Ut),Zt(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return mr(a),null;case 13:if(kr(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(n(340));bo()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return Z(jt),null;case 4:return Zt(),null;case 10:return xr(a.type),null;case 22:case 23:return kr(a),Xp(),s!==null&&Z(ol),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return xr(Ut),null;case 25:return null;default:return null}}function xv(s,a){switch(Mp(a),a.tag){case 3:xr(Ut),Zt();break;case 26:case 27:case 5:mr(a);break;case 4:Zt();break;case 13:kr(a);break;case 19:Z(jt);break;case 10:xr(a.type);break;case 22:case 23:kr(a),Xp(),s!==null&&Z(ol);break;case 24:xr(Ut)}}function Bo(s,a){try{var c=a.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var m=f.next;c=m;do{if((c.tag&s)===s){f=void 0;var y=c.create,S=c.inst;f=y(),S.destroy=f}c=c.next}while(c!==m)}}catch(k){ft(a,a.return,k)}}function os(s,a,c){try{var f=a.updateQueue,m=f!==null?f.lastEffect:null;if(m!==null){var y=m.next;f=y;do{if((f.tag&s)===s){var S=f.inst,k=S.destroy;if(k!==void 0){S.destroy=void 0,m=a;var N=c,X=k;try{X()}catch(ee){ft(m,N,ee)}}}f=f.next}while(f!==y)}}catch(ee){ft(a,a.return,ee)}}function wv(s){var a=s.updateQueue;if(a!==null){var c=s.stateNode;try{c1(a,c)}catch(f){ft(s,s.return,f)}}}function kv(s,a,c){c.props=cl(s.type,s.memoizedProps),c.state=s.memoizedState;try{c.componentWillUnmount()}catch(f){ft(s,a,f)}}function _o(s,a){try{var c=s.ref;if(c!==null){switch(s.tag){case 26:case 27:case 5:var f=s.stateNode;break;case 30:f=s.stateNode;break;default:f=s.stateNode}typeof c=="function"?s.refCleanup=c(f):c.current=f}}catch(m){ft(s,a,m)}}function Ri(s,a){var c=s.ref,f=s.refCleanup;if(c!==null)if(typeof f=="function")try{f()}catch(m){ft(s,a,m)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(m){ft(s,a,m)}else c.current=null}function Tv(s){var a=s.type,c=s.memoizedProps,f=s.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":c.autoFocus&&f.focus();break e;case"img":c.src?f.src=c.src:c.srcSet&&(f.srcset=c.srcSet)}}catch(m){ft(s,s.return,m)}}function bm(s,a,c){try{var f=s.stateNode;yN(f,s.type,c,a),f[Rt]=a}catch(m){ft(s,s.return,m)}}function Cv(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&gs(s.type)||s.tag===4}function vm(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Cv(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&gs(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Sm(s,a,c){var f=s.tag;if(f===5||f===6)s=s.stateNode,a?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(s,a):(a=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,a.appendChild(s),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=bh));else if(f!==4&&(f===27&&gs(s.type)&&(c=s.stateNode,a=null),s=s.child,s!==null))for(Sm(s,a,c),s=s.sibling;s!==null;)Sm(s,a,c),s=s.sibling}function oh(s,a,c){var f=s.tag;if(f===5||f===6)s=s.stateNode,a?c.insertBefore(s,a):c.appendChild(s);else if(f!==4&&(f===27&&gs(s.type)&&(c=s.stateNode),s=s.child,s!==null))for(oh(s,a,c),s=s.sibling;s!==null;)oh(s,a,c),s=s.sibling}function Av(s){var a=s.stateNode,c=s.memoizedProps;try{for(var f=s.type,m=a.attributes;m.length;)a.removeAttributeNode(m[0]);tn(a,f,c),a[zt]=s,a[Rt]=c}catch(y){ft(s,s.return,y)}}var Ar=!1,Mt=!1,xm=!1,Ev=typeof WeakSet=="function"?WeakSet:Set,Gt=null;function ZR(s,a){if(s=s.containerInfo,Gm=Ch,s=Lb(s),vp(s)){if("selectionStart"in s)var c={start:s.selectionStart,end:s.selectionEnd};else e:{c=(c=s.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var m=f.anchorOffset,y=f.focusNode;f=f.focusOffset;try{c.nodeType,y.nodeType}catch{c=null;break e}var S=0,k=-1,N=-1,X=0,ee=0,le=s,W=null;t:for(;;){for(var I;le!==c||m!==0&&le.nodeType!==3||(k=S+m),le!==y||f!==0&&le.nodeType!==3||(N=S+f),le.nodeType===3&&(S+=le.nodeValue.length),(I=le.firstChild)!==null;)W=le,le=I;for(;;){if(le===s)break t;if(W===c&&++X===m&&(k=S),W===y&&++ee===f&&(N=S),(I=le.nextSibling)!==null)break;le=W,W=le.parentNode}le=I}c=k===-1||N===-1?null:{start:k,end:N}}else c=null}c=c||{start:0,end:0}}else c=null;for(Wm={focusedElem:s,selectionRange:c},Ch=!1,Gt=a;Gt!==null;)if(a=Gt,s=a.child,(a.subtreeFlags&1024)!==0&&s!==null)s.return=a,Gt=s;else for(;Gt!==null;){switch(a=Gt,y=a.alternate,s=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&y!==null){s=void 0,c=a,m=y.memoizedProps,y=y.memoizedState,f=c.stateNode;try{var Pe=cl(c.type,m,c.elementType===c.type);s=f.getSnapshotBeforeUpdate(Pe,y),f.__reactInternalSnapshotBeforeUpdate=s}catch(Qe){ft(c,c.return,Qe)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,c=s.nodeType,c===9)Ym(s);else if(c===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Ym(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(n(163))}if(s=a.sibling,s!==null){s.return=a.return,Gt=s;break}Gt=a.return}}function Rv(s,a,c){var f=c.flags;switch(c.tag){case 0:case 11:case 15:us(s,c),f&4&&Bo(5,c);break;case 1:if(us(s,c),f&4)if(s=c.stateNode,a===null)try{s.componentDidMount()}catch(S){ft(c,c.return,S)}else{var m=cl(c.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(m,a,s.__reactInternalSnapshotBeforeUpdate)}catch(S){ft(c,c.return,S)}}f&64&&wv(c),f&512&&_o(c,c.return);break;case 3:if(us(s,c),f&64&&(s=c.updateQueue,s!==null)){if(a=null,c.child!==null)switch(c.child.tag){case 27:case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}try{c1(s,a)}catch(S){ft(c,c.return,S)}}break;case 27:a===null&&f&4&&Av(c);case 26:case 5:us(s,c),a===null&&f&4&&Tv(c),f&512&&_o(c,c.return);break;case 12:us(s,c);break;case 13:us(s,c),f&4&&Dv(s,c),f&64&&(s=c.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(c=lN.bind(null,c),kN(s,c))));break;case 22:if(f=c.memoizedState!==null||Ar,!f){a=a!==null&&a.memoizedState!==null||Mt,m=Ar;var y=Mt;Ar=f,(Mt=a)&&!y?cs(s,c,(c.subtreeFlags&8772)!==0):us(s,c),Ar=m,Mt=y}break;case 30:break;default:us(s,c)}}function Nv(s){var a=s.alternate;a!==null&&(s.alternate=null,Nv(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&Ys(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var St=null,Rn=!1;function Er(s,a,c){for(c=c.child;c!==null;)Mv(s,a,c),c=c.sibling}function Mv(s,a,c){if(Kt&&typeof Kt.onCommitFiberUnmount=="function")try{Kt.onCommitFiberUnmount(Kr,c)}catch{}switch(c.tag){case 26:Mt||Ri(c,a),Er(s,a,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Mt||Ri(c,a);var f=St,m=Rn;gs(c.type)&&(St=c.stateNode,Rn=!1),Er(s,a,c),Go(c.stateNode),St=f,Rn=m;break;case 5:Mt||Ri(c,a);case 6:if(f=St,m=Rn,St=null,Er(s,a,c),St=f,Rn=m,St!==null)if(Rn)try{(St.nodeType===9?St.body:St.nodeName==="HTML"?St.ownerDocument.body:St).removeChild(c.stateNode)}catch(y){ft(c,a,y)}else try{St.removeChild(c.stateNode)}catch(y){ft(c,a,y)}break;case 18:St!==null&&(Rn?(s=St,bS(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,c.stateNode),eu(s)):bS(St,c.stateNode));break;case 4:f=St,m=Rn,St=c.stateNode.containerInfo,Rn=!0,Er(s,a,c),St=f,Rn=m;break;case 0:case 11:case 14:case 15:Mt||os(2,c,a),Mt||os(4,c,a),Er(s,a,c);break;case 1:Mt||(Ri(c,a),f=c.stateNode,typeof f.componentWillUnmount=="function"&&kv(c,a,f)),Er(s,a,c);break;case 21:Er(s,a,c);break;case 22:Mt=(f=Mt)||c.memoizedState!==null,Er(s,a,c),Mt=f;break;default:Er(s,a,c)}}function Dv(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{eu(s)}catch(c){ft(a,a.return,c)}}function KR(s){switch(s.tag){case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new Ev),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new Ev),a;default:throw Error(n(435,s.tag))}}function wm(s,a){var c=KR(s);a.forEach(function(f){var m=aN.bind(null,s,f);c.has(f)||(c.add(f),f.then(m,m))})}function Un(s,a){var c=a.deletions;if(c!==null)for(var f=0;f<c.length;f++){var m=c[f],y=s,S=a,k=S;e:for(;k!==null;){switch(k.tag){case 27:if(gs(k.type)){St=k.stateNode,Rn=!1;break e}break;case 5:St=k.stateNode,Rn=!1;break e;case 3:case 4:St=k.stateNode.containerInfo,Rn=!0;break e}k=k.return}if(St===null)throw Error(n(160));Mv(y,S,m),St=null,Rn=!1,y=m.alternate,y!==null&&(y.return=null),m.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)Qv(a,s),a=a.sibling}var yi=null;function Qv(s,a){var c=s.alternate,f=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Un(a,s),jn(s),f&4&&(os(3,s,s.return),Bo(3,s),os(5,s,s.return));break;case 1:Un(a,s),jn(s),f&512&&(Mt||c===null||Ri(c,c.return)),f&64&&Ar&&(s=s.updateQueue,s!==null&&(f=s.callbacks,f!==null&&(c=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=c===null?f:c.concat(f))));break;case 26:var m=yi;if(Un(a,s),jn(s),f&512&&(Mt||c===null||Ri(c,c.return)),f&4){var y=c!==null?c.memoizedState:null;if(f=s.memoizedState,c===null)if(f===null)if(s.stateNode===null){e:{f=s.type,c=s.memoizedProps,m=m.ownerDocument||m;t:switch(f){case"title":y=m.getElementsByTagName("title")[0],(!y||y[Ll]||y[zt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=m.createElement(f),m.head.insertBefore(y,m.querySelector("head > title"))),tn(y,f,c),y[zt]=s,Vt(y),f=y;break e;case"link":var S=AS("link","href",m).get(f+(c.href||""));if(S){for(var k=0;k<S.length;k++)if(y=S[k],y.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&y.getAttribute("rel")===(c.rel==null?null:c.rel)&&y.getAttribute("title")===(c.title==null?null:c.title)&&y.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){S.splice(k,1);break t}}y=m.createElement(f),tn(y,f,c),m.head.appendChild(y);break;case"meta":if(S=AS("meta","content",m).get(f+(c.content||""))){for(k=0;k<S.length;k++)if(y=S[k],y.getAttribute("content")===(c.content==null?null:""+c.content)&&y.getAttribute("name")===(c.name==null?null:c.name)&&y.getAttribute("property")===(c.property==null?null:c.property)&&y.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&y.getAttribute("charset")===(c.charSet==null?null:c.charSet)){S.splice(k,1);break t}}y=m.createElement(f),tn(y,f,c),m.head.appendChild(y);break;default:throw Error(n(468,f))}y[zt]=s,Vt(y),f=y}s.stateNode=f}else ES(m,s.type,s.stateNode);else s.stateNode=CS(m,f,s.memoizedProps);else y!==f?(y===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):y.count--,f===null?ES(m,s.type,s.stateNode):CS(m,f,s.memoizedProps)):f===null&&s.stateNode!==null&&bm(s,s.memoizedProps,c.memoizedProps)}break;case 27:Un(a,s),jn(s),f&512&&(Mt||c===null||Ri(c,c.return)),c!==null&&f&4&&bm(s,s.memoizedProps,c.memoizedProps);break;case 5:if(Un(a,s),jn(s),f&512&&(Mt||c===null||Ri(c,c.return)),s.flags&32){m=s.stateNode;try{Gl(m,"")}catch(I){ft(s,s.return,I)}}f&4&&s.stateNode!=null&&(m=s.memoizedProps,bm(s,m,c!==null?c.memoizedProps:m)),f&1024&&(xm=!0);break;case 6:if(Un(a,s),jn(s),f&4){if(s.stateNode===null)throw Error(n(162));f=s.memoizedProps,c=s.stateNode;try{c.nodeValue=f}catch(I){ft(s,s.return,I)}}break;case 3:if(wh=null,m=yi,yi=Sh(a.containerInfo),Un(a,s),yi=m,jn(s),f&4&&c!==null&&c.memoizedState.isDehydrated)try{eu(a.containerInfo)}catch(I){ft(s,s.return,I)}xm&&(xm=!1,zv(s));break;case 4:f=yi,yi=Sh(s.stateNode.containerInfo),Un(a,s),jn(s),yi=f;break;case 12:Un(a,s),jn(s);break;case 13:Un(a,s),jn(s),s.child.flags&8192&&s.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Rm=xn()),f&4&&(f=s.updateQueue,f!==null&&(s.updateQueue=null,wm(s,f)));break;case 22:m=s.memoizedState!==null;var N=c!==null&&c.memoizedState!==null,X=Ar,ee=Mt;if(Ar=X||m,Mt=ee||N,Un(a,s),Mt=ee,Ar=X,jn(s),f&8192)e:for(a=s.stateNode,a._visibility=m?a._visibility&-2:a._visibility|1,m&&(c===null||N||Ar||Mt||hl(s)),c=null,a=s;;){if(a.tag===5||a.tag===26){if(c===null){N=c=a;try{if(y=N.stateNode,m)S=y.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{k=N.stateNode;var le=N.memoizedProps.style,W=le!=null&&le.hasOwnProperty("display")?le.display:null;k.style.display=W==null||typeof W=="boolean"?"":(""+W).trim()}}catch(I){ft(N,N.return,I)}}}else if(a.tag===6){if(c===null){N=a;try{N.stateNode.nodeValue=m?"":N.memoizedProps}catch(I){ft(N,N.return,I)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;c===a&&(c=null),a=a.return}c===a&&(c=null),a.sibling.return=a.return,a=a.sibling}f&4&&(f=s.updateQueue,f!==null&&(c=f.retryQueue,c!==null&&(f.retryQueue=null,wm(s,c))));break;case 19:Un(a,s),jn(s),f&4&&(f=s.updateQueue,f!==null&&(s.updateQueue=null,wm(s,f)));break;case 30:break;case 21:break;default:Un(a,s),jn(s)}}function jn(s){var a=s.flags;if(a&2){try{for(var c,f=s.return;f!==null;){if(Cv(f)){c=f;break}f=f.return}if(c==null)throw Error(n(160));switch(c.tag){case 27:var m=c.stateNode,y=vm(s);oh(s,y,m);break;case 5:var S=c.stateNode;c.flags&32&&(Gl(S,""),c.flags&=-33);var k=vm(s);oh(s,k,S);break;case 3:case 4:var N=c.stateNode.containerInfo,X=vm(s);Sm(s,X,N);break;default:throw Error(n(161))}}catch(ee){ft(s,s.return,ee)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function zv(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;zv(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function us(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Rv(s,a.alternate,a),a=a.sibling}function hl(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:os(4,a,a.return),hl(a);break;case 1:Ri(a,a.return);var c=a.stateNode;typeof c.componentWillUnmount=="function"&&kv(a,a.return,c),hl(a);break;case 27:Go(a.stateNode);case 26:case 5:Ri(a,a.return),hl(a);break;case 22:a.memoizedState===null&&hl(a);break;case 30:hl(a);break;default:hl(a)}s=s.sibling}}function cs(s,a,c){for(c=c&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var f=a.alternate,m=s,y=a,S=y.flags;switch(y.tag){case 0:case 11:case 15:cs(m,y,c),Bo(4,y);break;case 1:if(cs(m,y,c),f=y,m=f.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(X){ft(f,f.return,X)}if(f=y,m=f.updateQueue,m!==null){var k=f.stateNode;try{var N=m.shared.hiddenCallbacks;if(N!==null)for(m.shared.hiddenCallbacks=null,m=0;m<N.length;m++)u1(N[m],k)}catch(X){ft(f,f.return,X)}}c&&S&64&&wv(y),_o(y,y.return);break;case 27:Av(y);case 26:case 5:cs(m,y,c),c&&f===null&&S&4&&Tv(y),_o(y,y.return);break;case 12:cs(m,y,c);break;case 13:cs(m,y,c),c&&S&4&&Dv(m,y);break;case 22:y.memoizedState===null&&cs(m,y,c),_o(y,y.return);break;case 30:break;default:cs(m,y,c)}a=a.sibling}}function km(s,a){var c=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==c&&(s!=null&&s.refCount++,c!=null&&xo(c))}function Tm(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&xo(s))}function Ni(s,a,c,f){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Pv(s,a,c,f),a=a.sibling}function Pv(s,a,c,f){var m=a.flags;switch(a.tag){case 0:case 11:case 15:Ni(s,a,c,f),m&2048&&Bo(9,a);break;case 1:Ni(s,a,c,f);break;case 3:Ni(s,a,c,f),m&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&xo(s)));break;case 12:if(m&2048){Ni(s,a,c,f),s=a.stateNode;try{var y=a.memoizedProps,S=y.id,k=y.onPostCommit;typeof k=="function"&&k(S,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(N){ft(a,a.return,N)}}else Ni(s,a,c,f);break;case 13:Ni(s,a,c,f);break;case 23:break;case 22:y=a.stateNode,S=a.alternate,a.memoizedState!==null?y._visibility&2?Ni(s,a,c,f):$o(s,a):y._visibility&2?Ni(s,a,c,f):(y._visibility|=2,ha(s,a,c,f,(a.subtreeFlags&10256)!==0)),m&2048&&km(S,a);break;case 24:Ni(s,a,c,f),m&2048&&Tm(a.alternate,a);break;default:Ni(s,a,c,f)}}function ha(s,a,c,f,m){for(m=m&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var y=s,S=a,k=c,N=f,X=S.flags;switch(S.tag){case 0:case 11:case 15:ha(y,S,k,N,m),Bo(8,S);break;case 23:break;case 22:var ee=S.stateNode;S.memoizedState!==null?ee._visibility&2?ha(y,S,k,N,m):$o(y,S):(ee._visibility|=2,ha(y,S,k,N,m)),m&&X&2048&&km(S.alternate,S);break;case 24:ha(y,S,k,N,m),m&&X&2048&&Tm(S.alternate,S);break;default:ha(y,S,k,N,m)}a=a.sibling}}function $o(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var c=s,f=a,m=f.flags;switch(f.tag){case 22:$o(c,f),m&2048&&km(f.alternate,f);break;case 24:$o(c,f),m&2048&&Tm(f.alternate,f);break;default:$o(c,f)}a=a.sibling}}var Lo=8192;function fa(s){if(s.subtreeFlags&Lo)for(s=s.child;s!==null;)Bv(s),s=s.sibling}function Bv(s){switch(s.tag){case 26:fa(s),s.flags&Lo&&s.memoizedState!==null&&_N(yi,s.memoizedState,s.memoizedProps);break;case 5:fa(s);break;case 3:case 4:var a=yi;yi=Sh(s.stateNode.containerInfo),fa(s),yi=a;break;case 22:s.memoizedState===null&&(a=s.alternate,a!==null&&a.memoizedState!==null?(a=Lo,Lo=16777216,fa(s),Lo=a):fa(s));break;default:fa(s)}}function _v(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function qo(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var f=a[c];Gt=f,Lv(f,s)}_v(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)$v(s),s=s.sibling}function $v(s){switch(s.tag){case 0:case 11:case 15:qo(s),s.flags&2048&&os(9,s,s.return);break;case 3:qo(s);break;case 12:qo(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,uh(s)):qo(s);break;default:qo(s)}}function uh(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var f=a[c];Gt=f,Lv(f,s)}_v(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:os(8,a,a.return),uh(a);break;case 22:c=a.stateNode,c._visibility&2&&(c._visibility&=-3,uh(a));break;default:uh(a)}s=s.sibling}}function Lv(s,a){for(;Gt!==null;){var c=Gt;switch(c.tag){case 0:case 11:case 15:os(8,c,a);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var f=c.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:xo(c.memoizedState.cache)}if(f=c.child,f!==null)f.return=c,Gt=f;else e:for(c=s;Gt!==null;){f=Gt;var m=f.sibling,y=f.return;if(Nv(f),f===c){Gt=null;break e}if(m!==null){m.return=y,Gt=m;break e}Gt=y}}}var JR={getCacheForType:function(s){var a=fn(Ut),c=a.data.get(s);return c===void 0&&(c=s(),a.data.set(s,c)),c}},eN=typeof WeakMap=="function"?WeakMap:Map,at=0,yt=null,Ge=null,Ye=0,ot=0,Hn=null,hs=!1,da=!1,Cm=!1,Rr=0,At=0,fs=0,fl=0,Am=0,li=0,pa=0,Uo=null,Nn=null,Em=!1,Rm=0,ch=1/0,hh=null,ds=null,en=0,ps=null,ma=null,ga=0,Nm=0,Mm=null,qv=null,jo=0,Dm=null;function Vn(){if((at&2)!==0&&Ye!==0)return Ye&-Ye;if(j.T!==null){var s=ia;return s!==0?s:Lm()}return Fe()}function Uv(){li===0&&(li=(Ye&536870912)===0||rt?me():536870912);var s=si.current;return s!==null&&(s.flags|=32),li}function Xn(s,a,c){(s===yt&&(ot===2||ot===9)||s.cancelPendingCommit!==null)&&(ya(s,0),ms(s,Ye,li,!1)),ke(s,c),((at&2)===0||s!==yt)&&(s===yt&&((at&2)===0&&(fl|=c),At===4&&ms(s,Ye,li,!1)),Mi(s))}function jv(s,a,c){if((at&6)!==0)throw Error(n(327));var f=!c&&(a&124)===0&&(a&s.expiredLanes)===0||ue(s,a),m=f?iN(s,a):Pm(s,a,!0),y=f;do{if(m===0){da&&!f&&ms(s,a,0,!1);break}else{if(c=s.current.alternate,y&&!tN(c)){m=Pm(s,a,!1),y=!1;continue}if(m===2){if(y=a,s.errorRecoveryDisabledLanes&y)var S=0;else S=s.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){a=S;e:{var k=s;m=Uo;var N=k.current.memoizedState.isDehydrated;if(N&&(ya(k,S).flags|=256),S=Pm(k,S,!1),S!==2){if(Cm&&!N){k.errorRecoveryDisabledLanes|=y,fl|=y,m=4;break e}y=Nn,Nn=m,y!==null&&(Nn===null?Nn=y:Nn.push.apply(Nn,y))}m=S}if(y=!1,m!==2)continue}}if(m===1){ya(s,0),ms(s,a,0,!0);break}e:{switch(f=s,y=m,y){case 0:case 1:throw Error(n(345));case 4:if((a&4194048)!==a)break;case 6:ms(f,a,li,!hs);break e;case 2:Nn=null;break;case 3:case 5:break;default:throw Error(n(329))}if((a&62914560)===a&&(m=Rm+300-xn(),10<m)){if(ms(f,a,li,!hs),J(f,0,!0)!==0)break e;f.timeoutHandle=yS(Hv.bind(null,f,c,Nn,hh,Em,a,li,fl,pa,hs,y,2,-0,0),m);break e}Hv(f,c,Nn,hh,Em,a,li,fl,pa,hs,y,0,-0,0)}}break}while(!0);Mi(s)}function Hv(s,a,c,f,m,y,S,k,N,X,ee,le,W,I){if(s.timeoutHandle=-1,le=a.subtreeFlags,(le&8192||(le&16785408)===16785408)&&(Fo={stylesheets:null,count:0,unsuspend:BN},Bv(a),le=$N(),le!==null)){s.cancelPendingCommit=le(Yv.bind(null,s,a,y,c,f,m,S,k,N,ee,1,W,I)),ms(s,y,S,!X);return}Yv(s,a,y,c,f,m,S,k,N)}function tN(s){for(var a=s;;){var c=a.tag;if((c===0||c===11||c===15)&&a.flags&16384&&(c=a.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var f=0;f<c.length;f++){var m=c[f],y=m.getSnapshot;m=m.value;try{if(!Ln(y(),m))return!1}catch{return!1}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function ms(s,a,c,f){a&=~Am,a&=~fl,s.suspendedLanes|=a,s.pingedLanes&=~a,f&&(s.warmLanes|=a),f=s.expirationTimes;for(var m=a;0<m;){var y=31-hn(m),S=1<<y;f[y]=-1,m&=~S}c!==0&&Ue(s,c,a)}function fh(){return(at&6)===0?(Ho(0),!1):!0}function Qm(){if(Ge!==null){if(ot===0)var s=Ge.return;else s=Ge,Sr=ll=null,Yp(s),ua=null,Qo=0,s=Ge;for(;s!==null;)xv(s.alternate,s),s=s.return;Ge=null}}function ya(s,a){var c=s.timeoutHandle;c!==-1&&(s.timeoutHandle=-1,bN(c)),c=s.cancelPendingCommit,c!==null&&(s.cancelPendingCommit=null,c()),Qm(),yt=s,Ge=c=Or(s.current,null),Ye=a,ot=0,Hn=null,hs=!1,da=ue(s,a),Cm=!1,pa=li=Am=fl=fs=At=0,Nn=Uo=null,Em=!1,(a&8)!==0&&(a|=a&32);var f=s.entangledLanes;if(f!==0)for(s=s.entanglements,f&=a;0<f;){var m=31-hn(f),y=1<<m;a|=s[m],f&=~y}return Rr=a,zc(),c}function Vv(s,a){Ve=null,j.H=Jc,a===ko||a===Hc?(a=a1(),ot=3):a===r1?(a=a1(),ot=4):ot=a===ov?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Hn=a,Ge===null&&(At=1,rh(s,ti(a,s.current)))}function Xv(){var s=j.H;return j.H=Jc,s===null?Jc:s}function Gv(){var s=j.A;return j.A=JR,s}function zm(){At=4,hs||(Ye&4194048)!==Ye&&si.current!==null||(da=!0),(fs&134217727)===0&&(fl&134217727)===0||yt===null||ms(yt,Ye,li,!1)}function Pm(s,a,c){var f=at;at|=2;var m=Xv(),y=Gv();(yt!==s||Ye!==a)&&(hh=null,ya(s,a)),a=!1;var S=At;e:do try{if(ot!==0&&Ge!==null){var k=Ge,N=Hn;switch(ot){case 8:Qm(),S=6;break e;case 3:case 2:case 9:case 6:si.current===null&&(a=!0);var X=ot;if(ot=0,Hn=null,Oa(s,k,N,X),c&&da){S=0;break e}break;default:X=ot,ot=0,Hn=null,Oa(s,k,N,X)}}nN(),S=At;break}catch(ee){Vv(s,ee)}while(!0);return a&&s.shellSuspendCounter++,Sr=ll=null,at=f,j.H=m,j.A=y,Ge===null&&(yt=null,Ye=0,zc()),S}function nN(){for(;Ge!==null;)Wv(Ge)}function iN(s,a){var c=at;at|=2;var f=Xv(),m=Gv();yt!==s||Ye!==a?(hh=null,ch=xn()+500,ya(s,a)):da=ue(s,a);e:do try{if(ot!==0&&Ge!==null){a=Ge;var y=Hn;t:switch(ot){case 1:ot=0,Hn=null,Oa(s,a,y,1);break;case 2:case 9:if(s1(y)){ot=0,Hn=null,Iv(a);break}a=function(){ot!==2&&ot!==9||yt!==s||(ot=7),Mi(s)},y.then(a,a);break e;case 3:ot=7;break e;case 4:ot=5;break e;case 7:s1(y)?(ot=0,Hn=null,Iv(a)):(ot=0,Hn=null,Oa(s,a,y,7));break;case 5:var S=null;switch(Ge.tag){case 26:S=Ge.memoizedState;case 5:case 27:var k=Ge;if(!S||RS(S)){ot=0,Hn=null;var N=k.sibling;if(N!==null)Ge=N;else{var X=k.return;X!==null?(Ge=X,dh(X)):Ge=null}break t}}ot=0,Hn=null,Oa(s,a,y,5);break;case 6:ot=0,Hn=null,Oa(s,a,y,6);break;case 8:Qm(),At=6;break e;default:throw Error(n(462))}}rN();break}catch(ee){Vv(s,ee)}while(!0);return Sr=ll=null,j.H=f,j.A=m,at=c,Ge!==null?0:(yt=null,Ye=0,zc(),At)}function rN(){for(;Ge!==null&&!zl();)Wv(Ge)}function Wv(s){var a=vv(s.alternate,s,Rr);s.memoizedProps=s.pendingProps,a===null?dh(s):Ge=a}function Iv(s){var a=s,c=a.alternate;switch(a.tag){case 15:case 0:a=pv(c,a,a.pendingProps,a.type,void 0,Ye);break;case 11:a=pv(c,a,a.pendingProps,a.type.render,a.ref,Ye);break;case 5:Yp(a);default:xv(c,a),a=Ge=Fb(a,Rr),a=vv(c,a,Rr)}s.memoizedProps=s.pendingProps,a===null?dh(s):Ge=a}function Oa(s,a,c,f){Sr=ll=null,Yp(a),ua=null,Qo=0;var m=a.return;try{if(WR(s,m,a,c,Ye)){At=1,rh(s,ti(c,s.current)),Ge=null;return}}catch(y){if(m!==null)throw Ge=m,y;At=1,rh(s,ti(c,s.current)),Ge=null;return}a.flags&32768?(rt||f===1?s=!0:da||(Ye&536870912)!==0?s=!1:(hs=s=!0,(f===2||f===9||f===3||f===6)&&(f=si.current,f!==null&&f.tag===13&&(f.flags|=16384))),Fv(a,s)):dh(a)}function dh(s){var a=s;do{if((a.flags&32768)!==0){Fv(a,hs);return}s=a.return;var c=FR(a.alternate,a,Rr);if(c!==null){Ge=c;return}if(a=a.sibling,a!==null){Ge=a;return}Ge=a=s}while(a!==null);At===0&&(At=5)}function Fv(s,a){do{var c=YR(s.alternate,s);if(c!==null){c.flags&=32767,Ge=c;return}if(c=s.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!a&&(s=s.sibling,s!==null)){Ge=s;return}Ge=s=c}while(s!==null);At=6,Ge=null}function Yv(s,a,c,f,m,y,S,k,N){s.cancelPendingCommit=null;do ph();while(en!==0);if((at&6)!==0)throw Error(n(327));if(a!==null){if(a===s.current)throw Error(n(177));if(y=a.lanes|a.childLanes,y|=Tp,_e(s,c,y,S,k,N),s===yt&&(Ge=yt=null,Ye=0),ma=a,ps=s,ga=c,Nm=y,Mm=m,qv=f,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,oN(Fs,function(){return tS(),null})):(s.callbackNode=null,s.callbackPriority=0),f=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||f){f=j.T,j.T=null,m=se.p,se.p=2,S=at,at|=4;try{ZR(s,a,c)}finally{at=S,se.p=m,j.T=f}}en=1,Zv(),Kv(),Jv()}}function Zv(){if(en===1){en=0;var s=ps,a=ma,c=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||c){c=j.T,j.T=null;var f=se.p;se.p=2;var m=at;at|=4;try{Qv(a,s);var y=Wm,S=Lb(s.containerInfo),k=y.focusedElem,N=y.selectionRange;if(S!==k&&k&&k.ownerDocument&&$b(k.ownerDocument.documentElement,k)){if(N!==null&&vp(k)){var X=N.start,ee=N.end;if(ee===void 0&&(ee=X),"selectionStart"in k)k.selectionStart=X,k.selectionEnd=Math.min(ee,k.value.length);else{var le=k.ownerDocument||document,W=le&&le.defaultView||window;if(W.getSelection){var I=W.getSelection(),Pe=k.textContent.length,Qe=Math.min(N.start,Pe),ht=N.end===void 0?Qe:Math.min(N.end,Pe);!I.extend&&Qe>ht&&(S=ht,ht=Qe,Qe=S);var q=_b(k,Qe),z=_b(k,ht);if(q&&z&&(I.rangeCount!==1||I.anchorNode!==q.node||I.anchorOffset!==q.offset||I.focusNode!==z.node||I.focusOffset!==z.offset)){var V=le.createRange();V.setStart(q.node,q.offset),I.removeAllRanges(),Qe>ht?(I.addRange(V),I.extend(z.node,z.offset)):(V.setEnd(z.node,z.offset),I.addRange(V))}}}}for(le=[],I=k;I=I.parentNode;)I.nodeType===1&&le.push({element:I,left:I.scrollLeft,top:I.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<le.length;k++){var ie=le[k];ie.element.scrollLeft=ie.left,ie.element.scrollTop=ie.top}}Ch=!!Gm,Wm=Gm=null}finally{at=m,se.p=f,j.T=c}}s.current=a,en=2}}function Kv(){if(en===2){en=0;var s=ps,a=ma,c=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||c){c=j.T,j.T=null;var f=se.p;se.p=2;var m=at;at|=4;try{Rv(s,a.alternate,a)}finally{at=m,se.p=f,j.T=c}}en=3}}function Jv(){if(en===4||en===3){en=0,Zr();var s=ps,a=ma,c=ga,f=qv;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?en=5:(en=0,ma=ps=null,eS(s,s.pendingLanes));var m=s.pendingLanes;if(m===0&&(ds=null),it(c),a=a.stateNode,Kt&&typeof Kt.onCommitFiberRoot=="function")try{Kt.onCommitFiberRoot(Kr,a,void 0,(a.current.flags&128)===128)}catch{}if(f!==null){a=j.T,m=se.p,se.p=2,j.T=null;try{for(var y=s.onRecoverableError,S=0;S<f.length;S++){var k=f[S];y(k.value,{componentStack:k.stack})}}finally{j.T=a,se.p=m}}(ga&3)!==0&&ph(),Mi(s),m=s.pendingLanes,(c&4194090)!==0&&(m&42)!==0?s===Dm?jo++:(jo=0,Dm=s):jo=0,Ho(0)}}function eS(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,xo(a)))}function ph(s){return Zv(),Kv(),Jv(),tS()}function tS(){if(en!==5)return!1;var s=ps,a=Nm;Nm=0;var c=it(ga),f=j.T,m=se.p;try{se.p=32>c?32:c,j.T=null,c=Mm,Mm=null;var y=ps,S=ga;if(en=0,ma=ps=null,ga=0,(at&6)!==0)throw Error(n(331));var k=at;if(at|=4,$v(y.current),Pv(y,y.current,S,c),at=k,Ho(0,!1),Kt&&typeof Kt.onPostCommitFiberRoot=="function")try{Kt.onPostCommitFiberRoot(Kr,y)}catch{}return!0}finally{se.p=m,j.T=f,eS(s,a)}}function nS(s,a,c){a=ti(c,a),a=cm(s.stateNode,a,2),s=rs(s,a,2),s!==null&&(ke(s,2),Mi(s))}function ft(s,a,c){if(s.tag===3)nS(s,s,c);else for(;a!==null;){if(a.tag===3){nS(a,s,c);break}else if(a.tag===1){var f=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(ds===null||!ds.has(f))){s=ti(c,s),c=lv(2),f=rs(a,c,2),f!==null&&(av(c,f,a,s),ke(f,2),Mi(f));break}}a=a.return}}function Bm(s,a,c){var f=s.pingCache;if(f===null){f=s.pingCache=new eN;var m=new Set;f.set(a,m)}else m=f.get(a),m===void 0&&(m=new Set,f.set(a,m));m.has(c)||(Cm=!0,m.add(c),s=sN.bind(null,s,a,c),a.then(s,s))}function sN(s,a,c){var f=s.pingCache;f!==null&&f.delete(a),s.pingedLanes|=s.suspendedLanes&c,s.warmLanes&=~c,yt===s&&(Ye&c)===c&&(At===4||At===3&&(Ye&62914560)===Ye&&300>xn()-Rm?(at&2)===0&&ya(s,0):Am|=c,pa===Ye&&(pa=0)),Mi(s)}function iS(s,a){a===0&&(a=Ee()),s=Jl(s,a),s!==null&&(ke(s,a),Mi(s))}function lN(s){var a=s.memoizedState,c=0;a!==null&&(c=a.retryLane),iS(s,c)}function aN(s,a){var c=0;switch(s.tag){case 13:var f=s.stateNode,m=s.memoizedState;m!==null&&(c=m.retryLane);break;case 19:f=s.stateNode;break;case 22:f=s.stateNode._retryCache;break;default:throw Error(n(314))}f!==null&&f.delete(a),iS(s,c)}function oN(s,a){return Ci(s,a)}var mh=null,ba=null,_m=!1,gh=!1,$m=!1,dl=0;function Mi(s){s!==ba&&s.next===null&&(ba===null?mh=ba=s:ba=ba.next=s),gh=!0,_m||(_m=!0,cN())}function Ho(s,a){if(!$m&&gh){$m=!0;do for(var c=!1,f=mh;f!==null;){if(s!==0){var m=f.pendingLanes;if(m===0)var y=0;else{var S=f.suspendedLanes,k=f.pingedLanes;y=(1<<31-hn(42|s)+1)-1,y&=m&~(S&~k),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(c=!0,aS(f,y))}else y=Ye,y=J(f,f===yt?y:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(y&3)===0||ue(f,y)||(c=!0,aS(f,y));f=f.next}while(c);$m=!1}}function uN(){rS()}function rS(){gh=_m=!1;var s=0;dl!==0&&(ON()&&(s=dl),dl=0);for(var a=xn(),c=null,f=mh;f!==null;){var m=f.next,y=sS(f,a);y===0?(f.next=null,c===null?mh=m:c.next=m,m===null&&(ba=c)):(c=f,(s!==0||(y&3)!==0)&&(gh=!0)),f=m}Ho(s)}function sS(s,a){for(var c=s.suspendedLanes,f=s.pingedLanes,m=s.expirationTimes,y=s.pendingLanes&-62914561;0<y;){var S=31-hn(y),k=1<<S,N=m[S];N===-1?((k&c)===0||(k&f)!==0)&&(m[S]=oe(k,a)):N<=a&&(s.expiredLanes|=k),y&=~k}if(a=yt,c=Ye,c=J(s,s===a?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),f=s.callbackNode,c===0||s===a&&(ot===2||ot===9)||s.cancelPendingCommit!==null)return f!==null&&f!==null&&Yr(f),s.callbackNode=null,s.callbackPriority=0;if((c&3)===0||ue(s,c)){if(a=c&-c,a===s.callbackPriority)return a;switch(f!==null&&Yr(f),it(c)){case 2:case 8:c=ro;break;case 32:c=Fs;break;case 268435456:c=so;break;default:c=Fs}return f=lS.bind(null,s),c=Ci(c,f),s.callbackPriority=a,s.callbackNode=c,a}return f!==null&&f!==null&&Yr(f),s.callbackPriority=2,s.callbackNode=null,2}function lS(s,a){if(en!==0&&en!==5)return s.callbackNode=null,s.callbackPriority=0,null;var c=s.callbackNode;if(ph()&&s.callbackNode!==c)return null;var f=Ye;return f=J(s,s===yt?f:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),f===0?null:(jv(s,f,a),sS(s,xn()),s.callbackNode!=null&&s.callbackNode===c?lS.bind(null,s):null)}function aS(s,a){if(ph())return null;jv(s,a,!0)}function cN(){vN(function(){(at&6)!==0?Ci(Is,uN):rS()})}function Lm(){return dl===0&&(dl=me()),dl}function oS(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Ac(""+s)}function uS(s,a){var c=a.ownerDocument.createElement("input");return c.name=a.name,c.value=a.value,s.id&&c.setAttribute("form",s.id),a.parentNode.insertBefore(c,a),s=new FormData(s),c.parentNode.removeChild(c),s}function hN(s,a,c,f,m){if(a==="submit"&&c&&c.stateNode===m){var y=oS((m[Rt]||null).action),S=f.submitter;S&&(a=(a=S[Rt]||null)?oS(a.formAction):S.getAttribute("formAction"),a!==null&&(y=a,S=null));var k=new Mc("action","action",null,f,m);s.push({event:k,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(dl!==0){var N=S?uS(m,S):new FormData(m);sm(c,{pending:!0,data:N,method:m.method,action:y},null,N)}}else typeof y=="function"&&(k.preventDefault(),N=S?uS(m,S):new FormData(m),sm(c,{pending:!0,data:N,method:m.method,action:y},y,N))},currentTarget:m}]})}}for(var qm=0;qm<kp.length;qm++){var Um=kp[qm],fN=Um.toLowerCase(),dN=Um[0].toUpperCase()+Um.slice(1);gi(fN,"on"+dN)}gi(jb,"onAnimationEnd"),gi(Hb,"onAnimationIteration"),gi(Vb,"onAnimationStart"),gi("dblclick","onDoubleClick"),gi("focusin","onFocus"),gi("focusout","onBlur"),gi(NR,"onTransitionRun"),gi(MR,"onTransitionStart"),gi(DR,"onTransitionCancel"),gi(Xb,"onTransitionEnd"),Hl("onMouseEnter",["mouseout","mouseover"]),Hl("onMouseLeave",["mouseout","mouseover"]),Hl("onPointerEnter",["pointerout","pointerover"]),Hl("onPointerLeave",["pointerout","pointerover"]),Zs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Zs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Zs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Zs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Zs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Zs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vo));function cS(s,a){a=(a&4)!==0;for(var c=0;c<s.length;c++){var f=s[c],m=f.event;f=f.listeners;e:{var y=void 0;if(a)for(var S=f.length-1;0<=S;S--){var k=f[S],N=k.instance,X=k.currentTarget;if(k=k.listener,N!==y&&m.isPropagationStopped())break e;y=k,m.currentTarget=X;try{y(m)}catch(ee){ih(ee)}m.currentTarget=null,y=N}else for(S=0;S<f.length;S++){if(k=f[S],N=k.instance,X=k.currentTarget,k=k.listener,N!==y&&m.isPropagationStopped())break e;y=k,m.currentTarget=X;try{y(m)}catch(ee){ih(ee)}m.currentTarget=null,y=N}}}}function We(s,a){var c=a[Jr];c===void 0&&(c=a[Jr]=new Set);var f=s+"__bubble";c.has(f)||(hS(a,s,2,!1),c.add(f))}function jm(s,a,c){var f=0;a&&(f|=4),hS(c,s,f,a)}var yh="_reactListening"+Math.random().toString(36).slice(2);function Hm(s){if(!s[yh]){s[yh]=!0,rb.forEach(function(c){c!=="selectionchange"&&(pN.has(c)||jm(c,!1,s),jm(c,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[yh]||(a[yh]=!0,jm("selectionchange",!1,a))}}function hS(s,a,c,f){switch(PS(a)){case 2:var m=UN;break;case 8:m=jN;break;default:m=ig}c=m.bind(null,a,c,s),m=void 0,!hp||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(m=!0),f?m!==void 0?s.addEventListener(a,c,{capture:!0,passive:m}):s.addEventListener(a,c,!0):m!==void 0?s.addEventListener(a,c,{passive:m}):s.addEventListener(a,c,!1)}function Vm(s,a,c,f,m){var y=f;if((a&1)===0&&(a&2)===0&&f!==null)e:for(;;){if(f===null)return;var S=f.tag;if(S===3||S===4){var k=f.stateNode.containerInfo;if(k===m)break;if(S===4)for(S=f.return;S!==null;){var N=S.tag;if((N===3||N===4)&&S.stateNode.containerInfo===m)return;S=S.return}for(;k!==null;){if(S=ql(k),S===null)return;if(N=S.tag,N===5||N===6||N===26||N===27){f=y=S;continue e}k=k.parentNode}}f=f.return}Ob(function(){var X=y,ee=up(c),le=[];e:{var W=Gb.get(s);if(W!==void 0){var I=Mc,Pe=s;switch(s){case"keypress":if(Rc(c)===0)break e;case"keydown":case"keyup":I=oR;break;case"focusin":Pe="focus",I=mp;break;case"focusout":Pe="blur",I=mp;break;case"beforeblur":case"afterblur":I=mp;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=Sb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=YE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=hR;break;case jb:case Hb:case Vb:I=JE;break;case Xb:I=dR;break;case"scroll":case"scrollend":I=IE;break;case"wheel":I=mR;break;case"copy":case"cut":case"paste":I=tR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=wb;break;case"toggle":case"beforetoggle":I=yR}var Qe=(a&4)!==0,ht=!Qe&&(s==="scroll"||s==="scrollend"),q=Qe?W!==null?W+"Capture":null:W;Qe=[];for(var z=X,V;z!==null;){var ie=z;if(V=ie.stateNode,ie=ie.tag,ie!==5&&ie!==26&&ie!==27||V===null||q===null||(ie=oo(z,q),ie!=null&&Qe.push(Xo(z,ie,V))),ht)break;z=z.return}0<Qe.length&&(W=new I(W,Pe,null,c,ee),le.push({event:W,listeners:Qe}))}}if((a&7)===0){e:{if(W=s==="mouseover"||s==="pointerover",I=s==="mouseout"||s==="pointerout",W&&c!==op&&(Pe=c.relatedTarget||c.fromElement)&&(ql(Pe)||Pe[mi]))break e;if((I||W)&&(W=ee.window===ee?ee:(W=ee.ownerDocument)?W.defaultView||W.parentWindow:window,I?(Pe=c.relatedTarget||c.toElement,I=X,Pe=Pe?ql(Pe):null,Pe!==null&&(ht=l(Pe),Qe=Pe.tag,Pe!==ht||Qe!==5&&Qe!==27&&Qe!==6)&&(Pe=null)):(I=null,Pe=X),I!==Pe)){if(Qe=Sb,ie="onMouseLeave",q="onMouseEnter",z="mouse",(s==="pointerout"||s==="pointerover")&&(Qe=wb,ie="onPointerLeave",q="onPointerEnter",z="pointer"),ht=I==null?W:ao(I),V=Pe==null?W:ao(Pe),W=new Qe(ie,z+"leave",I,c,ee),W.target=ht,W.relatedTarget=V,ie=null,ql(ee)===X&&(Qe=new Qe(q,z+"enter",Pe,c,ee),Qe.target=V,Qe.relatedTarget=ht,ie=Qe),ht=ie,I&&Pe)t:{for(Qe=I,q=Pe,z=0,V=Qe;V;V=va(V))z++;for(V=0,ie=q;ie;ie=va(ie))V++;for(;0<z-V;)Qe=va(Qe),z--;for(;0<V-z;)q=va(q),V--;for(;z--;){if(Qe===q||q!==null&&Qe===q.alternate)break t;Qe=va(Qe),q=va(q)}Qe=null}else Qe=null;I!==null&&fS(le,W,I,Qe,!1),Pe!==null&&ht!==null&&fS(le,ht,Pe,Qe,!0)}}e:{if(W=X?ao(X):window,I=W.nodeName&&W.nodeName.toLowerCase(),I==="select"||I==="input"&&W.type==="file")var Ne=Mb;else if(Rb(W))if(Db)Ne=AR;else{Ne=TR;var Xe=kR}else I=W.nodeName,!I||I.toLowerCase()!=="input"||W.type!=="checkbox"&&W.type!=="radio"?X&&ap(X.elementType)&&(Ne=Mb):Ne=CR;if(Ne&&(Ne=Ne(s,X))){Nb(le,Ne,c,ee);break e}Xe&&Xe(s,W,X),s==="focusout"&&X&&W.type==="number"&&X.memoizedProps.value!=null&&lp(W,"number",W.value)}switch(Xe=X?ao(X):window,s){case"focusin":(Rb(Xe)||Xe.contentEditable==="true")&&(Yl=Xe,Sp=X,yo=null);break;case"focusout":yo=Sp=Yl=null;break;case"mousedown":xp=!0;break;case"contextmenu":case"mouseup":case"dragend":xp=!1,qb(le,c,ee);break;case"selectionchange":if(RR)break;case"keydown":case"keyup":qb(le,c,ee)}var De;if(yp)e:{switch(s){case"compositionstart":var ze="onCompositionStart";break e;case"compositionend":ze="onCompositionEnd";break e;case"compositionupdate":ze="onCompositionUpdate";break e}ze=void 0}else Fl?Ab(s,c)&&(ze="onCompositionEnd"):s==="keydown"&&c.keyCode===229&&(ze="onCompositionStart");ze&&(kb&&c.locale!=="ko"&&(Fl||ze!=="onCompositionStart"?ze==="onCompositionEnd"&&Fl&&(De=bb()):(es=ee,fp="value"in es?es.value:es.textContent,Fl=!0)),Xe=Oh(X,ze),0<Xe.length&&(ze=new xb(ze,s,null,c,ee),le.push({event:ze,listeners:Xe}),De?ze.data=De:(De=Eb(c),De!==null&&(ze.data=De)))),(De=bR?vR(s,c):SR(s,c))&&(ze=Oh(X,"onBeforeInput"),0<ze.length&&(Xe=new xb("onBeforeInput","beforeinput",null,c,ee),le.push({event:Xe,listeners:ze}),Xe.data=De)),hN(le,s,X,c,ee)}cS(le,a)})}function Xo(s,a,c){return{instance:s,listener:a,currentTarget:c}}function Oh(s,a){for(var c=a+"Capture",f=[];s!==null;){var m=s,y=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||y===null||(m=oo(s,c),m!=null&&f.unshift(Xo(s,m,y)),m=oo(s,a),m!=null&&f.push(Xo(s,m,y))),s.tag===3)return f;s=s.return}return[]}function va(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function fS(s,a,c,f,m){for(var y=a._reactName,S=[];c!==null&&c!==f;){var k=c,N=k.alternate,X=k.stateNode;if(k=k.tag,N!==null&&N===f)break;k!==5&&k!==26&&k!==27||X===null||(N=X,m?(X=oo(c,y),X!=null&&S.unshift(Xo(c,X,N))):m||(X=oo(c,y),X!=null&&S.push(Xo(c,X,N)))),c=c.return}S.length!==0&&s.push({event:a,listeners:S})}var mN=/\r\n?/g,gN=/\u0000|\uFFFD/g;function dS(s){return(typeof s=="string"?s:""+s).replace(mN,`
`).replace(gN,"")}function pS(s,a){return a=dS(a),dS(s)===a}function bh(){}function ct(s,a,c,f,m,y){switch(c){case"children":typeof f=="string"?a==="body"||a==="textarea"&&f===""||Gl(s,f):(typeof f=="number"||typeof f=="bigint")&&a!=="body"&&Gl(s,""+f);break;case"className":kc(s,"class",f);break;case"tabIndex":kc(s,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":kc(s,c,f);break;case"style":gb(s,f,y);break;case"data":if(a!=="object"){kc(s,"data",f);break}case"src":case"href":if(f===""&&(a!=="a"||c!=="href")){s.removeAttribute(c);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){s.removeAttribute(c);break}f=Ac(""+f),s.setAttribute(c,f);break;case"action":case"formAction":if(typeof f=="function"){s.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(c==="formAction"?(a!=="input"&&ct(s,a,"name",m.name,m,null),ct(s,a,"formEncType",m.formEncType,m,null),ct(s,a,"formMethod",m.formMethod,m,null),ct(s,a,"formTarget",m.formTarget,m,null)):(ct(s,a,"encType",m.encType,m,null),ct(s,a,"method",m.method,m,null),ct(s,a,"target",m.target,m,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){s.removeAttribute(c);break}f=Ac(""+f),s.setAttribute(c,f);break;case"onClick":f!=null&&(s.onclick=bh);break;case"onScroll":f!=null&&We("scroll",s);break;case"onScrollEnd":f!=null&&We("scrollend",s);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(n(61));if(c=f.__html,c!=null){if(m.children!=null)throw Error(n(60));s.innerHTML=c}}break;case"multiple":s.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":s.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){s.removeAttribute("xlink:href");break}c=Ac(""+f),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?s.setAttribute(c,""+f):s.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?s.setAttribute(c,""):s.removeAttribute(c);break;case"capture":case"download":f===!0?s.setAttribute(c,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?s.setAttribute(c,f):s.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?s.setAttribute(c,f):s.removeAttribute(c);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?s.removeAttribute(c):s.setAttribute(c,f);break;case"popover":We("beforetoggle",s),We("toggle",s),wc(s,"popover",f);break;case"xlinkActuate":gr(s,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":gr(s,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":gr(s,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":gr(s,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":gr(s,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":gr(s,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":gr(s,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":gr(s,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":gr(s,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":wc(s,"is",f);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=GE.get(c)||c,wc(s,c,f))}}function Xm(s,a,c,f,m,y){switch(c){case"style":gb(s,f,y);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(n(61));if(c=f.__html,c!=null){if(m.children!=null)throw Error(n(60));s.innerHTML=c}}break;case"children":typeof f=="string"?Gl(s,f):(typeof f=="number"||typeof f=="bigint")&&Gl(s,""+f);break;case"onScroll":f!=null&&We("scroll",s);break;case"onScrollEnd":f!=null&&We("scrollend",s);break;case"onClick":f!=null&&(s.onclick=bh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!sb.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(m=c.endsWith("Capture"),a=c.slice(2,m?c.length-7:void 0),y=s[Rt]||null,y=y!=null?y[c]:null,typeof y=="function"&&s.removeEventListener(a,y,m),typeof f=="function")){typeof y!="function"&&y!==null&&(c in s?s[c]=null:s.hasAttribute(c)&&s.removeAttribute(c)),s.addEventListener(a,f,m);break e}c in s?s[c]=f:f===!0?s.setAttribute(c,""):wc(s,c,f)}}}function tn(s,a,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":We("error",s),We("load",s);var f=!1,m=!1,y;for(y in c)if(c.hasOwnProperty(y)){var S=c[y];if(S!=null)switch(y){case"src":f=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,a));default:ct(s,a,y,S,c,null)}}m&&ct(s,a,"srcSet",c.srcSet,c,null),f&&ct(s,a,"src",c.src,c,null);return;case"input":We("invalid",s);var k=y=S=m=null,N=null,X=null;for(f in c)if(c.hasOwnProperty(f)){var ee=c[f];if(ee!=null)switch(f){case"name":m=ee;break;case"type":S=ee;break;case"checked":N=ee;break;case"defaultChecked":X=ee;break;case"value":y=ee;break;case"defaultValue":k=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(n(137,a));break;default:ct(s,a,f,ee,c,null)}}fb(s,y,k,N,X,S,m,!1),Tc(s);return;case"select":We("invalid",s),f=S=y=null;for(m in c)if(c.hasOwnProperty(m)&&(k=c[m],k!=null))switch(m){case"value":y=k;break;case"defaultValue":S=k;break;case"multiple":f=k;default:ct(s,a,m,k,c,null)}a=y,c=S,s.multiple=!!f,a!=null?Xl(s,!!f,a,!1):c!=null&&Xl(s,!!f,c,!0);return;case"textarea":We("invalid",s),y=m=f=null;for(S in c)if(c.hasOwnProperty(S)&&(k=c[S],k!=null))switch(S){case"value":f=k;break;case"defaultValue":m=k;break;case"children":y=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(n(91));break;default:ct(s,a,S,k,c,null)}pb(s,f,m,y),Tc(s);return;case"option":for(N in c)if(c.hasOwnProperty(N)&&(f=c[N],f!=null))switch(N){case"selected":s.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:ct(s,a,N,f,c,null)}return;case"dialog":We("beforetoggle",s),We("toggle",s),We("cancel",s),We("close",s);break;case"iframe":case"object":We("load",s);break;case"video":case"audio":for(f=0;f<Vo.length;f++)We(Vo[f],s);break;case"image":We("error",s),We("load",s);break;case"details":We("toggle",s);break;case"embed":case"source":case"link":We("error",s),We("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in c)if(c.hasOwnProperty(X)&&(f=c[X],f!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,a));default:ct(s,a,X,f,c,null)}return;default:if(ap(a)){for(ee in c)c.hasOwnProperty(ee)&&(f=c[ee],f!==void 0&&Xm(s,a,ee,f,c,void 0));return}}for(k in c)c.hasOwnProperty(k)&&(f=c[k],f!=null&&ct(s,a,k,f,c,null))}function yN(s,a,c,f){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,y=null,S=null,k=null,N=null,X=null,ee=null;for(I in c){var le=c[I];if(c.hasOwnProperty(I)&&le!=null)switch(I){case"checked":break;case"value":break;case"defaultValue":N=le;default:f.hasOwnProperty(I)||ct(s,a,I,null,f,le)}}for(var W in f){var I=f[W];if(le=c[W],f.hasOwnProperty(W)&&(I!=null||le!=null))switch(W){case"type":y=I;break;case"name":m=I;break;case"checked":X=I;break;case"defaultChecked":ee=I;break;case"value":S=I;break;case"defaultValue":k=I;break;case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(n(137,a));break;default:I!==le&&ct(s,a,W,I,f,le)}}sp(s,S,k,N,X,ee,y,m);return;case"select":I=S=k=W=null;for(y in c)if(N=c[y],c.hasOwnProperty(y)&&N!=null)switch(y){case"value":break;case"multiple":I=N;default:f.hasOwnProperty(y)||ct(s,a,y,null,f,N)}for(m in f)if(y=f[m],N=c[m],f.hasOwnProperty(m)&&(y!=null||N!=null))switch(m){case"value":W=y;break;case"defaultValue":k=y;break;case"multiple":S=y;default:y!==N&&ct(s,a,m,y,f,N)}a=k,c=S,f=I,W!=null?Xl(s,!!c,W,!1):!!f!=!!c&&(a!=null?Xl(s,!!c,a,!0):Xl(s,!!c,c?[]:"",!1));return;case"textarea":I=W=null;for(k in c)if(m=c[k],c.hasOwnProperty(k)&&m!=null&&!f.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:ct(s,a,k,null,f,m)}for(S in f)if(m=f[S],y=c[S],f.hasOwnProperty(S)&&(m!=null||y!=null))switch(S){case"value":W=m;break;case"defaultValue":I=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(n(91));break;default:m!==y&&ct(s,a,S,m,f,y)}db(s,W,I);return;case"option":for(var Pe in c)if(W=c[Pe],c.hasOwnProperty(Pe)&&W!=null&&!f.hasOwnProperty(Pe))switch(Pe){case"selected":s.selected=!1;break;default:ct(s,a,Pe,null,f,W)}for(N in f)if(W=f[N],I=c[N],f.hasOwnProperty(N)&&W!==I&&(W!=null||I!=null))switch(N){case"selected":s.selected=W&&typeof W!="function"&&typeof W!="symbol";break;default:ct(s,a,N,W,f,I)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Qe in c)W=c[Qe],c.hasOwnProperty(Qe)&&W!=null&&!f.hasOwnProperty(Qe)&&ct(s,a,Qe,null,f,W);for(X in f)if(W=f[X],I=c[X],f.hasOwnProperty(X)&&W!==I&&(W!=null||I!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(n(137,a));break;default:ct(s,a,X,W,f,I)}return;default:if(ap(a)){for(var ht in c)W=c[ht],c.hasOwnProperty(ht)&&W!==void 0&&!f.hasOwnProperty(ht)&&Xm(s,a,ht,void 0,f,W);for(ee in f)W=f[ee],I=c[ee],!f.hasOwnProperty(ee)||W===I||W===void 0&&I===void 0||Xm(s,a,ee,W,f,I);return}}for(var q in c)W=c[q],c.hasOwnProperty(q)&&W!=null&&!f.hasOwnProperty(q)&&ct(s,a,q,null,f,W);for(le in f)W=f[le],I=c[le],!f.hasOwnProperty(le)||W===I||W==null&&I==null||ct(s,a,le,W,f,I)}var Gm=null,Wm=null;function vh(s){return s.nodeType===9?s:s.ownerDocument}function mS(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function gS(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function Im(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Fm=null;function ON(){var s=window.event;return s&&s.type==="popstate"?s===Fm?!1:(Fm=s,!0):(Fm=null,!1)}var yS=typeof setTimeout=="function"?setTimeout:void 0,bN=typeof clearTimeout=="function"?clearTimeout:void 0,OS=typeof Promise=="function"?Promise:void 0,vN=typeof queueMicrotask=="function"?queueMicrotask:typeof OS<"u"?function(s){return OS.resolve(null).then(s).catch(SN)}:yS;function SN(s){setTimeout(function(){throw s})}function gs(s){return s==="head"}function bS(s,a){var c=a,f=0,m=0;do{var y=c.nextSibling;if(s.removeChild(c),y&&y.nodeType===8)if(c=y.data,c==="/$"){if(0<f&&8>f){c=f;var S=s.ownerDocument;if(c&1&&Go(S.documentElement),c&2&&Go(S.body),c&4)for(c=S.head,Go(c),S=c.firstChild;S;){var k=S.nextSibling,N=S.nodeName;S[Ll]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&S.rel.toLowerCase()==="stylesheet"||c.removeChild(S),S=k}}if(m===0){s.removeChild(y),eu(a);return}m--}else c==="$"||c==="$?"||c==="$!"?m++:f=c.charCodeAt(0)-48;else f=0;c=y}while(c);eu(a)}function Ym(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var c=a;switch(a=a.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Ym(c),Ys(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}s.removeChild(c)}}function xN(s,a,c,f){for(;s.nodeType===1;){var m=c;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!f&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(f){if(!s[Ll])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(y=s.getAttribute("rel"),y==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(y!==m.rel||s.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||s.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||s.getAttribute("title")!==(m.title==null?null:m.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(y=s.getAttribute("src"),(y!==(m.src==null?null:m.src)||s.getAttribute("type")!==(m.type==null?null:m.type)||s.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&y&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var y=m.name==null?null:""+m.name;if(m.type==="hidden"&&s.getAttribute("name")===y)return s}else return s;if(s=Oi(s.nextSibling),s===null)break}return null}function wN(s,a,c){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!c||(s=Oi(s.nextSibling),s===null))return null;return s}function Zm(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function kN(s,a){var c=s.ownerDocument;if(s.data!=="$?"||c.readyState==="complete")a();else{var f=function(){a(),c.removeEventListener("DOMContentLoaded",f)};c.addEventListener("DOMContentLoaded",f),s._reactRetry=f}}function Oi(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return s}var Km=null;function vS(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var c=s.data;if(c==="$"||c==="$!"||c==="$?"){if(a===0)return s;a--}else c==="/$"&&a++}s=s.previousSibling}return null}function SS(s,a,c){switch(a=vh(c),s){case"html":if(s=a.documentElement,!s)throw Error(n(452));return s;case"head":if(s=a.head,!s)throw Error(n(453));return s;case"body":if(s=a.body,!s)throw Error(n(454));return s;default:throw Error(n(451))}}function Go(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);Ys(s)}var ai=new Map,xS=new Set;function Sh(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Nr=se.d;se.d={f:TN,r:CN,D:AN,C:EN,L:RN,m:NN,X:DN,S:MN,M:QN};function TN(){var s=Nr.f(),a=fh();return s||a}function CN(s){var a=Ul(s);a!==null&&a.tag===5&&a.type==="form"?j1(a):Nr.r(s)}var Sa=typeof document>"u"?null:document;function wS(s,a,c){var f=Sa;if(f&&typeof a=="string"&&a){var m=ei(a);m='link[rel="'+s+'"][href="'+m+'"]',typeof c=="string"&&(m+='[crossorigin="'+c+'"]'),xS.has(m)||(xS.add(m),s={rel:s,crossOrigin:c,href:a},f.querySelector(m)===null&&(a=f.createElement("link"),tn(a,"link",s),Vt(a),f.head.appendChild(a)))}}function AN(s){Nr.D(s),wS("dns-prefetch",s,null)}function EN(s,a){Nr.C(s,a),wS("preconnect",s,a)}function RN(s,a,c){Nr.L(s,a,c);var f=Sa;if(f&&s&&a){var m='link[rel="preload"][as="'+ei(a)+'"]';a==="image"&&c&&c.imageSrcSet?(m+='[imagesrcset="'+ei(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(m+='[imagesizes="'+ei(c.imageSizes)+'"]')):m+='[href="'+ei(s)+'"]';var y=m;switch(a){case"style":y=xa(s);break;case"script":y=wa(s)}ai.has(y)||(s=p({rel:"preload",href:a==="image"&&c&&c.imageSrcSet?void 0:s,as:a},c),ai.set(y,s),f.querySelector(m)!==null||a==="style"&&f.querySelector(Wo(y))||a==="script"&&f.querySelector(Io(y))||(a=f.createElement("link"),tn(a,"link",s),Vt(a),f.head.appendChild(a)))}}function NN(s,a){Nr.m(s,a);var c=Sa;if(c&&s){var f=a&&typeof a.as=="string"?a.as:"script",m='link[rel="modulepreload"][as="'+ei(f)+'"][href="'+ei(s)+'"]',y=m;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=wa(s)}if(!ai.has(y)&&(s=p({rel:"modulepreload",href:s},a),ai.set(y,s),c.querySelector(m)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Io(y)))return}f=c.createElement("link"),tn(f,"link",s),Vt(f),c.head.appendChild(f)}}}function MN(s,a,c){Nr.S(s,a,c);var f=Sa;if(f&&s){var m=jl(f).hoistableStyles,y=xa(s);a=a||"default";var S=m.get(y);if(!S){var k={loading:0,preload:null};if(S=f.querySelector(Wo(y)))k.loading=5;else{s=p({rel:"stylesheet",href:s,"data-precedence":a},c),(c=ai.get(y))&&Jm(s,c);var N=S=f.createElement("link");Vt(N),tn(N,"link",s),N._p=new Promise(function(X,ee){N.onload=X,N.onerror=ee}),N.addEventListener("load",function(){k.loading|=1}),N.addEventListener("error",function(){k.loading|=2}),k.loading|=4,xh(S,a,f)}S={type:"stylesheet",instance:S,count:1,state:k},m.set(y,S)}}}function DN(s,a){Nr.X(s,a);var c=Sa;if(c&&s){var f=jl(c).hoistableScripts,m=wa(s),y=f.get(m);y||(y=c.querySelector(Io(m)),y||(s=p({src:s,async:!0},a),(a=ai.get(m))&&eg(s,a),y=c.createElement("script"),Vt(y),tn(y,"link",s),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},f.set(m,y))}}function QN(s,a){Nr.M(s,a);var c=Sa;if(c&&s){var f=jl(c).hoistableScripts,m=wa(s),y=f.get(m);y||(y=c.querySelector(Io(m)),y||(s=p({src:s,async:!0,type:"module"},a),(a=ai.get(m))&&eg(s,a),y=c.createElement("script"),Vt(y),tn(y,"link",s),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},f.set(m,y))}}function kS(s,a,c,f){var m=(m=Ce.current)?Sh(m):null;if(!m)throw Error(n(446));switch(s){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(a=xa(c.href),c=jl(m).hoistableStyles,f=c.get(a),f||(f={type:"style",instance:null,count:0,state:null},c.set(a,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){s=xa(c.href);var y=jl(m).hoistableStyles,S=y.get(s);if(S||(m=m.ownerDocument||m,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(s,S),(y=m.querySelector(Wo(s)))&&!y._p&&(S.instance=y,S.state.loading=5),ai.has(s)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},ai.set(s,c),y||zN(m,s,c,S.state))),a&&f===null)throw Error(n(528,""));return S}if(a&&f!==null)throw Error(n(529,""));return null;case"script":return a=c.async,c=c.src,typeof c=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=wa(c),c=jl(m).hoistableScripts,f=c.get(a),f||(f={type:"script",instance:null,count:0,state:null},c.set(a,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,s))}}function xa(s){return'href="'+ei(s)+'"'}function Wo(s){return'link[rel="stylesheet"]['+s+"]"}function TS(s){return p({},s,{"data-precedence":s.precedence,precedence:null})}function zN(s,a,c,f){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?f.loading=1:(a=s.createElement("link"),f.preload=a,a.addEventListener("load",function(){return f.loading|=1}),a.addEventListener("error",function(){return f.loading|=2}),tn(a,"link",c),Vt(a),s.head.appendChild(a))}function wa(s){return'[src="'+ei(s)+'"]'}function Io(s){return"script[async]"+s}function CS(s,a,c){if(a.count++,a.instance===null)switch(a.type){case"style":var f=s.querySelector('style[data-href~="'+ei(c.href)+'"]');if(f)return a.instance=f,Vt(f),f;var m=p({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return f=(s.ownerDocument||s).createElement("style"),Vt(f),tn(f,"style",m),xh(f,c.precedence,s),a.instance=f;case"stylesheet":m=xa(c.href);var y=s.querySelector(Wo(m));if(y)return a.state.loading|=4,a.instance=y,Vt(y),y;f=TS(c),(m=ai.get(m))&&Jm(f,m),y=(s.ownerDocument||s).createElement("link"),Vt(y);var S=y;return S._p=new Promise(function(k,N){S.onload=k,S.onerror=N}),tn(y,"link",f),a.state.loading|=4,xh(y,c.precedence,s),a.instance=y;case"script":return y=wa(c.src),(m=s.querySelector(Io(y)))?(a.instance=m,Vt(m),m):(f=c,(m=ai.get(y))&&(f=p({},c),eg(f,m)),s=s.ownerDocument||s,m=s.createElement("script"),Vt(m),tn(m,"link",f),s.head.appendChild(m),a.instance=m);case"void":return null;default:throw Error(n(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(f=a.instance,a.state.loading|=4,xh(f,c.precedence,s));return a.instance}function xh(s,a,c){for(var f=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=f.length?f[f.length-1]:null,y=m,S=0;S<f.length;S++){var k=f[S];if(k.dataset.precedence===a)y=k;else if(y!==m)break}y?y.parentNode.insertBefore(s,y.nextSibling):(a=c.nodeType===9?c.head:c,a.insertBefore(s,a.firstChild))}function Jm(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function eg(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var wh=null;function AS(s,a,c){if(wh===null){var f=new Map,m=wh=new Map;m.set(c,f)}else m=wh,f=m.get(c),f||(f=new Map,m.set(c,f));if(f.has(s))return f;for(f.set(s,null),c=c.getElementsByTagName(s),m=0;m<c.length;m++){var y=c[m];if(!(y[Ll]||y[zt]||s==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var S=y.getAttribute(a)||"";S=s+S;var k=f.get(S);k?k.push(y):f.set(S,[y])}}return f}function ES(s,a,c){s=s.ownerDocument||s,s.head.insertBefore(c,a==="title"?s.querySelector("head > title"):null)}function PN(s,a,c){if(c===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return s=a.disabled,typeof a.precedence=="string"&&s==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function RS(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var Fo=null;function BN(){}function _N(s,a,c){if(Fo===null)throw Error(n(475));var f=Fo;if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var m=xa(c.href),y=s.querySelector(Wo(m));if(y){s=y._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(f.count++,f=kh.bind(f),s.then(f,f)),a.state.loading|=4,a.instance=y,Vt(y);return}y=s.ownerDocument||s,c=TS(c),(m=ai.get(m))&&Jm(c,m),y=y.createElement("link"),Vt(y);var S=y;S._p=new Promise(function(k,N){S.onload=k,S.onerror=N}),tn(y,"link",c),a.instance=y}f.stylesheets===null&&(f.stylesheets=new Map),f.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(f.count++,a=kh.bind(f),s.addEventListener("load",a),s.addEventListener("error",a))}}function $N(){if(Fo===null)throw Error(n(475));var s=Fo;return s.stylesheets&&s.count===0&&tg(s,s.stylesheets),0<s.count?function(a){var c=setTimeout(function(){if(s.stylesheets&&tg(s,s.stylesheets),s.unsuspend){var f=s.unsuspend;s.unsuspend=null,f()}},6e4);return s.unsuspend=a,function(){s.unsuspend=null,clearTimeout(c)}}:null}function kh(){if(this.count--,this.count===0){if(this.stylesheets)tg(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Th=null;function tg(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Th=new Map,a.forEach(LN,s),Th=null,kh.call(s))}function LN(s,a){if(!(a.state.loading&4)){var c=Th.get(s);if(c)var f=c.get(null);else{c=new Map,Th.set(s,c);for(var m=s.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<m.length;y++){var S=m[y];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(c.set(S.dataset.precedence,S),f=S)}f&&c.set(null,f)}m=a.instance,S=m.getAttribute("data-precedence"),y=c.get(S)||f,y===f&&c.set(null,m),c.set(S,m),this.count++,f=kh.bind(this),m.addEventListener("load",f),m.addEventListener("error",f),y?y.parentNode.insertBefore(m,y.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(m,s.firstChild)),a.state.loading|=4}}var Yo={$$typeof:D,Provider:null,Consumer:null,_currentValue:de,_currentValue2:de,_threadCount:0};function qN(s,a,c,f,m,y,S,k){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ae(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ae(0),this.hiddenUpdates=Ae(null),this.identifierPrefix=f,this.onUncaughtError=m,this.onCaughtError=y,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function NS(s,a,c,f,m,y,S,k,N,X,ee,le){return s=new qN(s,a,c,S,k,N,X,le),a=1,y===!0&&(a|=24),y=qn(3,null,null,a),s.current=y,y.stateNode=s,a=Bp(),a.refCount++,s.pooledCache=a,a.refCount++,y.memoizedState={element:f,isDehydrated:c,cache:a},qp(y),s}function MS(s){return s?(s=ea,s):ea}function DS(s,a,c,f,m,y){m=MS(m),f.context===null?f.context=m:f.pendingContext=m,f=is(a),f.payload={element:c},y=y===void 0?null:y,y!==null&&(f.callback=y),c=rs(s,f,a),c!==null&&(Xn(c,s,a),Co(c,s,a))}function QS(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var c=s.retryLane;s.retryLane=c!==0&&c<a?c:a}}function ng(s,a){QS(s,a),(s=s.alternate)&&QS(s,a)}function zS(s){if(s.tag===13){var a=Jl(s,67108864);a!==null&&Xn(a,s,67108864),ng(s,67108864)}}var Ch=!0;function UN(s,a,c,f){var m=j.T;j.T=null;var y=se.p;try{se.p=2,ig(s,a,c,f)}finally{se.p=y,j.T=m}}function jN(s,a,c,f){var m=j.T;j.T=null;var y=se.p;try{se.p=8,ig(s,a,c,f)}finally{se.p=y,j.T=m}}function ig(s,a,c,f){if(Ch){var m=rg(f);if(m===null)Vm(s,a,f,Ah,c),BS(s,f);else if(VN(m,s,a,c,f))f.stopPropagation();else if(BS(s,f),a&4&&-1<HN.indexOf(s)){for(;m!==null;){var y=Ul(m);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var S=H(y.pendingLanes);if(S!==0){var k=y;for(k.pendingLanes|=2,k.entangledLanes|=2;S;){var N=1<<31-hn(S);k.entanglements[1]|=N,S&=~N}Mi(y),(at&6)===0&&(ch=xn()+500,Ho(0))}}break;case 13:k=Jl(y,2),k!==null&&Xn(k,y,2),fh(),ng(y,2)}if(y=rg(f),y===null&&Vm(s,a,f,Ah,c),y===m)break;m=y}m!==null&&f.stopPropagation()}else Vm(s,a,f,null,c)}}function rg(s){return s=up(s),sg(s)}var Ah=null;function sg(s){if(Ah=null,s=ql(s),s!==null){var a=l(s);if(a===null)s=null;else{var c=a.tag;if(c===13){if(s=o(a),s!==null)return s;s=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return Ah=s,null}function PS(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Pl()){case Is:return 2;case ro:return 8;case Fs:case vc:return 32;case so:return 268435456;default:return 32}default:return 32}}var lg=!1,ys=null,Os=null,bs=null,Zo=new Map,Ko=new Map,vs=[],HN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function BS(s,a){switch(s){case"focusin":case"focusout":ys=null;break;case"dragenter":case"dragleave":Os=null;break;case"mouseover":case"mouseout":bs=null;break;case"pointerover":case"pointerout":Zo.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ko.delete(a.pointerId)}}function Jo(s,a,c,f,m,y){return s===null||s.nativeEvent!==y?(s={blockedOn:a,domEventName:c,eventSystemFlags:f,nativeEvent:y,targetContainers:[m]},a!==null&&(a=Ul(a),a!==null&&zS(a)),s):(s.eventSystemFlags|=f,a=s.targetContainers,m!==null&&a.indexOf(m)===-1&&a.push(m),s)}function VN(s,a,c,f,m){switch(a){case"focusin":return ys=Jo(ys,s,a,c,f,m),!0;case"dragenter":return Os=Jo(Os,s,a,c,f,m),!0;case"mouseover":return bs=Jo(bs,s,a,c,f,m),!0;case"pointerover":var y=m.pointerId;return Zo.set(y,Jo(Zo.get(y)||null,s,a,c,f,m)),!0;case"gotpointercapture":return y=m.pointerId,Ko.set(y,Jo(Ko.get(y)||null,s,a,c,f,m)),!0}return!1}function _S(s){var a=ql(s.target);if(a!==null){var c=l(a);if(c!==null){if(a=c.tag,a===13){if(a=o(c),a!==null){s.blockedOn=a,Et(s.priority,function(){if(c.tag===13){var f=Vn();f=lt(f);var m=Jl(c,f);m!==null&&Xn(m,c,f),ng(c,f)}});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){s.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Eh(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var c=rg(s.nativeEvent);if(c===null){c=s.nativeEvent;var f=new c.constructor(c.type,c);op=f,c.target.dispatchEvent(f),op=null}else return a=Ul(c),a!==null&&zS(a),s.blockedOn=c,!1;a.shift()}return!0}function $S(s,a,c){Eh(s)&&c.delete(a)}function XN(){lg=!1,ys!==null&&Eh(ys)&&(ys=null),Os!==null&&Eh(Os)&&(Os=null),bs!==null&&Eh(bs)&&(bs=null),Zo.forEach($S),Ko.forEach($S)}function Rh(s,a){s.blockedOn===a&&(s.blockedOn=null,lg||(lg=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,XN)))}var Nh=null;function LS(s){Nh!==s&&(Nh=s,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Nh===s&&(Nh=null);for(var a=0;a<s.length;a+=3){var c=s[a],f=s[a+1],m=s[a+2];if(typeof f!="function"){if(sg(f||c)===null)continue;break}var y=Ul(c);y!==null&&(s.splice(a,3),a-=3,sm(y,{pending:!0,data:m,method:c.method,action:f},f,m))}}))}function eu(s){function a(N){return Rh(N,s)}ys!==null&&Rh(ys,s),Os!==null&&Rh(Os,s),bs!==null&&Rh(bs,s),Zo.forEach(a),Ko.forEach(a);for(var c=0;c<vs.length;c++){var f=vs[c];f.blockedOn===s&&(f.blockedOn=null)}for(;0<vs.length&&(c=vs[0],c.blockedOn===null);)_S(c),c.blockedOn===null&&vs.shift();if(c=(s.ownerDocument||s).$$reactFormReplay,c!=null)for(f=0;f<c.length;f+=3){var m=c[f],y=c[f+1],S=m[Rt]||null;if(typeof y=="function")S||LS(c);else if(S){var k=null;if(y&&y.hasAttribute("formAction")){if(m=y,S=y[Rt]||null)k=S.formAction;else if(sg(m)!==null)continue}else k=S.action;typeof k=="function"?c[f+1]=k:(c.splice(f,3),f-=3),LS(c)}}}function ag(s){this._internalRoot=s}Mh.prototype.render=ag.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(n(409));var c=a.current,f=Vn();DS(c,f,s,a,null,null)},Mh.prototype.unmount=ag.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;DS(s.current,2,null,s,null,null),fh(),a[mi]=null}};function Mh(s){this._internalRoot=s}Mh.prototype.unstable_scheduleHydration=function(s){if(s){var a=Fe();s={blockedOn:null,target:s,priority:a};for(var c=0;c<vs.length&&a!==0&&a<vs[c].priority;c++);vs.splice(c,0,s),c===0&&_S(s)}};var qS=e.version;if(qS!=="19.1.1")throw Error(n(527,qS,"19.1.1"));se.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=h(a),s=s!==null?d(s):null,s=s===null?null:s.stateNode,s};var GN={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dh.isDisabled&&Dh.supportsFiber)try{Kr=Dh.inject(GN),Kt=Dh}catch{}}return nu.createRoot=function(s,a){if(!r(s))throw Error(n(299));var c=!1,f="",m=nv,y=iv,S=rv,k=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(y=a.onCaughtError),a.onRecoverableError!==void 0&&(S=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(k=a.unstable_transitionCallbacks)),a=NS(s,1,!1,null,null,c,f,m,y,S,k,null),s[mi]=a.current,Hm(s),new ag(a)},nu.hydrateRoot=function(s,a,c){if(!r(s))throw Error(n(299));var f=!1,m="",y=nv,S=iv,k=rv,N=null,X=null;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(m=c.identifierPrefix),c.onUncaughtError!==void 0&&(y=c.onUncaughtError),c.onCaughtError!==void 0&&(S=c.onCaughtError),c.onRecoverableError!==void 0&&(k=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(N=c.unstable_transitionCallbacks),c.formState!==void 0&&(X=c.formState)),a=NS(s,1,!0,a,c??null,f,m,y,S,k,N,X),a.context=MS(null),c=a.current,f=Vn(),f=lt(f),m=is(f),m.callback=null,rs(c,m,f),c=f,a.current.lanes=c,ke(a,c),Mi(a),s[mi]=a.current,Hm(s),new Mh(a)},nu.version="19.1.1",nu}var YS;function nM(){if(YS)return cg.exports;YS=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),cg.exports=tM(),cg.exports}var iM=nM();/**
 * react-router v7.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var ZS="popstate";function rM(i={}){function e(n,r){let{pathname:l,search:o,hash:u}=n.location;return O0("",{pathname:l,search:o,hash:u},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(n,r){return typeof r=="string"?r:Qu(r)}return lM(e,t,null,i)}function Tt(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function sr(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function sM(){return Math.random().toString(36).substring(2,10)}function KS(i,e){return{usr:i.state,key:i.key,idx:e}}function O0(i,e,t=null,n){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?Ya(e):e,state:t,key:e&&e.key||n||sM()}}function Qu({pathname:i="/",search:e="",hash:t=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(i+=t.charAt(0)==="#"?t:"#"+t),i}function Ya(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substring(t),i=i.substring(0,t));let n=i.indexOf("?");n>=0&&(e.search=i.substring(n),i=i.substring(0,n)),i&&(e.pathname=i)}return e}function lM(i,e,t,n={}){let{window:r=document.defaultView,v5Compat:l=!1}=n,o=r.history,u="POP",h=null,d=p();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function p(){return(o.state||{idx:null}).idx}function g(){u="POP";let w=p(),T=w==null?null:w-d;d=w,h&&h({action:u,location:x.location,delta:T})}function O(w,T){u="PUSH";let E=O0(x.location,w,T);d=p()+1;let D=KS(E,d),_=x.createHref(E);try{o.pushState(D,"",_)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;r.location.assign(_)}l&&h&&h({action:u,location:x.location,delta:1})}function b(w,T){u="REPLACE";let E=O0(x.location,w,T);d=p();let D=KS(E,d),_=x.createHref(E);o.replaceState(D,"",_),l&&h&&h({action:u,location:x.location,delta:0})}function v(w){return aM(w)}let x={get action(){return u},get location(){return i(r,o)},listen(w){if(h)throw new Error("A history only accepts one active listener");return r.addEventListener(ZS,g),h=w,()=>{r.removeEventListener(ZS,g),h=null}},createHref(w){return e(r,w)},createURL:v,encodeLocation(w){let T=v(w);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:O,replace:b,go(w){return o.go(w)}};return x}function aM(i,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Tt(t,"No window.location.(origin|href) available to create URL");let n=typeof i=="string"?i:Qu(i);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=t+n),new URL(n,t)}function cT(i,e,t="/"){return oM(i,e,t,!1)}function oM(i,e,t,n){let r=typeof e=="string"?Ya(e):e,l=Vr(r.pathname||"/",t);if(l==null)return null;let o=hT(i);uM(o);let u=null;for(let h=0;u==null&&h<o.length;++h){let d=vM(l);u=OM(o[h],d,n)}return u}function hT(i,e=[],t=[],n="",r=!1){let l=(o,u,h=r,d)=>{let p={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:u,route:o};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(n)&&h)return;Tt(p.relativePath.startsWith(n),`Absolute route path "${p.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(n.length)}let g=jr([n,p.relativePath]),O=t.concat(p);o.children&&o.children.length>0&&(Tt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),hT(o.children,e,O,g,h)),!(o.path==null&&!o.index)&&e.push({path:g,score:gM(g,o.index),routesMeta:O})};return i.forEach((o,u)=>{if(o.path===""||!o.path?.includes("?"))l(o,u);else for(let h of fT(o.path))l(o,u,!0,h)}),e}function fT(i){let e=i.split("/");if(e.length===0)return[];let[t,...n]=e,r=t.endsWith("?"),l=t.replace(/\?$/,"");if(n.length===0)return r?[l,""]:[l];let o=fT(n.join("/")),u=[];return u.push(...o.map(h=>h===""?l:[l,h].join("/"))),r&&u.push(...o),u.map(h=>i.startsWith("/")&&h===""?"/":h)}function uM(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:yM(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var cM=/^:[\w-]+$/,hM=3,fM=2,dM=1,pM=10,mM=-2,JS=i=>i==="*";function gM(i,e){let t=i.split("/"),n=t.length;return t.some(JS)&&(n+=mM),e&&(n+=fM),t.filter(r=>!JS(r)).reduce((r,l)=>r+(cM.test(l)?hM:l===""?dM:pM),n)}function yM(i,e){return i.length===e.length&&i.slice(0,-1).every((n,r)=>n===e[r])?i[i.length-1]-e[e.length-1]:0}function OM(i,e,t=!1){let{routesMeta:n}=i,r={},l="/",o=[];for(let u=0;u<n.length;++u){let h=n[u],d=u===n.length-1,p=l==="/"?e:e.slice(l.length)||"/",g=Yf({path:h.relativePath,caseSensitive:h.caseSensitive,end:d},p),O=h.route;if(!g&&d&&t&&!n[n.length-1].route.index&&(g=Yf({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},p)),!g)return null;Object.assign(r,g.params),o.push({params:r,pathname:jr([l,g.pathname]),pathnameBase:kM(jr([l,g.pathnameBase])),route:O}),g.pathnameBase!=="/"&&(l=jr([l,g.pathnameBase]))}return o}function Yf(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,n]=bM(i.path,i.caseSensitive,i.end),r=e.match(t);if(!r)return null;let l=r[0],o=l.replace(/(.)\/+$/,"$1"),u=r.slice(1);return{params:n.reduce((d,{paramName:p,isOptional:g},O)=>{if(p==="*"){let v=u[O]||"";o=l.slice(0,l.length-v.length).replace(/(.)\/+$/,"$1")}const b=u[O];return g&&!b?d[p]=void 0:d[p]=(b||"").replace(/%2F/g,"/"),d},{}),pathname:l,pathnameBase:o,pattern:i}}function bM(i,e=!1,t=!0){sr(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let n=[],r="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,u,h)=>(n.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return i.endsWith("*")?(n.push({paramName:"*"}),r+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":i!==""&&i!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),n]}function vM(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return sr(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function Vr(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=i.charAt(t);return n&&n!=="/"?null:i.slice(t)||"/"}function SM(i,e="/"){let{pathname:t,search:n="",hash:r=""}=typeof i=="string"?Ya(i):i;return{pathname:t?t.startsWith("/")?t:xM(t,e):e,search:TM(n),hash:CM(r)}}function xM(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function pg(i,e,t,n){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function wM(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function dT(i){let e=wM(i);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function pT(i,e,t,n=!1){let r;typeof i=="string"?r=Ya(i):(r={...i},Tt(!r.pathname||!r.pathname.includes("?"),pg("?","pathname","search",r)),Tt(!r.pathname||!r.pathname.includes("#"),pg("#","pathname","hash",r)),Tt(!r.search||!r.search.includes("#"),pg("#","search","hash",r)));let l=i===""||r.pathname==="",o=l?"/":r.pathname,u;if(o==null)u=t;else{let g=e.length-1;if(!n&&o.startsWith("..")){let O=o.split("/");for(;O[0]==="..";)O.shift(),g-=1;r.pathname=O.join("/")}u=g>=0?e[g]:"/"}let h=SM(r,u),d=o&&o!=="/"&&o.endsWith("/"),p=(l||o===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(d||p)&&(h.pathname+="/"),h}var jr=i=>i.join("/").replace(/\/\/+/g,"/"),kM=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),TM=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,CM=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function AM(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var mT=["POST","PUT","PATCH","DELETE"];new Set(mT);var EM=["GET",...mT];new Set(EM);var Za=M.createContext(null);Za.displayName="DataRouter";var Nd=M.createContext(null);Nd.displayName="DataRouterState";M.createContext(!1);var gT=M.createContext({isTransitioning:!1});gT.displayName="ViewTransition";var RM=M.createContext(new Map);RM.displayName="Fetchers";var NM=M.createContext(null);NM.displayName="Await";var hr=M.createContext(null);hr.displayName="Navigation";var rc=M.createContext(null);rc.displayName="Location";var Ir=M.createContext({outlet:null,matches:[],isDataRoute:!1});Ir.displayName="Route";var rO=M.createContext(null);rO.displayName="RouteError";function MM(i,{relative:e}={}){Tt(sc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=M.useContext(hr),{hash:r,pathname:l,search:o}=lc(i,{relative:e}),u=l;return t!=="/"&&(u=l==="/"?t:jr([t,l])),n.createHref({pathname:u,search:o,hash:r})}function sc(){return M.useContext(rc)!=null}function Xs(){return Tt(sc(),"useLocation() may be used only in the context of a <Router> component."),M.useContext(rc).location}var yT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function OT(i){M.useContext(hr).static||M.useLayoutEffect(i)}function sO(){let{isDataRoute:i}=M.useContext(Ir);return i?VM():DM()}function DM(){Tt(sc(),"useNavigate() may be used only in the context of a <Router> component.");let i=M.useContext(Za),{basename:e,navigator:t}=M.useContext(hr),{matches:n}=M.useContext(Ir),{pathname:r}=Xs(),l=JSON.stringify(dT(n)),o=M.useRef(!1);return OT(()=>{o.current=!0}),M.useCallback((h,d={})=>{if(sr(o.current,yT),!o.current)return;if(typeof h=="number"){t.go(h);return}let p=pT(h,JSON.parse(l),r,d.relative==="path");i==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:jr([e,p.pathname])),(d.replace?t.replace:t.push)(p,d.state,d)},[e,t,l,r,i])}M.createContext(null);function lc(i,{relative:e}={}){let{matches:t}=M.useContext(Ir),{pathname:n}=Xs(),r=JSON.stringify(dT(t));return M.useMemo(()=>pT(i,JSON.parse(r),n,e==="path"),[i,r,n,e])}function QM(i,e){return bT(i,e)}function bT(i,e,t,n){Tt(sc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=M.useContext(hr),{matches:l}=M.useContext(Ir),o=l[l.length-1],u=o?o.params:{},h=o?o.pathname:"/",d=o?o.pathnameBase:"/",p=o&&o.route;{let T=p&&p.path||"";vT(h,!p||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let g=Xs(),O;if(e){let T=typeof e=="string"?Ya(e):e;Tt(d==="/"||T.pathname?.startsWith(d),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${T.pathname}" was given in the \`location\` prop.`),O=T}else O=g;let b=O.pathname||"/",v=b;if(d!=="/"){let T=d.replace(/^\//,"").split("/");v="/"+b.replace(/^\//,"").split("/").slice(T.length).join("/")}let x=cT(i,{pathname:v});sr(p||x!=null,`No routes matched location "${O.pathname}${O.search}${O.hash}" `),sr(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${O.pathname}${O.search}${O.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let w=$M(x&&x.map(T=>Object.assign({},T,{params:Object.assign({},u,T.params),pathname:jr([d,r.encodeLocation?r.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?d:jr([d,r.encodeLocation?r.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),l,t,n);return e&&w?M.createElement(rc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...O},navigationType:"POP"}},w):w}function zM(){let i=HM(),e=AM(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,n="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:n},l={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",i),o=M.createElement(M.Fragment,null,M.createElement("p",null," Hey developer "),M.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",M.createElement("code",{style:l},"ErrorBoundary")," or"," ",M.createElement("code",{style:l},"errorElement")," prop on your route.")),M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),t?M.createElement("pre",{style:r},t):null,o)}var PM=M.createElement(zM,null),BM=class extends M.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){console.error("React Router caught the following error during render",i,e)}render(){return this.state.error!==void 0?M.createElement(Ir.Provider,{value:this.props.routeContext},M.createElement(rO.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function _M({routeContext:i,match:e,children:t}){let n=M.useContext(Za);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),M.createElement(Ir.Provider,{value:i},t)}function $M(i,e=[],t=null,n=null){if(i==null){if(!t)return null;if(t.errors)i=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let r=i,l=t?.errors;if(l!=null){let h=r.findIndex(d=>d.route.id&&l?.[d.route.id]!==void 0);Tt(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),r=r.slice(0,Math.min(r.length,h+1))}let o=!1,u=-1;if(t)for(let h=0;h<r.length;h++){let d=r[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=h),d.route.id){let{loaderData:p,errors:g}=t,O=d.route.loader&&!p.hasOwnProperty(d.route.id)&&(!g||g[d.route.id]===void 0);if(d.route.lazy||O){o=!0,u>=0?r=r.slice(0,u+1):r=[r[0]];break}}}return r.reduceRight((h,d,p)=>{let g,O=!1,b=null,v=null;t&&(g=l&&d.route.id?l[d.route.id]:void 0,b=d.route.errorElement||PM,o&&(u<0&&p===0?(vT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),O=!0,v=null):u===p&&(O=!0,v=d.route.hydrateFallbackElement||null)));let x=e.concat(r.slice(0,p+1)),w=()=>{let T;return g?T=b:O?T=v:d.route.Component?T=M.createElement(d.route.Component,null):d.route.element?T=d.route.element:T=h,M.createElement(_M,{match:d,routeContext:{outlet:h,matches:x,isDataRoute:t!=null},children:T})};return t&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?M.createElement(BM,{location:t.location,revalidation:t.revalidation,component:b,error:g,children:w(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):w()},null)}function lO(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function LM(i){let e=M.useContext(Za);return Tt(e,lO(i)),e}function qM(i){let e=M.useContext(Nd);return Tt(e,lO(i)),e}function UM(i){let e=M.useContext(Ir);return Tt(e,lO(i)),e}function aO(i){let e=UM(i),t=e.matches[e.matches.length-1];return Tt(t.route.id,`${i} can only be used on routes that contain a unique "id"`),t.route.id}function jM(){return aO("useRouteId")}function HM(){let i=M.useContext(rO),e=qM("useRouteError"),t=aO("useRouteError");return i!==void 0?i:e.errors?.[t]}function VM(){let{router:i}=LM("useNavigate"),e=aO("useNavigate"),t=M.useRef(!1);return OT(()=>{t.current=!0}),M.useCallback(async(r,l={})=>{sr(t.current,yT),t.current&&(typeof r=="number"?i.navigate(r):await i.navigate(r,{fromRouteId:e,...l}))},[i,e])}var ex={};function vT(i,e,t){!e&&!ex[i]&&(ex[i]=!0,sr(!1,t))}M.memo(XM);function XM({routes:i,future:e,state:t}){return bT(i,void 0,t,e)}function xf(i){Tt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function GM({basename:i="/",children:e=null,location:t,navigationType:n="POP",navigator:r,static:l=!1}){Tt(!sc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=i.replace(/^\/*/,"/"),u=M.useMemo(()=>({basename:o,navigator:r,static:l,future:{}}),[o,r,l]);typeof t=="string"&&(t=Ya(t));let{pathname:h="/",search:d="",hash:p="",state:g=null,key:O="default"}=t,b=M.useMemo(()=>{let v=Vr(h,o);return v==null?null:{location:{pathname:v,search:d,hash:p,state:g,key:O},navigationType:n}},[o,h,d,p,g,O,n]);return sr(b!=null,`<Router basename="${o}"> is not able to match the URL "${h}${d}${p}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:M.createElement(hr.Provider,{value:u},M.createElement(rc.Provider,{children:e,value:b}))}function WM({children:i,location:e}){return QM(b0(i),e)}function b0(i,e=[]){let t=[];return M.Children.forEach(i,(n,r)=>{if(!M.isValidElement(n))return;let l=[...e,r];if(n.type===M.Fragment){t.push.apply(t,b0(n.props.children,l));return}Tt(n.type===xf,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Tt(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||l.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=b0(n.props.children,l)),t.push(o)}),t}var wf="get",kf="application/x-www-form-urlencoded";function Md(i){return i!=null&&typeof i.tagName=="string"}function IM(i){return Md(i)&&i.tagName.toLowerCase()==="button"}function FM(i){return Md(i)&&i.tagName.toLowerCase()==="form"}function YM(i){return Md(i)&&i.tagName.toLowerCase()==="input"}function ZM(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function KM(i,e){return i.button===0&&(!e||e==="_self")&&!ZM(i)}var Qh=null;function JM(){if(Qh===null)try{new FormData(document.createElement("form"),0),Qh=!1}catch{Qh=!0}return Qh}var eD=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function mg(i){return i!=null&&!eD.has(i)?(sr(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${kf}"`),null):i}function tD(i,e){let t,n,r,l,o;if(FM(i)){let u=i.getAttribute("action");n=u?Vr(u,e):null,t=i.getAttribute("method")||wf,r=mg(i.getAttribute("enctype"))||kf,l=new FormData(i)}else if(IM(i)||YM(i)&&(i.type==="submit"||i.type==="image")){let u=i.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=i.getAttribute("formaction")||u.getAttribute("action");if(n=h?Vr(h,e):null,t=i.getAttribute("formmethod")||u.getAttribute("method")||wf,r=mg(i.getAttribute("formenctype"))||mg(u.getAttribute("enctype"))||kf,l=new FormData(u,i),!JM()){let{name:d,type:p,value:g}=i;if(p==="image"){let O=d?`${d}.`:"";l.append(`${O}x`,"0"),l.append(`${O}y`,"0")}else d&&l.append(d,g)}}else{if(Md(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=wf,n=null,r=kf,o=i}return l&&r==="text/plain"&&(o=l,l=void 0),{action:n,method:t.toLowerCase(),encType:r,formData:l,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function oO(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function nD(i,e,t){let n=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return n.pathname==="/"?n.pathname=`_root.${t}`:e&&Vr(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${t}`,n}async function iD(i,e){if(i.id in e)return e[i.id];try{let t=await import(i.module);return e[i.id]=t,t}catch(t){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function rD(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function sD(i,e,t){let n=await Promise.all(i.map(async r=>{let l=e.routes[r.route.id];if(l){let o=await iD(l,t);return o.links?o.links():[]}return[]}));return uD(n.flat(1).filter(rD).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function tx(i,e,t,n,r,l){let o=(h,d)=>t[d]?h.route.id!==t[d].route.id:!0,u=(h,d)=>t[d].pathname!==h.pathname||t[d].route.path?.endsWith("*")&&t[d].params["*"]!==h.params["*"];return l==="assets"?e.filter((h,d)=>o(h,d)||u(h,d)):l==="data"?e.filter((h,d)=>{let p=n.routes[h.route.id];if(!p||!p.hasLoader)return!1;if(o(h,d)||u(h,d))return!0;if(h.route.shouldRevalidate){let g=h.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(i,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function lD(i,e,{includeHydrateFallback:t}={}){return aD(i.map(n=>{let r=e.routes[n.route.id];if(!r)return[];let l=[r.module];return r.clientActionModule&&(l=l.concat(r.clientActionModule)),r.clientLoaderModule&&(l=l.concat(r.clientLoaderModule)),t&&r.hydrateFallbackModule&&(l=l.concat(r.hydrateFallbackModule)),r.imports&&(l=l.concat(r.imports)),l}).flat(1))}function aD(i){return[...new Set(i)]}function oD(i){let e={},t=Object.keys(i).sort();for(let n of t)e[n]=i[n];return e}function uD(i,e){let t=new Set;return new Set(e),i.reduce((n,r)=>{let l=JSON.stringify(oD(r));return t.has(l)||(t.add(l),n.push({key:l,link:r})),n},[])}function ST(){let i=M.useContext(Za);return oO(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function cD(){let i=M.useContext(Nd);return oO(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var uO=M.createContext(void 0);uO.displayName="FrameworkContext";function xT(){let i=M.useContext(uO);return oO(i,"You must render this element inside a <HydratedRouter> element"),i}function hD(i,e){let t=M.useContext(uO),[n,r]=M.useState(!1),[l,o]=M.useState(!1),{onFocus:u,onBlur:h,onMouseEnter:d,onMouseLeave:p,onTouchStart:g}=e,O=M.useRef(null);M.useEffect(()=>{if(i==="render"&&o(!0),i==="viewport"){let x=T=>{T.forEach(E=>{o(E.isIntersecting)})},w=new IntersectionObserver(x,{threshold:.5});return O.current&&w.observe(O.current),()=>{w.disconnect()}}},[i]),M.useEffect(()=>{if(n){let x=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(x)}}},[n]);let b=()=>{r(!0)},v=()=>{r(!1),o(!1)};return t?i!=="intent"?[l,O,{}]:[l,O,{onFocus:iu(u,b),onBlur:iu(h,v),onMouseEnter:iu(d,b),onMouseLeave:iu(p,v),onTouchStart:iu(g,b)}]:[!1,O,{}]}function iu(i,e){return t=>{i&&i(t),t.defaultPrevented||e(t)}}function fD({page:i,...e}){let{router:t}=ST(),n=M.useMemo(()=>cT(t.routes,i,t.basename),[t.routes,i,t.basename]);return n?M.createElement(pD,{page:i,matches:n,...e}):null}function dD(i){let{manifest:e,routeModules:t}=xT(),[n,r]=M.useState([]);return M.useEffect(()=>{let l=!1;return sD(i,e,t).then(o=>{l||r(o)}),()=>{l=!0}},[i,e,t]),n}function pD({page:i,matches:e,...t}){let n=Xs(),{manifest:r,routeModules:l}=xT(),{basename:o}=ST(),{loaderData:u,matches:h}=cD(),d=M.useMemo(()=>tx(i,e,h,r,n,"data"),[i,e,h,r,n]),p=M.useMemo(()=>tx(i,e,h,r,n,"assets"),[i,e,h,r,n]),g=M.useMemo(()=>{if(i===n.pathname+n.search+n.hash)return[];let v=new Set,x=!1;if(e.forEach(T=>{let E=r.routes[T.route.id];!E||!E.hasLoader||(!d.some(D=>D.route.id===T.route.id)&&T.route.id in u&&l[T.route.id]?.shouldRevalidate||E.hasClientLoader?x=!0:v.add(T.route.id))}),v.size===0)return[];let w=nD(i,o,"data");return x&&v.size>0&&w.searchParams.set("_routes",e.filter(T=>v.has(T.route.id)).map(T=>T.route.id).join(",")),[w.pathname+w.search]},[o,u,n,r,d,e,i,l]),O=M.useMemo(()=>lD(p,r),[p,r]),b=dD(p);return M.createElement(M.Fragment,null,g.map(v=>M.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...t})),O.map(v=>M.createElement("link",{key:v,rel:"modulepreload",href:v,...t})),b.map(({key:v,link:x})=>M.createElement("link",{key:v,nonce:t.nonce,...x})))}function mD(...i){return e=>{i.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var wT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{wT&&(window.__reactRouterVersion="7.8.1")}catch{}function gD({basename:i,children:e,window:t}){let n=M.useRef();n.current==null&&(n.current=rM({window:t,v5Compat:!0}));let r=n.current,[l,o]=M.useState({action:r.action,location:r.location}),u=M.useCallback(h=>{M.startTransition(()=>o(h))},[o]);return M.useLayoutEffect(()=>r.listen(u),[r,u]),M.createElement(GM,{basename:i,children:e,location:l.location,navigationType:l.action,navigator:r})}var kT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,TT=M.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:r,reloadDocument:l,replace:o,state:u,target:h,to:d,preventScrollReset:p,viewTransition:g,...O},b){let{basename:v}=M.useContext(hr),x=typeof d=="string"&&kT.test(d),w,T=!1;if(typeof d=="string"&&x&&(w=d,wT))try{let $=new URL(window.location.href),K=d.startsWith("//")?new URL($.protocol+d):new URL(d),L=Vr(K.pathname,v);K.origin===$.origin&&L!=null?d=L+K.search+K.hash:T=!0}catch{sr(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let E=MM(d,{relative:r}),[D,_,A]=hD(n,O),B=vD(d,{replace:o,state:u,target:h,preventScrollReset:p,relative:r,viewTransition:g});function C($){e&&e($),$.defaultPrevented||B($)}let U=M.createElement("a",{...O,...A,href:w||E,onClick:T||l?e:C,ref:mD(b,_),target:h,"data-discover":!x&&t==="render"?"true":void 0});return D&&!x?M.createElement(M.Fragment,null,U,M.createElement(fD,{page:E})):U});TT.displayName="Link";var yD=M.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:r=!1,style:l,to:o,viewTransition:u,children:h,...d},p){let g=lc(o,{relative:d.relative}),O=Xs(),b=M.useContext(Nd),{navigator:v,basename:x}=M.useContext(hr),w=b!=null&&TD(g)&&u===!0,T=v.encodeLocation?v.encodeLocation(g).pathname:g.pathname,E=O.pathname,D=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;t||(E=E.toLowerCase(),D=D?D.toLowerCase():null,T=T.toLowerCase()),D&&x&&(D=Vr(D,x)||D);const _=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let A=E===T||!r&&E.startsWith(T)&&E.charAt(_)==="/",B=D!=null&&(D===T||!r&&D.startsWith(T)&&D.charAt(T.length)==="/"),C={isActive:A,isPending:B,isTransitioning:w},U=A?e:void 0,$;typeof n=="function"?$=n(C):$=[n,A?"active":null,B?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let K=typeof l=="function"?l(C):l;return M.createElement(TT,{...d,"aria-current":U,className:$,ref:p,style:K,to:o,viewTransition:u},typeof h=="function"?h(C):h)});yD.displayName="NavLink";var OD=M.forwardRef(({discover:i="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:r,state:l,method:o=wf,action:u,onSubmit:h,relative:d,preventScrollReset:p,viewTransition:g,...O},b)=>{let v=wD(),x=kD(u,{relative:d}),w=o.toLowerCase()==="get"?"get":"post",T=typeof u=="string"&&kT.test(u),E=D=>{if(h&&h(D),D.defaultPrevented)return;D.preventDefault();let _=D.nativeEvent.submitter,A=_?.getAttribute("formmethod")||o;v(_||D.currentTarget,{fetcherKey:e,method:A,navigate:t,replace:r,state:l,relative:d,preventScrollReset:p,viewTransition:g})};return M.createElement("form",{ref:b,method:w,action:x,onSubmit:n?h:E,...O,"data-discover":!T&&i==="render"?"true":void 0})});OD.displayName="Form";function bD(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function CT(i){let e=M.useContext(Za);return Tt(e,bD(i)),e}function vD(i,{target:e,replace:t,state:n,preventScrollReset:r,relative:l,viewTransition:o}={}){let u=sO(),h=Xs(),d=lc(i,{relative:l});return M.useCallback(p=>{if(KM(p,e)){p.preventDefault();let g=t!==void 0?t:Qu(h)===Qu(d);u(i,{replace:g,state:n,preventScrollReset:r,relative:l,viewTransition:o})}},[h,u,d,t,n,e,i,r,l,o])}var SD=0,xD=()=>`__${String(++SD)}__`;function wD(){let{router:i}=CT("useSubmit"),{basename:e}=M.useContext(hr),t=jM();return M.useCallback(async(n,r={})=>{let{action:l,method:o,encType:u,formData:h,body:d}=tD(n,e);if(r.navigate===!1){let p=r.fetcherKey||xD();await i.fetch(p,t,r.action||l,{preventScrollReset:r.preventScrollReset,formData:h,body:d,formMethod:r.method||o,formEncType:r.encType||u,flushSync:r.flushSync})}else await i.navigate(r.action||l,{preventScrollReset:r.preventScrollReset,formData:h,body:d,formMethod:r.method||o,formEncType:r.encType||u,replace:r.replace,state:r.state,fromRouteId:t,flushSync:r.flushSync,viewTransition:r.viewTransition})},[i,e,t])}function kD(i,{relative:e}={}){let{basename:t}=M.useContext(hr),n=M.useContext(Ir);Tt(n,"useFormAction must be used inside a RouteContext");let[r]=n.matches.slice(-1),l={...lc(i||".",{relative:e})},o=Xs();if(i==null){l.search=o.search;let u=new URLSearchParams(l.search),h=u.getAll("index");if(h.some(p=>p==="")){u.delete("index"),h.filter(g=>g).forEach(g=>u.append("index",g));let p=u.toString();l.search=p?`?${p}`:""}}return(!i||i===".")&&r.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:jr([t,l.pathname])),Qu(l)}function TD(i,{relative:e}={}){let t=M.useContext(gT);Tt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=CT("useViewTransitionState"),r=lc(i,{relative:e});if(!t.isTransitioning)return!1;let l=Vr(t.currentLocation.pathname,n)||t.currentLocation.pathname,o=Vr(t.nextLocation.pathname,n)||t.nextLocation.pathname;return Yf(r.pathname,o)!=null||Yf(r.pathname,l)!=null}const AT=M.createContext(void 0),CD={tenantId:"evil-corp",currentGraph:null,selectedNodeId:null,selectedFile:null,selectedTool:null,isLoading:!1,error:null};function AD(i,e){switch(e.type){case"SET_TENANT_ID":return{...i,tenantId:e.payload};case"SET_CURRENT_GRAPH":return{...i,currentGraph:e.payload};case"SET_SELECTED_NODE":return{...i,selectedNodeId:e.payload};case"SET_SELECTED_FILE":return{...i,selectedFile:e.payload};case"SET_SELECTED_TOOL":return{...i,selectedTool:e.payload};case"SET_LOADING":return{...i,isLoading:e.payload};case"SET_ERROR":return{...i,error:e.payload};case"CLEAR_ERROR":return{...i,error:null};default:return i}}function ED({children:i}){const[e,t]=M.useReducer(AD,CD);return P.jsx(AT.Provider,{value:{state:e,dispatch:t},children:i})}const RD=({message:i,type:e="error",duration:t=5e3,onClose:n,retryAction:r})=>{const[l,o]=M.useState(!0);M.useEffect(()=>{if(t>0){const p=setTimeout(()=>{o(!1),n?.()},t);return()=>clearTimeout(p)}},[t,n]);const u=()=>{o(!1),n?.()},h=()=>{r?.action(),u()};if(!l)return null;const d=()=>{switch(e){case"error":return"";case"warning":return"";case"info":return"";default:return""}};return P.jsxs("div",{className:`error-notification error-notification--${e}`,children:[P.jsxs("div",{className:"error-notification__content",children:[P.jsx("span",{className:"error-notification__icon",children:d()}),P.jsx("span",{className:"error-notification__message",children:i})]}),P.jsxs("div",{className:"error-notification__actions",children:[r&&P.jsx("button",{className:"error-notification__button error-notification__button--retry",onClick:h,children:r.label}),P.jsx("button",{className:"error-notification__button error-notification__button--close",onClick:u,"aria-label":"Close notification",children:""})]})]})},ET=M.createContext(void 0),ND=({children:i})=>{const[e,t]=M.useState([]),n=(d,p,g={})=>{const O=Date.now().toString(),b={id:O,message:d,type:p,duration:5e3,...g,onClose:()=>{r(O),g.onClose?.()}};t(v=>[...v,b])},r=d=>{t(p=>p.filter(g=>g.id!==d))},l=(d,p)=>{n(d,"error",p)},o=(d,p)=>{n(d,"warning",p)},u=(d,p)=>{n(d,"info",p)},h=()=>{t([])};return P.jsxs(ET.Provider,{value:{showError:l,showWarning:o,showInfo:u,clearErrors:h},children:[i,P.jsx("div",{className:"error-notifications-container",children:e.map(d=>P.jsx(RD,{...d},d.id))})]})},MD=()=>{const i=M.useContext(ET);if(i===void 0)throw new Error("useError must be used within an ErrorProvider");return i};class DD extends M.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t),this.setState({error:e,errorInfo:t}),console.error("Production error:",{error:e.message,stack:e.stack,componentStack:t.componentStack,timestamp:new Date().toISOString()})}handleRetry=()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0})};handleReload=()=>{window.location.reload()};render(){return this.state.hasError?this.props.fallback?this.props.fallback:P.jsx("div",{className:"error-boundary",children:P.jsxs("div",{className:"error-boundary__container",children:[P.jsx("div",{className:"error-boundary__icon",children:""}),P.jsx("h2",{className:"error-boundary__title",children:"Something went wrong"}),P.jsx("p",{className:"error-boundary__message",children:"An unexpected error occurred while rendering this component."}),!1,P.jsxs("div",{className:"error-boundary__actions",children:[P.jsx("button",{className:"error-boundary__button error-boundary__button--primary",onClick:this.handleRetry,children:"Try Again"}),P.jsx("button",{className:"error-boundary__button error-boundary__button--secondary",onClick:this.handleReload,children:"Reload Page"})]})]})}):this.props.children}}const Ka=()=>{const i=M.useContext(AT);if(i===void 0)throw new Error("useAppContext must be used within an AppProvider");return i},RT=()=>{const{state:i,dispatch:e}=Ka(),t=sO(),n=Xs(),r=d=>{e({type:"SET_TENANT_ID",payload:d.target.value})},l=()=>{t("/")},o=()=>{t("/editor")},u=n.pathname==="/",h=n.pathname.startsWith("/editor");return P.jsxs("header",{className:"app-header",children:[P.jsxs("div",{className:"header-left",children:[P.jsx("h1",{className:"app-title",children:"Agent Graph Composer"}),P.jsxs("nav",{className:"header-nav",children:[P.jsx("button",{className:`nav-button ${u?"active":""}`,onClick:l,children:"Management"}),P.jsx("button",{className:`nav-button ${h?"active":""}`,onClick:o,children:"Editor"})]})]}),P.jsx("div",{className:"header-right",children:P.jsxs("div",{className:"tenant-input",children:[P.jsx("label",{htmlFor:"tenantId",children:"Tenant ID:"}),P.jsx("input",{id:"tenantId",type:"text",value:i.tenantId,onChange:r,placeholder:"evil-corp"})]})})]})},QD=({graphs:i,loading:e,error:t,onLoadGraph:n,onDeleteGraph:r,onSubmitForExecution:l,onCreateNew:o})=>{const[u,h]=M.useState("updatedAt"),[d,p]=M.useState("desc"),[g,O]=M.useState("ALL"),[b,v]=M.useState(""),[x,w]=M.useState(null),T=U=>{u===U?p(d==="asc"?"desc":"asc"):(h(U),p("asc"))},E=M.useMemo(()=>{let U=i;return g!=="ALL"&&(U=U.filter($=>$.status===g)),b.trim()&&(U=U.filter($=>$.name.toLowerCase().includes(b.toLowerCase()))),U.sort(($,K)=>{let L,Q;switch(u){case"name":L=$.name,Q=K.name;break;case"createdAt":L=new Date($.createdAt),Q=new Date(K.createdAt);break;case"updatedAt":L=new Date($.updatedAt),Q=new Date(K.updatedAt);break;case"status":L=$.status,Q=K.status;break;default:return 0}return L<Q?d==="asc"?-1:1:L>Q?d==="asc"?1:-1:0})},[i,g,b,u,d]),D=U=>new Date(U).toLocaleString(),_=U=>{switch(U){case"NEW":return"status-badge status-new";case"RUNNING":return"status-badge status-running";case"STOPPED":return"status-badge status-stopped";case"ERROR":return"status-badge status-error";default:return"status-badge"}},A=U=>{w(U)},B=()=>{x&&(r(x),w(null))},C=()=>{w(null)};return e?P.jsx("div",{className:"graph-list",children:P.jsxs("div",{className:"loading-state",children:[P.jsx("div",{className:"loading-spinner"}),P.jsx("p",{children:"Loading graphs..."})]})}):t?P.jsx("div",{className:"graph-list",children:P.jsxs("div",{className:"error-state",children:[P.jsxs("p",{className:"error-message",children:["Error: ",t]}),P.jsx("button",{onClick:o,className:"create-button",children:"Create New Graph"})]})}):i.length===0?P.jsx("div",{className:"graph-list",children:P.jsxs("div",{className:"empty-state",children:[P.jsx("h3",{children:"No graphs found"}),P.jsx("p",{children:"Get started by creating your first agent graph."}),P.jsx("button",{onClick:o,className:"create-button",children:"Create New Graph"})]})}):P.jsxs("div",{className:"graph-list",children:[P.jsxs("div",{className:"list-header",children:[P.jsxs("div",{className:"filters",children:[P.jsxs("div",{className:"filter-group",children:[P.jsx("label",{htmlFor:"name-filter",children:"Filter by name:"}),P.jsx("input",{id:"name-filter",type:"text",value:b,onChange:U=>v(U.target.value),placeholder:"Search graphs...",className:"filter-input"})]}),P.jsxs("div",{className:"filter-group",children:[P.jsx("label",{htmlFor:"status-filter",children:"Filter by status:"}),P.jsxs("select",{id:"status-filter",value:g,onChange:U=>O(U.target.value),className:"filter-select",children:[P.jsx("option",{value:"ALL",children:"All Statuses"}),P.jsx("option",{value:"NEW",children:"New"}),P.jsx("option",{value:"RUNNING",children:"Running"}),P.jsx("option",{value:"STOPPED",children:"Stopped"}),P.jsx("option",{value:"ERROR",children:"Error"})]})]})]}),P.jsx("button",{onClick:o,className:"create-button",children:"Create New Graph"})]}),P.jsx("div",{className:"table-container",children:P.jsxs("table",{className:"graphs-table",children:[P.jsx("thead",{children:P.jsxs("tr",{children:[P.jsx("th",{className:`sortable ${u==="name"?`sorted-${d}`:""}`,onClick:()=>T("name"),children:"Name"}),P.jsx("th",{className:`sortable ${u==="status"?`sorted-${d}`:""}`,onClick:()=>T("status"),children:"Status"}),P.jsx("th",{className:`sortable ${u==="createdAt"?`sorted-${d}`:""}`,onClick:()=>T("createdAt"),children:"Created"}),P.jsx("th",{className:`sortable ${u==="updatedAt"?`sorted-${d}`:""}`,onClick:()=>T("updatedAt"),children:"Last Modified"}),P.jsx("th",{children:"Actions"})]})}),P.jsx("tbody",{children:E.map(U=>P.jsxs("tr",{children:[P.jsx("td",{className:"graph-name",children:U.name}),P.jsx("td",{children:P.jsx("span",{className:_(U.status),children:U.status})}),P.jsx("td",{children:D(U.createdAt)}),P.jsx("td",{children:D(U.updatedAt)}),P.jsx("td",{className:"actions-cell",children:P.jsxs("div",{className:"action-buttons",children:[P.jsx("button",{onClick:()=>n(U.id),className:"action-button load-button",title:"Load graph in editor",children:"Load"}),P.jsx("button",{onClick:()=>l(U.id),className:"action-button execute-button",title:"Submit for execution",disabled:U.status==="RUNNING",children:"Execute"}),P.jsx("button",{onClick:()=>A(U.id),className:"action-button delete-button",title:"Delete graph",children:"Delete"})]})})]},U.id))})]})}),x&&P.jsx("div",{className:"modal-overlay",children:P.jsxs("div",{className:"confirmation-modal",children:[P.jsx("h3",{children:"Confirm Delete"}),P.jsx("p",{children:"Are you sure you want to delete this graph? This action cannot be undone."}),P.jsxs("div",{className:"modal-actions",children:[P.jsx("button",{onClick:C,className:"cancel-button",children:"Cancel"}),P.jsx("button",{onClick:B,className:"confirm-delete-button",children:"Delete"})]})]})})]})},zD=({isOpen:i,onClose:e,onConfirm:t,loading:n=!1})=>{const[r,l]=M.useState(""),[o,u]=M.useState(""),h=p=>{p.preventDefault();const g=r.trim();if(!g){u("Graph name is required");return}if(g.length<3){u("Graph name must be at least 3 characters long");return}if(!/^[a-zA-Z0-9_-\s]+$/.test(g)){u("Graph name can only contain letters, numbers, spaces, hyphens, and underscores");return}u(""),t(g)},d=()=>{n||(l(""),u(""),e())};return i?P.jsx("div",{className:"modal-overlay",children:P.jsxs("div",{className:"create-graph-dialog",children:[P.jsx("h3",{children:"Create New Graph"}),P.jsxs("form",{onSubmit:h,children:[P.jsxs("div",{className:"form-group",children:[P.jsx("label",{htmlFor:"graph-name",children:"Graph Name:"}),P.jsx("input",{id:"graph-name",type:"text",value:r,onChange:p=>l(p.target.value),placeholder:"Enter graph name...",className:`form-input ${o?"error":""}`,disabled:n,autoFocus:!0}),o&&P.jsx("span",{className:"error-text",children:o})]}),P.jsxs("div",{className:"dialog-actions",children:[P.jsx("button",{type:"button",onClick:d,className:"cancel-button",disabled:n,children:"Cancel"}),P.jsx("button",{type:"submit",className:"create-button",disabled:n||!r.trim(),children:n?"Creating...":"Create Graph"})]})]})]})}):null};function NT(i,e){return function(){return i.apply(e,arguments)}}const{toString:PD}=Object.prototype,{getPrototypeOf:cO}=Object,{iterator:Dd,toStringTag:MT}=Symbol,Qd=(i=>e=>{const t=PD.call(e);return i[t]||(i[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),wi=i=>(i=i.toLowerCase(),e=>Qd(e)===i),zd=i=>e=>typeof e===i,{isArray:Ja}=Array,zu=zd("undefined");function ac(i){return i!==null&&!zu(i)&&i.constructor!==null&&!zu(i.constructor)&&Pn(i.constructor.isBuffer)&&i.constructor.isBuffer(i)}const DT=wi("ArrayBuffer");function BD(i){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(i):e=i&&i.buffer&&DT(i.buffer),e}const _D=zd("string"),Pn=zd("function"),QT=zd("number"),oc=i=>i!==null&&typeof i=="object",$D=i=>i===!0||i===!1,Tf=i=>{if(Qd(i)!=="object")return!1;const e=cO(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(MT in i)&&!(Dd in i)},LD=i=>{if(!oc(i)||ac(i))return!1;try{return Object.keys(i).length===0&&Object.getPrototypeOf(i)===Object.prototype}catch{return!1}},qD=wi("Date"),UD=wi("File"),jD=wi("Blob"),HD=wi("FileList"),VD=i=>oc(i)&&Pn(i.pipe),XD=i=>{let e;return i&&(typeof FormData=="function"&&i instanceof FormData||Pn(i.append)&&((e=Qd(i))==="formdata"||e==="object"&&Pn(i.toString)&&i.toString()==="[object FormData]"))},GD=wi("URLSearchParams"),[WD,ID,FD,YD]=["ReadableStream","Request","Response","Headers"].map(wi),ZD=i=>i.trim?i.trim():i.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function uc(i,e,{allOwnKeys:t=!1}={}){if(i===null||typeof i>"u")return;let n,r;if(typeof i!="object"&&(i=[i]),Ja(i))for(n=0,r=i.length;n<r;n++)e.call(null,i[n],n,i);else{if(ac(i))return;const l=t?Object.getOwnPropertyNames(i):Object.keys(i),o=l.length;let u;for(n=0;n<o;n++)u=l[n],e.call(null,i[u],u,i)}}function zT(i,e){if(ac(i))return null;e=e.toLowerCase();const t=Object.keys(i);let n=t.length,r;for(;n-- >0;)if(r=t[n],e===r.toLowerCase())return r;return null}const Sl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,PT=i=>!zu(i)&&i!==Sl;function v0(){const{caseless:i}=PT(this)&&this||{},e={},t=(n,r)=>{const l=i&&zT(e,r)||r;Tf(e[l])&&Tf(n)?e[l]=v0(e[l],n):Tf(n)?e[l]=v0({},n):Ja(n)?e[l]=n.slice():e[l]=n};for(let n=0,r=arguments.length;n<r;n++)arguments[n]&&uc(arguments[n],t);return e}const KD=(i,e,t,{allOwnKeys:n}={})=>(uc(e,(r,l)=>{t&&Pn(r)?i[l]=NT(r,t):i[l]=r},{allOwnKeys:n}),i),JD=i=>(i.charCodeAt(0)===65279&&(i=i.slice(1)),i),eQ=(i,e,t,n)=>{i.prototype=Object.create(e.prototype,n),i.prototype.constructor=i,Object.defineProperty(i,"super",{value:e.prototype}),t&&Object.assign(i.prototype,t)},tQ=(i,e,t,n)=>{let r,l,o;const u={};if(e=e||{},i==null)return e;do{for(r=Object.getOwnPropertyNames(i),l=r.length;l-- >0;)o=r[l],(!n||n(o,i,e))&&!u[o]&&(e[o]=i[o],u[o]=!0);i=t!==!1&&cO(i)}while(i&&(!t||t(i,e))&&i!==Object.prototype);return e},nQ=(i,e,t)=>{i=String(i),(t===void 0||t>i.length)&&(t=i.length),t-=e.length;const n=i.indexOf(e,t);return n!==-1&&n===t},iQ=i=>{if(!i)return null;if(Ja(i))return i;let e=i.length;if(!QT(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=i[e];return t},rQ=(i=>e=>i&&e instanceof i)(typeof Uint8Array<"u"&&cO(Uint8Array)),sQ=(i,e)=>{const n=(i&&i[Dd]).call(i);let r;for(;(r=n.next())&&!r.done;){const l=r.value;e.call(i,l[0],l[1])}},lQ=(i,e)=>{let t;const n=[];for(;(t=i.exec(e))!==null;)n.push(t);return n},aQ=wi("HTMLFormElement"),oQ=i=>i.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,n,r){return n.toUpperCase()+r}),nx=(({hasOwnProperty:i})=>(e,t)=>i.call(e,t))(Object.prototype),uQ=wi("RegExp"),BT=(i,e)=>{const t=Object.getOwnPropertyDescriptors(i),n={};uc(t,(r,l)=>{let o;(o=e(r,l,i))!==!1&&(n[l]=o||r)}),Object.defineProperties(i,n)},cQ=i=>{BT(i,(e,t)=>{if(Pn(i)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const n=i[t];if(Pn(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},hQ=(i,e)=>{const t={},n=r=>{r.forEach(l=>{t[l]=!0})};return Ja(i)?n(i):n(String(i).split(e)),t},fQ=()=>{},dQ=(i,e)=>i!=null&&Number.isFinite(i=+i)?i:e;function pQ(i){return!!(i&&Pn(i.append)&&i[MT]==="FormData"&&i[Dd])}const mQ=i=>{const e=new Array(10),t=(n,r)=>{if(oc(n)){if(e.indexOf(n)>=0)return;if(ac(n))return n;if(!("toJSON"in n)){e[r]=n;const l=Ja(n)?[]:{};return uc(n,(o,u)=>{const h=t(o,r+1);!zu(h)&&(l[u]=h)}),e[r]=void 0,l}}return n};return t(i,0)},gQ=wi("AsyncFunction"),yQ=i=>i&&(oc(i)||Pn(i))&&Pn(i.then)&&Pn(i.catch),_T=((i,e)=>i?setImmediate:e?((t,n)=>(Sl.addEventListener("message",({source:r,data:l})=>{r===Sl&&l===t&&n.length&&n.shift()()},!1),r=>{n.push(r),Sl.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",Pn(Sl.postMessage)),OQ=typeof queueMicrotask<"u"?queueMicrotask.bind(Sl):typeof process<"u"&&process.nextTick||_T,bQ=i=>i!=null&&Pn(i[Dd]),F={isArray:Ja,isArrayBuffer:DT,isBuffer:ac,isFormData:XD,isArrayBufferView:BD,isString:_D,isNumber:QT,isBoolean:$D,isObject:oc,isPlainObject:Tf,isEmptyObject:LD,isReadableStream:WD,isRequest:ID,isResponse:FD,isHeaders:YD,isUndefined:zu,isDate:qD,isFile:UD,isBlob:jD,isRegExp:uQ,isFunction:Pn,isStream:VD,isURLSearchParams:GD,isTypedArray:rQ,isFileList:HD,forEach:uc,merge:v0,extend:KD,trim:ZD,stripBOM:JD,inherits:eQ,toFlatObject:tQ,kindOf:Qd,kindOfTest:wi,endsWith:nQ,toArray:iQ,forEachEntry:sQ,matchAll:lQ,isHTMLForm:aQ,hasOwnProperty:nx,hasOwnProp:nx,reduceDescriptors:BT,freezeMethods:cQ,toObjectSet:hQ,toCamelCase:oQ,noop:fQ,toFiniteNumber:dQ,findKey:zT,global:Sl,isContextDefined:PT,isSpecCompliantForm:pQ,toJSONObject:mQ,isAsyncFn:gQ,isThenable:yQ,setImmediate:_T,asap:OQ,isIterable:bQ};function $e(i,e,t,n,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=i,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),n&&(this.request=n),r&&(this.response=r,this.status=r.status?r.status:null)}F.inherits($e,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:F.toJSONObject(this.config),code:this.code,status:this.status}}});const $T=$e.prototype,LT={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(i=>{LT[i]={value:i}});Object.defineProperties($e,LT);Object.defineProperty($T,"isAxiosError",{value:!0});$e.from=(i,e,t,n,r,l)=>{const o=Object.create($T);return F.toFlatObject(i,o,function(h){return h!==Error.prototype},u=>u!=="isAxiosError"),$e.call(o,i.message,e,t,n,r),o.cause=i,o.name=i.name,l&&Object.assign(o,l),o};const vQ=null;function S0(i){return F.isPlainObject(i)||F.isArray(i)}function qT(i){return F.endsWith(i,"[]")?i.slice(0,-2):i}function ix(i,e,t){return i?i.concat(e).map(function(r,l){return r=qT(r),!t&&l?"["+r+"]":r}).join(t?".":""):e}function SQ(i){return F.isArray(i)&&!i.some(S0)}const xQ=F.toFlatObject(F,{},null,function(e){return/^is[A-Z]/.test(e)});function Pd(i,e,t){if(!F.isObject(i))throw new TypeError("target must be an object");e=e||new FormData,t=F.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(x,w){return!F.isUndefined(w[x])});const n=t.metaTokens,r=t.visitor||p,l=t.dots,o=t.indexes,h=(t.Blob||typeof Blob<"u"&&Blob)&&F.isSpecCompliantForm(e);if(!F.isFunction(r))throw new TypeError("visitor must be a function");function d(v){if(v===null)return"";if(F.isDate(v))return v.toISOString();if(F.isBoolean(v))return v.toString();if(!h&&F.isBlob(v))throw new $e("Blob is not supported. Use a Buffer instead.");return F.isArrayBuffer(v)||F.isTypedArray(v)?h&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function p(v,x,w){let T=v;if(v&&!w&&typeof v=="object"){if(F.endsWith(x,"{}"))x=n?x:x.slice(0,-2),v=JSON.stringify(v);else if(F.isArray(v)&&SQ(v)||(F.isFileList(v)||F.endsWith(x,"[]"))&&(T=F.toArray(v)))return x=qT(x),T.forEach(function(D,_){!(F.isUndefined(D)||D===null)&&e.append(o===!0?ix([x],_,l):o===null?x:x+"[]",d(D))}),!1}return S0(v)?!0:(e.append(ix(w,x,l),d(v)),!1)}const g=[],O=Object.assign(xQ,{defaultVisitor:p,convertValue:d,isVisitable:S0});function b(v,x){if(!F.isUndefined(v)){if(g.indexOf(v)!==-1)throw Error("Circular reference detected in "+x.join("."));g.push(v),F.forEach(v,function(T,E){(!(F.isUndefined(T)||T===null)&&r.call(e,T,F.isString(E)?E.trim():E,x,O))===!0&&b(T,x?x.concat(E):[E])}),g.pop()}}if(!F.isObject(i))throw new TypeError("data must be an object");return b(i),e}function rx(i){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(i).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function hO(i,e){this._pairs=[],i&&Pd(i,this,e)}const UT=hO.prototype;UT.append=function(e,t){this._pairs.push([e,t])};UT.toString=function(e){const t=e?function(n){return e.call(this,n,rx)}:rx;return this._pairs.map(function(r){return t(r[0])+"="+t(r[1])},"").join("&")};function wQ(i){return encodeURIComponent(i).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function jT(i,e,t){if(!e)return i;const n=t&&t.encode||wQ;F.isFunction(t)&&(t={serialize:t});const r=t&&t.serialize;let l;if(r?l=r(e,t):l=F.isURLSearchParams(e)?e.toString():new hO(e,t).toString(n),l){const o=i.indexOf("#");o!==-1&&(i=i.slice(0,o)),i+=(i.indexOf("?")===-1?"?":"&")+l}return i}class sx{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){F.forEach(this.handlers,function(n){n!==null&&e(n)})}}const HT={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},kQ=typeof URLSearchParams<"u"?URLSearchParams:hO,TQ=typeof FormData<"u"?FormData:null,CQ=typeof Blob<"u"?Blob:null,AQ={isBrowser:!0,classes:{URLSearchParams:kQ,FormData:TQ,Blob:CQ},protocols:["http","https","file","blob","url","data"]},fO=typeof window<"u"&&typeof document<"u",x0=typeof navigator=="object"&&navigator||void 0,EQ=fO&&(!x0||["ReactNative","NativeScript","NS"].indexOf(x0.product)<0),RQ=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",NQ=fO&&window.location.href||"http://localhost",MQ=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:fO,hasStandardBrowserEnv:EQ,hasStandardBrowserWebWorkerEnv:RQ,navigator:x0,origin:NQ},Symbol.toStringTag,{value:"Module"})),gn={...MQ,...AQ};function DQ(i,e){return Pd(i,new gn.classes.URLSearchParams,{visitor:function(t,n,r,l){return gn.isNode&&F.isBuffer(t)?(this.append(n,t.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...e})}function QQ(i){return F.matchAll(/\w+|\[(\w*)]/g,i).map(e=>e[0]==="[]"?"":e[1]||e[0])}function zQ(i){const e={},t=Object.keys(i);let n;const r=t.length;let l;for(n=0;n<r;n++)l=t[n],e[l]=i[l];return e}function VT(i){function e(t,n,r,l){let o=t[l++];if(o==="__proto__")return!0;const u=Number.isFinite(+o),h=l>=t.length;return o=!o&&F.isArray(r)?r.length:o,h?(F.hasOwnProp(r,o)?r[o]=[r[o],n]:r[o]=n,!u):((!r[o]||!F.isObject(r[o]))&&(r[o]=[]),e(t,n,r[o],l)&&F.isArray(r[o])&&(r[o]=zQ(r[o])),!u)}if(F.isFormData(i)&&F.isFunction(i.entries)){const t={};return F.forEachEntry(i,(n,r)=>{e(QQ(n),r,t,0)}),t}return null}function PQ(i,e,t){if(F.isString(i))try{return(e||JSON.parse)(i),F.trim(i)}catch(n){if(n.name!=="SyntaxError")throw n}return(t||JSON.stringify)(i)}const cc={transitional:HT,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,l=F.isObject(e);if(l&&F.isHTMLForm(e)&&(e=new FormData(e)),F.isFormData(e))return r?JSON.stringify(VT(e)):e;if(F.isArrayBuffer(e)||F.isBuffer(e)||F.isStream(e)||F.isFile(e)||F.isBlob(e)||F.isReadableStream(e))return e;if(F.isArrayBufferView(e))return e.buffer;if(F.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let u;if(l){if(n.indexOf("application/x-www-form-urlencoded")>-1)return DQ(e,this.formSerializer).toString();if((u=F.isFileList(e))||n.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return Pd(u?{"files[]":e}:e,h&&new h,this.formSerializer)}}return l||r?(t.setContentType("application/json",!1),PQ(e)):e}],transformResponse:[function(e){const t=this.transitional||cc.transitional,n=t&&t.forcedJSONParsing,r=this.responseType==="json";if(F.isResponse(e)||F.isReadableStream(e))return e;if(e&&F.isString(e)&&(n&&!this.responseType||r)){const o=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(u){if(o)throw u.name==="SyntaxError"?$e.from(u,$e.ERR_BAD_RESPONSE,this,null,this.response):u}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:gn.classes.FormData,Blob:gn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};F.forEach(["delete","get","head","post","put","patch"],i=>{cc.headers[i]={}});const BQ=F.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),_Q=i=>{const e={};let t,n,r;return i&&i.split(`
`).forEach(function(o){r=o.indexOf(":"),t=o.substring(0,r).trim().toLowerCase(),n=o.substring(r+1).trim(),!(!t||e[t]&&BQ[t])&&(t==="set-cookie"?e[t]?e[t].push(n):e[t]=[n]:e[t]=e[t]?e[t]+", "+n:n)}),e},lx=Symbol("internals");function ru(i){return i&&String(i).trim().toLowerCase()}function Cf(i){return i===!1||i==null?i:F.isArray(i)?i.map(Cf):String(i)}function $Q(i){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=t.exec(i);)e[n[1]]=n[2];return e}const LQ=i=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(i.trim());function gg(i,e,t,n,r){if(F.isFunction(n))return n.call(this,e,t);if(r&&(e=t),!!F.isString(e)){if(F.isString(n))return e.indexOf(n)!==-1;if(F.isRegExp(n))return n.test(e)}}function qQ(i){return i.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}function UQ(i,e){const t=F.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(i,n+t,{value:function(r,l,o){return this[n].call(this,e,r,l,o)},configurable:!0})})}let Bn=class{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function l(u,h,d){const p=ru(h);if(!p)throw new Error("header name must be a non-empty string");const g=F.findKey(r,p);(!g||r[g]===void 0||d===!0||d===void 0&&r[g]!==!1)&&(r[g||h]=Cf(u))}const o=(u,h)=>F.forEach(u,(d,p)=>l(d,p,h));if(F.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(F.isString(e)&&(e=e.trim())&&!LQ(e))o(_Q(e),t);else if(F.isObject(e)&&F.isIterable(e)){let u={},h,d;for(const p of e){if(!F.isArray(p))throw TypeError("Object iterator must return a key-value pair");u[d=p[0]]=(h=u[d])?F.isArray(h)?[...h,p[1]]:[h,p[1]]:p[1]}o(u,t)}else e!=null&&l(t,e,n);return this}get(e,t){if(e=ru(e),e){const n=F.findKey(this,e);if(n){const r=this[n];if(!t)return r;if(t===!0)return $Q(r);if(F.isFunction(t))return t.call(this,r,n);if(F.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=ru(e),e){const n=F.findKey(this,e);return!!(n&&this[n]!==void 0&&(!t||gg(this,this[n],n,t)))}return!1}delete(e,t){const n=this;let r=!1;function l(o){if(o=ru(o),o){const u=F.findKey(n,o);u&&(!t||gg(n,n[u],u,t))&&(delete n[u],r=!0)}}return F.isArray(e)?e.forEach(l):l(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const l=t[n];(!e||gg(this,this[l],l,e,!0))&&(delete this[l],r=!0)}return r}normalize(e){const t=this,n={};return F.forEach(this,(r,l)=>{const o=F.findKey(n,l);if(o){t[o]=Cf(r),delete t[l];return}const u=e?qQ(l):String(l).trim();u!==l&&delete t[l],t[u]=Cf(r),n[u]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return F.forEach(this,(n,r)=>{n!=null&&n!==!1&&(t[r]=e&&F.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach(r=>n.set(r)),n}static accessor(e){const n=(this[lx]=this[lx]={accessors:{}}).accessors,r=this.prototype;function l(o){const u=ru(o);n[u]||(UQ(r,o),n[u]=!0)}return F.isArray(e)?e.forEach(l):l(e),this}};Bn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);F.reduceDescriptors(Bn.prototype,({value:i},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>i,set(n){this[t]=n}}});F.freezeMethods(Bn);function yg(i,e){const t=this||cc,n=e||t,r=Bn.from(n.headers);let l=n.data;return F.forEach(i,function(u){l=u.call(t,l,r.normalize(),e?e.status:void 0)}),r.normalize(),l}function XT(i){return!!(i&&i.__CANCEL__)}function eo(i,e,t){$e.call(this,i??"canceled",$e.ERR_CANCELED,e,t),this.name="CanceledError"}F.inherits(eo,$e,{__CANCEL__:!0});function GT(i,e,t){const n=t.config.validateStatus;!t.status||!n||n(t.status)?i(t):e(new $e("Request failed with status code "+t.status,[$e.ERR_BAD_REQUEST,$e.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function jQ(i){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(i);return e&&e[1]||""}function HQ(i,e){i=i||10;const t=new Array(i),n=new Array(i);let r=0,l=0,o;return e=e!==void 0?e:1e3,function(h){const d=Date.now(),p=n[l];o||(o=d),t[r]=h,n[r]=d;let g=l,O=0;for(;g!==r;)O+=t[g++],g=g%i;if(r=(r+1)%i,r===l&&(l=(l+1)%i),d-o<e)return;const b=p&&d-p;return b?Math.round(O*1e3/b):void 0}}function VQ(i,e){let t=0,n=1e3/e,r,l;const o=(d,p=Date.now())=>{t=p,r=null,l&&(clearTimeout(l),l=null),i(...d)};return[(...d)=>{const p=Date.now(),g=p-t;g>=n?o(d,p):(r=d,l||(l=setTimeout(()=>{l=null,o(r)},n-g)))},()=>r&&o(r)]}const Zf=(i,e,t=3)=>{let n=0;const r=HQ(50,250);return VQ(l=>{const o=l.loaded,u=l.lengthComputable?l.total:void 0,h=o-n,d=r(h),p=o<=u;n=o;const g={loaded:o,total:u,progress:u?o/u:void 0,bytes:h,rate:d||void 0,estimated:d&&u&&p?(u-o)/d:void 0,event:l,lengthComputable:u!=null,[e?"download":"upload"]:!0};i(g)},t)},ax=(i,e)=>{const t=i!=null;return[n=>e[0]({lengthComputable:t,total:i,loaded:n}),e[1]]},ox=i=>(...e)=>F.asap(()=>i(...e)),XQ=gn.hasStandardBrowserEnv?((i,e)=>t=>(t=new URL(t,gn.origin),i.protocol===t.protocol&&i.host===t.host&&(e||i.port===t.port)))(new URL(gn.origin),gn.navigator&&/(msie|trident)/i.test(gn.navigator.userAgent)):()=>!0,GQ=gn.hasStandardBrowserEnv?{write(i,e,t,n,r,l){const o=[i+"="+encodeURIComponent(e)];F.isNumber(t)&&o.push("expires="+new Date(t).toGMTString()),F.isString(n)&&o.push("path="+n),F.isString(r)&&o.push("domain="+r),l===!0&&o.push("secure"),document.cookie=o.join("; ")},read(i){const e=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(i){this.write(i,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function WQ(i){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(i)}function IQ(i,e){return e?i.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):i}function WT(i,e,t){let n=!WQ(e);return i&&(n||t==!1)?IQ(i,e):e}const ux=i=>i instanceof Bn?{...i}:i;function Al(i,e){e=e||{};const t={};function n(d,p,g,O){return F.isPlainObject(d)&&F.isPlainObject(p)?F.merge.call({caseless:O},d,p):F.isPlainObject(p)?F.merge({},p):F.isArray(p)?p.slice():p}function r(d,p,g,O){if(F.isUndefined(p)){if(!F.isUndefined(d))return n(void 0,d,g,O)}else return n(d,p,g,O)}function l(d,p){if(!F.isUndefined(p))return n(void 0,p)}function o(d,p){if(F.isUndefined(p)){if(!F.isUndefined(d))return n(void 0,d)}else return n(void 0,p)}function u(d,p,g){if(g in e)return n(d,p);if(g in i)return n(void 0,d)}const h={url:l,method:l,data:l,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:u,headers:(d,p,g)=>r(ux(d),ux(p),g,!0)};return F.forEach(Object.keys({...i,...e}),function(p){const g=h[p]||r,O=g(i[p],e[p],p);F.isUndefined(O)&&g!==u||(t[p]=O)}),t}const IT=i=>{const e=Al({},i);let{data:t,withXSRFToken:n,xsrfHeaderName:r,xsrfCookieName:l,headers:o,auth:u}=e;e.headers=o=Bn.from(o),e.url=jT(WT(e.baseURL,e.url,e.allowAbsoluteUrls),i.params,i.paramsSerializer),u&&o.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):"")));let h;if(F.isFormData(t)){if(gn.hasStandardBrowserEnv||gn.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((h=o.getContentType())!==!1){const[d,...p]=h?h.split(";").map(g=>g.trim()).filter(Boolean):[];o.setContentType([d||"multipart/form-data",...p].join("; "))}}if(gn.hasStandardBrowserEnv&&(n&&F.isFunction(n)&&(n=n(e)),n||n!==!1&&XQ(e.url))){const d=r&&l&&GQ.read(l);d&&o.set(r,d)}return e},FQ=typeof XMLHttpRequest<"u",YQ=FQ&&function(i){return new Promise(function(t,n){const r=IT(i);let l=r.data;const o=Bn.from(r.headers).normalize();let{responseType:u,onUploadProgress:h,onDownloadProgress:d}=r,p,g,O,b,v;function x(){b&&b(),v&&v(),r.cancelToken&&r.cancelToken.unsubscribe(p),r.signal&&r.signal.removeEventListener("abort",p)}let w=new XMLHttpRequest;w.open(r.method.toUpperCase(),r.url,!0),w.timeout=r.timeout;function T(){if(!w)return;const D=Bn.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),A={data:!u||u==="text"||u==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:D,config:i,request:w};GT(function(C){t(C),x()},function(C){n(C),x()},A),w=null}"onloadend"in w?w.onloadend=T:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(T)},w.onabort=function(){w&&(n(new $e("Request aborted",$e.ECONNABORTED,i,w)),w=null)},w.onerror=function(){n(new $e("Network Error",$e.ERR_NETWORK,i,w)),w=null},w.ontimeout=function(){let _=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const A=r.transitional||HT;r.timeoutErrorMessage&&(_=r.timeoutErrorMessage),n(new $e(_,A.clarifyTimeoutError?$e.ETIMEDOUT:$e.ECONNABORTED,i,w)),w=null},l===void 0&&o.setContentType(null),"setRequestHeader"in w&&F.forEach(o.toJSON(),function(_,A){w.setRequestHeader(A,_)}),F.isUndefined(r.withCredentials)||(w.withCredentials=!!r.withCredentials),u&&u!=="json"&&(w.responseType=r.responseType),d&&([O,v]=Zf(d,!0),w.addEventListener("progress",O)),h&&w.upload&&([g,b]=Zf(h),w.upload.addEventListener("progress",g),w.upload.addEventListener("loadend",b)),(r.cancelToken||r.signal)&&(p=D=>{w&&(n(!D||D.type?new eo(null,i,w):D),w.abort(),w=null)},r.cancelToken&&r.cancelToken.subscribe(p),r.signal&&(r.signal.aborted?p():r.signal.addEventListener("abort",p)));const E=jQ(r.url);if(E&&gn.protocols.indexOf(E)===-1){n(new $e("Unsupported protocol "+E+":",$e.ERR_BAD_REQUEST,i));return}w.send(l||null)})},ZQ=(i,e)=>{const{length:t}=i=i?i.filter(Boolean):[];if(e||t){let n=new AbortController,r;const l=function(d){if(!r){r=!0,u();const p=d instanceof Error?d:this.reason;n.abort(p instanceof $e?p:new eo(p instanceof Error?p.message:p))}};let o=e&&setTimeout(()=>{o=null,l(new $e(`timeout ${e} of ms exceeded`,$e.ETIMEDOUT))},e);const u=()=>{i&&(o&&clearTimeout(o),o=null,i.forEach(d=>{d.unsubscribe?d.unsubscribe(l):d.removeEventListener("abort",l)}),i=null)};i.forEach(d=>d.addEventListener("abort",l));const{signal:h}=n;return h.unsubscribe=()=>F.asap(u),h}},KQ=function*(i,e){let t=i.byteLength;if(t<e){yield i;return}let n=0,r;for(;n<t;)r=n+e,yield i.slice(n,r),n=r},JQ=async function*(i,e){for await(const t of ez(i))yield*KQ(t,e)},ez=async function*(i){if(i[Symbol.asyncIterator]){yield*i;return}const e=i.getReader();try{for(;;){const{done:t,value:n}=await e.read();if(t)break;yield n}}finally{await e.cancel()}},cx=(i,e,t,n)=>{const r=JQ(i,e);let l=0,o,u=h=>{o||(o=!0,n&&n(h))};return new ReadableStream({async pull(h){try{const{done:d,value:p}=await r.next();if(d){u(),h.close();return}let g=p.byteLength;if(t){let O=l+=g;t(O)}h.enqueue(new Uint8Array(p))}catch(d){throw u(d),d}},cancel(h){return u(h),r.return()}},{highWaterMark:2})},Bd=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",FT=Bd&&typeof ReadableStream=="function",tz=Bd&&(typeof TextEncoder=="function"?(i=>e=>i.encode(e))(new TextEncoder):async i=>new Uint8Array(await new Response(i).arrayBuffer())),YT=(i,...e)=>{try{return!!i(...e)}catch{return!1}},nz=FT&&YT(()=>{let i=!1;const e=new Request(gn.origin,{body:new ReadableStream,method:"POST",get duplex(){return i=!0,"half"}}).headers.has("Content-Type");return i&&!e}),hx=64*1024,w0=FT&&YT(()=>F.isReadableStream(new Response("").body)),Kf={stream:w0&&(i=>i.body)};Bd&&(i=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Kf[e]&&(Kf[e]=F.isFunction(i[e])?t=>t[e]():(t,n)=>{throw new $e(`Response type '${e}' is not supported`,$e.ERR_NOT_SUPPORT,n)})})})(new Response);const iz=async i=>{if(i==null)return 0;if(F.isBlob(i))return i.size;if(F.isSpecCompliantForm(i))return(await new Request(gn.origin,{method:"POST",body:i}).arrayBuffer()).byteLength;if(F.isArrayBufferView(i)||F.isArrayBuffer(i))return i.byteLength;if(F.isURLSearchParams(i)&&(i=i+""),F.isString(i))return(await tz(i)).byteLength},rz=async(i,e)=>{const t=F.toFiniteNumber(i.getContentLength());return t??iz(e)},sz=Bd&&(async i=>{let{url:e,method:t,data:n,signal:r,cancelToken:l,timeout:o,onDownloadProgress:u,onUploadProgress:h,responseType:d,headers:p,withCredentials:g="same-origin",fetchOptions:O}=IT(i);d=d?(d+"").toLowerCase():"text";let b=ZQ([r,l&&l.toAbortSignal()],o),v;const x=b&&b.unsubscribe&&(()=>{b.unsubscribe()});let w;try{if(h&&nz&&t!=="get"&&t!=="head"&&(w=await rz(p,n))!==0){let A=new Request(e,{method:"POST",body:n,duplex:"half"}),B;if(F.isFormData(n)&&(B=A.headers.get("content-type"))&&p.setContentType(B),A.body){const[C,U]=ax(w,Zf(ox(h)));n=cx(A.body,hx,C,U)}}F.isString(g)||(g=g?"include":"omit");const T="credentials"in Request.prototype;v=new Request(e,{...O,signal:b,method:t.toUpperCase(),headers:p.normalize().toJSON(),body:n,duplex:"half",credentials:T?g:void 0});let E=await fetch(v,O);const D=w0&&(d==="stream"||d==="response");if(w0&&(u||D&&x)){const A={};["status","statusText","headers"].forEach($=>{A[$]=E[$]});const B=F.toFiniteNumber(E.headers.get("content-length")),[C,U]=u&&ax(B,Zf(ox(u),!0))||[];E=new Response(cx(E.body,hx,C,()=>{U&&U(),x&&x()}),A)}d=d||"text";let _=await Kf[F.findKey(Kf,d)||"text"](E,i);return!D&&x&&x(),await new Promise((A,B)=>{GT(A,B,{data:_,headers:Bn.from(E.headers),status:E.status,statusText:E.statusText,config:i,request:v})})}catch(T){throw x&&x(),T&&T.name==="TypeError"&&/Load failed|fetch/i.test(T.message)?Object.assign(new $e("Network Error",$e.ERR_NETWORK,i,v),{cause:T.cause||T}):$e.from(T,T&&T.code,i,v)}}),k0={http:vQ,xhr:YQ,fetch:sz};F.forEach(k0,(i,e)=>{if(i){try{Object.defineProperty(i,"name",{value:e})}catch{}Object.defineProperty(i,"adapterName",{value:e})}});const fx=i=>`- ${i}`,lz=i=>F.isFunction(i)||i===null||i===!1,ZT={getAdapter:i=>{i=F.isArray(i)?i:[i];const{length:e}=i;let t,n;const r={};for(let l=0;l<e;l++){t=i[l];let o;if(n=t,!lz(t)&&(n=k0[(o=String(t)).toLowerCase()],n===void 0))throw new $e(`Unknown adapter '${o}'`);if(n)break;r[o||"#"+l]=n}if(!n){const l=Object.entries(r).map(([u,h])=>`adapter ${u} `+(h===!1?"is not supported by the environment":"is not available in the build"));let o=e?l.length>1?`since :
`+l.map(fx).join(`
`):" "+fx(l[0]):"as no adapter specified";throw new $e("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:k0};function Og(i){if(i.cancelToken&&i.cancelToken.throwIfRequested(),i.signal&&i.signal.aborted)throw new eo(null,i)}function dx(i){return Og(i),i.headers=Bn.from(i.headers),i.data=yg.call(i,i.transformRequest),["post","put","patch"].indexOf(i.method)!==-1&&i.headers.setContentType("application/x-www-form-urlencoded",!1),ZT.getAdapter(i.adapter||cc.adapter)(i).then(function(n){return Og(i),n.data=yg.call(i,i.transformResponse,n),n.headers=Bn.from(n.headers),n},function(n){return XT(n)||(Og(i),n&&n.response&&(n.response.data=yg.call(i,i.transformResponse,n.response),n.response.headers=Bn.from(n.response.headers))),Promise.reject(n)})}const KT="1.11.0",_d={};["object","boolean","number","function","string","symbol"].forEach((i,e)=>{_d[i]=function(n){return typeof n===i||"a"+(e<1?"n ":" ")+i}});const px={};_d.transitional=function(e,t,n){function r(l,o){return"[Axios v"+KT+"] Transitional option '"+l+"'"+o+(n?". "+n:"")}return(l,o,u)=>{if(e===!1)throw new $e(r(o," has been removed"+(t?" in "+t:"")),$e.ERR_DEPRECATED);return t&&!px[o]&&(px[o]=!0,console.warn(r(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(l,o,u):!0}};_d.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function az(i,e,t){if(typeof i!="object")throw new $e("options must be an object",$e.ERR_BAD_OPTION_VALUE);const n=Object.keys(i);let r=n.length;for(;r-- >0;){const l=n[r],o=e[l];if(o){const u=i[l],h=u===void 0||o(u,l,i);if(h!==!0)throw new $e("option "+l+" must be "+h,$e.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new $e("Unknown option "+l,$e.ERR_BAD_OPTION)}}const Af={assertOptions:az,validators:_d},Di=Af.validators;let kl=class{constructor(e){this.defaults=e||{},this.interceptors={request:new sx,response:new sx}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const l=r.stack?r.stack.replace(/^.+\n/,""):"";try{n.stack?l&&!String(n.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+l):n.stack=l}catch{}}throw n}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Al(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:l}=t;n!==void 0&&Af.assertOptions(n,{silentJSONParsing:Di.transitional(Di.boolean),forcedJSONParsing:Di.transitional(Di.boolean),clarifyTimeoutError:Di.transitional(Di.boolean)},!1),r!=null&&(F.isFunction(r)?t.paramsSerializer={serialize:r}:Af.assertOptions(r,{encode:Di.function,serialize:Di.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Af.assertOptions(t,{baseUrl:Di.spelling("baseURL"),withXsrfToken:Di.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=l&&F.merge(l.common,l[t.method]);l&&F.forEach(["delete","get","head","post","put","patch","common"],v=>{delete l[v]}),t.headers=Bn.concat(o,l);const u=[];let h=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(t)===!1||(h=h&&x.synchronous,u.unshift(x.fulfilled,x.rejected))});const d=[];this.interceptors.response.forEach(function(x){d.push(x.fulfilled,x.rejected)});let p,g=0,O;if(!h){const v=[dx.bind(this),void 0];for(v.unshift(...u),v.push(...d),O=v.length,p=Promise.resolve(t);g<O;)p=p.then(v[g++],v[g++]);return p}O=u.length;let b=t;for(g=0;g<O;){const v=u[g++],x=u[g++];try{b=v(b)}catch(w){x.call(this,w);break}}try{p=dx.call(this,b)}catch(v){return Promise.reject(v)}for(g=0,O=d.length;g<O;)p=p.then(d[g++],d[g++]);return p}getUri(e){e=Al(this.defaults,e);const t=WT(e.baseURL,e.url,e.allowAbsoluteUrls);return jT(t,e.params,e.paramsSerializer)}};F.forEach(["delete","get","head","options"],function(e){kl.prototype[e]=function(t,n){return this.request(Al(n||{},{method:e,url:t,data:(n||{}).data}))}});F.forEach(["post","put","patch"],function(e){function t(n){return function(l,o,u){return this.request(Al(u||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:l,data:o}))}}kl.prototype[e]=t(),kl.prototype[e+"Form"]=t(!0)});let oz=class JT{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(l){t=l});const n=this;this.promise.then(r=>{if(!n._listeners)return;let l=n._listeners.length;for(;l-- >0;)n._listeners[l](r);n._listeners=null}),this.promise.then=r=>{let l;const o=new Promise(u=>{n.subscribe(u),l=u}).then(r);return o.cancel=function(){n.unsubscribe(l)},o},e(function(l,o,u){n.reason||(n.reason=new eo(l,o,u),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=n=>{e.abort(n)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new JT(function(r){e=r}),cancel:e}}};function uz(i){return function(t){return i.apply(null,t)}}function cz(i){return F.isObject(i)&&i.isAxiosError===!0}const T0={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(T0).forEach(([i,e])=>{T0[e]=i});function eC(i){const e=new kl(i),t=NT(kl.prototype.request,e);return F.extend(t,kl.prototype,e,{allOwnKeys:!0}),F.extend(t,e,null,{allOwnKeys:!0}),t.create=function(r){return eC(Al(i,r))},t}const Qt=eC(cc);Qt.Axios=kl;Qt.CanceledError=eo;Qt.CancelToken=oz;Qt.isCancel=XT;Qt.VERSION=KT;Qt.toFormData=Pd;Qt.AxiosError=$e;Qt.Cancel=Qt.CanceledError;Qt.all=function(e){return Promise.all(e)};Qt.spread=uz;Qt.isAxiosError=cz;Qt.mergeConfig=Al;Qt.AxiosHeaders=Bn;Qt.formToJSON=i=>VT(F.isHTMLForm(i)?new FormData(i):i);Qt.getAdapter=ZT.getAdapter;Qt.HttpStatusCode=T0;Qt.default=Qt;const{Axios:Rj,AxiosError:Nj,CanceledError:Mj,isCancel:Dj,CancelToken:Qj,VERSION:zj,all:Pj,Cancel:Bj,isAxiosError:_j,spread:$j,toFormData:Lj,AxiosHeaders:qj,HttpStatusCode:Uj,formToJSON:jj,getAdapter:Hj,mergeConfig:Vj}=Qt;class C0 extends Error{originalError;constructor(e,t){super(e),this.name="NetworkError",this.originalError=t}}class A0 extends Error{errors;constructor(e,t=[]){super(e),this.name="ValidationError",this.errors=t}}class tC extends Error{constructor(e){super(e),this.name="TenantAccessError"}}class nC extends Error{fileName;constructor(e,t){super(e),this.name="FileProcessingError",this.fileName=t}}const mx=3,hz=1e3,fz=[408,429,500,502,503,504],rn=Qt.create({baseURL:"/api/v1",headers:{"Content-Type":"application/json"},timeout:3e4}),dz=i=>new Promise(e=>setTimeout(e,i)),pz=i=>i.response?fz.includes(i.response.status):!0,pn=async(i,e=mx)=>{try{return(await i()).data}catch(t){const n=t;if(e>0&&pz(n))return await dz(hz*(mx-e+1)),pn(i,e-1);throw mz(n)}},mz=i=>{if(!i.response)return new C0("Network error occurred. Please check your connection and try again.",i);const{status:e,data:t}=i.response,n=t?.message||i.message||"An unexpected error occurred";switch(e){case 400:return t?.error?.includes("validation")?new A0(n,t?.details?.errors||[]):new Error(n);case 401:case 403:return new tC("Access denied. Please check your tenant permissions.");case 404:return new Error("The requested resource was not found.");case 409:return new Error("Conflict: "+n);case 422:return t?.error?.includes("file")?new nC(n):new A0(n,t?.details?.errors||[]);case 429:return new Error("Too many requests. Please wait a moment and try again.");case 500:case 502:case 503:case 504:return new Error("Server error occurred. Please try again later.");default:return new Error(n)}};rn.interceptors.request.use(i=>(i.metadata={startTime:Date.now()},i),i=>Promise.reject(i));rn.interceptors.response.use(i=>i,i=>Promise.reject(i));const ka={listGraphs:i=>pn(()=>rn.get(`/graphs?tenantId=${i}`)),getGraph:(i,e)=>pn(()=>rn.get(`/graphs/${i}?tenantId=${e}`)),createGraph:i=>pn(()=>rn.post("/graphs",i)),updateGraph:(i,e)=>pn(()=>rn.put(`/graphs/${i}`,e)),deleteGraph:(i,e)=>pn(()=>rn.delete(`/graphs/${i}?tenantId=${e}`)),deleteNode:(i,e,t)=>pn(()=>rn.delete(`/graphs/${i}/nodes/${e}?tenantId=${t}`)),deleteEdge:(i,e,t)=>pn(()=>rn.delete(`/graphs/${i}/edges/${e}?tenantId=${t}`)),submitForExecution:(i,e)=>pn(()=>rn.post(`/graphs/${i}/execute?tenantId=${e}`)),updateGraphStatus:(i,e)=>pn(()=>rn.put(`/graphs/${i}/status`,e))},gx={getPlanFiles:i=>pn(()=>rn.get(`/files/plan/${i}`)),getTaskFiles:i=>pn(()=>rn.get(`/files/task/${i}`)),updatePlanFile:(i,e,t)=>pn(()=>rn.put(`/files/plan/${i}/files/${e}`,t,{headers:{"Content-Type":"text/plain"}})),updateTaskFile:(i,e,t)=>pn(()=>rn.put(`/files/task/${i}/files/${e}`,t,{headers:{"Content-Type":"text/plain"}}))},yx={validateGraph:i=>pn(()=>rn.post("/validation/graph",i)),validateNodeName:i=>pn(()=>rn.post("/validation/node-name",i))},gz=()=>{const{showError:i,showWarning:e}=MD(),t=M.useCallback((r,l)=>{if(console.error("API Error:",r,l),r instanceof C0)i(r.message,{duration:8e3,retryAction:{label:"Retry",action:()=>{window.location.reload()}}});else if(r instanceof A0){const o=r.errors.length>0?`Validation failed: ${r.errors.join(", ")}`:r.message;e(o,{duration:6e3})}else if(r instanceof tC)i(r.message,{duration:1e4});else if(r instanceof nC){const o=r.fileName?`File processing error in ${r.fileName}: ${r.message}`:r.message;i(o,{duration:6e3})}else{const o=l?`${l}: `:"";i(`${o}${r.message}`,{duration:5e3})}},[i,e]),n=M.useCallback(async(r,l,o)=>{try{return await r()}catch(u){const h=u;return u instanceof C0&&o?i(h.message,{duration:8e3,retryAction:{label:"Retry",action:o}}):t(h,l),null}},[t,i]);return{handleError:t,handleAsyncError:n}};function iC(){const{state:i,dispatch:e}=Ka(),{handleAsyncError:t}=gz(),[n,r]=M.useState([]),l=M.useCallback(async()=>{e({type:"SET_LOADING",payload:!0}),e({type:"CLEAR_ERROR"});const g=await t(()=>ka.listGraphs(i.tenantId),"Failed to load graphs",l);g&&r(g),e({type:"SET_LOADING",payload:!1})},[i.tenantId,e,t]),o=async g=>{e({type:"SET_LOADING",payload:!0}),e({type:"CLEAR_ERROR"});const O=await t(()=>ka.getGraph(g,i.tenantId),"Failed to load graph",()=>o(g));if(O)return e({type:"SET_CURRENT_GRAPH",payload:O}),e({type:"SET_LOADING",payload:!1}),O;throw e({type:"SET_LOADING",payload:!1}),new Error("Failed to load graph")},u=async g=>{e({type:"SET_LOADING",payload:!0}),e({type:"CLEAR_ERROR"});const O=await t(()=>ka.createGraph(g),"Failed to create graph",()=>u(g));if(O)return e({type:"SET_CURRENT_GRAPH",payload:O}),await l(),e({type:"SET_LOADING",payload:!1}),O;throw e({type:"SET_LOADING",payload:!1}),new Error("Failed to create graph")},h=async(g,O)=>{e({type:"SET_LOADING",payload:!0}),e({type:"CLEAR_ERROR"});const b=await t(()=>ka.updateGraph(g,O),"Failed to update graph",()=>h(g,O));if(b)return e({type:"SET_CURRENT_GRAPH",payload:b}),e({type:"SET_LOADING",payload:!1}),b;throw e({type:"SET_LOADING",payload:!1}),new Error("Failed to update graph")},d=async g=>{e({type:"SET_LOADING",payload:!0}),e({type:"CLEAR_ERROR"}),await t(()=>ka.deleteGraph(g,i.tenantId),"Failed to delete graph",()=>d(g))!==null&&await l(),e({type:"SET_LOADING",payload:!1})},p=async g=>{e({type:"SET_LOADING",payload:!0}),e({type:"CLEAR_ERROR"});const O=await t(()=>ka.submitForExecution(g,i.tenantId),"Failed to submit for execution",()=>p(g));if(O)return await l(),e({type:"SET_LOADING",payload:!1}),O;throw e({type:"SET_LOADING",payload:!1}),new Error("Failed to submit for execution")};return M.useEffect(()=>{l()},[l]),{graphs:n,loadGraphs:l,loadGraph:o,createGraph:u,updateGraph:h,deleteGraph:d,submitForExecution:p}}const yz=()=>{const i=sO(),{state:e}=Ka(),{graphs:t,loadGraph:n,deleteGraph:r,submitForExecution:l,createGraph:o}=iC(),[u,h]=M.useState(!1),d=()=>{h(!0)},p=async x=>{try{await o({name:x,tenantId:e.tenantId}),h(!1),i("/editor")}catch(w){console.error("Failed to create graph:",w)}},g=()=>{h(!1)},O=async x=>{try{await n(x),i("/editor")}catch(w){console.error("Failed to load graph:",w)}},b=async x=>{try{await r(x)}catch(w){console.error("Failed to delete graph:",w)}},v=async x=>{try{await l(x)}catch(w){console.error("Failed to submit for execution:",w)}};return P.jsxs("div",{className:"graph-management",children:[P.jsx(RT,{}),P.jsxs("main",{className:"management-content",children:[P.jsx(QD,{graphs:t,loading:e.isLoading,error:e.error,onLoadGraph:O,onDeleteGraph:b,onSubmitForExecution:v,onCreateNew:d}),P.jsx(zD,{isOpen:u,onClose:g,onConfirm:p,loading:e.isLoading})]})]})},Oz=({leftPane:i,centerTopPane:e,centerBottomPane:t,header:n})=>P.jsxs("div",{className:"three-pane-layout",children:[n&&P.jsx("div",{className:"layout-header",children:n}),P.jsxs("div",{className:"layout-content",children:[P.jsx("div",{className:"left-pane",children:i}),P.jsxs("div",{className:"right-panes",children:[P.jsx("div",{className:"center-top-pane",children:e}),P.jsx("div",{className:"center-bottom-pane",children:t})]})]})]}),bz=/^[a-zA-Z_][a-zA-Z0-9_]*$/,vz=new Set(["False","None","True","and","as","assert","async","await","break","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","nonlocal","not","or","pass","raise","return","try","while","with","yield"]);class zh{static validatePythonIdentifier(e){const t=[],n=[];if(!e||e.trim().length===0)return t.push("Node name cannot be empty"),{valid:!1,errors:t,warnings:n};const r=e.trim();return bz.test(r)||t.push(`Node name '${r}' is not a valid Python identifier. It must start with a letter or underscore and contain only letters, digits, and underscores.`),vz.has(r)&&t.push(`Node name '${r}' is a Python keyword and cannot be used as an identifier`),r.startsWith("_")&&n.push(`Node name '${r}' starts with underscore, which is typically reserved for internal use`),r.toUpperCase()===r&&r.length>1&&n.push(`Node name '${r}' is all uppercase, which is typically reserved for constants`),{valid:t.length===0,errors:t,warnings:n}}static validateNodeNameUniqueness(e,t,n){const r=[],l=[];if(!e||e.trim().length===0)return r.push("Node name cannot be empty"),{valid:!1,errors:r,warnings:l};const o=e.trim();return(n?t.filter(h=>h!==n):t).includes(o)&&r.push(`Node name '${o}' already exists in the graph`),{valid:r.length===0,errors:r,warnings:l}}static validateNodeName(e,t=[],n){const r=this.validatePythonIdentifier(e);if(!r.valid)return r;const l=this.validateNodeNameUniqueness(e,t,n);return{valid:r.valid&&l.valid,errors:[...r.errors,...l.errors],warnings:[...r.warnings,...l.warnings]}}static validateConnectionConstraints(e){const t=[],n=[],r=new Set(e.plans?.map(o=>o.name)||[]),l=new Set(e.tasks?.map(o=>o.name)||[]);if(e.planToTasks)for(const[o,u]of Object.entries(e.planToTasks)){if(!r.has(o)){t.push(`Plan '${o}' referenced in connections but not found in graph`);continue}for(const h of u)l.has(h)||t.push(`Plan '${o}' is connected to '${h}' which is not a task`)}if(e.taskToPlan)for(const[o,u]of Object.entries(e.taskToPlan)){if(!l.has(o)){t.push(`Task '${o}' referenced in connections but not found in graph`);continue}r.has(u)||t.push(`Task '${o}' is connected to '${u}' which is not a plan`)}return{valid:t.length===0,errors:t,warnings:n}}static validateTaskUpstreamConstraints(e){const t=[],n=[],r=new Set(e.plans?.map(l=>l.name)||[]);if(e.tasks&&e.taskToPlan)for(const l of e.tasks){const o=e.taskToPlan[l.name];o?r.has(o)||t.push(`Task '${l.name}' references upstream plan '${o}' which does not exist`):t.push(`Task '${l.name}' must have exactly one upstream plan`)}return{valid:t.length===0,errors:t,warnings:n}}static validatePlanUpstreamConstraints(e){const t=[],n=[],r=new Set(e.tasks?.map(l=>l.name)||[]);if(e.plans){for(const l of e.plans)if(l.upstreamTaskIds)for(const o of l.upstreamTaskIds)r.has(o)||t.push(`Plan '${l.name}' references upstream task '${o}' which does not exist`)}return{valid:t.length===0,errors:t,warnings:n}}static validateConnectivity(e){const t=[],n=[],r=new Set,l=new Set;return e.plans?.forEach(u=>r.add(u.name)),e.tasks?.forEach(u=>r.add(u.name)),e.planToTasks&&(Object.keys(e.planToTasks).forEach(u=>l.add(u)),Object.values(e.planToTasks).forEach(u=>u.forEach(h=>l.add(h)))),e.taskToPlan&&(Object.keys(e.taskToPlan).forEach(u=>l.add(u)),Object.values(e.taskToPlan).forEach(u=>l.add(u))),Array.from(r).filter(u=>!l.has(u)).forEach(u=>{n.push(`Node '${u}' is not connected to any other nodes`)}),r.size===0?n.push("Graph contains no nodes"):r.size===1&&n.push("Graph contains only one node"),{valid:t.length===0,errors:t,warnings:n}}static validateGraphNodeNameUniqueness(e){const t=[],n=[],r=new Set,l=new Set;return e.plans?.forEach(o=>{o.name&&(r.has(o.name)?l.add(o.name):r.add(o.name))}),e.tasks?.forEach(o=>{o.name&&(r.has(o.name)?l.add(o.name):r.add(o.name))}),l.forEach(o=>{t.push(`Node name '${o}' is used multiple times in the graph`)}),{valid:t.length===0,errors:t,warnings:n}}static validateGraph(e){const t=[],n=[];return e?((!e.name||e.name.trim().length===0)&&t.push("Graph name cannot be empty"),(!e.tenantId||e.tenantId.trim().length===0)&&t.push("Tenant ID cannot be empty"),[this.validateGraphNodeNameUniqueness(e),this.validateConnectionConstraints(e),this.validateTaskUpstreamConstraints(e),this.validatePlanUpstreamConstraints(e),this.validateConnectivity(e)].forEach(l=>{t.push(...l.errors),n.push(...l.warnings)}),{valid:t.length===0,errors:t,warnings:n}):(t.push("Graph cannot be null"),{valid:!1,errors:t,warnings:n})}}function rC(){const[i,e]=M.useState({isValidating:!1,lastValidationResult:null,validationErrors:[],validationWarnings:[]}),t=M.useCallback(async(d,p=!1)=>{e(g=>({...g,isValidating:!0}));try{let g;return p?g=await yx.validateGraph(d):g=zh.validateGraph(d),e({isValidating:!1,lastValidationResult:g,validationErrors:g.errors||[],validationWarnings:g.warnings||[]}),g}catch(g){const O=g instanceof Error?g.message:"Validation failed",b={valid:!1,errors:[O],warnings:[]};return e({isValidating:!1,lastValidationResult:b,validationErrors:[O],validationWarnings:[]}),b}},[]),n=M.useCallback(async(d,p,g,O,b=!1)=>{try{if(b){const v={nodeName:d.trim(),graphId:p,existingNodeNames:g,excludeNodeId:O};return await yx.validateNodeName(v)}else return zh.validateNodeName(d,g||[],O)}catch(v){return{valid:!1,errors:[v instanceof Error?v.message:"Node name validation failed"],warnings:[]}}},[]),r=M.useCallback(()=>{e({isValidating:!1,lastValidationResult:null,validationErrors:[],validationWarnings:[]})},[]),l=M.useCallback((d,p,g)=>zh.validateNodeName(d,p||[],g),[]),o=M.useCallback(d=>zh.validateGraph(d),[]),u=i.validationErrors.length>0,h=i.validationWarnings.length>0;return{validationState:i,validateGraph:t,validateNodeName:n,validateNodeNameSync:l,validateGraphSync:o,clearValidation:r,hasValidationErrors:u,hasValidationWarnings:h,isValidating:i.isValidating}}const Sz=i=>({name:"plan.py",contents:`from agentic_common.pb import PlanInput, PlanResult

def plan(plan_input: PlanInput) -> PlanResult:
    """
    Plan implementation for ${i}
    
    Args:
        plan_input: Input data for the plan
        
    Returns:
        PlanResult: Result of the plan execution
    """
    # TODO: Implement plan logic here
    pass
`,creationDate:new Date().toISOString(),version:"1.0.0",updateDate:new Date().toISOString()}),xz=i=>({name:"task.py",contents:`from agentic_common.pb import TaskInput, TaskResult

def task(task_input: TaskInput) -> TaskResult:
    """
    Task implementation for ${i}
    
    Args:
        task_input: Input data for the task
        
    Returns:
        TaskResult: Result of the task execution
    """
    # TODO: Implement task logic here
    pass
`,creationDate:new Date().toISOString(),version:"1.0.0",updateDate:new Date().toISOString()}),sC=()=>({name:"requirements.txt",contents:`# Add your Python dependencies here
# Example:
# requests>=2.25.1
# numpy>=1.21.0
`,creationDate:new Date().toISOString(),version:"1.0.0",updateDate:new Date().toISOString()}),wz=i=>[Sz(i),sC()],kz=i=>[xz(i),sC()];function Tz(){const{state:i,dispatch:e}=Ka(),{updateGraph:t}=iC(),{validateNodeName:n,validateGraph:r}=rC(),l=M.useCallback(async(d,p)=>{if(!i.currentGraph)throw new Error("No graph loaded");const g=[...i.currentGraph.plans.map(x=>x.name),...i.currentGraph.tasks.map(x=>x.name)],O=await n(d,i.currentGraph.id,g);if(!O.valid)throw new Error(O.errors.join(", "));const b={name:d,label:p||d,upstreamTaskIds:[],files:wz(d)},v={...i.currentGraph,plans:[...i.currentGraph.plans,b],updatedAt:new Date().toISOString()};try{return await t(i.currentGraph.id,v),b}catch(x){throw e({type:"SET_ERROR",payload:x instanceof Error?x.message:"Failed to add plan node"}),x}},[i.currentGraph,t,e,n]),o=M.useCallback(async(d,p,g)=>{if(!i.currentGraph)throw new Error("No graph loaded");const O=[...i.currentGraph.plans.map(w=>w.name),...i.currentGraph.tasks.map(w=>w.name)],b=await n(d,i.currentGraph.id,O);if(!b.valid)throw new Error(b.errors.join(", "));const v={name:d,label:p||d,upstreamPlanId:g||"",files:kz(d)},x={...i.currentGraph,tasks:[...i.currentGraph.tasks,v],updatedAt:new Date().toISOString()};g&&(x.taskToPlan={...x.taskToPlan,[d]:g});try{return await t(i.currentGraph.id,x),v}catch(w){throw e({type:"SET_ERROR",payload:w instanceof Error?w.message:"Failed to add task node"}),w}},[i.currentGraph,t,e,n]),u=M.useCallback(async(d,p)=>{if(!i.currentGraph)throw new Error("No graph loaded");let g;p==="plan"?g={...i.currentGraph,plans:i.currentGraph.plans.filter(O=>O.name!==d),planToTasks:Object.fromEntries(Object.entries(i.currentGraph.planToTasks).filter(([O])=>O!==d)),taskToPlan:Object.fromEntries(Object.entries(i.currentGraph.taskToPlan).filter(([,O])=>O!==d)),updatedAt:new Date().toISOString()}:g={...i.currentGraph,tasks:i.currentGraph.tasks.filter(O=>O.name!==d),taskToPlan:Object.fromEntries(Object.entries(i.currentGraph.taskToPlan).filter(([O])=>O!==d)),planToTasks:Object.fromEntries(Object.entries(i.currentGraph.planToTasks).map(([O,b])=>[O,b.filter(v=>v!==d)])),updatedAt:new Date().toISOString()};try{await t(i.currentGraph.id,g)}catch(O){throw e({type:"SET_ERROR",payload:O instanceof Error?O.message:"Failed to remove node"}),O}},[i.currentGraph,t,e]),h=M.useCallback(async(d,p,g,O)=>{if(!i.currentGraph)throw new Error("No graph loaded");if(g===O)throw new Error("Cannot connect nodes of the same type");let b={...i.currentGraph};if(g==="plan"&&O==="task"){const x=b.planToTasks[d]||[];b.planToTasks={...b.planToTasks,[d]:[...x,p]},b.taskToPlan={...b.taskToPlan,[p]:d},b.tasks=b.tasks.map(w=>w.name===p?{...w,upstreamPlanId:d}:w)}else if(g==="task"&&O==="plan"){const x=b.planToTasks[p]||[];b.planToTasks={...b.planToTasks,[p]:[...x,d]},b.plans=b.plans.map(w=>w.name===p?{...w,upstreamTaskIds:[...w.upstreamTaskIds,d]}:w)}b.updatedAt=new Date().toISOString();const v=await r(b);if(!v.valid)throw new Error(`Connection validation failed: ${v.errors.join(", ")}`);try{await t(i.currentGraph.id,b)}catch(x){throw e({type:"SET_ERROR",payload:x instanceof Error?x.message:"Failed to connect nodes"}),x}},[i.currentGraph,t,e,r]);return{addPlanNode:l,addTaskNode:o,removeNode:u,connectNodes:h}}const Cz=()=>{const{state:i,dispatch:e}=Ka(),{currentGraph:t,selectedNodeId:n,selectedFile:r}=i,{addPlanNode:l,addTaskNode:o}=Tz(),[u,h]=M.useState(new Set(["root","plans","tasks"])),d=()=>{if(!t)return{id:"root",name:"No Graph Loaded",type:"root",children:[]};const E={id:"plans",name:"plans",type:"folder",expanded:u.has("plans"),children:t.plans.map(_=>({id:`plan-${_.name}`,name:_.name,type:"folder",nodeId:_.name,nodeType:"plan",expanded:u.has(`plan-${_.name}`),children:_.files.map(A=>({id:`plan-${_.name}-${A.name}`,name:A.name,type:"file",file:A,nodeId:_.name,nodeType:"plan"}))}))},D={id:"tasks",name:"tasks",type:"folder",expanded:u.has("tasks"),children:t.tasks.map(_=>({id:`task-${_.name}`,name:_.name,type:"folder",nodeId:_.name,nodeType:"task",expanded:u.has(`task-${_.name}`),children:_.files.map(A=>({id:`task-${_.name}-${A.name}`,name:A.name,type:"file",file:A,nodeId:_.name,nodeType:"task"}))}))};return{id:"root",name:t.name,type:"root",expanded:!0,children:[E,D]}},p=E=>{h(D=>{const _=new Set(D);return _.has(E)?_.delete(E):_.add(E),_})},g=E=>{e({type:"SET_SELECTED_FILE",payload:E})},O=E=>E.endsWith(".py")?"":E==="requirements.txt"?"":"",b=E=>E?"":"",v=(E,D=0)=>{const _=u.has(E.id),A=r?.name===E.file?.name,B=n===E.nodeId;return P.jsxs("div",{className:"tree-node",children:[P.jsxs("div",{className:`tree-item ${A?"selected":""} ${B&&E.type==="folder"?"node-selected":""}`,style:{paddingLeft:`${D*16+8}px`},onClick:()=>{E.type==="folder"?p(E.id):E.file&&g(E.file)},children:[E.type==="folder"&&P.jsx("span",{className:"expand-icon",children:E.children&&E.children.length>0?_?"":"":""}),P.jsx("span",{className:"icon",children:E.type==="root"?"":E.type==="folder"?b(_):O(E.name)}),P.jsx("span",{className:"name",children:E.name})]}),E.children&&_&&P.jsx("div",{className:"tree-children",children:E.children.map(C=>v(C,D+1))})]},E.id)};M.useEffect(()=>{if(n&&t){const E=new Set(u),D=t.plans.find(A=>A.name===n),_=t.tasks.find(A=>A.name===n);D?(E.add("plans"),E.add(`plan-${D.name}`)):_&&(E.add("tasks"),E.add(`task-${_.name}`)),h(E)}},[n,t]);const x=async()=>{try{const E=`plan_${Date.now()}`;await l(E,`Plan ${E}`)}catch(E){console.error("Failed to add plan:",E)}},w=async()=>{try{const E=`task_${Date.now()}`;await o(E,`Task ${E}`)}catch(E){console.error("Failed to add task:",E)}},T=d();return P.jsxs("div",{className:"file-explorer",children:[P.jsxs("div",{className:"explorer-header",children:[P.jsx("h3",{children:"File Explorer"}),t&&P.jsxs("div",{className:"demo-buttons",children:[P.jsx("button",{onClick:x,className:"demo-button",children:"+ Plan"}),P.jsx("button",{onClick:w,className:"demo-button",children:"+ Task"})]})]}),P.jsx("div",{className:"explorer-content",children:v(T)})]})},lC=({validationResult:i,className:e="",showWarnings:t=!0})=>{if(!i)return null;const n=i.errors&&i.errors.length>0,r=i.warnings&&i.warnings.length>0;return!n&&(!t||!r)?null:P.jsxs("div",{className:`validation-feedback ${e}`,children:[n&&P.jsxs("div",{className:"validation-errors",children:[P.jsxs("div",{className:"validation-section-header",children:[P.jsx("span",{className:"validation-icon error-icon",children:""}),P.jsx("span",{className:"validation-title",children:"Validation Errors"})]}),P.jsx("ul",{className:"validation-list",children:i.errors.map((l,o)=>P.jsx("li",{className:"validation-item error-item",children:l},o))})]}),t&&r&&P.jsxs("div",{className:"validation-warnings",children:[P.jsxs("div",{className:"validation-section-header",children:[P.jsx("span",{className:"validation-icon warning-icon",children:""}),P.jsx("span",{className:"validation-title",children:"Warnings"})]}),P.jsx("ul",{className:"validation-list",children:i.warnings.map((l,o)=>P.jsx("li",{className:"validation-item warning-item",children:l},o))})]})]})},Az=({validationResult:i,isVisible:e,position:t={x:20,y:20},className:n=""})=>{if(!e||!i||(!i.errors||i.errors.length===0)&&(!i.warnings||i.warnings.length===0))return null;const r={left:t.x,top:t.y};return P.jsx("div",{className:`validation-overlay ${n}`,style:r,children:P.jsx(lC,{validationResult:i,className:"tooltip",showWarnings:!0})})},Ez=({validationResult:i,isValidating:e=!1,onRefreshValidation:t,className:n=""})=>{const[r,l]=M.useState(!1),o=M.useCallback(()=>{l(v=>!v)},[]),u=M.useCallback(v=>{v.stopPropagation(),t?.()},[t]);if(!i&&!e)return null;const h=i?.errors&&i.errors.length>0,d=i?.warnings&&i.warnings.length>0,p=i?.valid??!1,g=()=>e?P.jsx("div",{className:"validation-spinner",children:P.jsx("div",{className:"spinner"})}):h?P.jsx("span",{className:"status-icon error",children:""}):d?P.jsx("span",{className:"status-icon warning",children:""}):p?P.jsx("span",{className:"status-icon success",children:""}):P.jsx("span",{className:"status-icon unknown",children:"?"}),O=()=>{if(e)return"Validating graph...";if(h){const v=i?.errors?.length||0,x=i?.warnings?.length||0;return`${v} error${v!==1?"s":""}${x>0?`, ${x} warning${x!==1?"s":""}`:""}`}if(d){const v=i?.warnings?.length||0;return`${v} warning${v!==1?"s":""}`}return p?"Graph is valid":"Validation status unknown"},b=()=>{let v="validation-status-bar";return n&&(v+=` ${n}`),e?v+=" validating":h?v+=" error":d?v+=" warning":p&&(v+=" success"),r&&(v+=" expanded"),v};return P.jsxs("div",{className:b(),children:[P.jsxs("div",{className:"status-header",onClick:o,children:[P.jsxs("div",{className:"status-info",children:[g(),P.jsx("span",{className:"status-text",children:O()})]}),P.jsxs("div",{className:"status-actions",children:[t&&P.jsx("button",{className:"refresh-button",onClick:u,disabled:e,title:"Refresh validation",children:""}),(h||d)&&P.jsx("button",{className:"expand-button",onClick:o,title:r?"Hide details":"Show details",children:r?"":""})]})]}),r&&i&&P.jsx("div",{className:"status-details",children:P.jsx(lC,{validationResult:i,showWarnings:!0})})]})},Ox=20,bg={width:120,height:80},vg={width:100,height:100},bi=512,Rz=16,Nz=({graph:i,selectedTool:e,onToolChange:t,onNodeCreate:n,onEdgeCreate:r,onNodeSelect:l,onNodeDelete:o,onEdgeDelete:u,onNodeMove:h,showValidation:d=!0,onValidationChange:p})=>{const g=M.useRef(null),O=M.useRef(null),[b,v]=M.useState({x:0,y:0,zoom:1}),[x,w]=M.useState([]),[T,E]=M.useState([]),[D,_]=M.useState(!1),[A,B]=M.useState({x:0,y:0}),[C,U]=M.useState(null),[$,K]=M.useState(!1),[L,Q]=M.useState(null),[Y,te]=M.useState({x:0,y:0}),{validateGraph:ae,validateGraphSync:j,validationState:se}=rC(),[de,pe]=M.useState(!1),[R]=M.useState({x:20,y:20}),[G,Z]=M.useState({tiles:new Map,nodeToTiles:new Map,edgeToTiles:new Map}),[ne,he]=M.useState(0),[Me,Ce]=M.useState(!1),nt=M.useRef(null),Ke=M.useRef(null),Zt=M.useCallback((H,J)=>({x:(H-b.x)/b.zoom,y:(J-b.y)/b.zoom}),[b]),Cn=M.useCallback((H,J)=>({x:H*b.zoom+b.x,y:J*b.zoom+b.y}),[b]),mr=M.useCallback((H,J)=>`${H},${J}`,[]),Ws=M.useCallback((H,J)=>({tileX:Math.floor(H/bi),tileY:Math.floor(J/bi)}),[]),Ci=M.useCallback((H,J,ue,oe)=>{const me=Ws(H,J),Ee=Ws(ue,oe),Ae=[];for(let ke=me.tileX;ke<=Ee.tileX;ke++)for(let _e=me.tileY;_e<=Ee.tileY;_e++)Ae.push(mr(ke,_e));return Ae},[Ws,mr]),Yr=M.useCallback((H,J)=>{const ue=mr(H,J);let oe=G.tiles.get(ue);return oe||(oe={x:H,y:J,worldX:H*bi,worldY:J*bi,nodes:new Set,edges:new Set,isDirty:!0},Z(me=>({...me,tiles:new Map(me.tiles).set(ue,oe)}))),oe},[G.tiles,mr]),zl=M.useCallback(H=>{const J={left:H.x,top:H.y,right:H.x+H.width,bottom:H.y+H.height},ue=Ci(J.left,J.top,J.right,J.bottom);Z(oe=>{const me=new Map(oe.tiles),Ee=new Map(oe.nodeToTiles);(Ee.get(H.id)||new Set).forEach(_e=>{const Ue=me.get(_e);Ue&&(Ue.nodes.delete(H.id),Ue.isDirty=!0)});const ke=new Set(ue);return ue.forEach(_e=>{const[Ue,et]=_e.split(",").map(Number),lt=Yr(Ue,et);lt.nodes.add(H.id),lt.isDirty=!0,me.set(_e,lt)}),Ee.set(H.id,ke),{...oe,tiles:me,nodeToTiles:Ee}})},[Ci,Yr]),Zr=M.useCallback((H,J)=>{const ue=H.x+H.width/2,oe=H.y+H.height/2,me=J.x+J.width/2,Ee=J.y+J.height/2,Ae=me-ue,ke=Ee-oe;let _e=ue,Ue=oe,et=me,lt=Ee;if(H.type==="plan"){const it=Math.min(H.width,H.height)/2,Fe=Math.atan2(ke,Ae);_e=ue+it*Math.cos(Fe),Ue=oe+it*Math.sin(Fe)}else{const it=H.width/2,Fe=H.height/2;Math.abs(Ae)/it>Math.abs(ke)/Fe?(_e=ue+(Ae>0?it:-it),Ue=oe+ke*it/Math.abs(Ae)):(_e=ue+Ae*Fe/Math.abs(ke),Ue=oe+(ke>0?Fe:-Fe))}if(J.type==="plan"){const it=Math.min(J.width,J.height)/2,Fe=Math.atan2(-ke,-Ae);et=me+it*Math.cos(Fe),lt=Ee+it*Math.sin(Fe)}else{const it=J.width/2,Fe=J.height/2;Math.abs(Ae)/it>Math.abs(ke)/Fe?(et=me+(Ae>0?-it:it),lt=Ee+-ke*it/Math.abs(Ae)):(et=me+-Ae*Fe/Math.abs(ke),lt=Ee+(ke>0?-Fe:Fe))}return{fromX:_e,fromY:Ue,toX:et,toY:lt}},[]),xn=M.useCallback(H=>{const J=x.find(Ue=>Ue.id===H.fromNodeId),ue=x.find(Ue=>Ue.id===H.toNodeId);if(!J||!ue)return;const{fromX:oe,fromY:me,toX:Ee,toY:Ae}=Zr(J,ue),ke={left:Math.min(oe,Ee),top:Math.min(me,Ae),right:Math.max(oe,Ee),bottom:Math.max(me,Ae)},_e=Ci(ke.left,ke.top,ke.right,ke.bottom);Z(Ue=>{const et=new Map(Ue.tiles),lt=new Map(Ue.edgeToTiles);(lt.get(H.id)||new Set).forEach(Et=>{const qt=et.get(Et);qt&&(qt.edges.delete(H.id),qt.isDirty=!0)});const Fe=new Set(_e);return _e.forEach(Et=>{const[qt,zt]=Et.split(",").map(Number),Rt=Yr(qt,zt);Rt.edges.add(H.id),Rt.isDirty=!0,et.set(Et,Rt)}),lt.set(H.id,Fe),{...Ue,tiles:et,edgeToTiles:lt}})},[x,Ci,Yr,Zr]),Pl=M.useCallback(H=>{Z(J=>{const ue=new Map(J.tiles),oe=new Map(J.nodeToTiles);return(oe.get(H)||new Set).forEach(Ee=>{const Ae=ue.get(Ee);Ae&&(Ae.nodes.delete(H),Ae.isDirty=!0)}),oe.delete(H),{...J,tiles:ue,nodeToTiles:oe}})},[]),Is=M.useCallback(H=>{Z(J=>{const ue=new Map(J.tiles),oe=new Map(J.edgeToTiles);return(oe.get(H)||new Set).forEach(Ee=>{const Ae=ue.get(Ee);Ae&&(Ae.edges.delete(H),Ae.isDirty=!0)}),oe.delete(H),{...J,tiles:ue,edgeToTiles:oe}})},[]),ro=M.useCallback(()=>{const H=g.current;if(!H)return[];const J={left:-b.x/b.zoom,top:-b.y/b.zoom,right:(H.width-b.x)/b.zoom,bottom:(H.height-b.y)/b.zoom};return Ci(J.left,J.top,J.right,J.bottom).map(oe=>G.tiles.get(oe)).filter(oe=>oe!==void 0)},[b,G.tiles,Ci]);M.useEffect(()=>{if(!i)return;const H=[],J=[];i.plans.forEach((ue,oe)=>{H.push({id:ue.name,type:"plan",x:200+oe%3*200,y:100+Math.floor(oe/3)*150,width:vg.width,height:vg.height,label:ue.label||ue.name,selected:!1})}),i.tasks.forEach((ue,oe)=>{H.push({id:ue.name,type:"task",x:200+oe%3*200,y:300+Math.floor(oe/3)*150,width:bg.width,height:bg.height,label:ue.label||ue.name,selected:!1})}),Object.entries(i.planToTasks).forEach(([ue,oe])=>{oe.forEach(me=>{J.push({id:`${ue}-${me}`,fromNodeId:ue,toNodeId:me,selected:!1})})}),w(H),E(J)},[i]),M.useEffect(()=>{x.forEach(H=>{zl(H)})},[x,zl]),M.useEffect(()=>{T.forEach(H=>{xn(H)})},[T,xn]),M.useEffect(()=>{if(!i||!d)return;nt.current&&clearTimeout(nt.current);const H=()=>{try{const J=j(i);p?.(J),J.errors.length>0||J.warnings.length>0?pe(!0):pe(!1)}catch(J){console.error("Validation failed:",J)}};return nt.current=setTimeout(H,100),()=>{nt.current&&clearTimeout(nt.current)}},[i,d,j,p]);const Fs=M.useCallback((H,J)=>{const{width:ue,height:oe}=J;if(b.zoom<.3)return;H.strokeStyle=b.zoom<.5?"#f0f0f0":"#e0e0e0",H.lineWidth=1;const me={left:-b.x/b.zoom,top:-b.y/b.zoom,right:(ue-b.x)/b.zoom,bottom:(oe-b.y)/b.zoom},Ee=b.zoom<.5?Ox*2:Ox,Ae=Math.floor(me.left/Ee)*Ee,ke=Math.ceil(me.right/Ee)*Ee,_e=Math.floor(me.top/Ee)*Ee,Ue=Math.ceil(me.bottom/Ee)*Ee,et=200,lt=Math.max(Ee,(ke-Ae)/et),it=Math.max(Ee,(Ue-_e)/et);H.beginPath();for(let Fe=Ae;Fe<=ke;Fe+=lt){const Et=Fe*b.zoom+b.x;Et>=-1&&Et<=ue+1&&(H.moveTo(Et,0),H.lineTo(Et,oe))}for(let Fe=_e;Fe<=Ue;Fe+=it){const Et=Fe*b.zoom+b.y;Et>=-1&&Et<=oe+1&&(H.moveTo(0,Et),H.lineTo(ue,Et))}H.stroke()},[b]),vc=M.useCallback((H,J)=>{const ue=Cn(J.x,J.y),oe=J.width*b.zoom,me=J.height*b.zoom;if(H.fillStyle=J.selected?"#e3f2fd":"#ffffff",H.strokeStyle=J.selected?"#2196f3":"#666666",H.lineWidth=J.selected?3:2,J.type==="task")H.fillRect(ue.x,ue.y,oe,me),H.strokeRect(ue.x,ue.y,oe,me);else{const et=ue.x+oe/2,lt=ue.y+me/2,it=Math.min(oe,me)/2;H.beginPath(),H.arc(et,lt,it,0,2*Math.PI),H.fill(),H.stroke()}H.fillStyle="#333333",H.font=`${12*b.zoom}px Arial`,H.textAlign="center",H.textBaseline="middle";const Ee=ue.x+oe/2,Ae=ue.y+me/2;let ke=J.label;const _e=oe*.8;if(H.measureText(ke).width>_e){for(;H.measureText(ke+"...").width>_e&&ke.length>0;)ke=ke.slice(0,-1);ke+="..."}H.fillText(ke,Ee,Ae)},[b,Cn]),so=M.useCallback((H,J)=>{const ue=x.find(Fe=>Fe.id===J.fromNodeId),oe=x.find(Fe=>Fe.id===J.toNodeId);if(!ue||!oe)return;const{fromX:me,fromY:Ee,toX:Ae,toY:ke}=Zr(ue,oe),_e=Cn(me,Ee),Ue=Cn(Ae,ke);H.strokeStyle=J.selected?"#2196f3":"#666666",H.lineWidth=J.selected?3:2,H.beginPath(),H.moveTo(_e.x,_e.y),H.lineTo(Ue.x,Ue.y),H.stroke();const et=Math.atan2(Ue.y-_e.y,Ue.x-_e.x),lt=15*b.zoom,it=Math.PI/6;H.beginPath(),H.moveTo(Ue.x,Ue.y),H.lineTo(Ue.x-lt*Math.cos(et-it),Ue.y-lt*Math.sin(et-it)),H.moveTo(Ue.x,Ue.y),H.lineTo(Ue.x-lt*Math.cos(et+it),Ue.y-lt*Math.sin(et+it)),H.stroke()},[x,b,Cn,Zr]),Sc=M.useCallback(H=>{if(H.canvas&&!H.isDirty)return H.canvas;H.canvas||(H.canvas=document.createElement("canvas"),H.canvas.width=bi,H.canvas.height=bi);const J=H.canvas.getContext("2d");return J.clearRect(0,0,bi,bi),J.save(),J.translate(-H.worldX,-H.worldY),H.edges.forEach(ue=>{const oe=T.find(me=>me.id===ue);oe&&so(J,oe)}),H.nodes.forEach(ue=>{const oe=x.find(me=>me.id===ue);oe&&vc(J,oe)}),J.restore(),H.isDirty=!1,H.canvas},[T,x,so,vc]),Kn=M.useCallback(()=>{Me||(Ce(!0),Ke.current&&cancelAnimationFrame(Ke.current),Ke.current=requestAnimationFrame(()=>{const H=performance.now();H-ne<Rz?Ke.current=requestAnimationFrame(()=>{Kr(),he(performance.now()),Ce(!1)}):(Kr(),he(H),Ce(!1))}))},[ne,Me]),Kr=M.useCallback(()=>{const H=g.current;if(!H)return;const J=H.getContext("2d");if(!J)return;J.clearRect(0,0,H.width,H.height),J.imageSmoothingEnabled=!0,J.imageSmoothingQuality="high",Fs(J,H),ro().forEach(oe=>{const me=Sc(oe),Ee=oe.worldX*b.zoom+b.x,Ae=oe.worldY*b.zoom+b.y,ke=bi*b.zoom;J.drawImage(me,0,0,bi,bi,Ee,Ae,ke,ke)}),$&&L&&(J.strokeStyle="#2196f3",J.lineWidth=2,J.setLineDash([5,5]),J.beginPath(),J.moveTo(L.x,L.y),J.lineTo(Y.x,Y.y),J.stroke(),J.setLineDash([]))},[Fs,ro,Sc,b,$,L,Y]),Kt=M.useCallback(()=>{const H=g.current,J=O.current;if(!H||!J)return;const ue=J.getBoundingClientRect(),oe=window.devicePixelRatio||1;H.width=ue.width*oe,H.height=ue.height*oe,H.style.width=ue.width+"px",H.style.height=ue.height+"px";const me=H.getContext("2d");me&&me.scale(oe,oe),Kn()},[Kn]);M.useEffect(()=>{Kt();const H=()=>Kt();return window.addEventListener("resize",H),()=>{window.removeEventListener("resize",H),Ke.current&&cancelAnimationFrame(Ke.current)}},[Kt]),M.useEffect(()=>{Kn()},[Kn,G,b,$,L,Y]);const $n=M.useCallback((H,J)=>{const ue=Zt(H,J);for(let oe=x.length-1;oe>=0;oe--){const me=x[oe];if(ue.x>=me.x&&ue.x<=me.x+me.width&&ue.y>=me.y&&ue.y<=me.y+me.height)return me}return null},[x,Zt]),hn=M.useCallback((H,J)=>{for(const oe of T){const me=x.find(Ys=>Ys.id===oe.fromNodeId),Ee=x.find(Ys=>Ys.id===oe.toNodeId);if(!me||!Ee)continue;const{fromX:Ae,fromY:ke,toX:_e,toY:Ue}=Zr(me,Ee),et=Cn(Ae,ke),lt=Cn(_e,Ue),it=H-et.x,Fe=J-et.y,Et=lt.x-et.x,qt=lt.y-et.y,zt=it*Et+Fe*qt,Rt=Et*Et+qt*qt;if(Rt===0)continue;const mi=zt/Rt;let Jr,$l;mi<0?(Jr=et.x,$l=et.y):mi>1?(Jr=lt.x,$l=lt.y):(Jr=et.x+mi*Et,$l=et.y+mi*qt);const xc=H-Jr,lo=J-$l;if(Math.sqrt(xc*xc+lo*lo)<=10)return oe}return null},[T,x,Zr,Cn]),Jd=M.useCallback(H=>{const J=g.current?.getBoundingClientRect();if(!J)return;const ue=H.clientX-J.left,oe=H.clientY-J.top,me=Zt(ue,oe),Ee=$n(ue,oe);if(e==="select")if(Ee)w(Ae=>Ae.map(ke=>({...ke,selected:ke.id===Ee.id}))),E(Ae=>Ae.map(ke=>({...ke,selected:!1}))),U(Ee.id),l?.(Ee.id);else{const Ae=hn(ue,oe);Ae?(E(ke=>ke.map(_e=>({..._e,selected:_e.id===Ae.id}))),w(ke=>ke.map(_e=>({..._e,selected:!1})))):(w(ke=>ke.map(_e=>({..._e,selected:!1}))),E(ke=>ke.map(_e=>({..._e,selected:!1}))),_(!0),B({x:ue,y:oe}))}else if(e==="task"||e==="plan"){if(!Ee){const Ae=e==="task"?bg:vg,ke={type:e,x:me.x-Ae.width/2,y:me.y-Ae.height/2,width:Ae.width,height:Ae.height,label:`New ${e}`};n?.(ke)}}else if(e==="edge"&&Ee){K(!0);const Ae=Cn(Ee.x+Ee.width/2,Ee.y+Ee.height/2);Q({nodeId:Ee.id,x:Ae.x,y:Ae.y})}},[e,Zt,$n,hn,l,n,Cn]),ep=M.useCallback(H=>{const J=g.current?.getBoundingClientRect();if(!J)return;const ue=H.clientX-J.left,oe=H.clientY-J.top;if(te({x:ue,y:oe}),D&&!C){const me=ue-A.x,Ee=oe-A.y;v(Ae=>({...Ae,x:Ae.x+me,y:Ae.y+Ee})),B({x:ue,y:oe}),Kn()}else if(C){const me=Zt(ue,oe),Ee=x.find(Ae=>Ae.id===C);if(Ee){Pl(C);const Ae={...Ee,x:me.x-Ee.width/2,y:me.y-Ee.height/2};w(ke=>ke.map(_e=>_e.id===C?Ae:_e)),zl(Ae),T.forEach(ke=>{(ke.fromNodeId===C||ke.toNodeId===C)&&(Is(ke.id),xn(ke))})}Kn()}else $&&Kn()},[D,C,A,Zt,$,Kn,x,T,Pl,zl,Is,xn]),tp=M.useCallback(H=>{const J=g.current?.getBoundingClientRect();if(!J)return;const ue=H.clientX-J.left,oe=H.clientY-J.top;if(C){const me=x.find(Ee=>Ee.id===C);me&&h?.(C,me.x,me.y),U(null)}if($&&L){const me=$n(ue,oe);if(me&&me.id!==L.nodeId){const Ee={fromNodeId:L.nodeId,toNodeId:me.id};r?.(Ee)}K(!1),Q(null)}_(!1)},[C,x,h,$,L,$n,r]),Bl=M.useCallback(H=>{H.preventDefault();const J=g.current?.getBoundingClientRect();if(!J)return;const ue=H.clientX-J.left,oe=H.clientY-J.top,me=b.zoom>1?.95:.9,Ee=H.deltaY>0?me:1/me,Ae=Math.max(.05,Math.min(5,b.zoom*Ee)),ke=Zt(ue,oe),_e={x:ue-ke.x*Ae,y:oe-ke.y*Ae,zoom:Ae};v(_e),Kn()},[b,Zt,Kn]);M.useEffect(()=>{const H=J=>{if(J.key==="Delete"||J.key==="Backspace"){const ue=x.find(me=>me.selected),oe=T.find(me=>me.selected);ue?(Pl(ue.id),o?.(ue.id)):oe&&(Is(oe.id),u?.(oe.id))}};return window.addEventListener("keydown",H),()=>window.removeEventListener("keydown",H)},[x,T,o,u,Pl,Is]);const _l=M.useCallback(()=>{i&&d&&ae(i,!0)},[i,d,ae]);return M.useEffect(()=>()=>{G.tiles.forEach(H=>{H.canvas&&(H.canvas.width=0,H.canvas.height=0)}),Ke.current&&cancelAnimationFrame(Ke.current)},[G.tiles]),P.jsxs("div",{className:"graph-canvas",children:[P.jsxs("div",{className:"canvas-toolbar",children:[P.jsxs("div",{className:"toolbar-group",children:[P.jsx("button",{className:`tool-button ${e==="select"?"active":""}`,onClick:()=>t("select"),children:" Select"}),P.jsx("button",{className:`tool-button ${e==="task"?"active":""}`,onClick:()=>t("task"),children:" Task"}),P.jsx("button",{className:`tool-button ${e==="plan"?"active":""}`,onClick:()=>t("plan"),children:" Plan"}),P.jsx("button",{className:`tool-button ${e==="edge"?"active":""}`,onClick:()=>t("edge"),children:" Edge"})]}),d&&P.jsx("div",{className:"validation-toolbar",children:P.jsx(Ez,{validationResult:se.lastValidationResult,isValidating:se.isValidating,onRefreshValidation:_l,className:"compact"})})]}),P.jsxs("div",{className:"canvas-content",ref:O,children:[P.jsx("canvas",{ref:g,onMouseDown:Jd,onMouseMove:ep,onMouseUp:tp,onWheel:Bl,style:{cursor:e==="select"?"default":"crosshair"}}),d&&P.jsx(Az,{validationResult:se.lastValidationResult,isVisible:de,position:R})]})]})};function E0(){return E0=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},E0.apply(null,arguments)}function Mz(i,e){if(i==null)return{};var t={};for(var n in i)if({}.hasOwnProperty.call(i,n)){if(e.indexOf(n)!==-1)continue;t[n]=i[n]}return t}let R0=[],aC=[];(()=>{let i="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,t=0;e<i.length;e++)(e%2?aC:R0).push(t=t+i[e])})();function Dz(i){if(i<768)return!1;for(let e=0,t=R0.length;;){let n=e+t>>1;if(i<R0[n])t=n;else if(i>=aC[n])e=n+1;else return!0;if(e==t)return!1}}function bx(i){return i>=127462&&i<=127487}const vx=8205;function Qz(i,e,t=!0,n=!0){return(t?oC:zz)(i,e,n)}function oC(i,e,t){if(e==i.length)return e;e&&uC(i.charCodeAt(e))&&cC(i.charCodeAt(e-1))&&e--;let n=Sg(i,e);for(e+=Sx(n);e<i.length;){let r=Sg(i,e);if(n==vx||r==vx||t&&Dz(r))e+=Sx(r),n=r;else if(bx(r)){let l=0,o=e-2;for(;o>=0&&bx(Sg(i,o));)l++,o-=2;if(l%2==0)break;e+=2}else break}return e}function zz(i,e,t){for(;e>0;){let n=oC(i,e-2,t);if(n<e)return n;e--}return 0}function Sg(i,e){let t=i.charCodeAt(e);if(!cC(t)||e+1==i.length)return t;let n=i.charCodeAt(e+1);return uC(n)?(t-55296<<10)+(n-56320)+65536:t}function uC(i){return i>=56320&&i<57344}function cC(i){return i>=55296&&i<56320}function Sx(i){return i<65536?1:2}class Ze{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,n){[e,t]=_a(this,e,t);let r=[];return this.decompose(0,e,r,2),n.length&&n.decompose(0,n.length,r,3),this.decompose(t,this.length,r,1),Fi.from(r,this.length-(t-e)+n.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=_a(this,e,t);let n=[];return this.decompose(e,t,n,0),Fi.from(n,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),n=this.length-this.scanIdentical(e,-1),r=new Au(this),l=new Au(e);for(let o=t,u=t;;){if(r.next(o),l.next(o),o=0,r.lineBreak!=l.lineBreak||r.done!=l.done||r.value!=l.value)return!1;if(u+=r.value.length,r.done||u>=n)return!0}}iter(e=1){return new Au(this,e)}iterRange(e,t=this.length){return new hC(this,e,t)}iterLines(e,t){let n;if(e==null)n=this.iter();else{t==null&&(t=this.lines+1);let r=this.line(e).from;n=this.iterRange(r,Math.max(r,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new fC(n)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Ze.empty:e.length<=32?new Dt(e):Fi.from(Dt.split(e,[]))}}class Dt extends Ze{constructor(e,t=Pz(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,n,r){for(let l=0;;l++){let o=this.text[l],u=r+o.length;if((t?n:u)>=e)return new Bz(r,u,n,o);r=u+1,n++}}decompose(e,t,n,r){let l=e<=0&&t>=this.length?this:new Dt(xx(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(r&1){let o=n.pop(),u=Ef(l.text,o.text.slice(),0,l.length);if(u.length<=32)n.push(new Dt(u,o.length+l.length));else{let h=u.length>>1;n.push(new Dt(u.slice(0,h)),new Dt(u.slice(h)))}}else n.push(l)}replace(e,t,n){if(!(n instanceof Dt))return super.replace(e,t,n);[e,t]=_a(this,e,t);let r=Ef(this.text,Ef(n.text,xx(this.text,0,e)),t),l=this.length+n.length-(t-e);return r.length<=32?new Dt(r,l):Fi.from(Dt.split(r,[]),l)}sliceString(e,t=this.length,n=`
`){[e,t]=_a(this,e,t);let r="";for(let l=0,o=0;l<=t&&o<this.text.length;o++){let u=this.text[o],h=l+u.length;l>e&&o&&(r+=n),e<h&&t>l&&(r+=u.slice(Math.max(0,e-l),t-l)),l=h+1}return r}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let n=[],r=-1;for(let l of e)n.push(l),r+=l.length+1,n.length==32&&(t.push(new Dt(n,r)),n=[],r=-1);return r>-1&&t.push(new Dt(n,r)),t}}class Fi extends Ze{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let n of e)this.lines+=n.lines}lineInner(e,t,n,r){for(let l=0;;l++){let o=this.children[l],u=r+o.length,h=n+o.lines-1;if((t?h:u)>=e)return o.lineInner(e,t,n,r);r=u+1,n=h+1}}decompose(e,t,n,r){for(let l=0,o=0;o<=t&&l<this.children.length;l++){let u=this.children[l],h=o+u.length;if(e<=h&&t>=o){let d=r&((o<=e?1:0)|(h>=t?2:0));o>=e&&h<=t&&!d?n.push(u):u.decompose(e-o,t-o,n,d)}o=h+1}}replace(e,t,n){if([e,t]=_a(this,e,t),n.lines<this.lines)for(let r=0,l=0;r<this.children.length;r++){let o=this.children[r],u=l+o.length;if(e>=l&&t<=u){let h=o.replace(e-l,t-l,n),d=this.lines-o.lines+h.lines;if(h.lines<d>>4&&h.lines>d>>6){let p=this.children.slice();return p[r]=h,new Fi(p,this.length-(t-e)+n.length)}return super.replace(l,u,h)}l=u+1}return super.replace(e,t,n)}sliceString(e,t=this.length,n=`
`){[e,t]=_a(this,e,t);let r="";for(let l=0,o=0;l<this.children.length&&o<=t;l++){let u=this.children[l],h=o+u.length;o>e&&l&&(r+=n),e<h&&t>o&&(r+=u.sliceString(e-o,t-o,n)),o=h+1}return r}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof Fi))return 0;let n=0,[r,l,o,u]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=t,l+=t){if(r==o||l==u)return n;let h=this.children[r],d=e.children[l];if(h!=d)return n+h.scanIdentical(d,t);n+=h.length+1}}static from(e,t=e.reduce((n,r)=>n+r.length+1,-1)){let n=0;for(let b of e)n+=b.lines;if(n<32){let b=[];for(let v of e)v.flatten(b);return new Dt(b,t)}let r=Math.max(32,n>>5),l=r<<1,o=r>>1,u=[],h=0,d=-1,p=[];function g(b){let v;if(b.lines>l&&b instanceof Fi)for(let x of b.children)g(x);else b.lines>o&&(h>o||!h)?(O(),u.push(b)):b instanceof Dt&&h&&(v=p[p.length-1])instanceof Dt&&b.lines+v.lines<=32?(h+=b.lines,d+=b.length+1,p[p.length-1]=new Dt(v.text.concat(b.text),v.length+1+b.length)):(h+b.lines>r&&O(),h+=b.lines,d+=b.length+1,p.push(b))}function O(){h!=0&&(u.push(p.length==1?p[0]:Fi.from(p,d)),d=-1,h=p.length=0)}for(let b of e)g(b);return O(),u.length==1?u[0]:new Fi(u,t)}}Ze.empty=new Dt([""],0);function Pz(i){let e=-1;for(let t of i)e+=t.length+1;return e}function Ef(i,e,t=0,n=1e9){for(let r=0,l=0,o=!0;l<i.length&&r<=n;l++){let u=i[l],h=r+u.length;h>=t&&(h>n&&(u=u.slice(0,n-r)),r<t&&(u=u.slice(t-r)),o?(e[e.length-1]+=u,o=!1):e.push(u)),r=h+1}return e}function xx(i,e,t){return Ef(i,[""],e,t)}class Au{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Dt?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,r=this.nodes[n],l=this.offsets[n],o=l>>1,u=r instanceof Dt?r.text.length:r.children.length;if(o==(t>0?u:0)){if(n==0)return this.done=!0,this.value="",this;t>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((l&1)==(t>0?0:1)){if(this.offsets[n]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof Dt){let h=r.text[o+(t<0?-1:0)];if(this.offsets[n]+=t,h.length>Math.max(0,e))return this.value=e==0?h:t>0?h.slice(e):h.slice(0,h.length-e),this;e-=h.length}else{let h=r.children[o+(t<0?-1:0)];e>h.length?(e-=h.length,this.offsets[n]+=t):(t<0&&this.offsets[n]--,this.nodes.push(h),this.offsets.push(t>0?1:(h instanceof Dt?h.text.length:h.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class hC{constructor(e,t,n){this.value="",this.done=!1,this.cursor=new Au(e,t>n?-1:1),this.pos=t>n?e.length:0,this.from=Math.min(t,n),this.to=Math.max(t,n)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let n=t<0?this.pos-this.from:this.to-this.pos;e>n&&(e=n),n-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*t,this.value=r.length<=n?r:t<0?r.slice(r.length-n):r.slice(0,n),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class fC{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:n,value:r}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Ze.prototype[Symbol.iterator]=function(){return this.iter()},Au.prototype[Symbol.iterator]=hC.prototype[Symbol.iterator]=fC.prototype[Symbol.iterator]=function(){return this});class Bz{constructor(e,t,n,r){this.from=e,this.to=t,this.number=n,this.text=r}get length(){return this.to-this.from}}function _a(i,e,t){return e=Math.max(0,Math.min(i.length,e)),[e,Math.max(e,Math.min(i.length,t))]}function cn(i,e,t=!0,n=!0){return Qz(i,e,t,n)}function _z(i){return i>=56320&&i<57344}function $z(i){return i>=55296&&i<56320}function Mn(i,e){let t=i.charCodeAt(e);if(!$z(t)||e+1==i.length)return t;let n=i.charCodeAt(e+1);return _z(n)?(t-55296<<10)+(n-56320)+65536:t}function dO(i){return i<=65535?String.fromCharCode(i):(i-=65536,String.fromCharCode((i>>10)+55296,(i&1023)+56320))}function Yi(i){return i<65536?1:2}const N0=/\r\n?|\n/;var un=(function(i){return i[i.Simple=0]="Simple",i[i.TrackDel=1]="TrackDel",i[i.TrackBefore=2]="TrackBefore",i[i.TrackAfter=3]="TrackAfter",i})(un||(un={}));class rr{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t+1];e+=n<0?this.sections[t]:n}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,n=0,r=0;t<this.sections.length;){let l=this.sections[t++],o=this.sections[t++];o<0?(e(n,r,l),r+=l):r+=o,n+=l}}iterChangedRanges(e,t=!1){M0(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let n=this.sections[t++],r=this.sections[t++];r<0?e.push(n,r):e.push(r,n)}return new rr(e)}composeDesc(e){return this.empty?e:e.empty?this:dC(this,e)}mapDesc(e,t=!1){return e.empty?this:D0(this,e,t)}mapPos(e,t=-1,n=un.Simple){let r=0,l=0;for(let o=0;o<this.sections.length;){let u=this.sections[o++],h=this.sections[o++],d=r+u;if(h<0){if(d>e)return l+(e-r);l+=u}else{if(n!=un.Simple&&d>=e&&(n==un.TrackDel&&r<e&&d>e||n==un.TrackBefore&&r<e||n==un.TrackAfter&&d>e))return null;if(d>e||d==e&&t<0&&!u)return e==r||t<0?l:l+h;l+=h}r=d}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return l}touchesRange(e,t=e){for(let n=0,r=0;n<this.sections.length&&r<=t;){let l=this.sections[n++],o=this.sections[n++],u=r+l;if(o>=0&&r<=t&&u>=e)return r<e&&u>t?"cover":!0;r=u}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let n=this.sections[t++],r=this.sections[t++];e+=(e?" ":"")+n+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new rr(e)}static create(e){return new rr(e)}}class Ht extends rr{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return M0(this,(t,n,r,l,o)=>e=e.replace(r,r+(n-t),o),!1),e}mapDesc(e,t=!1){return D0(this,e,t,!0)}invert(e){let t=this.sections.slice(),n=[];for(let r=0,l=0;r<t.length;r+=2){let o=t[r],u=t[r+1];if(u>=0){t[r]=u,t[r+1]=o;let h=r>>1;for(;n.length<h;)n.push(Ze.empty);n.push(o?e.slice(l,l+o):Ze.empty)}l+=o}return new Ht(t,n)}compose(e){return this.empty?e:e.empty?this:dC(this,e,!0)}map(e,t=!1){return e.empty?this:D0(this,e,t,!0)}iterChanges(e,t=!1){M0(this,e,t)}get desc(){return rr.create(this.sections)}filter(e){let t=[],n=[],r=[],l=new Pu(this);e:for(let o=0,u=0;;){let h=o==e.length?1e9:e[o++];for(;u<h||u==h&&l.len==0;){if(l.done)break e;let p=Math.min(l.len,h-u);mn(r,p,-1);let g=l.ins==-1?-1:l.off==0?l.ins:0;mn(t,p,g),g>0&&Qs(n,t,l.text),l.forward(p),u+=p}let d=e[o++];for(;u<d;){if(l.done)break e;let p=Math.min(l.len,d-u);mn(t,p,-1),mn(r,p,l.ins==-1?-1:l.off==0?l.ins:0),l.forward(p),u+=p}}return{changes:new Ht(t,n),filtered:rr.create(r)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t],r=this.sections[t+1];r<0?e.push(n):r==0?e.push([n]):e.push([n].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,n){let r=[],l=[],o=0,u=null;function h(p=!1){if(!p&&!r.length)return;o<t&&mn(r,t-o,-1);let g=new Ht(r,l);u=u?u.compose(g.map(u)):g,r=[],l=[],o=0}function d(p){if(Array.isArray(p))for(let g of p)d(g);else if(p instanceof Ht){if(p.length!=t)throw new RangeError(`Mismatched change set length (got ${p.length}, expected ${t})`);h(),u=u?u.compose(p.map(u)):p}else{let{from:g,to:O=g,insert:b}=p;if(g>O||g<0||O>t)throw new RangeError(`Invalid change range ${g} to ${O} (in doc of length ${t})`);let v=b?typeof b=="string"?Ze.of(b.split(n||N0)):b:Ze.empty,x=v.length;if(g==O&&x==0)return;g<o&&h(),g>o&&mn(r,g-o,-1),mn(r,O-g,x),Qs(l,r,v),o=O}}return d(e),h(!u),u}static empty(e){return new Ht(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],n=[];for(let r=0;r<e.length;r++){let l=e[r];if(typeof l=="number")t.push(l,-1);else{if(!Array.isArray(l)||typeof l[0]!="number"||l.some((o,u)=>u&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(l.length==1)t.push(l[0],0);else{for(;n.length<r;)n.push(Ze.empty);n[r]=Ze.of(l.slice(1)),t.push(l[0],n[r].length)}}}return new Ht(t,n)}static createSet(e,t){return new Ht(e,t)}}function mn(i,e,t,n=!1){if(e==0&&t<=0)return;let r=i.length-2;r>=0&&t<=0&&t==i[r+1]?i[r]+=e:r>=0&&e==0&&i[r]==0?i[r+1]+=t:n?(i[r]+=e,i[r+1]+=t):i.push(e,t)}function Qs(i,e,t){if(t.length==0)return;let n=e.length-2>>1;if(n<i.length)i[i.length-1]=i[i.length-1].append(t);else{for(;i.length<n;)i.push(Ze.empty);i.push(t)}}function M0(i,e,t){let n=i.inserted;for(let r=0,l=0,o=0;o<i.sections.length;){let u=i.sections[o++],h=i.sections[o++];if(h<0)r+=u,l+=u;else{let d=r,p=l,g=Ze.empty;for(;d+=u,p+=h,h&&n&&(g=g.append(n[o-2>>1])),!(t||o==i.sections.length||i.sections[o+1]<0);)u=i.sections[o++],h=i.sections[o++];e(r,d,l,p,g),r=d,l=p}}}function D0(i,e,t,n=!1){let r=[],l=n?[]:null,o=new Pu(i),u=new Pu(e);for(let h=-1;;){if(o.done&&u.len||u.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&u.ins==-1){let d=Math.min(o.len,u.len);mn(r,d,-1),o.forward(d),u.forward(d)}else if(u.ins>=0&&(o.ins<0||h==o.i||o.off==0&&(u.len<o.len||u.len==o.len&&!t))){let d=u.len;for(mn(r,u.ins,-1);d;){let p=Math.min(o.len,d);o.ins>=0&&h<o.i&&o.len<=p&&(mn(r,0,o.ins),l&&Qs(l,r,o.text),h=o.i),o.forward(p),d-=p}u.next()}else if(o.ins>=0){let d=0,p=o.len;for(;p;)if(u.ins==-1){let g=Math.min(p,u.len);d+=g,p-=g,u.forward(g)}else if(u.ins==0&&u.len<p)p-=u.len,u.next();else break;mn(r,d,h<o.i?o.ins:0),l&&h<o.i&&Qs(l,r,o.text),h=o.i,o.forward(o.len-p)}else{if(o.done&&u.done)return l?Ht.createSet(r,l):rr.create(r);throw new Error("Mismatched change set lengths")}}}function dC(i,e,t=!1){let n=[],r=t?[]:null,l=new Pu(i),o=new Pu(e);for(let u=!1;;){if(l.done&&o.done)return r?Ht.createSet(n,r):rr.create(n);if(l.ins==0)mn(n,l.len,0,u),l.next();else if(o.len==0&&!o.done)mn(n,0,o.ins,u),r&&Qs(r,n,o.text),o.next();else{if(l.done||o.done)throw new Error("Mismatched change set lengths");{let h=Math.min(l.len2,o.len),d=n.length;if(l.ins==-1){let p=o.ins==-1?-1:o.off?0:o.ins;mn(n,h,p,u),r&&p&&Qs(r,n,o.text)}else o.ins==-1?(mn(n,l.off?0:l.len,h,u),r&&Qs(r,n,l.textBit(h))):(mn(n,l.off?0:l.len,o.off?0:o.ins,u),r&&!o.off&&Qs(r,n,o.text));u=(l.ins>h||o.ins>=0&&o.len>h)&&(u||n.length>d),l.forward2(h),o.forward(h)}}}}class Pu{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Ze.empty:e[t]}textBit(e){let{inserted:t}=this.set,n=this.i-2>>1;return n>=t.length&&!e?Ze.empty:t[n].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class xl{constructor(e,t,n){this.from=e,this.to=t,this.flags=n}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let n,r;return this.empty?n=r=e.mapPos(this.from,t):(n=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),n==this.from&&r==this.to?this:new xl(n,r,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return re.range(e,t);let n=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return re.range(this.anchor,n)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return re.range(e.anchor,e.head)}static create(e,t,n){return new xl(e,t,n)}}class re{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:re.create(this.ranges.map(n=>n.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(e.ranges[n],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new re([this.main],0)}addRange(e,t=!0){return re.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let n=this.ranges.slice();return n[t]=e,re.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new re(e.ranges.map(t=>xl.fromJSON(t)),e.main)}static single(e,t=e){return new re([re.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let n=0,r=0;r<e.length;r++){let l=e[r];if(l.empty?l.from<=n:l.from<n)return re.normalized(e.slice(),t);n=l.to}return new re(e,t)}static cursor(e,t=0,n,r){return xl.create(e,e,(t==0?0:t<0?8:16)|(n==null?7:Math.min(6,n))|(r??16777215)<<6)}static range(e,t,n,r){let l=(n??16777215)<<6|(r==null?7:Math.min(6,r));return t<e?xl.create(t,e,48|l):xl.create(e,t,(t>e?8:0)|l)}static normalized(e,t=0){let n=e[t];e.sort((r,l)=>r.from-l.from),t=e.indexOf(n);for(let r=1;r<e.length;r++){let l=e[r],o=e[r-1];if(l.empty?l.from<=o.to:l.from<o.to){let u=o.from,h=Math.max(l.to,o.to);r<=t&&t--,e.splice(--r,2,l.anchor>l.head?re.range(h,u):re.range(u,h))}}return new re(e,t)}}function pC(i,e){for(let t of i.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let pO=0;class xe{constructor(e,t,n,r,l){this.combine=e,this.compareInput=t,this.compare=n,this.isStatic=r,this.id=pO++,this.default=e([]),this.extensions=typeof l=="function"?l(this):l}get reader(){return this}static define(e={}){return new xe(e.combine||(t=>t),e.compareInput||((t,n)=>t===n),e.compare||(e.combine?(t,n)=>t===n:mO),!!e.static,e.enables)}of(e){return new Rf([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Rf(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Rf(e,this,2,t)}from(e,t){return t||(t=n=>n),this.compute([e],n=>t(n.field(e)))}}function mO(i,e){return i==e||i.length==e.length&&i.every((t,n)=>t===e[n])}class Rf{constructor(e,t,n,r){this.dependencies=e,this.facet=t,this.type=n,this.value=r,this.id=pO++}dynamicSlot(e){var t;let n=this.value,r=this.facet.compareInput,l=this.id,o=e[l]>>1,u=this.type==2,h=!1,d=!1,p=[];for(let g of this.dependencies)g=="doc"?h=!0:g=="selection"?d=!0:(((t=e[g.id])!==null&&t!==void 0?t:1)&1)==0&&p.push(e[g.id]);return{create(g){return g.values[o]=n(g),1},update(g,O){if(h&&O.docChanged||d&&(O.docChanged||O.selection)||Q0(g,p)){let b=n(g);if(u?!wx(b,g.values[o],r):!r(b,g.values[o]))return g.values[o]=b,1}return 0},reconfigure:(g,O)=>{let b,v=O.config.address[l];if(v!=null){let x=ed(O,v);if(this.dependencies.every(w=>w instanceof xe?O.facet(w)===g.facet(w):w instanceof Lt?O.field(w,!1)==g.field(w,!1):!0)||(u?wx(b=n(g),x,r):r(b=n(g),x)))return g.values[o]=x,0}else b=n(g);return g.values[o]=b,1}}}}function wx(i,e,t){if(i.length!=e.length)return!1;for(let n=0;n<i.length;n++)if(!t(i[n],e[n]))return!1;return!0}function Q0(i,e){let t=!1;for(let n of e)Eu(i,n)&1&&(t=!0);return t}function Lz(i,e,t){let n=t.map(h=>i[h.id]),r=t.map(h=>h.type),l=n.filter(h=>!(h&1)),o=i[e.id]>>1;function u(h){let d=[];for(let p=0;p<n.length;p++){let g=ed(h,n[p]);if(r[p]==2)for(let O of g)d.push(O);else d.push(g)}return e.combine(d)}return{create(h){for(let d of n)Eu(h,d);return h.values[o]=u(h),1},update(h,d){if(!Q0(h,l))return 0;let p=u(h);return e.compare(p,h.values[o])?0:(h.values[o]=p,1)},reconfigure(h,d){let p=Q0(h,n),g=d.config.facets[e.id],O=d.facet(e);if(g&&!p&&mO(t,g))return h.values[o]=O,0;let b=u(h);return e.compare(b,O)?(h.values[o]=O,0):(h.values[o]=b,1)}}}const Ph=xe.define({static:!0});class Lt{constructor(e,t,n,r,l){this.id=e,this.createF=t,this.updateF=n,this.compareF=r,this.spec=l,this.provides=void 0}static define(e){let t=new Lt(pO++,e.create,e.update,e.compare||((n,r)=>n===r),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(Ph).find(n=>n.field==this);return(t?.create||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:n=>(n.values[t]=this.create(n),1),update:(n,r)=>{let l=n.values[t],o=this.updateF(l,r);return this.compareF(l,o)?0:(n.values[t]=o,1)},reconfigure:(n,r)=>{let l=n.facet(Ph),o=r.facet(Ph),u;return(u=l.find(h=>h.field==this))&&u!=o.find(h=>h.field==this)?(n.values[t]=u.create(n),1):r.config.address[this.id]!=null?(n.values[t]=r.field(this),0):(n.values[t]=this.create(n),1)}}}init(e){return[this,Ph.of({field:this,create:e})]}get extension(){return this}}const bl={lowest:4,low:3,default:2,high:1,highest:0};function su(i){return e=>new mC(e,i)}const Fr={highest:su(bl.highest),high:su(bl.high),default:su(bl.default),low:su(bl.low),lowest:su(bl.lowest)};class mC{constructor(e,t){this.inner=e,this.prec=t}}class $d{of(e){return new z0(this,e)}reconfigure(e){return $d.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class z0{constructor(e,t){this.compartment=e,this.inner=t}}class Jf{constructor(e,t,n,r,l,o){for(this.base=e,this.compartments=t,this.dynamicSlots=n,this.address=r,this.staticValues=l,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,n){let r=[],l=Object.create(null),o=new Map;for(let O of qz(e,t,o))O instanceof Lt?r.push(O):(l[O.facet.id]||(l[O.facet.id]=[])).push(O);let u=Object.create(null),h=[],d=[];for(let O of r)u[O.id]=d.length<<1,d.push(b=>O.slot(b));let p=n?.config.facets;for(let O in l){let b=l[O],v=b[0].facet,x=p&&p[O]||[];if(b.every(w=>w.type==0))if(u[v.id]=h.length<<1|1,mO(x,b))h.push(n.facet(v));else{let w=v.combine(b.map(T=>T.value));h.push(n&&v.compare(w,n.facet(v))?n.facet(v):w)}else{for(let w of b)w.type==0?(u[w.id]=h.length<<1|1,h.push(w.value)):(u[w.id]=d.length<<1,d.push(T=>w.dynamicSlot(T)));u[v.id]=d.length<<1,d.push(w=>Lz(w,v,b))}}let g=d.map(O=>O(u));return new Jf(e,o,g,u,h,l)}}function qz(i,e,t){let n=[[],[],[],[],[]],r=new Map;function l(o,u){let h=r.get(o);if(h!=null){if(h<=u)return;let d=n[h].indexOf(o);d>-1&&n[h].splice(d,1),o instanceof z0&&t.delete(o.compartment)}if(r.set(o,u),Array.isArray(o))for(let d of o)l(d,u);else if(o instanceof z0){if(t.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let d=e.get(o.compartment)||o.inner;t.set(o.compartment,d),l(d,u)}else if(o instanceof mC)l(o.inner,o.prec);else if(o instanceof Lt)n[u].push(o),o.provides&&l(o.provides,u);else if(o instanceof Rf)n[u].push(o),o.facet.extensions&&l(o.facet.extensions,bl.default);else{let d=o.extension;if(!d)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);l(d,u)}}return l(i,bl.default),n.reduce((o,u)=>o.concat(u))}function Eu(i,e){if(e&1)return 2;let t=e>>1,n=i.status[t];if(n==4)throw new Error("Cyclic dependency between fields and/or facets");if(n&2)return n;i.status[t]=4;let r=i.computeSlot(i,i.config.dynamicSlots[t]);return i.status[t]=2|r}function ed(i,e){return e&1?i.config.staticValues[e>>1]:i.values[e>>1]}const gC=xe.define(),P0=xe.define({combine:i=>i.some(e=>e),static:!0}),yC=xe.define({combine:i=>i.length?i[0]:void 0,static:!0}),OC=xe.define(),bC=xe.define(),vC=xe.define(),SC=xe.define({combine:i=>i.length?i[0]:!1});class ki{constructor(e,t){this.type=e,this.value=t}static define(){return new Uz}}class Uz{of(e){return new ki(this,e)}}class jz{constructor(e){this.map=e}of(e){return new Be(this,e)}}class Be{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new Be(this.type,t)}is(e){return this.type==e}static define(e={}){return new jz(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let n=[];for(let r of e){let l=r.map(t);l&&n.push(l)}return n}}Be.reconfigure=Be.define();Be.appendConfig=Be.define();class $t{constructor(e,t,n,r,l,o){this.startState=e,this.changes=t,this.selection=n,this.effects=r,this.annotations=l,this.scrollIntoView=o,this._doc=null,this._state=null,n&&pC(n,t.newLength),l.some(u=>u.type==$t.time)||(this.annotations=l.concat($t.time.of(Date.now())))}static create(e,t,n,r,l,o){return new $t(e,t,n,r,l,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation($t.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}$t.time=ki.define();$t.userEvent=ki.define();$t.addToHistory=ki.define();$t.remote=ki.define();function Hz(i,e){let t=[];for(let n=0,r=0;;){let l,o;if(n<i.length&&(r==e.length||e[r]>=i[n]))l=i[n++],o=i[n++];else if(r<e.length)l=e[r++],o=e[r++];else return t;!t.length||t[t.length-1]<l?t.push(l,o):t[t.length-1]<o&&(t[t.length-1]=o)}}function xC(i,e,t){var n;let r,l,o;return t?(r=e.changes,l=Ht.empty(e.changes.length),o=i.changes.compose(e.changes)):(r=e.changes.map(i.changes),l=i.changes.mapDesc(e.changes,!0),o=i.changes.compose(r)),{changes:o,selection:e.selection?e.selection.map(l):(n=i.selection)===null||n===void 0?void 0:n.map(r),effects:Be.mapEffects(i.effects,r).concat(Be.mapEffects(e.effects,l)),annotations:i.annotations.length?i.annotations.concat(e.annotations):e.annotations,scrollIntoView:i.scrollIntoView||e.scrollIntoView}}function B0(i,e,t){let n=e.selection,r=Ma(e.annotations);return e.userEvent&&(r=r.concat($t.userEvent.of(e.userEvent))),{changes:e.changes instanceof Ht?e.changes:Ht.of(e.changes||[],t,i.facet(yC)),selection:n&&(n instanceof re?n:re.single(n.anchor,n.head)),effects:Ma(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function wC(i,e,t){let n=B0(i,e.length?e[0]:{},i.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let l=1;l<e.length;l++){e[l].filter===!1&&(t=!1);let o=!!e[l].sequential;n=xC(n,B0(i,e[l],o?n.changes.newLength:i.doc.length),o)}let r=$t.create(i,n.changes,n.selection,n.effects,n.annotations,n.scrollIntoView);return Xz(t?Vz(r):r)}function Vz(i){let e=i.startState,t=!0;for(let r of e.facet(OC)){let l=r(i);if(l===!1){t=!1;break}Array.isArray(l)&&(t=t===!0?l:Hz(t,l))}if(t!==!0){let r,l;if(t===!1)l=i.changes.invertedDesc,r=Ht.empty(e.doc.length);else{let o=i.changes.filter(t);r=o.changes,l=o.filtered.mapDesc(o.changes).invertedDesc}i=$t.create(e,r,i.selection&&i.selection.map(l),Be.mapEffects(i.effects,l),i.annotations,i.scrollIntoView)}let n=e.facet(bC);for(let r=n.length-1;r>=0;r--){let l=n[r](i);l instanceof $t?i=l:Array.isArray(l)&&l.length==1&&l[0]instanceof $t?i=l[0]:i=wC(e,Ma(l),!1)}return i}function Xz(i){let e=i.startState,t=e.facet(vC),n=i;for(let r=t.length-1;r>=0;r--){let l=t[r](i);l&&Object.keys(l).length&&(n=xC(n,B0(e,l,i.changes.newLength),!0))}return n==i?i:$t.create(e,i.changes,i.selection,n.effects,n.annotations,n.scrollIntoView)}const Gz=[];function Ma(i){return i==null?Gz:Array.isArray(i)?i:[i]}var xt=(function(i){return i[i.Word=0]="Word",i[i.Space=1]="Space",i[i.Other=2]="Other",i})(xt||(xt={}));const Wz=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let _0;try{_0=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function Iz(i){if(_0)return _0.test(i);for(let e=0;e<i.length;e++){let t=i[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||Wz.test(t)))return!0}return!1}function Fz(i){return e=>{if(!/\S/.test(e))return xt.Space;if(Iz(e))return xt.Word;for(let t=0;t<i.length;t++)if(e.indexOf(i[t])>-1)return xt.Word;return xt.Other}}class qe{constructor(e,t,n,r,l,o){this.config=e,this.doc=t,this.selection=n,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=l,o&&(o._state=this);for(let u=0;u<this.config.dynamicSlots.length;u++)Eu(this,u<<1);this.computeSlot=null}field(e,t=!0){let n=this.config.address[e.id];if(n==null){if(t)throw new RangeError("Field is not present in this state");return}return Eu(this,n),ed(this,n)}update(...e){return wC(this,e,!0)}applyTransaction(e){let t=this.config,{base:n,compartments:r}=t;for(let u of e.effects)u.is($d.reconfigure)?(t&&(r=new Map,t.compartments.forEach((h,d)=>r.set(d,h)),t=null),r.set(u.value.compartment,u.value.extension)):u.is(Be.reconfigure)?(t=null,n=u.value):u.is(Be.appendConfig)&&(t=null,n=Ma(n).concat(u.value));let l;t?l=e.startState.values.slice():(t=Jf.resolve(n,r,this),l=new qe(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(h,d)=>d.reconfigure(h,this),null).values);let o=e.startState.facet(P0)?e.newSelection:e.newSelection.asSingle();new qe(t,e.newDoc,o,l,(u,h)=>h.update(u,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:re.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,n=e(t.ranges[0]),r=this.changes(n.changes),l=[n.range],o=Ma(n.effects);for(let u=1;u<t.ranges.length;u++){let h=e(t.ranges[u]),d=this.changes(h.changes),p=d.map(r);for(let O=0;O<u;O++)l[O]=l[O].map(p);let g=r.mapDesc(d,!0);l.push(h.range.map(g)),r=r.compose(p),o=Be.mapEffects(o,p).concat(Be.mapEffects(Ma(h.effects),g))}return{changes:r,selection:re.create(l,t.mainIndex),effects:o}}changes(e=[]){return e instanceof Ht?e:Ht.of(e,this.doc.length,this.facet(qe.lineSeparator))}toText(e){return Ze.of(e.split(this.facet(qe.lineSeparator)||N0))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(Eu(this,t),ed(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let n in e){let r=e[n];r instanceof Lt&&this.config.address[r.id]!=null&&(t[n]=r.spec.toJSON(this.field(e[n]),this))}return t}static fromJSON(e,t={},n){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(n){for(let l in n)if(Object.prototype.hasOwnProperty.call(e,l)){let o=n[l],u=e[l];r.push(o.init(h=>o.spec.fromJSON(u,h)))}}return qe.create({doc:e.doc,selection:re.fromJSON(e.selection),extensions:t.extensions?r.concat([t.extensions]):r})}static create(e={}){let t=Jf.resolve(e.extensions||[],new Map),n=e.doc instanceof Ze?e.doc:Ze.of((e.doc||"").split(t.staticFacet(qe.lineSeparator)||N0)),r=e.selection?e.selection instanceof re?e.selection:re.single(e.selection.anchor,e.selection.head):re.single(0);return pC(r,n.length),t.staticFacet(P0)||(r=r.asSingle()),new qe(t,n,r,t.dynamicSlots.map(()=>null),(l,o)=>o.create(l),null)}get tabSize(){return this.facet(qe.tabSize)}get lineBreak(){return this.facet(qe.lineSeparator)||`
`}get readOnly(){return this.facet(SC)}phrase(e,...t){for(let n of this.facet(qe.phrases))if(Object.prototype.hasOwnProperty.call(n,e)){e=n[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(n,r)=>{if(r=="$")return"$";let l=+(r||1);return!l||l>t.length?n:t[l-1]})),e}languageDataAt(e,t,n=-1){let r=[];for(let l of this.facet(gC))for(let o of l(this,t,n))Object.prototype.hasOwnProperty.call(o,e)&&r.push(o[e]);return r}charCategorizer(e){return Fz(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:n,length:r}=this.doc.lineAt(e),l=this.charCategorizer(e),o=e-n,u=e-n;for(;o>0;){let h=cn(t,o,!1);if(l(t.slice(h,o))!=xt.Word)break;o=h}for(;u<r;){let h=cn(t,u);if(l(t.slice(u,h))!=xt.Word)break;u=h}return o==u?null:re.range(o+n,u+n)}}qe.allowMultipleSelections=P0;qe.tabSize=xe.define({combine:i=>i.length?i[0]:4});qe.lineSeparator=yC;qe.readOnly=SC;qe.phrases=xe.define({compare(i,e){let t=Object.keys(i),n=Object.keys(e);return t.length==n.length&&t.every(r=>i[r]==e[r])}});qe.languageData=gC;qe.changeFilter=OC;qe.transactionFilter=bC;qe.transactionExtender=vC;$d.reconfigure=Be.define();function fr(i,e,t={}){let n={};for(let r of i)for(let l of Object.keys(r)){let o=r[l],u=n[l];if(u===void 0)n[l]=o;else if(!(u===o||o===void 0))if(Object.hasOwnProperty.call(t,l))n[l]=t[l](u,o);else throw new Error("Config merge conflict for field "+l)}for(let r in e)n[r]===void 0&&(n[r]=e[r]);return n}class _s{eq(e){return this==e}range(e,t=e){return $0.create(e,t,this)}}_s.prototype.startSide=_s.prototype.endSide=0;_s.prototype.point=!1;_s.prototype.mapMode=un.TrackDel;let $0=class kC{constructor(e,t,n){this.from=e,this.to=t,this.value=n}static create(e,t,n){return new kC(e,t,n)}};function L0(i,e){return i.from-e.from||i.value.startSide-e.value.startSide}class gO{constructor(e,t,n,r){this.from=e,this.to=t,this.value=n,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,t,n,r=0){let l=n?this.to:this.from;for(let o=r,u=l.length;;){if(o==u)return o;let h=o+u>>1,d=l[h]-e||(n?this.value[h].endSide:this.value[h].startSide)-t;if(h==o)return d>=0?o:u;d>=0?u=h:o=h+1}}between(e,t,n,r){for(let l=this.findIndex(t,-1e9,!0),o=this.findIndex(n,1e9,!1,l);l<o;l++)if(r(this.from[l]+e,this.to[l]+e,this.value[l])===!1)return!1}map(e,t){let n=[],r=[],l=[],o=-1,u=-1;for(let h=0;h<this.value.length;h++){let d=this.value[h],p=this.from[h]+e,g=this.to[h]+e,O,b;if(p==g){let v=t.mapPos(p,d.startSide,d.mapMode);if(v==null||(O=b=v,d.startSide!=d.endSide&&(b=t.mapPos(p,d.endSide),b<O)))continue}else if(O=t.mapPos(p,d.startSide),b=t.mapPos(g,d.endSide),O>b||O==b&&d.startSide>0&&d.endSide<=0)continue;(b-O||d.endSide-d.startSide)<0||(o<0&&(o=O),d.point&&(u=Math.max(u,b-O)),n.push(d),r.push(O-o),l.push(b-o))}return{mapped:n.length?new gO(r,l,n,u):null,pos:o}}}class Je{constructor(e,t,n,r){this.chunkPos=e,this.chunk=t,this.nextLayer=n,this.maxPoint=r}static create(e,t,n,r){return new Je(e,t,n,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:n=!1,filterFrom:r=0,filterTo:l=this.length}=e,o=e.filter;if(t.length==0&&!o)return this;if(n&&(t=t.slice().sort(L0)),this.isEmpty)return t.length?Je.of(t):this;let u=new TC(this,null,-1).goto(0),h=0,d=[],p=new lr;for(;u.value||h<t.length;)if(h<t.length&&(u.from-t[h].from||u.startSide-t[h].value.startSide)>=0){let g=t[h++];p.addInner(g.from,g.to,g.value)||d.push(g)}else u.rangeIndex==1&&u.chunkIndex<this.chunk.length&&(h==t.length||this.chunkEnd(u.chunkIndex)<t[h].from)&&(!o||r>this.chunkEnd(u.chunkIndex)||l<this.chunkPos[u.chunkIndex])&&p.addChunk(this.chunkPos[u.chunkIndex],this.chunk[u.chunkIndex])?u.nextChunk():((!o||r>u.to||l<u.from||o(u.from,u.to,u.value))&&(p.addInner(u.from,u.to,u.value)||d.push($0.create(u.from,u.to,u.value))),u.next());return p.finishInner(this.nextLayer.isEmpty&&!d.length?Je.empty:this.nextLayer.update({add:d,filter:o,filterFrom:r,filterTo:l}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],n=[],r=-1;for(let o=0;o<this.chunk.length;o++){let u=this.chunkPos[o],h=this.chunk[o],d=e.touchesRange(u,u+h.length);if(d===!1)r=Math.max(r,h.maxPoint),t.push(h),n.push(e.mapPos(u));else if(d===!0){let{mapped:p,pos:g}=h.map(u,e);p&&(r=Math.max(r,p.maxPoint),t.push(p),n.push(g))}}let l=this.nextLayer.map(e);return t.length==0?l:new Je(n,t,l||Je.empty,r)}between(e,t,n){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let l=this.chunkPos[r],o=this.chunk[r];if(t>=l&&e<=l+o.length&&o.between(l,e-l,t-l,n)===!1)return}this.nextLayer.between(e,t,n)}}iter(e=0){return Bu.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Bu.from(e).goto(t)}static compare(e,t,n,r,l=-1){let o=e.filter(g=>g.maxPoint>0||!g.isEmpty&&g.maxPoint>=l),u=t.filter(g=>g.maxPoint>0||!g.isEmpty&&g.maxPoint>=l),h=kx(o,u,n),d=new lu(o,h,l),p=new lu(u,h,l);n.iterGaps((g,O,b)=>Tx(d,g,p,O,b,r)),n.empty&&n.length==0&&Tx(d,0,p,0,0,r)}static eq(e,t,n=0,r){r==null&&(r=999999999);let l=e.filter(p=>!p.isEmpty&&t.indexOf(p)<0),o=t.filter(p=>!p.isEmpty&&e.indexOf(p)<0);if(l.length!=o.length)return!1;if(!l.length)return!0;let u=kx(l,o),h=new lu(l,u,0).goto(n),d=new lu(o,u,0).goto(n);for(;;){if(h.to!=d.to||!q0(h.active,d.active)||h.point&&(!d.point||!h.point.eq(d.point)))return!1;if(h.to>r)return!0;h.next(),d.next()}}static spans(e,t,n,r,l=-1){let o=new lu(e,null,l).goto(t),u=t,h=o.openStart;for(;;){let d=Math.min(o.to,n);if(o.point){let p=o.activeForPoint(o.to),g=o.pointFrom<t?p.length+1:o.point.startSide<0?p.length:Math.min(p.length,h);r.point(u,d,o.point,p,g,o.pointRank),h=Math.min(o.openEnd(d),p.length)}else d>u&&(r.span(u,d,o.active,h),h=o.openEnd(d));if(o.to>n)return h+(o.point&&o.to>n?1:0);u=o.to,o.next()}}static of(e,t=!1){let n=new lr;for(let r of e instanceof $0?[e]:t?Yz(e):e)n.add(r.from,r.to,r.value);return n.finish()}static join(e){if(!e.length)return Je.empty;let t=e[e.length-1];for(let n=e.length-2;n>=0;n--)for(let r=e[n];r!=Je.empty;r=r.nextLayer)t=new Je(r.chunkPos,r.chunk,t,Math.max(r.maxPoint,t.maxPoint));return t}}Je.empty=new Je([],[],null,-1);function Yz(i){if(i.length>1)for(let e=i[0],t=1;t<i.length;t++){let n=i[t];if(L0(e,n)>0)return i.slice().sort(L0);e=n}return i}Je.empty.nextLayer=Je.empty;class lr{finishChunk(e){this.chunks.push(new gO(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,n){this.addInner(e,t,n)||(this.nextLayer||(this.nextLayer=new lr)).add(e,t,n)}addInner(e,t,n){let r=e-this.lastTo||n.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=n,this.lastFrom=e,this.lastTo=t,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let n=t.value.length-1;return this.last=t.value[n],this.lastFrom=t.from[n]+e,this.lastTo=t.to[n]+e,!0}finish(){return this.finishInner(Je.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=Je.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function kx(i,e,t){let n=new Map;for(let l of i)for(let o=0;o<l.chunk.length;o++)l.chunk[o].maxPoint<=0&&n.set(l.chunk[o],l.chunkPos[o]);let r=new Set;for(let l of e)for(let o=0;o<l.chunk.length;o++){let u=n.get(l.chunk[o]);u!=null&&(t?t.mapPos(u):u)==l.chunkPos[o]&&!t?.touchesRange(u,u+l.chunk[o].length)&&r.add(l.chunk[o])}return r}class TC{constructor(e,t,n,r=0){this.layer=e,this.skip=t,this.minPoint=n,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,n){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!n||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],n=e+t.from[this.rangeIndex];if(this.from=n,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Bu{constructor(e){this.heap=e}static from(e,t=null,n=-1){let r=[];for(let l=0;l<e.length;l++)for(let o=e[l];!o.isEmpty;o=o.nextLayer)o.maxPoint>=n&&r.push(new TC(o,t,n,l));return r.length==1?r[0]:new Bu(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let n of this.heap)n.goto(e,t);for(let n=this.heap.length>>1;n>=0;n--)xg(this.heap,n);return this.next(),this}forward(e,t){for(let n of this.heap)n.forward(e,t);for(let n=this.heap.length>>1;n>=0;n--)xg(this.heap,n);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),xg(this.heap,0)}}}function xg(i,e){for(let t=i[e];;){let n=(e<<1)+1;if(n>=i.length)break;let r=i[n];if(n+1<i.length&&r.compare(i[n+1])>=0&&(r=i[n+1],n++),t.compare(r)<0)break;i[n]=t,i[e]=r,e=n}}class lu{constructor(e,t,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Bu.from(e,t,n)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){Bh(this.active,e),Bh(this.activeTo,e),Bh(this.activeRank,e),this.minActive=Cx(this.active,this.activeTo)}addActive(e){let t=0,{value:n,to:r,rank:l}=this.cursor;for(;t<this.activeRank.length&&(l-this.activeRank[t]||r-this.activeTo[t])>0;)t++;_h(this.active,t,n),_h(this.activeTo,t,r),_h(this.activeRank,t,l),e&&_h(e,t,this.cursor.from),this.minActive=Cx(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let n=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),n&&Bh(n,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let l=this.cursor.value;if(!l.point)this.addActive(n),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=l,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=l.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(n){this.openStart=0;for(let r=n.length-1;r>=0&&n[r]<e;r--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>e||this.activeTo[n]==e&&this.active[n].endSide>=this.point.endSide)&&t.push(this.active[n]);return t.reverse()}openEnd(e){let t=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>e;n--)t++;return t}}function Tx(i,e,t,n,r,l){i.goto(e),t.goto(n);let o=n+r,u=n,h=n-e;for(;;){let d=i.to+h-t.to,p=d||i.endSide-t.endSide,g=p<0?i.to+h:t.to,O=Math.min(g,o);if(i.point||t.point?i.point&&t.point&&(i.point==t.point||i.point.eq(t.point))&&q0(i.activeForPoint(i.to),t.activeForPoint(t.to))||l.comparePoint(u,O,i.point,t.point):O>u&&!q0(i.active,t.active)&&l.compareRange(u,O,i.active,t.active),g>o)break;(d||i.openEnd!=t.openEnd)&&l.boundChange&&l.boundChange(g),u=g,p<=0&&i.next(),p>=0&&t.next()}}function q0(i,e){if(i.length!=e.length)return!1;for(let t=0;t<i.length;t++)if(i[t]!=e[t]&&!i[t].eq(e[t]))return!1;return!0}function Bh(i,e){for(let t=e,n=i.length-1;t<n;t++)i[t]=i[t+1];i.pop()}function _h(i,e,t){for(let n=i.length-1;n>=e;n--)i[n+1]=i[n];i[e]=t}function Cx(i,e){let t=-1,n=1e9;for(let r=0;r<e.length;r++)(e[r]-n||i[r].endSide-i[t].endSide)<0&&(t=r,n=e[r]);return t}function Ql(i,e,t=i.length){let n=0;for(let r=0;r<t&&r<i.length;)i.charCodeAt(r)==9?(n+=e-n%e,r++):(n++,r=cn(i,r));return n}function U0(i,e,t,n){for(let r=0,l=0;;){if(l>=e)return r;if(r==i.length)break;l+=i.charCodeAt(r)==9?t-l%t:1,r=cn(i,r)}return n===!0?-1:i.length}const j0="",Ax=typeof Symbol>"u"?"__"+j0:Symbol.for(j0),H0=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Ex=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class ar{constructor(e,t){this.rules=[];let{finish:n}=t||{};function r(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function l(o,u,h,d){let p=[],g=/^@(\w+)\b/.exec(o[0]),O=g&&g[1]=="keyframes";if(g&&u==null)return h.push(o[0]+";");for(let b in u){let v=u[b];if(/&/.test(b))l(b.split(/,\s*/).map(x=>o.map(w=>x.replace(/&/,w))).reduce((x,w)=>x.concat(w)),v,h);else if(v&&typeof v=="object"){if(!g)throw new RangeError("The value of a property ("+b+") should be a primitive value.");l(r(b),v,p,O)}else v!=null&&p.push(b.replace(/_.*/,"").replace(/[A-Z]/g,x=>"-"+x.toLowerCase())+": "+v+";")}(p.length||O)&&h.push((n&&!g&&!d?o.map(n):o).join(", ")+" {"+p.join(" ")+"}")}for(let o in e)l(r(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=Ex[Ax]||1;return Ex[Ax]=e+1,j0+e.toString(36)}static mount(e,t,n){let r=e[H0],l=n&&n.nonce;r?l&&r.setNonce(l):r=new Zz(e,l),r.mount(Array.isArray(t)?t:[t],e)}}let Rx=new Map;class Zz{constructor(e,t){let n=e.ownerDocument||e,r=n.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let l=Rx.get(n);if(l)return e[H0]=l;this.sheet=new r.CSSStyleSheet,Rx.set(n,this)}else this.styleTag=n.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[H0]=this}mount(e,t){let n=this.sheet,r=0,l=0;for(let o=0;o<e.length;o++){let u=e[o],h=this.modules.indexOf(u);if(h<l&&h>-1&&(this.modules.splice(h,1),l--,h=-1),h==-1){if(this.modules.splice(l++,0,u),n)for(let d=0;d<u.rules.length;d++)n.insertRule(u.rules[d],r++)}else{for(;l<h;)r+=this.modules[l++].rules.length;r+=u.rules.length,l++}}if(n)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let o="";for(let h=0;h<this.modules.length;h++)o+=this.modules[h].getRules()+`
`;this.styleTag.textContent=o;let u=t.head||t;this.styleTag.parentNode!=u&&u.insertBefore(this.styleTag,u.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var $s={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},_u={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Kz=typeof navigator<"u"&&/Mac/.test(navigator.platform),Jz=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var sn=0;sn<10;sn++)$s[48+sn]=$s[96+sn]=String(sn);for(var sn=1;sn<=24;sn++)$s[sn+111]="F"+sn;for(var sn=65;sn<=90;sn++)$s[sn]=String.fromCharCode(sn+32),_u[sn]=String.fromCharCode(sn);for(var wg in $s)_u.hasOwnProperty(wg)||(_u[wg]=$s[wg]);function eP(i){var e=Kz&&i.metaKey&&i.shiftKey&&!i.ctrlKey&&!i.altKey||Jz&&i.shiftKey&&i.key&&i.key.length==1||i.key=="Unidentified",t=!e&&i.key||(i.shiftKey?_u:$s)[i.keyCode]||i.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function dt(){var i=arguments[0];typeof i=="string"&&(i=document.createElement(i));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=t[n];typeof r=="string"?i.setAttribute(n,r):r!=null&&(i[n]=r)}e++}for(;e<arguments.length;e++)CC(i,arguments[e]);return i}function CC(i,e){if(typeof e=="string")i.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)i.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)CC(i,e[t]);else throw new RangeError("Unsupported child node: "+e)}function $u(i){let e;return i.nodeType==11?e=i.getSelection?i:i.ownerDocument:e=i,e.getSelection()}function V0(i,e){return e?i==e||i.contains(e.nodeType!=1?e.parentNode:e):!1}function Nf(i,e){if(!e.anchorNode)return!1;try{return V0(i,e.anchorNode)}catch{return!1}}function $a(i){return i.nodeType==3?Rl(i,0,i.nodeValue.length).getClientRects():i.nodeType==1?i.getClientRects():[]}function Ru(i,e,t,n){return t?Nx(i,e,t,n,-1)||Nx(i,e,t,n,1):!1}function El(i){for(var e=0;;e++)if(i=i.previousSibling,!i)return e}function td(i){return i.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(i.nodeName)}function Nx(i,e,t,n,r){for(;;){if(i==t&&e==n)return!0;if(e==(r<0?0:or(i))){if(i.nodeName=="DIV")return!1;let l=i.parentNode;if(!l||l.nodeType!=1)return!1;e=El(i)+(r<0?0:1),i=l}else if(i.nodeType==1){if(i=i.childNodes[e+(r<0?-1:0)],i.nodeType==1&&i.contentEditable=="false")return!1;e=r<0?or(i):0}else return!1}}function or(i){return i.nodeType==3?i.nodeValue.length:i.childNodes.length}function hc(i,e){let t=e?i.left:i.right;return{left:t,right:t,top:i.top,bottom:i.bottom}}function tP(i){let e=i.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:i.innerWidth,top:0,bottom:i.innerHeight}}function AC(i,e){let t=e.width/i.offsetWidth,n=e.height/i.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-i.offsetWidth)<1)&&(t=1),(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.height-i.offsetHeight)<1)&&(n=1),{scaleX:t,scaleY:n}}function nP(i,e,t,n,r,l,o,u){let h=i.ownerDocument,d=h.defaultView||window;for(let p=i,g=!1;p&&!g;)if(p.nodeType==1){let O,b=p==h.body,v=1,x=1;if(b)O=tP(d);else{if(/^(fixed|sticky)$/.test(getComputedStyle(p).position)&&(g=!0),p.scrollHeight<=p.clientHeight&&p.scrollWidth<=p.clientWidth){p=p.assignedSlot||p.parentNode;continue}let E=p.getBoundingClientRect();({scaleX:v,scaleY:x}=AC(p,E)),O={left:E.left,right:E.left+p.clientWidth*v,top:E.top,bottom:E.top+p.clientHeight*x}}let w=0,T=0;if(r=="nearest")e.top<O.top?(T=e.top-(O.top+o),t>0&&e.bottom>O.bottom+T&&(T=e.bottom-O.bottom+o)):e.bottom>O.bottom&&(T=e.bottom-O.bottom+o,t<0&&e.top-T<O.top&&(T=e.top-(O.top+o)));else{let E=e.bottom-e.top,D=O.bottom-O.top;T=(r=="center"&&E<=D?e.top+E/2-D/2:r=="start"||r=="center"&&t<0?e.top-o:e.bottom-D+o)-O.top}if(n=="nearest"?e.left<O.left?(w=e.left-(O.left+l),t>0&&e.right>O.right+w&&(w=e.right-O.right+l)):e.right>O.right&&(w=e.right-O.right+l,t<0&&e.left<O.left+w&&(w=e.left-(O.left+l))):w=(n=="center"?e.left+(e.right-e.left)/2-(O.right-O.left)/2:n=="start"==u?e.left-l:e.right-(O.right-O.left)+l)-O.left,w||T)if(b)d.scrollBy(w,T);else{let E=0,D=0;if(T){let _=p.scrollTop;p.scrollTop+=T/x,D=(p.scrollTop-_)*x}if(w){let _=p.scrollLeft;p.scrollLeft+=w/v,E=(p.scrollLeft-_)*v}e={left:e.left-E,top:e.top-D,right:e.right-E,bottom:e.bottom-D},E&&Math.abs(E-w)<1&&(n="nearest"),D&&Math.abs(D-T)<1&&(r="nearest")}if(b)break;(e.top<O.top||e.bottom>O.bottom||e.left<O.left||e.right>O.right)&&(e={left:Math.max(e.left,O.left),right:Math.min(e.right,O.right),top:Math.max(e.top,O.top),bottom:Math.min(e.bottom,O.bottom)}),p=p.assignedSlot||p.parentNode}else if(p.nodeType==11)p=p.host;else break}function iP(i){let e=i.ownerDocument,t,n;for(let r=i.parentNode;r&&!(r==e.body||t&&n);)if(r.nodeType==1)!n&&r.scrollHeight>r.clientHeight&&(n=r),!t&&r.scrollWidth>r.clientWidth&&(t=r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;return{x:t,y:n}}class rP{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:n}=e;this.set(t,Math.min(e.anchorOffset,t?or(t):0),n,Math.min(e.focusOffset,n?or(n):0))}set(e,t,n,r){this.anchorNode=e,this.anchorOffset=t,this.focusNode=n,this.focusOffset=r}}let Ta=null;function EC(i){if(i.setActive)return i.setActive();if(Ta)return i.focus(Ta);let e=[];for(let t=i;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(i.focus(Ta==null?{get preventScroll(){return Ta={preventScroll:!0},!0}}:void 0),!Ta){Ta=!1;for(let t=0;t<e.length;){let n=e[t++],r=e[t++],l=e[t++];n.scrollTop!=r&&(n.scrollTop=r),n.scrollLeft!=l&&(n.scrollLeft=l)}}}let Mx;function Rl(i,e,t=e){let n=Mx||(Mx=document.createRange());return n.setEnd(i,t),n.setStart(i,e),n}function Da(i,e,t,n){let r={key:e,code:e,keyCode:t,which:t,cancelable:!0};n&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=n);let l=new KeyboardEvent("keydown",r);l.synthetic=!0,i.dispatchEvent(l);let o=new KeyboardEvent("keyup",r);return o.synthetic=!0,i.dispatchEvent(o),l.defaultPrevented||o.defaultPrevented}function sP(i){for(;i;){if(i&&(i.nodeType==9||i.nodeType==11&&i.host))return i;i=i.assignedSlot||i.parentNode}return null}function RC(i){for(;i.attributes.length;)i.removeAttributeNode(i.attributes[0])}function lP(i,e){let t=e.focusNode,n=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=n)return!1;for(n=Math.min(n,or(t));;)if(n){if(t.nodeType!=1)return!1;let r=t.childNodes[n-1];r.contentEditable=="false"?n--:(t=r,n=or(t))}else{if(t==i)return!0;n=El(t),t=t.parentNode}}function NC(i){return i.scrollTop>Math.max(1,i.scrollHeight-i.clientHeight-4)}function MC(i,e){for(let t=i,n=e;;){if(t.nodeType==3&&n>0)return{node:t,offset:n};if(t.nodeType==1&&n>0){if(t.contentEditable=="false")return null;t=t.childNodes[n-1],n=or(t)}else if(t.parentNode&&!td(t))n=El(t),t=t.parentNode;else return null}}function DC(i,e){for(let t=i,n=e;;){if(t.nodeType==3&&n<t.nodeValue.length)return{node:t,offset:n};if(t.nodeType==1&&n<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[n],n=0}else if(t.parentNode&&!td(t))n=El(t)+1,t=t.parentNode;else return null}}class yn{constructor(e,t,n=!0){this.node=e,this.offset=t,this.precise=n}static before(e,t){return new yn(e.parentNode,El(e),t)}static after(e,t){return new yn(e.parentNode,El(e)+1,t)}}const yO=[];class mt{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let n of this.children){if(n==e)return t;t+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let n=this.dom,r=null,l;for(let o of this.children){if(o.flags&7){if(!o.dom&&(l=r?r.nextSibling:n.firstChild)){let u=mt.get(l);(!u||!u.parent&&u.canReuseDOM(o))&&o.reuseDOM(l)}o.sync(e,t),o.flags&=-8}if(l=r?r.nextSibling:n.firstChild,t&&!t.written&&t.node==n&&l!=o.dom&&(t.written=!0),o.dom.parentNode==n)for(;l&&l!=o.dom;)l=Dx(l);else n.insertBefore(o.dom,l);r=o.dom}for(l=r?r.nextSibling:n.firstChild,l&&t&&t.node==n&&(t.written=!0);l;)l=Dx(l)}else if(this.flags&1)for(let n of this.children)n.flags&7&&(n.sync(e,t),n.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let n;if(e==this.dom)n=this.dom.childNodes[t];else{let r=or(e)==0?0:t==0?-1:1;for(;;){let l=e.parentNode;if(l==this.dom)break;r==0&&l.firstChild!=l.lastChild&&(e==l.firstChild?r=-1:r=1),e=l}r<0?n=e:n=e.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!mt.get(n);)n=n.nextSibling;if(!n)return this.length;for(let r=0,l=0;;r++){let o=this.children[r];if(o.dom==n)return l;l+=o.length+o.breakAfter}}domBoundsAround(e,t,n=0){let r=-1,l=-1,o=-1,u=-1;for(let h=0,d=n,p=n;h<this.children.length;h++){let g=this.children[h],O=d+g.length;if(d<e&&O>t)return g.domBoundsAround(e,t,d);if(O>=e&&r==-1&&(r=h,l=d),d>t&&g.dom.parentNode==this.dom){o=h,u=p;break}p=O,d=O+g.breakAfter}return{from:l,to:u<0?n+this.length:u,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,n=yO){this.markDirty();for(let r=e;r<t;r++){let l=this.children[r];l.parent==this&&n.indexOf(l)<0&&l.destroy()}n.length<250?this.children.splice(e,t-e,...n):this.children=[].concat(this.children.slice(0,e),n,this.children.slice(t));for(let r=0;r<n.length;r++)n[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new QC(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,n,r,l,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}mt.prototype.breakAfter=0;function Dx(i){let e=i.nextSibling;return i.parentNode.removeChild(i),e}class QC{constructor(e,t,n){this.children=e,this.pos=t,this.i=n,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function zC(i,e,t,n,r,l,o,u,h){let{children:d}=i,p=d.length?d[e]:null,g=l.length?l[l.length-1]:null,O=g?g.breakAfter:o;if(!(e==n&&p&&!o&&!O&&l.length<2&&p.merge(t,r,l.length?g:null,t==0,u,h))){if(n<d.length){let b=d[n];b&&(r<b.length||b.breakAfter&&g?.breakAfter)?(e==n&&(b=b.split(r),r=0),!O&&g&&b.merge(0,r,g,!0,0,h)?l[l.length-1]=b:((r||b.children.length&&!b.children[0].length)&&b.merge(0,r,null,!1,0,h),l.push(b))):b?.breakAfter&&(g?g.breakAfter=1:o=1),n++}for(p&&(p.breakAfter=o,t>0&&(!o&&l.length&&p.merge(t,p.length,l[0],!1,u,0)?p.breakAfter=l.shift().breakAfter:(t<p.length||p.children.length&&p.children[p.children.length-1].length==0)&&p.merge(t,p.length,null,!1,u,0),e++));e<n&&l.length;)if(d[n-1].become(l[l.length-1]))n--,l.pop(),h=l.length?0:u;else if(d[e].become(l[0]))e++,l.shift(),u=l.length?0:h;else break;!l.length&&e&&n<d.length&&!d[e-1].breakAfter&&d[n].merge(0,0,d[e-1],!1,u,h)&&e--,(e<n||l.length)&&i.replaceChildren(e,n,l)}}function PC(i,e,t,n,r,l){let o=i.childCursor(),{i:u,off:h}=o.findPos(t,1),{i:d,off:p}=o.findPos(e,-1),g=e-t;for(let O of n)g+=O.length;i.length+=g,zC(i,d,p,u,h,n,0,r,l)}let Dn=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},X0=typeof document<"u"?document:{documentElement:{style:{}}};const G0=/Edge\/(\d+)/.exec(Dn.userAgent),BC=/MSIE \d/.test(Dn.userAgent),W0=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Dn.userAgent),Ld=!!(BC||W0||G0),Qx=!Ld&&/gecko\/(\d+)/i.test(Dn.userAgent),kg=!Ld&&/Chrome\/(\d+)/.exec(Dn.userAgent),aP="webkitFontSmoothing"in X0.documentElement.style,_C=!Ld&&/Apple Computer/.test(Dn.vendor),zx=_C&&(/Mobile\/\w+/.test(Dn.userAgent)||Dn.maxTouchPoints>2);var Te={mac:zx||/Mac/.test(Dn.platform),windows:/Win/.test(Dn.platform),linux:/Linux|X11/.test(Dn.platform),ie:Ld,ie_version:BC?X0.documentMode||6:W0?+W0[1]:G0?+G0[1]:0,gecko:Qx,gecko_version:Qx?+(/Firefox\/(\d+)/.exec(Dn.userAgent)||[0,0])[1]:0,chrome:!!kg,chrome_version:kg?+kg[1]:0,ios:zx,android:/Android\b/.test(Dn.userAgent),safari:_C,webkit_version:aP?+(/\bAppleWebKit\/(\d+)/.exec(Dn.userAgent)||[0,0])[1]:0,tabSize:X0.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const oP=256;class Si extends mt{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,n){return this.flags&8||n&&(!(n instanceof Si)||this.length-(t-e)+n.length>oP||n.flags&8)?!1:(this.text=this.text.slice(0,e)+(n?n.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new Si(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new yn(this.dom,e)}domBoundsAround(e,t,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return uP(this.dom,e,t)}}class Xr extends mt{constructor(e,t=[],n=0){super(),this.mark=e,this.children=t,this.length=n;for(let r of t)r.setParent(this)}setAttrs(e){if(RC(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,n,r,l,o){return n&&(!(n instanceof Xr&&n.mark.eq(this.mark))||e&&l<=0||t<this.length&&o<=0)?!1:(PC(this,e,t,n?n.children.slice():[],l-1,o-1),this.markDirty(),!0)}split(e){let t=[],n=0,r=-1,l=0;for(let u of this.children){let h=n+u.length;h>e&&t.push(n<e?u.split(e-n):u),r<0&&n>=e&&(r=l),n=h,l++}let o=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new Xr(this.mark,t,o)}domAtPos(e){return $C(this,e)}coordsAt(e,t){return qC(this,e,t)}}function uP(i,e,t){let n=i.nodeValue.length;e>n&&(e=n);let r=e,l=e,o=0;e==0&&t<0||e==n&&t>=0?Te.chrome||Te.gecko||(e?(r--,o=1):l<n&&(l++,o=-1)):t<0?r--:l<n&&l++;let u=Rl(i,r,l).getClientRects();if(!u.length)return null;let h=u[(o?o<0:t>=0)?0:u.length-1];return Te.safari&&!o&&h.width==0&&(h=Array.prototype.find.call(u,d=>d.width)||h),o?hc(h,o<0):h||null}class zs extends mt{static create(e,t,n){return new zs(e,t,n)}constructor(e,t,n){super(),this.widget=e,this.length=t,this.side=n,this.prevWidget=null}split(e){let t=zs.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,n,r,l,o){return n&&(!(n instanceof zs)||!this.widget.compare(n.widget)||e>0&&l<=0||t<this.length&&o<=0)?!1:(this.length=e+(n?n.length:0)+(this.length-t),!0)}become(e){return e instanceof zs&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Ze.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,n=t&&t.state.doc,r=this.posAtStart;return n?n.slice(r,r+this.length):Ze.empty}domAtPos(e){return(this.length?e==0:this.side>0)?yn.before(this.dom):yn.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let n=this.widget.coordsAt(this.dom,e,t);if(n)return n;let r=this.dom.getClientRects(),l=null;if(!r.length)return null;let o=this.side?this.side<0:e>0;for(let u=o?r.length-1:0;l=r[u],!(e>0?u==0:u==r.length-1||l.top<l.bottom);u+=o?-1:1);return hc(l,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class La extends mt{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof La&&e.side==this.side}split(){return new La(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?yn.before(this.dom):yn.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Ze.empty}get isHidden(){return!0}}Si.prototype.children=zs.prototype.children=La.prototype.children=yO;function $C(i,e){let t=i.dom,{children:n}=i,r=0;for(let l=0;r<n.length;r++){let o=n[r],u=l+o.length;if(!(u==l&&o.getSide()<=0)){if(e>l&&e<u&&o.dom.parentNode==t)return o.domAtPos(e-l);if(e<=l)break;l=u}}for(let l=r;l>0;l--){let o=n[l-1];if(o.dom.parentNode==t)return o.domAtPos(o.length)}for(let l=r;l<n.length;l++){let o=n[l];if(o.dom.parentNode==t)return o.domAtPos(0)}return new yn(t,0)}function LC(i,e,t){let n,{children:r}=i;t>0&&e instanceof Xr&&r.length&&(n=r[r.length-1])instanceof Xr&&n.mark.eq(e.mark)?LC(n,e.children[0],t-1):(r.push(e),e.setParent(i)),i.length+=e.length}function qC(i,e,t){let n=null,r=-1,l=null,o=-1;function u(d,p){for(let g=0,O=0;g<d.children.length&&O<=p;g++){let b=d.children[g],v=O+b.length;v>=p&&(b.children.length?u(b,p-O):(!l||l.isHidden&&(t>0||hP(l,b)))&&(v>p||O==v&&b.getSide()>0)?(l=b,o=p-O):(O<p||O==v&&b.getSide()<0&&!b.isHidden)&&(n=b,r=p-O)),O=v}}u(i,e);let h=(t<0?n:l)||n||l;return h?h.coordsAt(Math.max(0,h==n?r:o),t):cP(i)}function cP(i){let e=i.dom.lastChild;if(!e)return i.dom.getBoundingClientRect();let t=$a(e);return t[t.length-1]||null}function hP(i,e){let t=i.coordsAt(0,1),n=e.coordsAt(0,1);return t&&n&&n.top<t.bottom}function I0(i,e){for(let t in i)t=="class"&&e.class?e.class+=" "+i.class:t=="style"&&e.style?e.style+=";"+i.style:e[t]=i[t];return e}const Px=Object.create(null);function nd(i,e,t){if(i==e)return!0;i||(i=Px),e||(e=Px);let n=Object.keys(i),r=Object.keys(e);if(n.length-(t&&n.indexOf(t)>-1?1:0)!=r.length-(t&&r.indexOf(t)>-1?1:0))return!1;for(let l of n)if(l!=t&&(r.indexOf(l)==-1||i[l]!==e[l]))return!1;return!0}function F0(i,e,t){let n=!1;if(e)for(let r in e)t&&r in t||(n=!0,r=="style"?i.style.cssText="":i.removeAttribute(r));if(t)for(let r in t)e&&e[r]==t[r]||(n=!0,r=="style"?i.style.cssText=t[r]:i.setAttribute(r,t[r]));return n}function fP(i){let e=Object.create(null);for(let t=0;t<i.attributes.length;t++){let n=i.attributes[t];e[n.name]=n.value}return e}class dr{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,n){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var kn=(function(i){return i[i.Text=0]="Text",i[i.WidgetBefore=1]="WidgetBefore",i[i.WidgetAfter=2]="WidgetAfter",i[i.WidgetRange=3]="WidgetRange",i})(kn||(kn={}));class Re extends _s{constructor(e,t,n,r){super(),this.startSide=e,this.endSide=t,this.widget=n,this.spec=r}get heightRelevant(){return!1}static mark(e){return new fc(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),n=!!e.block;return t+=n&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new Ls(e,t,t,n,e.widget||null,!1)}static replace(e){let t=!!e.block,n,r;if(e.isBlockGap)n=-5e8,r=4e8;else{let{start:l,end:o}=UC(e,t);n=(l?t?-3e8:-1:5e8)-1,r=(o?t?2e8:1:-6e8)+1}return new Ls(e,n,r,t,e.widget||null,!0)}static line(e){return new dc(e)}static set(e,t=!1){return Je.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Re.none=Je.empty;class fc extends Re{constructor(e){let{start:t,end:n}=UC(e);super(t?-1:5e8,n?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,n;return this==e||e instanceof fc&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((n=e.attrs)===null||n===void 0?void 0:n.class))&&nd(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}fc.prototype.point=!1;class dc extends Re{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof dc&&this.spec.class==e.spec.class&&nd(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}dc.prototype.mapMode=un.TrackBefore;dc.prototype.point=!0;class Ls extends Re{constructor(e,t,n,r,l,o){super(t,n,l,e),this.block=r,this.isReplace=o,this.mapMode=r?t<=0?un.TrackBefore:un.TrackAfter:un.TrackDel}get type(){return this.startSide!=this.endSide?kn.WidgetRange:this.startSide<=0?kn.WidgetBefore:kn.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Ls&&dP(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}Ls.prototype.point=!0;function UC(i,e=!1){let{inclusiveStart:t,inclusiveEnd:n}=i;return t==null&&(t=i.inclusive),n==null&&(n=i.inclusive),{start:t??e,end:n??e}}function dP(i,e){return i==e||!!(i&&e&&i.compare(e))}function Mf(i,e,t,n=0){let r=t.length-1;r>=0&&t[r]+n>=i?t[r]=Math.max(t[r],e):t.push(i,e)}class _t extends mt{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,n,r,l,o){if(n){if(!(n instanceof _t))return!1;this.dom||n.transferDOM(this)}return r&&this.setDeco(n?n.attrs:null),PC(this,e,t,n?n.children.slice():[],l,o),!0}split(e){let t=new _t;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i:n,off:r}=this.childPos(e);r&&(t.append(this.children[n].split(r),0),this.children[n].merge(r,this.children[n].length,null,!1,0,0),n++);for(let l=n;l<this.children.length;l++)t.append(this.children[l],0);for(;n>0&&this.children[n-1].length==0;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){nd(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){LC(this,e,t)}addLineDeco(e){let t=e.spec.attributes,n=e.spec.class;t&&(this.attrs=I0(t,this.attrs||{})),n&&(this.attrs=I0({class:n},this.attrs||{}))}domAtPos(e){return $C(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var n;this.dom?this.flags&4&&(RC(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(F0(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let r=this.dom.lastChild;for(;r&&mt.get(r)instanceof Xr;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((n=mt.get(r))===null||n===void 0?void 0:n.isEditable)==!1&&(!Te.ios||!this.children.some(l=>l instanceof Si))){let l=document.createElement("BR");l.cmIgnore=!0,this.dom.appendChild(l)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let n of this.children){if(!(n instanceof Si)||/[^ -~]/.test(n.text))return null;let r=$a(n.dom);if(r.length!=1)return null;e+=r[0].width,t=r[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let n=qC(this,e,t);if(!this.children.length&&n&&this.parent){let{heightOracle:r}=this.parent.view.viewState,l=n.bottom-n.top;if(Math.abs(l-r.lineHeight)<2&&r.textHeight<l){let o=(l-r.textHeight)/2;return{top:n.top+o,bottom:n.bottom-o,left:n.left,right:n.left}}}return n}become(e){return e instanceof _t&&this.children.length==0&&e.children.length==0&&nd(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let n=0,r=0;n<e.children.length;n++){let l=e.children[n],o=r+l.length;if(o>=t){if(l instanceof _t)return l;if(o>t)break}r=o+l.breakAfter}return null}}class Hr extends mt{constructor(e,t,n){super(),this.widget=e,this.length=t,this.deco=n,this.breakAfter=0,this.prevWidget=null}merge(e,t,n,r,l,o){return n&&(!(n instanceof Hr)||!this.widget.compare(n.widget)||e>0&&l<=0||t<this.length&&o<=0)?!1:(this.length=e+(n?n.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?yn.before(this.dom):yn.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let n=new Hr(this.widget,t,this.deco);return n.breakAfter=this.breakAfter,n}get children(){return yO}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Ze.empty}domBoundsAround(){return null}become(e){return e instanceof Hr&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){let n=this.widget.coordsAt(this.dom,e,t);return n||(this.widget instanceof Y0?null:hc(this.dom.getBoundingClientRect(),this.length?e==0:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:n}=this.deco;return t==n?!1:e<0?t<0:n>0}}class Y0 extends dr{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class Nu{constructor(e,t,n,r){this.doc=e,this.pos=t,this.end=n,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Hr&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new _t),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append($h(new La(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Hr)&&this.getLine()}buildText(e,t,n){for(;e>0;){if(this.textOff==this.text.length){let{value:l,lineBreak:o,done:u}=this.cursor.next(this.skip);if(this.skip=0,u)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=l,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-n)),this.getLine().append($h(new Si(this.text.slice(this.textOff,this.textOff+r)),t),n),this.atCursorPos=!0,this.textOff+=r,e-=r,n=0}}span(e,t,n,r){this.buildText(t-e,n,r),this.pos=t,this.openStart<0&&(this.openStart=r)}point(e,t,n,r,l,o){if(this.disallowBlockEffectsFor[o]&&n instanceof Ls){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let u=t-e;if(n instanceof Ls)if(n.block)n.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Hr(n.widget||qa.block,u,n));else{let h=zs.create(n.widget||qa.inline,u,u?0:n.startSide),d=this.atCursorPos&&!h.isEditable&&l<=r.length&&(e<t||n.startSide>0),p=!h.isEditable&&(e<t||l>r.length||n.startSide<=0),g=this.getLine();this.pendingBuffer==2&&!d&&!h.isEditable&&(this.pendingBuffer=0),this.flushBuffer(r),d&&(g.append($h(new La(1),r),l),l=r.length+Math.max(0,l-r.length)),g.append($h(h,r),l),this.atCursorPos=p,this.pendingBuffer=p?e<t||l>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);u&&(this.textOff+u<=this.text.length?this.textOff+=u:(this.skip+=u-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=l)}static build(e,t,n,r,l){let o=new Nu(e,t,n,l);return o.openEnd=Je.spans(r,t,n,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function $h(i,e){for(let t of e)i=new Xr(t,[i],i.length);return i}class qa extends dr{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}qa.inline=new qa("span");qa.block=new qa("div");var st=(function(i){return i[i.LTR=0]="LTR",i[i.RTL=1]="RTL",i})(st||(st={}));const Nl=st.LTR,OO=st.RTL;function jC(i){let e=[];for(let t=0;t<i.length;t++)e.push(1<<+i[t]);return e}const pP=jC("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),mP=jC("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Z0=Object.create(null),Qi=[];for(let i of["()","[]","{}"]){let e=i.charCodeAt(0),t=i.charCodeAt(1);Z0[e]=t,Z0[t]=-e}function HC(i){return i<=247?pP[i]:1424<=i&&i<=1524?2:1536<=i&&i<=1785?mP[i-1536]:1774<=i&&i<=2220?4:8192<=i&&i<=8204?256:64336<=i&&i<=65023?4:1}const gP=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Ps{get dir(){return this.level%2?OO:Nl}constructor(e,t,n){this.from=e,this.to=t,this.level=n}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,n,r){let l=-1;for(let o=0;o<e.length;o++){let u=e[o];if(u.from<=t&&u.to>=t){if(u.level==n)return o;(l<0||(r!=0?r<0?u.from<t:u.to>t:e[l].level>u.level))&&(l=o)}}if(l<0)throw new RangeError("Index out of range");return l}}function VC(i,e){if(i.length!=e.length)return!1;for(let t=0;t<i.length;t++){let n=i[t],r=e[t];if(n.from!=r.from||n.to!=r.to||n.direction!=r.direction||!VC(n.inner,r.inner))return!1}return!0}const pt=[];function yP(i,e,t,n,r){for(let l=0;l<=n.length;l++){let o=l?n[l-1].to:e,u=l<n.length?n[l].from:t,h=l?256:r;for(let d=o,p=h,g=h;d<u;d++){let O=HC(i.charCodeAt(d));O==512?O=p:O==8&&g==4&&(O=16),pt[d]=O==4?2:O,O&7&&(g=O),p=O}for(let d=o,p=h,g=h;d<u;d++){let O=pt[d];if(O==128)d<u-1&&p==pt[d+1]&&p&24?O=pt[d]=p:pt[d]=256;else if(O==64){let b=d+1;for(;b<u&&pt[b]==64;)b++;let v=d&&p==8||b<t&&pt[b]==8?g==1?1:8:256;for(let x=d;x<b;x++)pt[x]=v;d=b-1}else O==8&&g==1&&(pt[d]=1);p=O,O&7&&(g=O)}}}function OP(i,e,t,n,r){let l=r==1?2:1;for(let o=0,u=0,h=0;o<=n.length;o++){let d=o?n[o-1].to:e,p=o<n.length?n[o].from:t;for(let g=d,O,b,v;g<p;g++)if(b=Z0[O=i.charCodeAt(g)])if(b<0){for(let x=u-3;x>=0;x-=3)if(Qi[x+1]==-b){let w=Qi[x+2],T=w&2?r:w&4?w&1?l:r:0;T&&(pt[g]=pt[Qi[x]]=T),u=x;break}}else{if(Qi.length==189)break;Qi[u++]=g,Qi[u++]=O,Qi[u++]=h}else if((v=pt[g])==2||v==1){let x=v==r;h=x?0:1;for(let w=u-3;w>=0;w-=3){let T=Qi[w+2];if(T&2)break;if(x)Qi[w+2]|=2;else{if(T&4)break;Qi[w+2]|=4}}}}}function bP(i,e,t,n){for(let r=0,l=n;r<=t.length;r++){let o=r?t[r-1].to:i,u=r<t.length?t[r].from:e;for(let h=o;h<u;){let d=pt[h];if(d==256){let p=h+1;for(;;)if(p==u){if(r==t.length)break;p=t[r++].to,u=r<t.length?t[r].from:e}else if(pt[p]==256)p++;else break;let g=l==1,O=(p<e?pt[p]:n)==1,b=g==O?g?1:2:n;for(let v=p,x=r,w=x?t[x-1].to:i;v>h;)v==w&&(v=t[--x].from,w=x?t[x-1].to:i),pt[--v]=b;h=p}else l=d,h++}}}function K0(i,e,t,n,r,l,o){let u=n%2?2:1;if(n%2==r%2)for(let h=e,d=0;h<t;){let p=!0,g=!1;if(d==l.length||h<l[d].from){let x=pt[h];x!=u&&(p=!1,g=x==16)}let O=!p&&u==1?[]:null,b=p?n:n+1,v=h;e:for(;;)if(d<l.length&&v==l[d].from){if(g)break e;let x=l[d];if(!p)for(let w=x.to,T=d+1;;){if(w==t)break e;if(T<l.length&&l[T].from==w)w=l[T++].to;else{if(pt[w]==u)break e;break}}if(d++,O)O.push(x);else{x.from>h&&o.push(new Ps(h,x.from,b));let w=x.direction==Nl!=!(b%2);J0(i,w?n+1:n,r,x.inner,x.from,x.to,o),h=x.to}v=x.to}else{if(v==t||(p?pt[v]!=u:pt[v]==u))break;v++}O?K0(i,h,v,n+1,r,O,o):h<v&&o.push(new Ps(h,v,b)),h=v}else for(let h=t,d=l.length;h>e;){let p=!0,g=!1;if(!d||h>l[d-1].to){let x=pt[h-1];x!=u&&(p=!1,g=x==16)}let O=!p&&u==1?[]:null,b=p?n:n+1,v=h;e:for(;;)if(d&&v==l[d-1].to){if(g)break e;let x=l[--d];if(!p)for(let w=x.from,T=d;;){if(w==e)break e;if(T&&l[T-1].to==w)w=l[--T].from;else{if(pt[w-1]==u)break e;break}}if(O)O.push(x);else{x.to<h&&o.push(new Ps(x.to,h,b));let w=x.direction==Nl!=!(b%2);J0(i,w?n+1:n,r,x.inner,x.from,x.to,o),h=x.from}v=x.from}else{if(v==e||(p?pt[v-1]!=u:pt[v-1]==u))break;v--}O?K0(i,v,h,n+1,r,O,o):v<h&&o.push(new Ps(v,h,b)),h=v}}function J0(i,e,t,n,r,l,o){let u=e%2?2:1;yP(i,r,l,n,u),OP(i,r,l,n,u),bP(r,l,n,u),K0(i,r,l,e,t,n,o)}function vP(i,e,t){if(!i)return[new Ps(0,0,e==OO?1:0)];if(e==Nl&&!t.length&&!gP.test(i))return XC(i.length);if(t.length)for(;i.length>pt.length;)pt[pt.length]=256;let n=[],r=e==Nl?0:1;return J0(i,r,r,t,0,i.length,n),n}function XC(i){return[new Ps(0,i,0)]}let GC="";function SP(i,e,t,n,r){var l;let o=n.head-i.from,u=Ps.find(e,o,(l=n.bidiLevel)!==null&&l!==void 0?l:-1,n.assoc),h=e[u],d=h.side(r,t);if(o==d){let O=u+=r?1:-1;if(O<0||O>=e.length)return null;h=e[u=O],o=h.side(!r,t),d=h.side(r,t)}let p=cn(i.text,o,h.forward(r,t));(p<h.from||p>h.to)&&(p=d),GC=i.text.slice(Math.min(o,p),Math.max(o,p));let g=u==(r?e.length-1:0)?null:e[u+(r?1:-1)];return g&&p==d&&g.level+(r?0:1)<h.level?re.cursor(g.side(!r,t)+i.from,g.forward(r,t)?1:-1,g.level):re.cursor(p+i.from,h.forward(r,t)?-1:1,h.level)}function xP(i,e,t){for(let n=e;n<t;n++){let r=HC(i.charCodeAt(n));if(r==1)return Nl;if(r==2||r==4)return OO}return Nl}const WC=xe.define(),IC=xe.define(),FC=xe.define(),YC=xe.define(),ey=xe.define(),ZC=xe.define(),KC=xe.define(),bO=xe.define(),vO=xe.define(),JC=xe.define({combine:i=>i.some(e=>e)}),eA=xe.define({combine:i=>i.some(e=>e)}),tA=xe.define();class Qa{constructor(e,t="nearest",n="nearest",r=5,l=5,o=!1){this.range=e,this.y=t,this.x=n,this.yMargin=r,this.xMargin=l,this.isSnapshot=o}map(e){return e.empty?this:new Qa(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new Qa(re.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Lh=Be.define({map:(i,e)=>i.map(e)}),nA=Be.define();function On(i,e,t){let n=i.facet(YC);n.length?n[0](e):window.onerror&&window.onerror(String(e),t,void 0,void 0,e)||(t?console.error(t+":",e):console.error(e))}const Ur=xe.define({combine:i=>i.length?i[0]:!0});let wP=0;const Ea=xe.define({combine(i){return i.filter((e,t)=>{for(let n=0;n<t;n++)if(i[n].plugin==e.plugin)return!1;return!0})}});class wt{constructor(e,t,n,r,l){this.id=e,this.create=t,this.domEventHandlers=n,this.domEventObservers=r,this.baseExtensions=l(this),this.extension=this.baseExtensions.concat(Ea.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(Ea.of({plugin:this,arg:e}))}static define(e,t){const{eventHandlers:n,eventObservers:r,provide:l,decorations:o}=t||{};return new wt(wP++,e,n,r,u=>{let h=[];return o&&h.push(Lu.of(d=>{let p=d.plugin(u);return p?o(p):Re.none})),l&&h.push(l(u)),h})}static fromClass(e,t){return wt.define((n,r)=>new e(n,r),t)}}class Tg{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(n){if(On(t.state,n,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(t){On(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(n){On(e.state,n,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const iA=xe.define(),SO=xe.define(),Lu=xe.define(),rA=xe.define(),xO=xe.define(),sA=xe.define();function Bx(i,e){let t=i.state.facet(sA);if(!t.length)return t;let n=t.map(l=>l instanceof Function?l(i):l),r=[];return Je.spans(n,e.from,e.to,{point(){},span(l,o,u,h){let d=l-e.from,p=o-e.from,g=r;for(let O=u.length-1;O>=0;O--,h--){let b=u[O].spec.bidiIsolate,v;if(b==null&&(b=xP(e.text,d,p)),h>0&&g.length&&(v=g[g.length-1]).to==d&&v.direction==b)v.to=p,g=v.inner;else{let x={from:d,to:p,direction:b,inner:[]};g.push(x),g=x.inner}}}}),r}const lA=xe.define();function wO(i){let e=0,t=0,n=0,r=0;for(let l of i.state.facet(lA)){let o=l(i);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(t=Math.max(t,o.right)),o.top!=null&&(n=Math.max(n,o.top)),o.bottom!=null&&(r=Math.max(r,o.bottom)))}return{left:e,right:t,top:n,bottom:r}}const yu=xe.define();class hi{constructor(e,t,n,r){this.fromA=e,this.toA=t,this.fromB=n,this.toB=r}join(e){return new hi(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,n=this;for(;t>0;t--){let r=e[t-1];if(!(r.fromA>n.toA)){if(r.toA<n.fromA)break;n=n.join(r),e.splice(t-1,1)}}return e.splice(t,0,n),e}static extendWithRanges(e,t){if(t.length==0)return e;let n=[];for(let r=0,l=0,o=0,u=0;;r++){let h=r==e.length?null:e[r],d=o-u,p=h?h.fromB:1e9;for(;l<t.length&&t[l]<p;){let g=t[l],O=t[l+1],b=Math.max(u,g),v=Math.min(p,O);if(b<=v&&new hi(b+d,v+d,b,v).addToSet(n),O>p)break;l+=2}if(!h)return n;new hi(h.fromA,h.toA,h.fromB,h.toB).addToSet(n),o=h.toA,u=h.toB}}}class id{constructor(e,t,n){this.view=e,this.state=t,this.transactions=n,this.flags=0,this.startState=e.state,this.changes=Ht.empty(this.startState.doc.length);for(let l of n)this.changes=this.changes.compose(l.changes);let r=[];this.changes.iterChangedRanges((l,o,u,h)=>r.push(new hi(l,o,u,h))),this.changedRanges=r}static create(e,t,n){return new id(e,t,n)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class _x extends mt{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Re.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new _t],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new hi(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let n=e.changedRanges;this.minWidth>0&&n.length&&(n.every(({fromA:d,toA:p})=>p<this.minWidthFrom||d>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let r=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?r=this.domChanged.newSel.head:!NP(e.changes,this.hasComposition)&&!e.selectionSet&&(r=e.state.selection.main.head));let l=r>-1?TP(this.view,e.changes,r):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:d,to:p}=this.hasComposition;n=new hi(d,p,e.changes.mapPos(d,-1),e.changes.mapPos(p,1)).addToSet(n.slice())}this.hasComposition=l?{from:l.range.fromB,to:l.range.toB}:null,(Te.ie||Te.chrome)&&!l&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,u=this.updateDeco(),h=EP(o,u,e.changes);return n=hi.extendWithRanges(n,h),!(this.flags&7)&&n.length==0?!1:(this.updateInner(n,e.startState.doc.length,l),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,n){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,n);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=Te.chrome||Te.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||r.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let l=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof Hr&&o.widget instanceof Y0&&l.push(o.dom);r.updateGaps(l)}updateChildren(e,t,n){let r=n?n.range.addToSet(e.slice()):e,l=this.childCursor(t);for(let o=r.length-1;;o--){let u=o>=0?r[o]:null;if(!u)break;let{fromA:h,toA:d,fromB:p,toB:g}=u,O,b,v,x;if(n&&n.range.fromB<g&&n.range.toB>p){let _=Nu.build(this.view.state.doc,p,n.range.fromB,this.decorations,this.dynamicDecorationMap),A=Nu.build(this.view.state.doc,n.range.toB,g,this.decorations,this.dynamicDecorationMap);b=_.breakAtStart,v=_.openStart,x=A.openEnd;let B=this.compositionView(n);A.breakAtStart?B.breakAfter=1:A.content.length&&B.merge(B.length,B.length,A.content[0],!1,A.openStart,0)&&(B.breakAfter=A.content[0].breakAfter,A.content.shift()),_.content.length&&B.merge(0,0,_.content[_.content.length-1],!0,0,_.openEnd)&&_.content.pop(),O=_.content.concat(B).concat(A.content)}else({content:O,breakAtStart:b,openStart:v,openEnd:x}=Nu.build(this.view.state.doc,p,g,this.decorations,this.dynamicDecorationMap));let{i:w,off:T}=l.findPos(d,1),{i:E,off:D}=l.findPos(h,-1);zC(this,E,D,w,T,O,b,v,x)}n&&this.fixCompositionDOM(n)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let n of t.effects)n.is(nA)&&(this.editContextFormatting=n.value)}compositionView(e){let t=new Si(e.text.nodeValue);t.flags|=8;for(let{deco:r}of e.marks)t=new Xr(r,[t],t.length);let n=new _t;return n.append(t,0),n}fixCompositionDOM(e){let t=(l,o)=>{o.flags|=8|(o.children.some(h=>h.flags&7)?1:0),this.markedForComposition.add(o);let u=mt.get(l);u&&u!=o&&(u.dom=null),o.setDOM(l)},n=this.childPos(e.range.fromB,1),r=this.children[n.i];t(e.line,r);for(let l=e.marks.length-1;l>=-1;l--)n=r.childPos(n.off,1),r=r.children[n.i],t(l>=0?e.marks[l].node:e.text,r)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let n=this.view.root.activeElement,r=n==this.dom,l=!r&&!(this.view.state.facet(Ur)||this.dom.tabIndex>-1)&&Nf(this.dom,this.view.observer.selectionRange)&&!(n&&this.dom.contains(n));if(!(r||t||l))return;let o=this.forceSelection;this.forceSelection=!1;let u=this.view.state.selection.main,h=this.moveToLine(this.domAtPos(u.anchor)),d=u.empty?h:this.moveToLine(this.domAtPos(u.head));if(Te.gecko&&u.empty&&!this.hasComposition&&kP(h)){let g=document.createTextNode("");this.view.observer.ignore(()=>h.node.insertBefore(g,h.node.childNodes[h.offset]||null)),h=d=new yn(g,0),o=!0}let p=this.view.observer.selectionRange;(o||!p.focusNode||(!Ru(h.node,h.offset,p.anchorNode,p.anchorOffset)||!Ru(d.node,d.offset,p.focusNode,p.focusOffset))&&!this.suppressWidgetCursorChange(p,u))&&(this.view.observer.ignore(()=>{Te.android&&Te.chrome&&this.dom.contains(p.focusNode)&&RP(p.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let g=$u(this.view.root);if(g)if(u.empty){if(Te.gecko){let O=CP(h.node,h.offset);if(O&&O!=3){let b=(O==1?MC:DC)(h.node,h.offset);b&&(h=new yn(b.node,b.offset))}}g.collapse(h.node,h.offset),u.bidiLevel!=null&&g.caretBidiLevel!==void 0&&(g.caretBidiLevel=u.bidiLevel)}else if(g.extend){g.collapse(h.node,h.offset);try{g.extend(d.node,d.offset)}catch{}}else{let O=document.createRange();u.anchor>u.head&&([h,d]=[d,h]),O.setEnd(d.node,d.offset),O.setStart(h.node,h.offset),g.removeAllRanges(),g.addRange(O)}l&&this.view.root.activeElement==this.dom&&(this.dom.blur(),n&&n.focus())}),this.view.observer.setSelectionRange(h,d)),this.impreciseAnchor=h.precise?null:new yn(p.anchorNode,p.anchorOffset),this.impreciseHead=d.precise?null:new yn(p.focusNode,p.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&Ru(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,n=$u(e.root),{anchorNode:r,anchorOffset:l}=e.observer.selectionRange;if(!n||!t.empty||!t.assoc||!n.modify)return;let o=_t.find(this,t.head);if(!o)return;let u=o.posAtStart;if(t.head==u||t.head==u+o.length)return;let h=this.coordsAt(t.head,-1),d=this.coordsAt(t.head,1);if(!h||!d||h.bottom>d.top)return;let p=this.domAtPos(t.head+t.assoc);n.collapse(p.node,p.offset),n.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let g=e.observer.selectionRange;e.docView.posFromDOM(g.anchorNode,g.anchorOffset)!=t.from&&n.collapse(r,l)}moveToLine(e){let t=this.dom,n;if(e.node!=t)return e;for(let r=e.offset;!n&&r<t.childNodes.length;r++){let l=mt.get(t.childNodes[r]);l instanceof _t&&(n=l.domAtPos(0))}for(let r=e.offset-1;!n&&r>=0;r--){let l=mt.get(t.childNodes[r]);l instanceof _t&&(n=l.domAtPos(l.length))}return n?new yn(n.node,n.offset,!0):e}nearest(e){for(let t=e;t;){let n=mt.get(t);if(n&&n.rootView==this)return n;t=t.parentNode}return null}posFromDOM(e,t){let n=this.nearest(e);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(e,t)+n.posAtStart}domAtPos(e){let{i:t,off:n}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let r=this.children[t];if(n<r.length||r instanceof _t)break;t++,n=0}return this.children[t].domAtPos(n)}coordsAt(e,t){let n=null,r=0;for(let l=this.length,o=this.children.length-1;o>=0;o--){let u=this.children[o],h=l-u.breakAfter,d=h-u.length;if(h<e)break;if(d<=e&&(d<e||u.covers(-1))&&(h>e||u.covers(1))&&(!n||u instanceof _t&&!(n instanceof _t&&t>=0)))n=u,r=d;else if(n&&d==e&&h==e&&u instanceof Hr&&Math.abs(t)<2){if(u.deco.startSide<0)break;o&&(n=null)}l=d}return n?n.coordsAt(e-r,t):null}coordsForChar(e){let{i:t,off:n}=this.childPos(e,1),r=this.children[t];if(!(r instanceof _t))return null;for(;r.children.length;){let{i:u,off:h}=r.childPos(n,1);for(;;u++){if(u==r.children.length)return null;if((r=r.children[u]).length)break}n=h}if(!(r instanceof Si))return null;let l=cn(r.text,n);if(l==n)return null;let o=Rl(r.dom,n,l).getClientRects();for(let u=0;u<o.length;u++){let h=o[u];if(u==o.length-1||h.top<h.bottom&&h.left<h.right)return h}return null}measureVisibleLineHeights(e){let t=[],{from:n,to:r}=e,l=this.view.contentDOM.clientWidth,o=l>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,u=-1,h=this.view.textDirection==st.LTR;for(let d=0,p=0;p<this.children.length;p++){let g=this.children[p],O=d+g.length;if(O>r)break;if(d>=n){let b=g.dom.getBoundingClientRect();if(t.push(b.height),o){let v=g.dom.lastChild,x=v?$a(v):[];if(x.length){let w=x[x.length-1],T=h?w.right-b.left:b.right-w.left;T>u&&(u=T,this.minWidth=l,this.minWidthFrom=d,this.minWidthTo=O)}}}d=O+g.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?st.RTL:st.LTR}measureTextSize(){for(let l of this.children)if(l instanceof _t){let o=l.measureTextSize();if(o)return o}let e=document.createElement("div"),t,n,r;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let l=$a(e.firstChild)[0];t=e.getBoundingClientRect().height,n=l?l.width/27:7,r=l?l.height:t,e.remove()}),{lineHeight:t,charWidth:n,textHeight:r}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new QC(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let n=0,r=0;;r++){let l=r==t.viewports.length?null:t.viewports[r],o=l?l.from-1:this.length;if(o>n){let u=(t.lineBlockAt(o).bottom-t.lineBlockAt(n).top)/this.view.scaleY;e.push(Re.replace({widget:new Y0(u),block:!0,inclusive:!0,isBlockGap:!0}).range(n,o))}if(!l)break;n=l.to+1}return Re.set(e)}updateDeco(){let e=1,t=this.view.state.facet(Lu).map(l=>(this.dynamicDecorationMap[e++]=typeof l=="function")?l(this.view):l),n=!1,r=this.view.state.facet(rA).map((l,o)=>{let u=typeof l=="function";return u&&(n=!0),u?l(this.view):l});for(r.length&&(this.dynamicDecorationMap[e++]=n,t.push(Je.join(r))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let d=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=d.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let d of this.view.state.facet(tA))try{if(d(this.view,e.range,e))return!0}catch(p){On(this.view.state,p,"scroll handler")}let{range:t}=e,n=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),r;if(!n)return;!t.empty&&(r=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(n={left:Math.min(n.left,r.left),top:Math.min(n.top,r.top),right:Math.max(n.right,r.right),bottom:Math.max(n.bottom,r.bottom)});let l=wO(this.view),o={left:n.left-l.left,top:n.top-l.top,right:n.right+l.right,bottom:n.bottom+l.bottom},{offsetWidth:u,offsetHeight:h}=this.view.scrollDOM;nP(this.view.scrollDOM,o,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,u),-u),Math.max(Math.min(e.yMargin,h),-h),this.view.textDirection==st.LTR)}}function kP(i){return i.node.nodeType==1&&i.node.firstChild&&(i.offset==0||i.node.childNodes[i.offset-1].contentEditable=="false")&&(i.offset==i.node.childNodes.length||i.node.childNodes[i.offset].contentEditable=="false")}function aA(i,e){let t=i.observer.selectionRange;if(!t.focusNode)return null;let n=MC(t.focusNode,t.focusOffset),r=DC(t.focusNode,t.focusOffset),l=n||r;if(r&&n&&r.node!=n.node){let u=mt.get(r.node);if(!u||u instanceof Si&&u.text!=r.node.nodeValue)l=r;else if(i.docView.lastCompositionAfterCursor){let h=mt.get(n.node);!h||h instanceof Si&&h.text!=n.node.nodeValue||(l=r)}}if(i.docView.lastCompositionAfterCursor=l!=n,!l)return null;let o=e-l.offset;return{from:o,to:o+l.node.nodeValue.length,node:l.node}}function TP(i,e,t){let n=aA(i,t);if(!n)return null;let{node:r,from:l,to:o}=n,u=r.nodeValue;if(/[\n\r]/.test(u)||i.state.doc.sliceString(n.from,n.to)!=u)return null;let h=e.invertedDesc,d=new hi(h.mapPos(l),h.mapPos(o),l,o),p=[];for(let g=r.parentNode;;g=g.parentNode){let O=mt.get(g);if(O instanceof Xr)p.push({node:g,deco:O.mark});else{if(O instanceof _t||g.nodeName=="DIV"&&g.parentNode==i.contentDOM)return{range:d,text:r,marks:p,line:g};if(g!=i.contentDOM)p.push({node:g,deco:new fc({inclusive:!0,attributes:fP(g),tagName:g.tagName.toLowerCase()})});else return null}}}function CP(i,e){return i.nodeType!=1?0:(e&&i.childNodes[e-1].contentEditable=="false"?1:0)|(e<i.childNodes.length&&i.childNodes[e].contentEditable=="false"?2:0)}let AP=class{constructor(){this.changes=[]}compareRange(e,t){Mf(e,t,this.changes)}comparePoint(e,t){Mf(e,t,this.changes)}boundChange(e){Mf(e,e,this.changes)}};function EP(i,e,t){let n=new AP;return Je.compare(i,e,t,n),n.changes}function RP(i,e){for(let t=i;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function NP(i,e){let t=!1;return e&&i.iterChangedRanges((n,r)=>{n<e.to&&r>e.from&&(t=!0)}),t}function MP(i,e,t=1){let n=i.charCategorizer(e),r=i.doc.lineAt(e),l=e-r.from;if(r.length==0)return re.cursor(e);l==0?t=1:l==r.length&&(t=-1);let o=l,u=l;t<0?o=cn(r.text,l,!1):u=cn(r.text,l);let h=n(r.text.slice(o,u));for(;o>0;){let d=cn(r.text,o,!1);if(n(r.text.slice(d,o))!=h)break;o=d}for(;u<r.length;){let d=cn(r.text,u);if(n(r.text.slice(u,d))!=h)break;u=d}return re.range(o+r.from,u+r.from)}function DP(i,e){return e.left>i?e.left-i:Math.max(0,i-e.right)}function QP(i,e){return e.top>i?e.top-i:Math.max(0,i-e.bottom)}function Cg(i,e){return i.top<e.bottom-1&&i.bottom>e.top+1}function $x(i,e){return e<i.top?{top:e,left:i.left,right:i.right,bottom:i.bottom}:i}function Lx(i,e){return e>i.bottom?{top:i.top,left:i.left,right:i.right,bottom:e}:i}function ty(i,e,t){let n,r,l,o,u=!1,h,d,p,g;for(let v=i.firstChild;v;v=v.nextSibling){let x=$a(v);for(let w=0;w<x.length;w++){let T=x[w];r&&Cg(r,T)&&(T=$x(Lx(T,r.bottom),r.top));let E=DP(e,T),D=QP(t,T);if(E==0&&D==0)return v.nodeType==3?qx(v,e,t):ty(v,e,t);(!n||o>D||o==D&&l>E)&&(n=v,r=T,l=E,o=D,u=E?e<T.left?w>0:w<x.length-1:!0),E==0?t>T.bottom&&(!p||p.bottom<T.bottom)?(h=v,p=T):t<T.top&&(!g||g.top>T.top)&&(d=v,g=T):p&&Cg(p,T)?p=Lx(p,T.bottom):g&&Cg(g,T)&&(g=$x(g,T.top))}}if(p&&p.bottom>=t?(n=h,r=p):g&&g.top<=t&&(n=d,r=g),!n)return{node:i,offset:0};let O=Math.max(r.left,Math.min(r.right,e));if(n.nodeType==3)return qx(n,O,t);if(u&&n.contentEditable!="false")return ty(n,O,t);let b=Array.prototype.indexOf.call(i.childNodes,n)+(e>=(r.left+r.right)/2?1:0);return{node:i,offset:b}}function qx(i,e,t){let n=i.nodeValue.length,r=-1,l=1e9,o=0;for(let u=0;u<n;u++){let h=Rl(i,u,u+1).getClientRects();for(let d=0;d<h.length;d++){let p=h[d];if(p.top==p.bottom)continue;o||(o=e-p.left);let g=(p.top>t?p.top-t:t-p.bottom)-1;if(p.left-1<=e&&p.right+1>=e&&g<l){let O=e>=(p.left+p.right)/2,b=O;if((Te.chrome||Te.gecko)&&Rl(i,u).getBoundingClientRect().left==p.right&&(b=!O),g<=0)return{node:i,offset:u+(b?1:0)};r=u+(b?1:0),l=g}}}return{node:i,offset:r>-1?r:o>0?i.nodeValue.length:0}}function oA(i,e,t,n=-1){var r,l;let o=i.contentDOM.getBoundingClientRect(),u=o.top+i.viewState.paddingTop,h,{docHeight:d}=i.viewState,{x:p,y:g}=e,O=g-u;if(O<0)return 0;if(O>d)return i.state.doc.length;for(let _=i.viewState.heightOracle.textHeight/2,A=!1;h=i.elementAtHeight(O),h.type!=kn.Text;)for(;O=n>0?h.bottom+_:h.top-_,!(O>=0&&O<=d);){if(A)return t?null:0;A=!0,n=-n}g=u+O;let b=h.from;if(b<i.viewport.from)return i.viewport.from==0?0:t?null:Ux(i,o,h,p,g);if(b>i.viewport.to)return i.viewport.to==i.state.doc.length?i.state.doc.length:t?null:Ux(i,o,h,p,g);let v=i.dom.ownerDocument,x=i.root.elementFromPoint?i.root:v,w=x.elementFromPoint(p,g);w&&!i.contentDOM.contains(w)&&(w=null),w||(p=Math.max(o.left+1,Math.min(o.right-1,p)),w=x.elementFromPoint(p,g),w&&!i.contentDOM.contains(w)&&(w=null));let T,E=-1;if(w&&((r=i.docView.nearest(w))===null||r===void 0?void 0:r.isEditable)!=!1){if(v.caretPositionFromPoint){let _=v.caretPositionFromPoint(p,g);_&&({offsetNode:T,offset:E}=_)}else if(v.caretRangeFromPoint){let _=v.caretRangeFromPoint(p,g);_&&({startContainer:T,startOffset:E}=_,(!i.contentDOM.contains(T)||Te.safari&&zP(T,E,p)||Te.chrome&&PP(T,E,p))&&(T=void 0))}T&&(E=Math.min(or(T),E))}if(!T||!i.docView.dom.contains(T)){let _=_t.find(i.docView,b);if(!_)return O>h.top+h.height/2?h.to:h.from;({node:T,offset:E}=ty(_.dom,p,g))}let D=i.docView.nearest(T);if(!D)return null;if(D.isWidget&&((l=D.dom)===null||l===void 0?void 0:l.nodeType)==1){let _=D.dom.getBoundingClientRect();return e.y<_.top||e.y<=_.bottom&&e.x<=(_.left+_.right)/2?D.posAtStart:D.posAtEnd}else return D.localPosFromDOM(T,E)+D.posAtStart}function Ux(i,e,t,n,r){let l=Math.round((n-e.left)*i.defaultCharacterWidth);if(i.lineWrapping&&t.height>i.defaultLineHeight*1.5){let u=i.viewState.heightOracle.textHeight,h=Math.floor((r-t.top-(i.defaultLineHeight-u)*.5)/u);l+=h*i.viewState.heightOracle.lineLength}let o=i.state.sliceDoc(t.from,t.to);return t.from+U0(o,l,i.state.tabSize)}function zP(i,e,t){let n,r=i;if(i.nodeType!=3||e!=(n=i.nodeValue.length))return!1;for(;;){let l=r.nextSibling;if(l){if(l.nodeName=="BR")break;return!1}else{let o=r.parentNode;if(!o||o.nodeName=="DIV")break;r=o}}return Rl(i,n-1,n).getBoundingClientRect().right>t}function PP(i,e,t){if(e!=0)return!1;for(let r=i;;){let l=r.parentNode;if(!l||l.nodeType!=1||l.firstChild!=r)return!1;if(l.classList.contains("cm-line"))break;r=l}let n=i.nodeType==1?i.getBoundingClientRect():Rl(i,0,Math.max(i.nodeValue.length,1)).getBoundingClientRect();return t-n.left>5}function ny(i,e,t){let n=i.lineBlockAt(e);if(Array.isArray(n.type)){let r;for(let l of n.type){if(l.from>e)break;if(!(l.to<e)){if(l.from<e&&l.to>e)return l;(!r||l.type==kn.Text&&(r.type!=l.type||(t<0?l.from<e:l.to>e)))&&(r=l)}}return r||n}return n}function BP(i,e,t,n){let r=ny(i,e.head,e.assoc||-1),l=!n||r.type!=kn.Text||!(i.lineWrapping||r.widgetLineBreaks)?null:i.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(l){let o=i.dom.getBoundingClientRect(),u=i.textDirectionAt(r.from),h=i.posAtCoords({x:t==(u==st.LTR)?o.right-1:o.left+1,y:(l.top+l.bottom)/2});if(h!=null)return re.cursor(h,t?-1:1)}return re.cursor(t?r.to:r.from,t?-1:1)}function jx(i,e,t,n){let r=i.state.doc.lineAt(e.head),l=i.bidiSpans(r),o=i.textDirectionAt(r.from);for(let u=e,h=null;;){let d=SP(r,l,o,u,t),p=GC;if(!d){if(r.number==(t?i.state.doc.lines:1))return u;p=`
`,r=i.state.doc.line(r.number+(t?1:-1)),l=i.bidiSpans(r),d=i.visualLineSide(r,!t)}if(h){if(!h(p))return u}else{if(!n)return d;h=n(p)}u=d}}function _P(i,e,t){let n=i.state.charCategorizer(e),r=n(t);return l=>{let o=n(l);return r==xt.Space&&(r=o),r==o}}function $P(i,e,t,n){let r=e.head,l=t?1:-1;if(r==(t?i.state.doc.length:0))return re.cursor(r,e.assoc);let o=e.goalColumn,u,h=i.contentDOM.getBoundingClientRect(),d=i.coordsAtPos(r,e.assoc||-1),p=i.documentTop;if(d)o==null&&(o=d.left-h.left),u=l<0?d.top:d.bottom;else{let b=i.viewState.lineBlockAt(r);o==null&&(o=Math.min(h.right-h.left,i.defaultCharacterWidth*(r-b.from))),u=(l<0?b.top:b.bottom)+p}let g=h.left+o,O=n??i.viewState.heightOracle.textHeight>>1;for(let b=0;;b+=10){let v=u+(O+b)*l,x=oA(i,{x:g,y:v},!1,l);if(v<h.top||v>h.bottom||(l<0?x<r:x>r)){let w=i.docView.coordsForChar(x),T=!w||v<w.top?-1:1;return re.cursor(x,T,void 0,o)}}}function Df(i,e,t){for(;;){let n=0;for(let r of i)r.between(e-1,e+1,(l,o,u)=>{if(e>l&&e<o){let h=n||t||(e-l<o-e?-1:1);e=h<0?l:o,n=h}});if(!n)return e}}function Ag(i,e,t){let n=Df(i.state.facet(xO).map(r=>r(i)),t.from,e.head>t.from?-1:1);return n==t.from?t:re.cursor(n,n<t.from?1:-1)}const Ou="";class LP{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(qe.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Ou}readRange(e,t){if(!e)return this;let n=e.parentNode;for(let r=e;;){this.findPointBefore(n,r);let l=this.text.length;this.readNode(r);let o=r.nextSibling;if(o==t)break;let u=mt.get(r),h=mt.get(o);(u&&h?u.breakAfter:(u?u.breakAfter:td(r))||td(o)&&(r.nodeName!="BR"||r.cmIgnore)&&this.text.length>l)&&this.lineBreak(),r=o}return this.findPointBefore(n,t),this}readTextNode(e){let t=e.nodeValue;for(let n of this.points)n.node==e&&(n.pos=this.text.length+Math.min(n.offset,t.length));for(let n=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let l=-1,o=1,u;if(this.lineSeparator?(l=t.indexOf(this.lineSeparator,n),o=this.lineSeparator.length):(u=r.exec(t))&&(l=u.index,o=u[0].length),this.append(t.slice(n,l<0?t.length:l)),l<0)break;if(this.lineBreak(),o>1)for(let h of this.points)h.node==e&&h.pos>this.text.length&&(h.pos-=o-1);n=l+o}}readNode(e){if(e.cmIgnore)return;let t=mt.get(e),n=t&&t.overrideDOMText;if(n!=null){this.findPointInside(e,n.length);for(let r=n.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let n of this.points)n.node==e&&e.childNodes[n.offset]==t&&(n.pos=this.text.length)}findPointInside(e,t){for(let n of this.points)(e.nodeType==3?n.node==e:e.contains(n.node))&&(n.pos=this.text.length+(qP(e,n.node,n.offset)?t:0))}}function qP(i,e,t){for(;;){if(!e||t<or(e))return!1;if(e==i)return!0;t=El(e)+1,e=e.parentNode}}class Hx{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class UP{constructor(e,t,n,r){this.typeOver=r,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:l,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,n,0))){let u=l||o?[]:VP(e),h=new LP(u,e.state);h.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=h.text,this.newSel=XP(u,this.bounds.from)}else{let u=e.observer.selectionRange,h=l&&l.node==u.focusNode&&l.offset==u.focusOffset||!V0(e.contentDOM,u.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(u.focusNode,u.focusOffset),d=o&&o.node==u.anchorNode&&o.offset==u.anchorOffset||!V0(e.contentDOM,u.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(u.anchorNode,u.anchorOffset),p=e.viewport;if((Te.ios||Te.chrome)&&e.state.selection.main.empty&&h!=d&&(p.from>0||p.to<e.state.doc.length)){let g=Math.min(h,d),O=Math.max(h,d),b=p.from-g,v=p.to-O;(b==0||b==1||g==0)&&(v==0||v==-1||O==e.state.doc.length)&&(h=0,d=e.state.doc.length)}this.newSel=re.single(d,h)}}}function uA(i,e){let t,{newSel:n}=e,r=i.state.selection.main,l=i.inputState.lastKeyTime>Date.now()-100?i.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:u}=e.bounds,h=r.from,d=null;(l===8||Te.android&&e.text.length<u-o)&&(h=r.to,d="end");let p=HP(i.state.doc.sliceString(o,u,Ou),e.text,h-o,d);p&&(Te.chrome&&l==13&&p.toB==p.from+2&&e.text.slice(p.from,p.toB)==Ou+Ou&&p.toB--,t={from:o+p.from,to:o+p.toA,insert:Ze.of(e.text.slice(p.from,p.toB).split(Ou))})}else n&&(!i.hasFocus&&i.state.facet(Ur)||n.main.eq(r))&&(n=null);if(!t&&!n)return!1;if(!t&&e.typeOver&&!r.empty&&n&&n.main.empty?t={from:r.from,to:r.to,insert:i.state.doc.slice(r.from,r.to)}:(Te.mac||Te.android)&&t&&t.from==t.to&&t.from==r.head-1&&/^\. ?$/.test(t.insert.toString())&&i.contentDOM.getAttribute("autocorrect")=="off"?(n&&t.insert.length==2&&(n=re.single(n.main.anchor-1,n.main.head-1)),t={from:t.from,to:t.to,insert:Ze.of([t.insert.toString().replace("."," ")])}):t&&t.from>=r.from&&t.to<=r.to&&(t.from!=r.from||t.to!=r.to)&&r.to-r.from-(t.to-t.from)<=4?t={from:r.from,to:r.to,insert:i.state.doc.slice(r.from,t.from).append(t.insert).append(i.state.doc.slice(t.to,r.to))}:Te.chrome&&t&&t.from==t.to&&t.from==r.head&&t.insert.toString()==`
 `&&i.lineWrapping&&(n&&(n=re.single(n.main.anchor-1,n.main.head-1)),t={from:r.from,to:r.to,insert:Ze.of([" "])}),t)return kO(i,t,n,l);if(n&&!n.main.eq(r)){let o=!1,u="select";return i.inputState.lastSelectionTime>Date.now()-50&&(i.inputState.lastSelectionOrigin=="select"&&(o=!0),u=i.inputState.lastSelectionOrigin),i.dispatch({selection:n,scrollIntoView:o,userEvent:u}),!0}else return!1}function kO(i,e,t,n=-1){if(Te.ios&&i.inputState.flushIOSKey(e))return!0;let r=i.state.selection.main;if(Te.android&&(e.to==r.to&&(e.from==r.from||e.from==r.from-1&&i.state.sliceDoc(e.from,r.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Da(i.contentDOM,"Enter",13)||(e.from==r.from-1&&e.to==r.to&&e.insert.length==0||n==8&&e.insert.length<e.to-e.from&&e.to>r.head)&&Da(i.contentDOM,"Backspace",8)||e.from==r.from&&e.to==r.to+1&&e.insert.length==0&&Da(i.contentDOM,"Delete",46)))return!0;let l=e.insert.toString();i.inputState.composing>=0&&i.inputState.composing++;let o,u=()=>o||(o=jP(i,e,t));return i.state.facet(ZC).some(h=>h(i,e.from,e.to,l,u))||i.dispatch(u()),!0}function jP(i,e,t){let n,r=i.state,l=r.selection.main;if(e.from>=l.from&&e.to<=l.to&&e.to-e.from>=(l.to-l.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&i.inputState.composing<0){let u=l.from<e.from?r.sliceDoc(l.from,e.from):"",h=l.to>e.to?r.sliceDoc(e.to,l.to):"";n=r.replaceSelection(i.state.toText(u+e.insert.sliceString(0,void 0,i.state.lineBreak)+h))}else{let u=r.changes(e),h=t&&t.main.to<=u.newLength?t.main:void 0;if(r.selection.ranges.length>1&&i.inputState.composing>=0&&e.to<=l.to&&e.to>=l.to-10){let d=i.state.sliceDoc(e.from,e.to),p,g=t&&aA(i,t.main.head);if(g){let v=e.insert.length-(e.to-e.from);p={from:g.from,to:g.to-v}}else p=i.state.doc.lineAt(l.head);let O=l.to-e.to,b=l.to-l.from;n=r.changeByRange(v=>{if(v.from==l.from&&v.to==l.to)return{changes:u,range:h||v.map(u)};let x=v.to-O,w=x-d.length;if(v.to-v.from!=b||i.state.sliceDoc(w,x)!=d||v.to>=p.from&&v.from<=p.to)return{range:v};let T=r.changes({from:w,to:x,insert:e.insert}),E=v.to-l.to;return{changes:T,range:h?re.range(Math.max(0,h.anchor+E),Math.max(0,h.head+E)):v.map(T)}})}else n={changes:u,selection:h&&r.selection.replaceRange(h)}}let o="input.type";return(i.composing||i.inputState.compositionPendingChange&&i.inputState.compositionEndedAt>Date.now()-50)&&(i.inputState.compositionPendingChange=!1,o+=".compose",i.inputState.compositionFirstChange&&(o+=".start",i.inputState.compositionFirstChange=!1)),r.update(n,{userEvent:o,scrollIntoView:!0})}function HP(i,e,t,n){let r=Math.min(i.length,e.length),l=0;for(;l<r&&i.charCodeAt(l)==e.charCodeAt(l);)l++;if(l==r&&i.length==e.length)return null;let o=i.length,u=e.length;for(;o>0&&u>0&&i.charCodeAt(o-1)==e.charCodeAt(u-1);)o--,u--;if(n=="end"){let h=Math.max(0,l-Math.min(o,u));t-=o+h-l}if(o<l&&i.length<e.length){let h=t<=l&&t>=o?l-t:0;l-=h,u=l+(u-o),o=l}else if(u<l){let h=t<=l&&t>=u?l-t:0;l-=h,o=l+(o-u),u=l}return{from:l,toA:o,toB:u}}function VP(i){let e=[];if(i.root.activeElement!=i.contentDOM)return e;let{anchorNode:t,anchorOffset:n,focusNode:r,focusOffset:l}=i.observer.selectionRange;return t&&(e.push(new Hx(t,n)),(r!=t||l!=n)&&e.push(new Hx(r,l))),e}function XP(i,e){if(i.length==0)return null;let t=i[0].pos,n=i.length==2?i[1].pos:t;return t>-1&&n>-1?re.single(t+e,n+e):null}class GP{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Te.safari&&e.contentDOM.addEventListener("input",()=>null),Te.gecko&&oB(e.contentDOM.ownerDocument)}handleEvent(e){!eB(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,t){let n=this.handlers[e];if(n){for(let r of n.observers)r(this.view,t);for(let r of n.handlers){if(t.defaultPrevented)break;if(r(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=WP(e),n=this.handlers,r=this.view.contentDOM;for(let l in t)if(l!="scroll"){let o=!t[l].handlers.length,u=n[l];u&&o!=!u.handlers.length&&(r.removeEventListener(l,this.handleEvent),u=null),u||r.addEventListener(l,this.handleEvent,{passive:o})}for(let l in n)l!="scroll"&&!t[l]&&r.removeEventListener(l,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&hA.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),Te.android&&Te.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return Te.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=cA.find(n=>n.keyCode==e.keyCode))&&!e.ctrlKey||IP.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Da(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:Te.safari&&!Te.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function Vx(i,e){return(t,n)=>{try{return e.call(i,n,t)}catch(r){On(t.state,r)}}}function WP(i){let e=Object.create(null);function t(n){return e[n]||(e[n]={observers:[],handlers:[]})}for(let n of i){let r=n.spec,l=r&&r.plugin.domEventHandlers,o=r&&r.plugin.domEventObservers;if(l)for(let u in l){let h=l[u];h&&t(u).handlers.push(Vx(n.value,h))}if(o)for(let u in o){let h=o[u];h&&t(u).observers.push(Vx(n.value,h))}}for(let n in xi)t(n).handlers.push(xi[n]);for(let n in fi)t(n).observers.push(fi[n]);return e}const cA=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],IP="dthko",hA=[16,17,18,20,91,92,224,225],qh=6;function Uh(i){return Math.max(0,i)*.7+8}function FP(i,e){return Math.max(Math.abs(i.clientX-e.clientX),Math.abs(i.clientY-e.clientY))}class YP{constructor(e,t,n,r){this.view=e,this.startEvent=t,this.style=n,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=iP(e.contentDOM),this.atoms=e.state.facet(xO).map(o=>o(e));let l=e.contentDOM.ownerDocument;l.addEventListener("mousemove",this.move=this.move.bind(this)),l.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(qe.allowMultipleSelections)&&ZP(e,t),this.dragging=JP(e,t)&&pA(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&FP(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,n=0,r=0,l=0,o=this.view.win.innerWidth,u=this.view.win.innerHeight;this.scrollParents.x&&({left:r,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:l,bottom:u}=this.scrollParents.y.getBoundingClientRect());let h=wO(this.view);e.clientX-h.left<=r+qh?t=-Uh(r-e.clientX):e.clientX+h.right>=o-qh&&(t=Uh(e.clientX-o)),e.clientY-h.top<=l+qh?n=-Uh(l-e.clientY):e.clientY+h.bottom>=u-qh&&(n=Uh(e.clientY-u)),this.setScrollSpeed(t,n)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let n=0;n<e.ranges.length;n++){let r=e.ranges[n],l=null;if(r.empty){let o=Df(this.atoms,r.from,0);o!=r.from&&(l=re.cursor(o,-1))}else{let o=Df(this.atoms,r.from,-1),u=Df(this.atoms,r.to,1);(o!=r.from||u!=r.to)&&(l=re.range(r.from==r.anchor?o:u,r.from==r.head?o:u))}l&&(t||(t=e.ranges.slice()),t[n]=l)}return t?re.create(t,e.mainIndex):e}select(e){let{view:t}=this,n=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!n.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function ZP(i,e){let t=i.state.facet(WC);return t.length?t[0](e):Te.mac?e.metaKey:e.ctrlKey}function KP(i,e){let t=i.state.facet(IC);return t.length?t[0](e):Te.mac?!e.altKey:!e.ctrlKey}function JP(i,e){let{main:t}=i.state.selection;if(t.empty)return!1;let n=$u(i.root);if(!n||n.rangeCount==0)return!0;let r=n.getRangeAt(0).getClientRects();for(let l=0;l<r.length;l++){let o=r[l];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function eB(i,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,n;t!=i.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(n=mt.get(t))&&n.ignoreEvent(e))return!1;return!0}const xi=Object.create(null),fi=Object.create(null),fA=Te.ie&&Te.ie_version<15||Te.ios&&Te.webkit_version<604;function tB(i){let e=i.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{i.focus(),t.remove(),dA(i,t.value)},50)}function qd(i,e,t){for(let n of i.facet(e))t=n(t,i);return t}function dA(i,e){e=qd(i.state,bO,e);let{state:t}=i,n,r=1,l=t.toText(e),o=l.lines==t.selection.ranges.length;if(iy!=null&&t.selection.ranges.every(h=>h.empty)&&iy==l.toString()){let h=-1;n=t.changeByRange(d=>{let p=t.doc.lineAt(d.from);if(p.from==h)return{range:d};h=p.from;let g=t.toText((o?l.line(r++).text:e)+t.lineBreak);return{changes:{from:p.from,insert:g},range:re.cursor(d.from+g.length)}})}else o?n=t.changeByRange(h=>{let d=l.line(r++);return{changes:{from:h.from,to:h.to,insert:d.text},range:re.cursor(h.from+d.length)}}):n=t.replaceSelection(l);i.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}fi.scroll=i=>{i.inputState.lastScrollTop=i.scrollDOM.scrollTop,i.inputState.lastScrollLeft=i.scrollDOM.scrollLeft};xi.keydown=(i,e)=>(i.inputState.setSelectionOrigin("select"),e.keyCode==27&&i.inputState.tabFocusMode!=0&&(i.inputState.tabFocusMode=Date.now()+2e3),!1);fi.touchstart=(i,e)=>{i.inputState.lastTouchTime=Date.now(),i.inputState.setSelectionOrigin("select.pointer")};fi.touchmove=i=>{i.inputState.setSelectionOrigin("select.pointer")};xi.mousedown=(i,e)=>{if(i.observer.flush(),i.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let n of i.state.facet(FC))if(t=n(i,e),t)break;if(!t&&e.button==0&&(t=rB(i,e)),t){let n=!i.hasFocus;i.inputState.startMouseSelection(new YP(i,e,t,n)),n&&i.observer.ignore(()=>{EC(i.contentDOM);let l=i.root.activeElement;l&&!l.contains(i.contentDOM)&&l.blur()});let r=i.inputState.mouseSelection;if(r)return r.start(e),r.dragging===!1}return!1};function Xx(i,e,t,n){if(n==1)return re.cursor(e,t);if(n==2)return MP(i.state,e,t);{let r=_t.find(i.docView,e),l=i.state.doc.lineAt(r?r.posAtEnd:e),o=r?r.posAtStart:l.from,u=r?r.posAtEnd:l.to;return u<i.state.doc.length&&u==l.to&&u++,re.range(o,u)}}let Gx=(i,e,t)=>e>=t.top&&e<=t.bottom&&i>=t.left&&i<=t.right;function nB(i,e,t,n){let r=_t.find(i.docView,e);if(!r)return 1;let l=e-r.posAtStart;if(l==0)return 1;if(l==r.length)return-1;let o=r.coordsAt(l,-1);if(o&&Gx(t,n,o))return-1;let u=r.coordsAt(l,1);return u&&Gx(t,n,u)?1:o&&o.bottom>=n?-1:1}function Wx(i,e){let t=i.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:nB(i,t,e.clientX,e.clientY)}}const iB=Te.ie&&Te.ie_version<=11;let Ix=null,Fx=0,Yx=0;function pA(i){if(!iB)return i.detail;let e=Ix,t=Yx;return Ix=i,Yx=Date.now(),Fx=!e||t>Date.now()-400&&Math.abs(e.clientX-i.clientX)<2&&Math.abs(e.clientY-i.clientY)<2?(Fx+1)%3:1}function rB(i,e){let t=Wx(i,e),n=pA(e),r=i.state.selection;return{update(l){l.docChanged&&(t.pos=l.changes.mapPos(t.pos),r=r.map(l.changes))},get(l,o,u){let h=Wx(i,l),d,p=Xx(i,h.pos,h.bias,n);if(t.pos!=h.pos&&!o){let g=Xx(i,t.pos,t.bias,n),O=Math.min(g.from,p.from),b=Math.max(g.to,p.to);p=O<p.from?re.range(O,b):re.range(b,O)}return o?r.replaceRange(r.main.extend(p.from,p.to)):u&&n==1&&r.ranges.length>1&&(d=sB(r,h.pos))?d:u?r.addRange(p):re.create([p])}}}function sB(i,e){for(let t=0;t<i.ranges.length;t++){let{from:n,to:r}=i.ranges[t];if(n<=e&&r>=e)return re.create(i.ranges.slice(0,t).concat(i.ranges.slice(t+1)),i.mainIndex==t?0:i.mainIndex-(i.mainIndex>t?1:0))}return null}xi.dragstart=(i,e)=>{let{selection:{main:t}}=i.state;if(e.target.draggable){let r=i.docView.nearest(e.target);if(r&&r.isWidget){let l=r.posAtStart,o=l+r.length;(l>=t.to||o<=t.from)&&(t=re.range(l,o))}}let{inputState:n}=i;return n.mouseSelection&&(n.mouseSelection.dragging=!0),n.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",qd(i.state,vO,i.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};xi.dragend=i=>(i.inputState.draggedContent=null,!1);function Zx(i,e,t,n){if(t=qd(i.state,bO,t),!t)return;let r=i.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:l}=i.inputState,o=n&&l&&KP(i,e)?{from:l.from,to:l.to}:null,u={from:r,insert:t},h=i.state.changes(o?[o,u]:u);i.focus(),i.dispatch({changes:h,selection:{anchor:h.mapPos(r,-1),head:h.mapPos(r,1)},userEvent:o?"move.drop":"input.drop"}),i.inputState.draggedContent=null}xi.drop=(i,e)=>{if(!e.dataTransfer)return!1;if(i.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let n=Array(t.length),r=0,l=()=>{++r==t.length&&Zx(i,e,n.filter(o=>o!=null).join(i.state.lineBreak),!1)};for(let o=0;o<t.length;o++){let u=new FileReader;u.onerror=l,u.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(u.result)||(n[o]=u.result),l()},u.readAsText(t[o])}return!0}else{let n=e.dataTransfer.getData("Text");if(n)return Zx(i,e,n,!0),!0}return!1};xi.paste=(i,e)=>{if(i.state.readOnly)return!0;i.observer.flush();let t=fA?null:e.clipboardData;return t?(dA(i,t.getData("text/plain")||t.getData("text/uri-list")),!0):(tB(i),!1)};function lB(i,e){let t=i.dom.parentNode;if(!t)return;let n=t.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.value=e,n.focus(),n.selectionEnd=e.length,n.selectionStart=0,setTimeout(()=>{n.remove(),i.focus()},50)}function aB(i){let e=[],t=[],n=!1;for(let r of i.selection.ranges)r.empty||(e.push(i.sliceDoc(r.from,r.to)),t.push(r));if(!e.length){let r=-1;for(let{from:l}of i.selection.ranges){let o=i.doc.lineAt(l);o.number>r&&(e.push(o.text),t.push({from:o.from,to:Math.min(i.doc.length,o.to+1)})),r=o.number}n=!0}return{text:qd(i,vO,e.join(i.lineBreak)),ranges:t,linewise:n}}let iy=null;xi.copy=xi.cut=(i,e)=>{let{text:t,ranges:n,linewise:r}=aB(i.state);if(!t&&!r)return!1;iy=r?t:null,e.type=="cut"&&!i.state.readOnly&&i.dispatch({changes:n,scrollIntoView:!0,userEvent:"delete.cut"});let l=fA?null:e.clipboardData;return l?(l.clearData(),l.setData("text/plain",t),!0):(lB(i,t),!1)};const mA=ki.define();function gA(i,e){let t=[];for(let n of i.facet(KC)){let r=n(i,e);r&&t.push(r)}return t.length?i.update({effects:t,annotations:mA.of(!0)}):null}function yA(i){setTimeout(()=>{let e=i.hasFocus;if(e!=i.inputState.notifiedFocused){let t=gA(i.state,e);t?i.dispatch(t):i.update([])}},10)}fi.focus=i=>{i.inputState.lastFocusTime=Date.now(),!i.scrollDOM.scrollTop&&(i.inputState.lastScrollTop||i.inputState.lastScrollLeft)&&(i.scrollDOM.scrollTop=i.inputState.lastScrollTop,i.scrollDOM.scrollLeft=i.inputState.lastScrollLeft),yA(i)};fi.blur=i=>{i.observer.clearSelectionRange(),yA(i)};fi.compositionstart=fi.compositionupdate=i=>{i.observer.editContext||(i.inputState.compositionFirstChange==null&&(i.inputState.compositionFirstChange=!0),i.inputState.composing<0&&(i.inputState.composing=0))};fi.compositionend=i=>{i.observer.editContext||(i.inputState.composing=-1,i.inputState.compositionEndedAt=Date.now(),i.inputState.compositionPendingKey=!0,i.inputState.compositionPendingChange=i.observer.pendingRecords().length>0,i.inputState.compositionFirstChange=null,Te.chrome&&Te.android?i.observer.flushSoon():i.inputState.compositionPendingChange?Promise.resolve().then(()=>i.observer.flush()):setTimeout(()=>{i.inputState.composing<0&&i.docView.hasComposition&&i.update([])},50))};fi.contextmenu=i=>{i.inputState.lastContextMenu=Date.now()};xi.beforeinput=(i,e)=>{var t,n;if(e.inputType=="insertReplacementText"&&i.observer.editContext){let l=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),o=e.getTargetRanges();if(l&&o.length){let u=o[0],h=i.posAtDOM(u.startContainer,u.startOffset),d=i.posAtDOM(u.endContainer,u.endOffset);return kO(i,{from:h,to:d,insert:i.state.toText(l)},null),!0}}let r;if(Te.chrome&&Te.android&&(r=cA.find(l=>l.inputType==e.inputType))&&(i.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let l=((n=window.visualViewport)===null||n===void 0?void 0:n.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>l+10&&i.hasFocus&&(i.contentDOM.blur(),i.focus())},100)}return Te.ios&&e.inputType=="deleteContentForward"&&i.observer.flushSoon(),Te.safari&&e.inputType=="insertText"&&i.inputState.composing>=0&&setTimeout(()=>fi.compositionend(i,e),20),!1};const Kx=new Set;function oB(i){Kx.has(i)||(Kx.add(i),i.addEventListener("copy",()=>{}),i.addEventListener("cut",()=>{}))}const Jx=["pre-wrap","normal","pre-line","break-spaces"];let Ua=!1;function ew(){Ua=!1}class uB{constructor(e){this.lineWrapping=e,this.doc=Ze.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let n=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(n+=Math.max(0,Math.ceil((t-e-n*this.lineLength*.5)/this.lineLength))),this.lineHeight*n}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return Jx.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let n=0;n<e.length;n++){let r=e[n];r<0?n++:this.heightSamples[Math.floor(r*10)]||(t=!0,this.heightSamples[Math.floor(r*10)]=!0)}return t}refresh(e,t,n,r,l,o){let u=Jx.indexOf(e)>-1,h=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=u;if(this.lineWrapping=u,this.lineHeight=t,this.charWidth=n,this.textHeight=r,this.lineLength=l,h){this.heightSamples={};for(let d=0;d<o.length;d++){let p=o[d];p<0?d++:this.heightSamples[Math.floor(p*10)]=!0}}return h}}class cB{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class Zi{constructor(e,t,n,r,l){this.from=e,this.length=t,this.top=n,this.height=r,this._content=l}get type(){return typeof this._content=="number"?kn.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Ls?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Zi(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var bt=(function(i){return i[i.ByPos=0]="ByPos",i[i.ByHeight=1]="ByHeight",i[i.ByPosNoHeight=2]="ByPosNoHeight",i})(bt||(bt={}));const Qf=.001;class Tn{constructor(e,t,n=2){this.length=e,this.height=t,this.flags=n}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>Qf&&(Ua=!0),this.height=e)}replace(e,t,n){return Tn.of(n)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,n,r){let l=this,o=n.doc;for(let u=r.length-1;u>=0;u--){let{fromA:h,toA:d,fromB:p,toB:g}=r[u],O=l.lineAt(h,bt.ByPosNoHeight,n.setDoc(t),0,0),b=O.to>=d?O:l.lineAt(d,bt.ByPosNoHeight,n,0,0);for(g+=b.to-d,d=b.to;u>0&&O.from<=r[u-1].toA;)h=r[u-1].fromA,p=r[u-1].fromB,u--,h<O.from&&(O=l.lineAt(h,bt.ByPosNoHeight,n,0,0));p+=O.from-h,h=O.from;let v=TO.build(n.setDoc(o),e,p,g);l=rd(l,l.replace(h,d,v))}return l.updateHeight(n,0)}static empty(){return new In(0,0)}static of(e){if(e.length==1)return e[0];let t=0,n=e.length,r=0,l=0;for(;;)if(t==n)if(r>l*2){let u=e[t-1];u.break?e.splice(--t,1,u.left,null,u.right):e.splice(--t,1,u.left,u.right),n+=1+u.break,r-=u.size}else if(l>r*2){let u=e[n];u.break?e.splice(n,1,u.left,null,u.right):e.splice(n,1,u.left,u.right),n+=2+u.break,l-=u.size}else break;else if(r<l){let u=e[t++];u&&(r+=u.size)}else{let u=e[--n];u&&(l+=u.size)}let o=0;return e[t-1]==null?(o=1,t--):e[t]==null&&(o=1,n++),new hB(Tn.of(e.slice(0,t)),o,Tn.of(e.slice(n)))}}function rd(i,e){return i==e?i:(i.constructor!=e.constructor&&(Ua=!0),e)}Tn.prototype.size=1;class OA extends Tn{constructor(e,t,n){super(e,t),this.deco=n}blockAt(e,t,n,r){return new Zi(r,this.length,n,this.height,this.deco||0)}lineAt(e,t,n,r,l){return this.blockAt(0,n,r,l)}forEachLine(e,t,n,r,l,o){e<=l+this.length&&t>=l&&o(this.blockAt(0,n,r,l))}updateHeight(e,t=0,n=!1,r){return r&&r.from<=t&&r.more&&this.setHeight(r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class In extends OA{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,n,r){return new Zi(r,this.length,n,this.height,this.breaks)}replace(e,t,n){let r=n[0];return n.length==1&&(r instanceof In||r instanceof nn&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof nn?r=new In(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):Tn.of(n)}updateHeight(e,t=0,n=!1,r){return r&&r.from<=t&&r.more?this.setHeight(r.heights[r.index++]):(n||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class nn extends Tn{constructor(e){super(e,0)}heightMetrics(e,t){let n=e.doc.lineAt(t).number,r=e.doc.lineAt(t+this.length).number,l=r-n+1,o,u=0;if(e.lineWrapping){let h=Math.min(this.height,e.lineHeight*l);o=h/l,this.length>l+1&&(u=(this.height-h)/(this.length-l-1))}else o=this.height/l;return{firstLine:n,lastLine:r,perLine:o,perChar:u}}blockAt(e,t,n,r){let{firstLine:l,lastLine:o,perLine:u,perChar:h}=this.heightMetrics(t,r);if(t.lineWrapping){let d=r+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-n)/this.height))*this.length)),p=t.doc.lineAt(d),g=u+p.length*h,O=Math.max(n,e-g/2);return new Zi(p.from,p.length,O,g,0)}else{let d=Math.max(0,Math.min(o-l,Math.floor((e-n)/u))),{from:p,length:g}=t.doc.line(l+d);return new Zi(p,g,n+u*d,u,0)}}lineAt(e,t,n,r,l){if(t==bt.ByHeight)return this.blockAt(e,n,r,l);if(t==bt.ByPosNoHeight){let{from:b,to:v}=n.doc.lineAt(e);return new Zi(b,v-b,0,0,0)}let{firstLine:o,perLine:u,perChar:h}=this.heightMetrics(n,l),d=n.doc.lineAt(e),p=u+d.length*h,g=d.number-o,O=r+u*g+h*(d.from-l-g);return new Zi(d.from,d.length,Math.max(r,Math.min(O,r+this.height-p)),p,0)}forEachLine(e,t,n,r,l,o){e=Math.max(e,l),t=Math.min(t,l+this.length);let{firstLine:u,perLine:h,perChar:d}=this.heightMetrics(n,l);for(let p=e,g=r;p<=t;){let O=n.doc.lineAt(p);if(p==e){let v=O.number-u;g+=h*v+d*(e-l-v)}let b=h+d*O.length;o(new Zi(O.from,O.length,g,b,0)),g+=b,p=O.to+1}}replace(e,t,n){let r=this.length-t;if(r>0){let l=n[n.length-1];l instanceof nn?n[n.length-1]=new nn(l.length+r):n.push(null,new nn(r-1))}if(e>0){let l=n[0];l instanceof nn?n[0]=new nn(e+l.length):n.unshift(new nn(e-1),null)}return Tn.of(n)}decomposeLeft(e,t){t.push(new nn(e-1),null)}decomposeRight(e,t){t.push(null,new nn(this.length-e-1))}updateHeight(e,t=0,n=!1,r){let l=t+this.length;if(r&&r.from<=t+this.length&&r.more){let o=[],u=Math.max(t,r.from),h=-1;for(r.from>t&&o.push(new nn(r.from-t-1).updateHeight(e,t));u<=l&&r.more;){let p=e.doc.lineAt(u).length;o.length&&o.push(null);let g=r.heights[r.index++];h==-1?h=g:Math.abs(g-h)>=Qf&&(h=-2);let O=new In(p,g);O.outdated=!1,o.push(O),u+=p+1}u<=l&&o.push(null,new nn(l-u).updateHeight(e,u));let d=Tn.of(o);return(h<0||Math.abs(d.height-this.height)>=Qf||Math.abs(h-this.heightMetrics(e,t).perLine)>=Qf)&&(Ua=!0),rd(this,d)}else(n||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class hB extends Tn{constructor(e,t,n){super(e.length+t+n.length,e.height+n.height,t|(e.outdated||n.outdated?2:0)),this.left=e,this.right=n,this.size=e.size+n.size}get break(){return this.flags&1}blockAt(e,t,n,r){let l=n+this.left.height;return e<l?this.left.blockAt(e,t,n,r):this.right.blockAt(e,t,l,r+this.left.length+this.break)}lineAt(e,t,n,r,l){let o=r+this.left.height,u=l+this.left.length+this.break,h=t==bt.ByHeight?e<o:e<u,d=h?this.left.lineAt(e,t,n,r,l):this.right.lineAt(e,t,n,o,u);if(this.break||(h?d.to<u:d.from>u))return d;let p=t==bt.ByPosNoHeight?bt.ByPosNoHeight:bt.ByPos;return h?d.join(this.right.lineAt(u,p,n,o,u)):this.left.lineAt(u,p,n,r,l).join(d)}forEachLine(e,t,n,r,l,o){let u=r+this.left.height,h=l+this.left.length+this.break;if(this.break)e<h&&this.left.forEachLine(e,t,n,r,l,o),t>=h&&this.right.forEachLine(e,t,n,u,h,o);else{let d=this.lineAt(h,bt.ByPos,n,r,l);e<d.from&&this.left.forEachLine(e,d.from-1,n,r,l,o),d.to>=e&&d.from<=t&&o(d),t>d.to&&this.right.forEachLine(d.to+1,t,n,u,h,o)}}replace(e,t,n){let r=this.left.length+this.break;if(t<r)return this.balanced(this.left.replace(e,t,n),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,t-r,n));let l=[];e>0&&this.decomposeLeft(e,l);let o=l.length;for(let u of n)l.push(u);if(e>0&&tw(l,o-1),t<this.length){let u=l.length;this.decomposeRight(t,l),tw(l,u)}return Tn.of(l)}decomposeLeft(e,t){let n=this.left.length;if(e<=n)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(n++,e>=n&&t.push(null)),e>n&&this.right.decomposeLeft(e-n,t)}decomposeRight(e,t){let n=this.left.length,r=n+this.break;if(e>=r)return this.right.decomposeRight(e-r,t);e<n&&this.left.decomposeRight(e,t),this.break&&e<r&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Tn.of(this.break?[e,null,t]:[e,t]):(this.left=rd(this.left,e),this.right=rd(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,n=!1,r){let{left:l,right:o}=this,u=t+l.length+this.break,h=null;return r&&r.from<=t+l.length&&r.more?h=l=l.updateHeight(e,t,n,r):l.updateHeight(e,t,n),r&&r.from<=u+o.length&&r.more?h=o=o.updateHeight(e,u,n,r):o.updateHeight(e,u,n),h?this.balanced(l,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function tw(i,e){let t,n;i[e]==null&&(t=i[e-1])instanceof nn&&(n=i[e+1])instanceof nn&&i.splice(e-1,3,new nn(t.length+1+n.length))}const fB=5;class TO{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let n=Math.min(t,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof In?r.length+=n-this.pos:(n>this.pos||!this.isCovered)&&this.nodes.push(new In(n-this.pos,-1)),this.writtenTo=n,t>n&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,n){if(e<t||n.heightRelevant){let r=n.widget?n.widget.estimatedHeight:0,l=n.widget?n.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let o=t-e;n.block?this.addBlock(new OA(o,r,n)):(o||l||r>=fB)&&this.addLineDeco(r,l,o)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new In(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let n=new nn(t-e);return this.oracle.doc.lineAt(e).to==t&&(n.flags|=4),n}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof In)return e;let t=new In(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,n){let r=this.ensureLine();r.length+=n,r.collapsed+=n,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=t,this.writtenTo=this.pos=this.pos+n}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof In)&&!this.isCovered?this.nodes.push(new In(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let n=e;for(let r of this.nodes)r instanceof In&&r.updateHeight(this.oracle,n),n+=r?r.length:1;return this.nodes}static build(e,t,n,r){let l=new TO(n,e);return Je.spans(t,n,r,l,0),l.finish(n)}}function dB(i,e,t){let n=new pB;return Je.compare(i,e,t,n,0),n.changes}class pB{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,n,r){(e<t||n&&n.heightRelevant||r&&r.heightRelevant)&&Mf(e,t,this.changes,5)}}function mB(i,e){let t=i.getBoundingClientRect(),n=i.ownerDocument,r=n.defaultView||window,l=Math.max(0,t.left),o=Math.min(r.innerWidth,t.right),u=Math.max(0,t.top),h=Math.min(r.innerHeight,t.bottom);for(let d=i.parentNode;d&&d!=n.body;)if(d.nodeType==1){let p=d,g=window.getComputedStyle(p);if((p.scrollHeight>p.clientHeight||p.scrollWidth>p.clientWidth)&&g.overflow!="visible"){let O=p.getBoundingClientRect();l=Math.max(l,O.left),o=Math.min(o,O.right),u=Math.max(u,O.top),h=Math.min(d==i.parentNode?r.innerHeight:h,O.bottom)}d=g.position=="absolute"||g.position=="fixed"?p.offsetParent:p.parentNode}else if(d.nodeType==11)d=d.host;else break;return{left:l-t.left,right:Math.max(l,o)-t.left,top:u-(t.top+e),bottom:Math.max(u,h)-(t.top+e)}}function gB(i){let e=i.getBoundingClientRect(),t=i.ownerDocument.defaultView||window;return e.left<t.innerWidth&&e.right>0&&e.top<t.innerHeight&&e.bottom>0}function yB(i,e){let t=i.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class Eg{constructor(e,t,n,r){this.from=e,this.to=t,this.size=n,this.displaySize=r}static same(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++){let r=e[n],l=t[n];if(r.from!=l.from||r.to!=l.to||r.size!=l.size)return!1}return!0}draw(e,t){return Re.replace({widget:new OB(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class OB extends dr{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class nw{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=iw,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=st.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(SO).some(n=>typeof n!="function"&&n.class=="cm-lineWrapping");this.heightOracle=new uB(t),this.stateDeco=e.facet(Lu).filter(n=>typeof n!="function"),this.heightMap=Tn.empty().applyChanges(this.stateDeco,Ze.empty,this.heightOracle.setDoc(e.doc),[new hi(0,0,0,e.doc.length)]);for(let n=0;n<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());n++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Re.set(this.lineGaps.map(n=>n.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let n=0;n<=1;n++){let r=n?t.head:t.anchor;if(!e.some(({from:l,to:o})=>r>=l&&r<=o)){let{from:l,to:o}=this.lineBlockAt(r);e.push(new jh(l,o))}}return this.viewports=e.sort((n,r)=>n.from-r.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?iw:new CO(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(bu(e,this.scaler))})}update(e,t=null){this.state=e.state;let n=this.stateDeco;this.stateDeco=this.state.facet(Lu).filter(p=>typeof p!="function");let r=e.changedRanges,l=hi.extendWithRanges(r,dB(n,this.stateDeco,e?e.changes:Ht.empty(this.state.doc.length))),o=this.heightMap.height,u=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);ew(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),l),(this.heightMap.height!=o||Ua)&&(e.flags|=2),u?(this.scrollAnchorPos=e.changes.mapPos(u.from,-1),this.scrollAnchorHeight=u.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let h=l.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<h.from||t.range.head>h.to)||!this.viewportIsAppropriate(h))&&(h=this.getViewport(0,t));let d=h.from!=this.viewport.from||h.to!=this.viewport.to;this.viewport=h,e.flags|=this.updateForViewport(),(d||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(eA)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,n=window.getComputedStyle(t),r=this.heightOracle,l=n.whiteSpace;this.defaultTextDirection=n.direction=="rtl"?st.RTL:st.LTR;let o=this.heightOracle.mustRefreshForWrapping(l),u=t.getBoundingClientRect(),h=o||this.mustMeasureContent||this.contentDOMHeight!=u.height;this.contentDOMHeight=u.height,this.mustMeasureContent=!1;let d=0,p=0;if(u.width&&u.height){let{scaleX:_,scaleY:A}=AC(t,u);(_>.005&&Math.abs(this.scaleX-_)>.005||A>.005&&Math.abs(this.scaleY-A)>.005)&&(this.scaleX=_,this.scaleY=A,d|=16,o=h=!0)}let g=(parseInt(n.paddingTop)||0)*this.scaleY,O=(parseInt(n.paddingBottom)||0)*this.scaleY;(this.paddingTop!=g||this.paddingBottom!=O)&&(this.paddingTop=g,this.paddingBottom=O,d|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(h=!0),this.editorWidth=e.scrollDOM.clientWidth,d|=16);let b=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=b&&(this.scrollAnchorHeight=-1,this.scrollTop=b),this.scrolledToBottom=NC(e.scrollDOM);let v=(this.printing?yB:mB)(t,this.paddingTop),x=v.top-this.pixelViewport.top,w=v.bottom-this.pixelViewport.bottom;this.pixelViewport=v;let T=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(T!=this.inView&&(this.inView=T,T&&(h=!0)),!this.inView&&!this.scrollTarget&&!gB(e.dom))return 0;let E=u.width;if((this.contentDOMWidth!=E||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=u.width,this.editorHeight=e.scrollDOM.clientHeight,d|=16),h){let _=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(_)&&(o=!0),o||r.lineWrapping&&Math.abs(E-this.contentDOMWidth)>r.charWidth){let{lineHeight:A,charWidth:B,textHeight:C}=e.docView.measureTextSize();o=A>0&&r.refresh(l,A,B,C,Math.max(5,E/B),_),o&&(e.docView.minWidth=0,d|=16)}x>0&&w>0?p=Math.max(x,w):x<0&&w<0&&(p=Math.min(x,w)),ew();for(let A of this.viewports){let B=A.from==this.viewport.from?_:e.docView.measureVisibleLineHeights(A);this.heightMap=(o?Tn.empty().applyChanges(this.stateDeco,Ze.empty,this.heightOracle,[new hi(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,o,new cB(A.from,B))}Ua&&(d|=2)}let D=!this.viewportIsAppropriate(this.viewport,p)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return D&&(d&2&&(d|=this.updateScaler()),this.viewport=this.getViewport(p,this.scrollTarget),d|=this.updateForViewport()),(d&2||D)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),d|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),d}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let n=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,l=this.heightOracle,{visibleTop:o,visibleBottom:u}=this,h=new jh(r.lineAt(o-n*1e3,bt.ByHeight,l,0,0).from,r.lineAt(u+(1-n)*1e3,bt.ByHeight,l,0,0).to);if(t){let{head:d}=t.range;if(d<h.from||d>h.to){let p=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),g=r.lineAt(d,bt.ByPos,l,0,0),O;t.y=="center"?O=(g.top+g.bottom)/2-p/2:t.y=="start"||t.y=="nearest"&&d<h.from?O=g.top:O=g.bottom-p,h=new jh(r.lineAt(O-1e3/2,bt.ByHeight,l,0,0).from,r.lineAt(O+p+1e3/2,bt.ByHeight,l,0,0).to)}}return h}mapViewport(e,t){let n=t.mapPos(e.from,-1),r=t.mapPos(e.to,1);return new jh(this.heightMap.lineAt(n,bt.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,bt.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},n=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,bt.ByPos,this.heightOracle,0,0),{bottom:l}=this.heightMap.lineAt(t,bt.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:u}=this;return(e==0||r<=o-Math.max(10,Math.min(-n,250)))&&(t==this.state.doc.length||l>=u+Math.max(10,Math.min(n,250)))&&r>o-2*1e3&&l<u+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let n=[];for(let r of e)t.touchesRange(r.from,r.to)||n.push(new Eg(t.mapPos(r.from),t.mapPos(r.to),r.size,r.displaySize));return n}ensureLineGaps(e,t){let n=this.heightOracle.lineWrapping,r=n?1e4:2e3,l=r>>1,o=r<<1;if(this.defaultTextDirection!=st.LTR&&!n)return[];let u=[],h=(p,g,O,b)=>{if(g-p<l)return;let v=this.state.selection.main,x=[v.from];v.empty||x.push(v.to);for(let T of x)if(T>p&&T<g){h(p,T-10,O,b),h(T+10,g,O,b);return}let w=vB(e,T=>T.from>=O.from&&T.to<=O.to&&Math.abs(T.from-p)<l&&Math.abs(T.to-g)<l&&!x.some(E=>T.from<E&&T.to>E));if(!w){if(g<O.to&&t&&n&&t.visibleRanges.some(D=>D.from<=g&&D.to>=g)){let D=t.moveToLineBoundary(re.cursor(g),!1,!0).head;D>p&&(g=D)}let T=this.gapSize(O,p,g,b),E=n||T<2e6?T:2e6;w=new Eg(p,g,T,E)}u.push(w)},d=p=>{if(p.length<o||p.type!=kn.Text)return;let g=bB(p.from,p.to,this.stateDeco);if(g.total<o)return;let O=this.scrollTarget?this.scrollTarget.range.head:null,b,v;if(n){let x=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,w,T;if(O!=null){let E=Vh(g,O),D=((this.visibleBottom-this.visibleTop)/2+x)/p.height;w=E-D,T=E+D}else w=(this.visibleTop-p.top-x)/p.height,T=(this.visibleBottom-p.top+x)/p.height;b=Hh(g,w),v=Hh(g,T)}else{let x=g.total*this.heightOracle.charWidth,w=r*this.heightOracle.charWidth,T=0;if(x>2e6)for(let B of e)B.from>=p.from&&B.from<p.to&&B.size!=B.displaySize&&B.from*this.heightOracle.charWidth+T<this.pixelViewport.left&&(T=B.size-B.displaySize);let E=this.pixelViewport.left+T,D=this.pixelViewport.right+T,_,A;if(O!=null){let B=Vh(g,O),C=((D-E)/2+w)/x;_=B-C,A=B+C}else _=(E-w)/x,A=(D+w)/x;b=Hh(g,_),v=Hh(g,A)}b>p.from&&h(p.from,b,p,g),v<p.to&&h(v,p.to,p,g)};for(let p of this.viewportLines)Array.isArray(p.type)?p.type.forEach(d):d(p);return u}gapSize(e,t,n,r){let l=Vh(r,n)-Vh(r,t);return this.heightOracle.lineWrapping?e.height*l:r.total*this.heightOracle.charWidth*l}updateLineGaps(e){Eg.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Re.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let n=[];Je.spans(t,this.viewport.from,this.viewport.to,{span(l,o){n.push({from:l,to:o})},point(){}},20);let r=0;if(n.length!=this.visibleRanges.length)r=12;else for(let l=0;l<n.length&&!(r&8);l++){let o=this.visibleRanges[l],u=n[l];(o.from!=u.from||o.to!=u.to)&&(r|=4,e&&e.mapPos(o.from,-1)==u.from&&e.mapPos(o.to,1)==u.to||(r|=8))}return this.visibleRanges=n,r}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||bu(this.heightMap.lineAt(e,bt.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||bu(this.heightMap.lineAt(this.scaler.fromDOM(e),bt.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return bu(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class jh{constructor(e,t){this.from=e,this.to=t}}function bB(i,e,t){let n=[],r=i,l=0;return Je.spans(t,i,e,{span(){},point(o,u){o>r&&(n.push({from:r,to:o}),l+=o-r),r=u}},20),r<e&&(n.push({from:r,to:e}),l+=e-r),{total:l,ranges:n}}function Hh({total:i,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let n=Math.floor(i*t);for(let r=0;;r++){let{from:l,to:o}=e[r],u=o-l;if(n<=u)return l+n;n-=u}}function Vh(i,e){let t=0;for(let{from:n,to:r}of i.ranges){if(e<=r){t+=e-n;break}t+=r-n}return t/i.total}function vB(i,e){for(let t of i)if(e(t))return t}const iw={toDOM(i){return i},fromDOM(i){return i},scale:1,eq(i){return i==this}};class CO{constructor(e,t,n){let r=0,l=0,o=0;this.viewports=n.map(({from:u,to:h})=>{let d=t.lineAt(u,bt.ByPos,e,0,0).top,p=t.lineAt(h,bt.ByPos,e,0,0).bottom;return r+=p-d,{from:u,to:h,top:d,bottom:p,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(t.height-r);for(let u of this.viewports)u.domTop=o+(u.top-l)*this.scale,o=u.domBottom=u.domTop+(u.bottom-u.top),l=u.bottom}toDOM(e){for(let t=0,n=0,r=0;;t++){let l=t<this.viewports.length?this.viewports[t]:null;if(!l||e<l.top)return r+(e-n)*this.scale;if(e<=l.bottom)return l.domTop+(e-l.top);n=l.bottom,r=l.domBottom}}fromDOM(e){for(let t=0,n=0,r=0;;t++){let l=t<this.viewports.length?this.viewports[t]:null;if(!l||e<l.domTop)return n+(e-r)/this.scale;if(e<=l.domBottom)return l.top+(e-l.domTop);n=l.bottom,r=l.domBottom}}eq(e){return e instanceof CO?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,n)=>t.from==e.viewports[n].from&&t.to==e.viewports[n].to):!1}}function bu(i,e){if(e.scale==1)return i;let t=e.toDOM(i.top),n=e.toDOM(i.bottom);return new Zi(i.from,i.length,t,n-t,Array.isArray(i._content)?i._content.map(r=>bu(r,e)):i._content)}const Xh=xe.define({combine:i=>i.join(" ")}),ry=xe.define({combine:i=>i.indexOf(!0)>-1}),sy=ar.newName(),bA=ar.newName(),vA=ar.newName(),SA={"&light":"."+bA,"&dark":"."+vA};function ly(i,e,t){return new ar(e,{finish(n){return/&/.test(n)?n.replace(/&\w*/,r=>{if(r=="&")return i;if(!t||!t[r])throw new RangeError(`Unsupported selector: ${r}`);return t[r]}):i+" "+n}})}const SB=ly("."+sy,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},SA),xB={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Rg=Te.ie&&Te.ie_version<=11;class wB{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new rP,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let n of t)this.queue.push(n);(Te.ie&&Te.ie_version<=11||Te.ios&&e.composing)&&t.some(n=>n.type=="childList"&&n.removedNodes.length||n.type=="characterData"&&n.oldValue.length>n.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&Te.android&&e.constructor.EDIT_CONTEXT!==!1&&!(Te.chrome&&Te.chrome_version<126)&&(this.editContext=new TB(e),e.state.facet(Ur)&&(e.contentDOM.editContext=this.editContext.editContext)),Rg&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,n)=>t!=e[n]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,r=this.selectionRange;if(n.state.facet(Ur)?n.root.activeElement!=this.dom:!Nf(this.dom,r))return;let l=r.anchorNode&&n.docView.nearest(r.anchorNode);if(l&&l.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(Te.ie&&Te.ie_version<=11||Te.android&&Te.chrome)&&!n.state.selection.main.empty&&r.focusNode&&Ru(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=$u(e.root);if(!t)return!1;let n=Te.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&kB(this.view,t)||t;if(!n||this.selectionRange.eq(n))return!1;let r=Nf(this.dom,n);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&lP(this.dom,n)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(n),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let n=this.dom;n;)if(n.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==n?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(n),n=n.assignedSlot||n.parentNode;else if(n.nodeType==11)n=n.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);for(let n of this.scrollTargets=t)n.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,xB),Rg&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Rg&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var n;if(!this.delayedAndroidKey){let r=()=>{let l=this.delayedAndroidKey;l&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=l.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&l.force&&Da(this.dom,l.key,l.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((n=this.delayedAndroidKey)===null||n===void 0)&&n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,n=-1,r=!1;for(let l of e){let o=this.readMutation(l);o&&(o.typeOver&&(r=!0),t==-1?{from:t,to:n}=o:(t=Math.min(o.from,t),n=Math.max(o.to,n)))}return{from:t,to:n,typeOver:r}}readChange(){let{from:e,to:t,typeOver:n}=this.processRecords(),r=this.selectionChanged&&Nf(this.dom,this.selectionRange);if(e<0&&!r)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let l=new UP(this.view,e,t,n);return this.view.docView.domChanged={newSel:l.newSel?l.newSel.main:null},l}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let n=this.view.state,r=uA(this.view,t);return this.view.state==n&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),r}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let n=rw(t,e.previousSibling||e.target.previousSibling,-1),r=rw(t,e.nextSibling||e.target.nextSibling,1);return{from:n?t.posAfter(n):t.posAtStart,to:r?t.posBefore(r):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Ur)!=e.state.facet(Ur)&&(e.view.contentDOM.editContext=e.state.facet(Ur)?this.editContext.editContext:null))}destroy(){var e,t,n;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(n=this.resizeScroll)===null||n===void 0||n.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function rw(i,e,t){for(;e;){let n=mt.get(e);if(n&&n.parent==i)return n;let r=e.parentNode;e=r!=i.dom?r:t>0?e.nextSibling:e.previousSibling}return null}function sw(i,e){let t=e.startContainer,n=e.startOffset,r=e.endContainer,l=e.endOffset,o=i.docView.domAtPos(i.state.selection.main.anchor);return Ru(o.node,o.offset,r,l)&&([t,n,r,l]=[r,l,t,n]),{anchorNode:t,anchorOffset:n,focusNode:r,focusOffset:l}}function kB(i,e){if(e.getComposedRanges){let r=e.getComposedRanges(i.root)[0];if(r)return sw(i,r)}let t=null;function n(r){r.preventDefault(),r.stopImmediatePropagation(),t=r.getTargetRanges()[0]}return i.contentDOM.addEventListener("beforeinput",n,!0),i.dom.ownerDocument.execCommand("indent"),i.contentDOM.removeEventListener("beforeinput",n,!0),t?sw(i,t):null}class TB{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=n=>{let r=e.state.selection.main,{anchor:l,head:o}=r,u=this.toEditorPos(n.updateRangeStart),h=this.toEditorPos(n.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:n.updateRangeStart,editorBase:u,drifted:!1});let d={from:u,to:h,insert:Ze.of(n.text.split(`
`))};if(d.from==this.from&&l<this.from?d.from=l:d.to==this.to&&l>this.to&&(d.to=l),d.from==d.to&&!d.insert.length){let p=re.single(this.toEditorPos(n.selectionStart),this.toEditorPos(n.selectionEnd));p.main.eq(r)||e.dispatch({selection:p,userEvent:"select"});return}if((Te.mac||Te.android)&&d.from==o-1&&/^\. ?$/.test(n.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(d={from:u,to:h,insert:Ze.of([n.text.replace("."," ")])}),this.pendingContextChange=d,!e.state.readOnly){let p=this.to-this.from+(d.to-d.from+d.insert.length);kO(e,d,re.single(this.toEditorPos(n.selectionStart,p),this.toEditorPos(n.selectionEnd,p)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state))},this.handlers.characterboundsupdate=n=>{let r=[],l=null;for(let o=this.toEditorPos(n.rangeStart),u=this.toEditorPos(n.rangeEnd);o<u;o++){let h=e.coordsForChar(o);l=h&&new DOMRect(h.left,h.top,h.right-h.left,h.bottom-h.top)||l||new DOMRect,r.push(l)}t.updateCharacterBounds(n.rangeStart,r)},this.handlers.textformatupdate=n=>{let r=[];for(let l of n.getTextFormats()){let o=l.underlineStyle,u=l.underlineThickness;if(o!="None"&&u!="None"){let h=this.toEditorPos(l.rangeStart),d=this.toEditorPos(l.rangeEnd);if(h<d){let p=`text-decoration: underline ${o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${u=="Thin"?1:2}px`;r.push(Re.mark({attributes:{style:p}}).range(h,d))}}}e.dispatch({effects:nA.of(Re.set(r))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:n}=this.composing;this.composing=null,n&&this.reset(e.state)}};for(let n in this.handlers)t.addEventListener(n,this.handlers[n]);this.measureReq={read:n=>{this.editContext.updateControlBounds(n.contentDOM.getBoundingClientRect());let r=$u(n.root);r&&r.rangeCount&&this.editContext.updateSelectionBounds(r.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,n=!1,r=this.pendingContextChange;return e.changes.iterChanges((l,o,u,h,d)=>{if(n)return;let p=d.length-(o-l);if(r&&o>=r.to)if(r.from==l&&r.to==o&&r.insert.eq(d)){r=this.pendingContextChange=null,t+=p,this.to+=p;return}else r=null,this.revertPending(e.state);if(l+=t,o+=t,o<=this.from)this.from+=p,this.to+=p;else if(l<this.to){if(l<this.from||o>this.to||this.to-this.from+d.length>3e4){n=!0;return}this.editContext.updateText(this.toContextPos(l),this.toContextPos(o),d.toString()),this.to+=p}t+=p}),r&&!n&&this.revertPending(e.state),!n}update(e){let t=this.pendingContextChange,n=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(n.from,n.to)&&e.transactions.some(r=>!r.isUserEvent("input.type")&&r.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,n=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),r=this.toContextPos(t.head);(this.editContext.selectionStart!=n||this.editContext.selectionEnd!=r)&&this.editContext.updateSelection(n,r)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let n=this.composing;return n&&n.drifted?n.editorBase+(e-n.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class fe{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:n}=e;this.dispatchTransactions=e.dispatchTransactions||n&&(r=>r.forEach(l=>n(l,this)))||(r=>this.update(r)),this.dispatch=this.dispatch.bind(this),this._root=e.root||sP(e.parent)||document,this.viewState=new nw(e.state||qe.create(e)),e.scrollTo&&e.scrollTo.is(Lh)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Ea).map(r=>new Tg(r));for(let r of this.plugins)r.update(this);this.observer=new wB(this),this.inputState=new GP(this),this.inputState.ensureHandlers(this.plugins),this.docView=new _x(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=e.length==1&&e[0]instanceof $t?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,n=!1,r,l=this.state;for(let O of e){if(O.startState!=l)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");l=O.state}if(this.destroyed){this.viewState.state=l;return}let o=this.hasFocus,u=0,h=null;e.some(O=>O.annotation(mA))?(this.inputState.notifiedFocused=o,u=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,h=gA(l,o),h||(u=1));let d=this.observer.delayedAndroidKey,p=null;if(d?(this.observer.clearDelayedAndroidKey(),p=this.observer.readChange(),(p&&!this.state.doc.eq(l.doc)||!this.state.selection.eq(l.selection))&&(p=null)):this.observer.clear(),l.facet(qe.phrases)!=this.state.facet(qe.phrases))return this.setState(l);r=id.create(this,l,e),r.flags|=u;let g=this.viewState.scrollTarget;try{this.updateState=2;for(let O of e){if(g&&(g=g.map(O.changes)),O.scrollIntoView){let{main:b}=O.state.selection;g=new Qa(b.empty?b:re.cursor(b.head,b.head>b.anchor?-1:1))}for(let b of O.effects)b.is(Lh)&&(g=b.value.clip(this.state))}this.viewState.update(r,g),this.bidiCache=sd.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),t=this.docView.update(r),this.state.facet(yu)!=this.styleModules&&this.mountStyles(),n=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(O=>O.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(Xh)!=r.state.facet(Xh)&&(this.viewState.mustMeasureContent=!0),(t||n||g||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!r.empty)for(let O of this.state.facet(ey))try{O(r)}catch(b){On(this.state,b,"update listener")}(h||p)&&Promise.resolve().then(()=>{h&&this.state==h.startState&&this.dispatch(h),p&&!uA(this,p)&&d.force&&Da(this.contentDOM,d.key,d.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let n of this.plugins)n.destroy(this);this.viewState=new nw(e),this.plugins=e.facet(Ea).map(n=>new Tg(n)),this.pluginMap.clear();for(let n of this.plugins)n.update(this);this.docView.destroy(),this.docView=new _x(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(Ea),n=e.state.facet(Ea);if(t!=n){let r=[];for(let l of n){let o=t.indexOf(l);if(o<0)r.push(new Tg(l));else{let u=this.plugins[o];u.mustUpdate=e,r.push(u)}}for(let l of this.plugins)l.mustUpdate!=e&&l.destroy(this);this.plugins=r,this.pluginMap.clear()}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this);t!=n&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(n){On(this.state,n,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,n=this.scrollDOM,r=n.scrollTop*this.scaleY,{scrollAnchorPos:l,scrollAnchorHeight:o}=this.viewState;Math.abs(r-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let u=0;;u++){if(o<0)if(NC(n))l=-1,o=this.viewState.heightMap.height;else{let b=this.viewState.scrollAnchorAt(r);l=b.from,o=b.top}this.updateState=1;let h=this.viewState.measure(this);if(!h&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(u>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let d=[];h&4||([this.measureRequests,d]=[d,this.measureRequests]);let p=d.map(b=>{try{return b.read(this)}catch(v){return On(this.state,v),lw}}),g=id.create(this,this.state,[]),O=!1;g.flags|=h,t?t.flags|=h:t=g,this.updateState=2,g.empty||(this.updatePlugins(g),this.inputState.update(g),this.updateAttrs(),O=this.docView.update(g),O&&this.docViewUpdate());for(let b=0;b<d.length;b++)if(p[b]!=lw)try{let v=d[b];v.write&&v.write(p[b],this)}catch(v){On(this.state,v)}if(O&&this.docView.updateSelection(!0),!g.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let v=(l<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(l).top)-o;if(v>1||v<-1){r=r+v,n.scrollTop=r/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let u of this.state.facet(ey))u(t)}get themeClasses(){return sy+" "+(this.state.facet(ry)?vA:bA)+" "+this.state.facet(Xh)}updateAttrs(){let e=aw(this,iA,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(Ur)?"true":"false",class:"cm-content",style:`${Te.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),aw(this,SO,t);let n=this.observer.ignore(()=>{let r=F0(this.contentDOM,this.contentAttrs,t),l=F0(this.dom,this.editorAttrs,e);return r||l});return this.editorAttrs=e,this.contentAttrs=t,n}showAnnouncements(e){let t=!0;for(let n of e)for(let r of n.effects)if(r.is(fe.announce)){t&&(this.announceDOM.textContent=""),t=!1;let l=this.announceDOM.appendChild(document.createElement("div"));l.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(yu);let e=this.state.facet(fe.cspNonce);ar.mount(this.root,this.styleModules.concat(SB).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.plugin!=e)&&this.pluginMap.set(e,t=this.plugins.find(n=>n.plugin==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,n){return Ag(this,e,jx(this,e,t,n))}moveByGroup(e,t){return Ag(this,e,jx(this,e,t,n=>_P(this,e.head,n)))}visualLineSide(e,t){let n=this.bidiSpans(e),r=this.textDirectionAt(e.from),l=n[t?n.length-1:0];return re.cursor(l.side(t,r)+e.from,l.forward(!t,r)?1:-1)}moveToLineBoundary(e,t,n=!0){return BP(this,e,t,n)}moveVertically(e,t,n){return Ag(this,e,$P(this,e,t,n))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),oA(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let n=this.docView.coordsAt(e,t);if(!n||n.left==n.right)return n;let r=this.state.doc.lineAt(e),l=this.bidiSpans(r),o=l[Ps.find(l,e-r.from,-1,t)];return hc(n,o.dir==st.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(JC)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>CB)return XC(e.length);let t=this.textDirectionAt(e.from),n;for(let l of this.bidiCache)if(l.from==e.from&&l.dir==t&&(l.fresh||VC(l.isolates,n=Bx(this,e))))return l.order;n||(n=Bx(this,e));let r=vP(e.text,t,n);return this.bidiCache.push(new sd(e.from,e.to,t,n,!0,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Te.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{EC(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return Lh.of(new Qa(typeof e=="number"?re.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,n=this.viewState.scrollAnchorAt(e);return Lh.of(new Qa(re.cursor(n.from),"start","start",n.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return wt.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return wt.define(()=>({}),{eventObservers:e})}static theme(e,t){let n=ar.newName(),r=[Xh.of(n),yu.of(ly(`.${n}`,e))];return t&&t.dark&&r.push(ry.of(!0)),r}static baseTheme(e){return Fr.lowest(yu.of(ly("."+sy,e,SA)))}static findFromDOM(e){var t;let n=e.querySelector(".cm-content"),r=n&&mt.get(n)||mt.get(e);return((t=r?.rootView)===null||t===void 0?void 0:t.view)||null}}fe.styleModule=yu;fe.inputHandler=ZC;fe.clipboardInputFilter=bO;fe.clipboardOutputFilter=vO;fe.scrollHandler=tA;fe.focusChangeEffect=KC;fe.perLineTextDirection=JC;fe.exceptionSink=YC;fe.updateListener=ey;fe.editable=Ur;fe.mouseSelectionStyle=FC;fe.dragMovesSelection=IC;fe.clickAddsSelectionRange=WC;fe.decorations=Lu;fe.outerDecorations=rA;fe.atomicRanges=xO;fe.bidiIsolatedRanges=sA;fe.scrollMargins=lA;fe.darkTheme=ry;fe.cspNonce=xe.define({combine:i=>i.length?i[0]:""});fe.contentAttributes=SO;fe.editorAttributes=iA;fe.lineWrapping=fe.contentAttributes.of({class:"cm-lineWrapping"});fe.announce=Be.define();const CB=4096,lw={};class sd{constructor(e,t,n,r,l,o){this.from=e,this.to=t,this.dir=n,this.isolates=r,this.fresh=l,this.order=o}static update(e,t){if(t.empty&&!e.some(l=>l.fresh))return e;let n=[],r=e.length?e[e.length-1].dir:st.LTR;for(let l=Math.max(0,e.length-10);l<e.length;l++){let o=e[l];o.dir==r&&!t.touchesRange(o.from,o.to)&&n.push(new sd(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return n}}function aw(i,e,t){for(let n=i.state.facet(e),r=n.length-1;r>=0;r--){let l=n[r],o=typeof l=="function"?l(i):l;o&&I0(o,t)}return t}const AB=Te.mac?"mac":Te.windows?"win":Te.linux?"linux":"key";function EB(i,e){const t=i.split(/-(?!$)/);let n=t[t.length-1];n=="Space"&&(n=" ");let r,l,o,u;for(let h=0;h<t.length-1;++h){const d=t[h];if(/^(cmd|meta|m)$/i.test(d))u=!0;else if(/^a(lt)?$/i.test(d))r=!0;else if(/^(c|ctrl|control)$/i.test(d))l=!0;else if(/^s(hift)?$/i.test(d))o=!0;else if(/^mod$/i.test(d))e=="mac"?u=!0:l=!0;else throw new Error("Unrecognized modifier name: "+d)}return r&&(n="Alt-"+n),l&&(n="Ctrl-"+n),u&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function Gh(i,e,t){return e.altKey&&(i="Alt-"+i),e.ctrlKey&&(i="Ctrl-"+i),e.metaKey&&(i="Meta-"+i),t!==!1&&e.shiftKey&&(i="Shift-"+i),i}const RB=Fr.default(fe.domEventHandlers({keydown(i,e){return wA(xA(e.state),i,e,"editor")}})),pc=xe.define({enables:RB}),ow=new WeakMap;function xA(i){let e=i.facet(pc),t=ow.get(e);return t||ow.set(e,t=DB(e.reduce((n,r)=>n.concat(r),[]))),t}function NB(i,e,t){return wA(xA(i.state),e,i,t)}let Ds=null;const MB=4e3;function DB(i,e=AB){let t=Object.create(null),n=Object.create(null),r=(o,u)=>{let h=n[o];if(h==null)n[o]=u;else if(h!=u)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},l=(o,u,h,d,p)=>{var g,O;let b=t[o]||(t[o]=Object.create(null)),v=u.split(/ (?!$)/).map(T=>EB(T,e));for(let T=1;T<v.length;T++){let E=v.slice(0,T).join(" ");r(E,!0),b[E]||(b[E]={preventDefault:!0,stopPropagation:!1,run:[D=>{let _=Ds={view:D,prefix:E,scope:o};return setTimeout(()=>{Ds==_&&(Ds=null)},MB),!0}]})}let x=v.join(" ");r(x,!1);let w=b[x]||(b[x]={preventDefault:!1,stopPropagation:!1,run:((O=(g=b._any)===null||g===void 0?void 0:g.run)===null||O===void 0?void 0:O.slice())||[]});h&&w.run.push(h),d&&(w.preventDefault=!0),p&&(w.stopPropagation=!0)};for(let o of i){let u=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let d of u){let p=t[d]||(t[d]=Object.create(null));p._any||(p._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:g}=o;for(let O in p)p[O].run.push(b=>g(b,ay))}let h=o[e]||o.key;if(h)for(let d of u)l(d,h,o.run,o.preventDefault,o.stopPropagation),o.shift&&l(d,"Shift-"+h,o.shift,o.preventDefault,o.stopPropagation)}return t}let ay=null;function wA(i,e,t,n){ay=e;let r=eP(e),l=Mn(r,0),o=Yi(l)==r.length&&r!=" ",u="",h=!1,d=!1,p=!1;Ds&&Ds.view==t&&Ds.scope==n&&(u=Ds.prefix+" ",hA.indexOf(e.keyCode)<0&&(d=!0,Ds=null));let g=new Set,O=w=>{if(w){for(let T of w.run)if(!g.has(T)&&(g.add(T),T(t)))return w.stopPropagation&&(p=!0),!0;w.preventDefault&&(w.stopPropagation&&(p=!0),d=!0)}return!1},b=i[n],v,x;return b&&(O(b[u+Gh(r,e,!o)])?h=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Te.windows&&e.ctrlKey&&e.altKey)&&!(Te.mac&&e.altKey&&!e.ctrlKey)&&(v=$s[e.keyCode])&&v!=r?(O(b[u+Gh(v,e,!0)])||e.shiftKey&&(x=_u[e.keyCode])!=r&&x!=v&&O(b[u+Gh(x,e,!1)]))&&(h=!0):o&&e.shiftKey&&O(b[u+Gh(r,e,!0)])&&(h=!0),!h&&O(b._any)&&(h=!0)),d&&(h=!0),h&&p&&e.stopPropagation(),ay=null,h}class mc{constructor(e,t,n,r,l){this.className=e,this.left=t,this.top=n,this.width=r,this.height=l}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,n){if(n.empty){let r=e.coordsAtPos(n.head,n.assoc||1);if(!r)return[];let l=kA(e);return[new mc(t,r.left-l.left,r.top-l.top,null,r.bottom-r.top)]}else return QB(e,t,n)}}function kA(i){let e=i.scrollDOM.getBoundingClientRect();return{left:(i.textDirection==st.LTR?e.left:e.right-i.scrollDOM.clientWidth*i.scaleX)-i.scrollDOM.scrollLeft*i.scaleX,top:e.top-i.scrollDOM.scrollTop*i.scaleY}}function uw(i,e,t,n){let r=i.coordsAtPos(e,t*2);if(!r)return n;let l=i.dom.getBoundingClientRect(),o=(r.top+r.bottom)/2,u=i.posAtCoords({x:l.left+1,y:o}),h=i.posAtCoords({x:l.right-1,y:o});return u==null||h==null?n:{from:Math.max(n.from,Math.min(u,h)),to:Math.min(n.to,Math.max(u,h))}}function QB(i,e,t){if(t.to<=i.viewport.from||t.from>=i.viewport.to)return[];let n=Math.max(t.from,i.viewport.from),r=Math.min(t.to,i.viewport.to),l=i.textDirection==st.LTR,o=i.contentDOM,u=o.getBoundingClientRect(),h=kA(i),d=o.querySelector(".cm-line"),p=d&&window.getComputedStyle(d),g=u.left+(p?parseInt(p.paddingLeft)+Math.min(0,parseInt(p.textIndent)):0),O=u.right-(p?parseInt(p.paddingRight):0),b=ny(i,n,1),v=ny(i,r,-1),x=b.type==kn.Text?b:null,w=v.type==kn.Text?v:null;if(x&&(i.lineWrapping||b.widgetLineBreaks)&&(x=uw(i,n,1,x)),w&&(i.lineWrapping||v.widgetLineBreaks)&&(w=uw(i,r,-1,w)),x&&w&&x.from==w.from&&x.to==w.to)return E(D(t.from,t.to,x));{let A=x?D(t.from,null,x):_(b,!1),B=w?D(null,t.to,w):_(v,!0),C=[];return(x||b).to<(w||v).from-(x&&w?1:0)||b.widgetLineBreaks>1&&A.bottom+i.defaultLineHeight/2<B.top?C.push(T(g,A.bottom,O,B.top)):A.bottom<B.top&&i.elementAtHeight((A.bottom+B.top)/2).type==kn.Text&&(A.bottom=B.top=(A.bottom+B.top)/2),E(A).concat(C).concat(E(B))}function T(A,B,C,U){return new mc(e,A-h.left,B-h.top,C-A,U-B)}function E({top:A,bottom:B,horizontal:C}){let U=[];for(let $=0;$<C.length;$+=2)U.push(T(C[$],A,C[$+1],B));return U}function D(A,B,C){let U=1e9,$=-1e9,K=[];function L(te,ae,j,se,de){let pe=i.coordsAtPos(te,te==C.to?-2:2),R=i.coordsAtPos(j,j==C.from?2:-2);!pe||!R||(U=Math.min(pe.top,R.top,U),$=Math.max(pe.bottom,R.bottom,$),de==st.LTR?K.push(l&&ae?g:pe.left,l&&se?O:R.right):K.push(!l&&se?g:R.left,!l&&ae?O:pe.right))}let Q=A??C.from,Y=B??C.to;for(let te of i.visibleRanges)if(te.to>Q&&te.from<Y)for(let ae=Math.max(te.from,Q),j=Math.min(te.to,Y);;){let se=i.state.doc.lineAt(ae);for(let de of i.bidiSpans(se)){let pe=de.from+se.from,R=de.to+se.from;if(pe>=j)break;R>ae&&L(Math.max(pe,ae),A==null&&pe<=Q,Math.min(R,j),B==null&&R>=Y,de.dir)}if(ae=se.to+1,ae>=j)break}return K.length==0&&L(Q,A==null,Y,B==null,i.textDirection),{top:U,bottom:$,horizontal:K}}function _(A,B){let C=u.top+(B?A.top:A.bottom);return{top:C,bottom:C,horizontal:[]}}}function zB(i,e){return i.constructor==e.constructor&&i.eq(e)}class PB{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(zf)!=e.state.facet(zf)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,n=e.facet(zf);for(;t<n.length&&n[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,n)=>!zB(t,this.drawn[n]))){let t=this.dom.firstChild,n=0;for(let r of e)r.update&&t&&r.constructor&&this.drawn[n].constructor&&r.update(t,this.drawn[n])?(t=t.nextSibling,n++):this.dom.insertBefore(r.draw(),t);for(;t;){let r=t.nextSibling;t.remove(),t=r}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const zf=xe.define();function TA(i){return[wt.define(e=>new PB(e,i)),zf.of(i)]}const qu=xe.define({combine(i){return fr(i,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function BB(i={}){return[qu.of(i),_B,$B,LB,eA.of(!0)]}function CA(i){return i.startState.facet(qu)!=i.state.facet(qu)}const _B=TA({above:!0,markers(i){let{state:e}=i,t=e.facet(qu),n=[];for(let r of e.selection.ranges){let l=r==e.selection.main;if(r.empty||t.drawRangeCursor){let o=l?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",u=r.empty?r:re.cursor(r.head,r.head>r.anchor?-1:1);for(let h of mc.forRange(i,o,u))n.push(h)}}return n},update(i,e){i.transactions.some(n=>n.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=CA(i);return t&&cw(i.state,e),i.docChanged||i.selectionSet||t},mount(i,e){cw(e.state,i)},class:"cm-cursorLayer"});function cw(i,e){e.style.animationDuration=i.facet(qu).cursorBlinkRate+"ms"}const $B=TA({above:!1,markers(i){return i.state.selection.ranges.map(e=>e.empty?[]:mc.forRange(i,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(i,e){return i.docChanged||i.selectionSet||i.viewportChanged||CA(i)},class:"cm-selectionLayer"}),LB=Fr.highest(fe.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),AA=Be.define({map(i,e){return i==null?null:e.mapPos(i)}}),vu=Lt.define({create(){return null},update(i,e){return i!=null&&(i=e.changes.mapPos(i)),e.effects.reduce((t,n)=>n.is(AA)?n.value:t,i)}}),qB=wt.fromClass(class{constructor(i){this.view=i,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(i){var e;let t=i.state.field(vu);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(i.startState.field(vu)!=t||i.docChanged||i.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:i}=this,e=i.state.field(vu),t=e!=null&&i.coordsAtPos(e);if(!t)return null;let n=i.scrollDOM.getBoundingClientRect();return{left:t.left-n.left+i.scrollDOM.scrollLeft*i.scaleX,top:t.top-n.top+i.scrollDOM.scrollTop*i.scaleY,height:t.bottom-t.top}}drawCursor(i){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;i?(this.cursor.style.left=i.left/e+"px",this.cursor.style.top=i.top/t+"px",this.cursor.style.height=i.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(i){this.view.state.field(vu)!=i&&this.view.dispatch({effects:AA.of(i)})}},{eventObservers:{dragover(i){this.setDropPos(this.view.posAtCoords({x:i.clientX,y:i.clientY}))},dragleave(i){(i.target==this.view.contentDOM||!this.view.contentDOM.contains(i.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function UB(){return[vu,qB]}function hw(i,e,t,n,r){e.lastIndex=0;for(let l=i.iterRange(t,n),o=t,u;!l.next().done;o+=l.value.length)if(!l.lineBreak)for(;u=e.exec(l.value);)r(o+u.index,u)}function jB(i,e){let t=i.visibleRanges;if(t.length==1&&t[0].from==i.viewport.from&&t[0].to==i.viewport.to)return t;let n=[];for(let{from:r,to:l}of t)r=Math.max(i.state.doc.lineAt(r).from,r-e),l=Math.min(i.state.doc.lineAt(l).to,l+e),n.length&&n[n.length-1].to>=r?n[n.length-1].to=l:n.push({from:r,to:l});return n}class HB{constructor(e){const{regexp:t,decoration:n,decorate:r,boundary:l,maxLength:o=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,r)this.addMatch=(u,h,d,p)=>r(p,d,d+u[0].length,u,h);else if(typeof n=="function")this.addMatch=(u,h,d,p)=>{let g=n(u,h,d);g&&p(d,d+u[0].length,g)};else if(n)this.addMatch=(u,h,d,p)=>p(d,d+u[0].length,n);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=l,this.maxLength=o}createDeco(e){let t=new lr,n=t.add.bind(t);for(let{from:r,to:l}of jB(e,this.maxLength))hw(e.state.doc,this.regexp,r,l,(o,u)=>this.addMatch(u,e,o,n));return t.finish()}updateDeco(e,t){let n=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((l,o,u,h)=>{h>=e.view.viewport.from&&u<=e.view.viewport.to&&(n=Math.min(u,n),r=Math.max(h,r))}),e.viewportMoved||r-n>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,t.map(e.changes),n,r):t}updateRange(e,t,n,r){for(let l of e.visibleRanges){let o=Math.max(l.from,n),u=Math.min(l.to,r);if(u>=o){let h=e.state.doc.lineAt(o),d=h.to<u?e.state.doc.lineAt(u):h,p=Math.max(l.from,h.from),g=Math.min(l.to,d.to);if(this.boundary){for(;o>h.from;o--)if(this.boundary.test(h.text[o-1-h.from])){p=o;break}for(;u<d.to;u++)if(this.boundary.test(d.text[u-d.from])){g=u;break}}let O=[],b,v=(x,w,T)=>O.push(T.range(x,w));if(h==d)for(this.regexp.lastIndex=p-h.from;(b=this.regexp.exec(h.text))&&b.index<g-h.from;)this.addMatch(b,e,b.index+h.from,v);else hw(e.state.doc,this.regexp,p,g,(x,w)=>this.addMatch(w,e,x,v));t=t.update({filterFrom:p,filterTo:g,filter:(x,w)=>x<p||w>g,add:O})}}return t}}const oy=/x/.unicode!=null?"gu":"g",VB=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,oy),XB={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Ng=null;function GB(){var i;if(Ng==null&&typeof document<"u"&&document.body){let e=document.body.style;Ng=((i=e.tabSize)!==null&&i!==void 0?i:e.MozTabSize)!=null}return Ng||!1}const Pf=xe.define({combine(i){let e=fr(i,{render:null,specialChars:VB,addSpecialChars:null});return(e.replaceTabs=!GB())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,oy)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,oy)),e}});function WB(i={}){return[Pf.of(i),IB()]}let fw=null;function IB(){return fw||(fw=wt.fromClass(class{constructor(i){this.view=i,this.decorations=Re.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(i.state.facet(Pf)),this.decorations=this.decorator.createDeco(i)}makeDecorator(i){return new HB({regexp:i.specialChars,decoration:(e,t,n)=>{let{doc:r}=t.state,l=Mn(e[0],0);if(l==9){let o=r.lineAt(n),u=t.state.tabSize,h=Ql(o.text,u,n-o.from);return Re.replace({widget:new KB((u-h%u)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[l]||(this.decorationCache[l]=Re.replace({widget:new ZB(i,l)}))},boundary:i.replaceTabs?void 0:/[^]/})}update(i){let e=i.state.facet(Pf);i.startState.facet(Pf)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(i.view)):this.decorations=this.decorator.updateDeco(i,this.decorations)}},{decorations:i=>i.decorations}))}const FB="";function YB(i){return i>=32?FB:i==10?"":String.fromCharCode(9216+i)}class ZB extends dr{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=YB(this.code),n=e.state.phrase("Control character")+" "+(XB[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,n,t);if(r)return r;let l=document.createElement("span");return l.textContent=t,l.title=n,l.setAttribute("aria-label",n),l.className="cm-specialChar",l}ignoreEvent(){return!1}}class KB extends dr{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function JB(){return t3}const e3=Re.line({class:"cm-activeLine"}),t3=wt.fromClass(class{constructor(i){this.decorations=this.getDeco(i)}update(i){(i.docChanged||i.selectionSet)&&(this.decorations=this.getDeco(i.view))}getDeco(i){let e=-1,t=[];for(let n of i.state.selection.ranges){let r=i.lineBlockAt(n.head);r.from>e&&(t.push(e3.range(r.from)),e=r.from)}return Re.set(t)}},{decorations:i=>i.decorations});class n3 extends dr{constructor(e){super(),this.content=e}toDOM(e){let t=document.createElement("span");return t.className="cm-placeholder",t.style.pointerEvents="none",t.appendChild(typeof this.content=="string"?document.createTextNode(this.content):typeof this.content=="function"?this.content(e):this.content.cloneNode(!0)),t.setAttribute("aria-hidden","true"),t}coordsAt(e){let t=e.firstChild?$a(e.firstChild):[];if(!t.length)return null;let n=window.getComputedStyle(e.parentNode),r=hc(t[0],n.direction!="rtl"),l=parseInt(n.lineHeight);return r.bottom-r.top>l*1.5?{left:r.left,right:r.right,top:r.top,bottom:r.top+l}:r}ignoreEvent(){return!1}}function i3(i){let e=wt.fromClass(class{constructor(t){this.view=t,this.placeholder=i?Re.set([Re.widget({widget:new n3(i),side:1}).range(0)]):Re.none}get decorations(){return this.view.state.doc.length?Re.none:this.placeholder}},{decorations:t=>t.decorations});return typeof i=="string"?[e,fe.contentAttributes.of({"aria-placeholder":i})]:e}const uy=2e3;function r3(i,e,t){let n=Math.min(e.line,t.line),r=Math.max(e.line,t.line),l=[];if(e.off>uy||t.off>uy||e.col<0||t.col<0){let o=Math.min(e.off,t.off),u=Math.max(e.off,t.off);for(let h=n;h<=r;h++){let d=i.doc.line(h);d.length<=u&&l.push(re.range(d.from+o,d.to+u))}}else{let o=Math.min(e.col,t.col),u=Math.max(e.col,t.col);for(let h=n;h<=r;h++){let d=i.doc.line(h),p=U0(d.text,o,i.tabSize,!0);if(p<0)l.push(re.cursor(d.to));else{let g=U0(d.text,u,i.tabSize);l.push(re.range(d.from+p,d.from+g))}}}return l}function s3(i,e){let t=i.coordsAtPos(i.viewport.from);return t?Math.round(Math.abs((t.left-e)/i.defaultCharacterWidth)):-1}function dw(i,e){let t=i.posAtCoords({x:e.clientX,y:e.clientY},!1),n=i.state.doc.lineAt(t),r=t-n.from,l=r>uy?-1:r==n.length?s3(i,e.clientX):Ql(n.text,i.state.tabSize,t-n.from);return{line:n.number,col:l,off:r}}function l3(i,e){let t=dw(i,e),n=i.state.selection;return t?{update(r){if(r.docChanged){let l=r.changes.mapPos(r.startState.doc.line(t.line).from),o=r.state.doc.lineAt(l);t={line:o.number,col:t.col,off:Math.min(t.off,o.length)},n=n.map(r.changes)}},get(r,l,o){let u=dw(i,r);if(!u)return n;let h=r3(i.state,t,u);return h.length?o?re.create(h.concat(n.ranges)):re.create(h):n}}:null}function a3(i){let e=(t=>t.altKey&&t.button==0);return fe.mouseSelectionStyle.of((t,n)=>e(n)?l3(t,n):null)}const o3={Alt:[18,i=>!!i.altKey],Control:[17,i=>!!i.ctrlKey],Shift:[16,i=>!!i.shiftKey],Meta:[91,i=>!!i.metaKey]},u3={style:"cursor: crosshair"};function c3(i={}){let[e,t]=o3[i.key||"Alt"],n=wt.fromClass(class{constructor(r){this.view=r,this.isDown=!1}set(r){this.isDown!=r&&(this.isDown=r,this.view.update([]))}},{eventObservers:{keydown(r){this.set(r.keyCode==e||t(r))},keyup(r){(r.keyCode==e||!t(r))&&this.set(!1)},mousemove(r){this.set(t(r))}}});return[n,fe.contentAttributes.of(r=>{var l;return!((l=r.plugin(n))===null||l===void 0)&&l.isDown?u3:null})]}const au="-10000px";class EA{constructor(e,t,n,r){this.facet=t,this.createTooltipView=n,this.removeTooltipView=r,this.input=e.state.facet(t),this.tooltips=this.input.filter(o=>o);let l=null;this.tooltipViews=this.tooltips.map(o=>l=n(o,l))}update(e,t){var n;let r=e.state.facet(this.facet),l=r.filter(h=>h);if(r===this.input){for(let h of this.tooltipViews)h.update&&h.update(e);return!1}let o=[],u=t?[]:null;for(let h=0;h<l.length;h++){let d=l[h],p=-1;if(d){for(let g=0;g<this.tooltips.length;g++){let O=this.tooltips[g];O&&O.create==d.create&&(p=g)}if(p<0)o[h]=this.createTooltipView(d,h?o[h-1]:null),u&&(u[h]=!!d.above);else{let g=o[h]=this.tooltipViews[p];u&&(u[h]=t[p]),g.update&&g.update(e)}}}for(let h of this.tooltipViews)o.indexOf(h)<0&&(this.removeTooltipView(h),(n=h.destroy)===null||n===void 0||n.call(h));return t&&(u.forEach((h,d)=>t[d]=h),t.length=u.length),this.input=r,this.tooltips=l,this.tooltipViews=o,!0}}function h3(i){let e=i.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const Mg=xe.define({combine:i=>{var e,t,n;return{position:Te.ios?"absolute":((e=i.find(r=>r.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=i.find(r=>r.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((n=i.find(r=>r.tooltipSpace))===null||n===void 0?void 0:n.tooltipSpace)||h3}}}),pw=new WeakMap,AO=wt.fromClass(class{constructor(i){this.view=i,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=i.state.facet(Mg);this.position=e.position,this.parent=e.parent,this.classes=i.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new EA(i,EO,(t,n)=>this.createTooltip(t,n),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),i.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let i of this.manager.tooltipViews)this.intersectionObserver.observe(i.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(i){i.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(i,this.above);e&&this.observeIntersection();let t=e||i.geometryChanged,n=i.state.facet(Mg);if(n.position!=this.position&&!this.madeAbsolute){this.position=n.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;t=!0}if(n.parent!=this.parent){this.parent&&this.container.remove(),this.parent=n.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(i,e){let t=i.create(this.view),n=e?e.dom:null;if(t.dom.classList.add("cm-tooltip"),i.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let r=document.createElement("div");r.className="cm-tooltip-arrow",t.dom.appendChild(r)}return t.dom.style.position=this.position,t.dom.style.top=au,t.dom.style.left="0px",this.container.insertBefore(t.dom,n),t.mount&&t.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(t.dom),t}destroy(){var i,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let n of this.manager.tooltipViews)n.dom.remove(),(i=n.destroy)===null||i===void 0||i.call(n);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let i=1,e=1,t=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:l}=this.manager.tooltipViews[0];if(Te.gecko)t=l.offsetParent!=this.container.ownerDocument.body;else if(l.style.top==au&&l.style.left=="0px"){let o=l.getBoundingClientRect();t=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(t||this.position=="absolute")if(this.parent){let l=this.parent.getBoundingClientRect();l.width&&l.height&&(i=l.width/this.parent.offsetWidth,e=l.height/this.parent.offsetHeight)}else({scaleX:i,scaleY:e}=this.view.viewState);let n=this.view.scrollDOM.getBoundingClientRect(),r=wO(this.view);return{visible:{left:n.left+r.left,top:n.top+r.top,right:n.right-r.right,bottom:n.bottom-r.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((l,o)=>{let u=this.manager.tooltipViews[o];return u.getCoords?u.getCoords(l.pos):this.view.coordsAtPos(l.pos)}),size:this.manager.tooltipViews.map(({dom:l})=>l.getBoundingClientRect()),space:this.view.state.facet(Mg).tooltipSpace(this.view),scaleX:i,scaleY:e,makeAbsolute:t}}writeMeasure(i){var e;if(i.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let u of this.manager.tooltipViews)u.dom.style.position="absolute"}let{visible:t,space:n,scaleX:r,scaleY:l}=i,o=[];for(let u=0;u<this.manager.tooltips.length;u++){let h=this.manager.tooltips[u],d=this.manager.tooltipViews[u],{dom:p}=d,g=i.pos[u],O=i.size[u];if(!g||h.clip!==!1&&(g.bottom<=Math.max(t.top,n.top)||g.top>=Math.min(t.bottom,n.bottom)||g.right<Math.max(t.left,n.left)-.1||g.left>Math.min(t.right,n.right)+.1)){p.style.top=au;continue}let b=h.arrow?d.dom.querySelector(".cm-tooltip-arrow"):null,v=b?7:0,x=O.right-O.left,w=(e=pw.get(d))!==null&&e!==void 0?e:O.bottom-O.top,T=d.offset||d3,E=this.view.textDirection==st.LTR,D=O.width>n.right-n.left?E?n.left:n.right-O.width:E?Math.max(n.left,Math.min(g.left-(b?14:0)+T.x,n.right-x)):Math.min(Math.max(n.left,g.left-x+(b?14:0)-T.x),n.right-x),_=this.above[u];!h.strictSide&&(_?g.top-w-v-T.y<n.top:g.bottom+w+v+T.y>n.bottom)&&_==n.bottom-g.bottom>g.top-n.top&&(_=this.above[u]=!_);let A=(_?g.top-n.top:n.bottom-g.bottom)-v;if(A<w&&d.resize!==!1){if(A<this.view.defaultLineHeight){p.style.top=au;continue}pw.set(d,w),p.style.height=(w=A)/l+"px"}else p.style.height&&(p.style.height="");let B=_?g.top-w-v-T.y:g.bottom+v+T.y,C=D+x;if(d.overlap!==!0)for(let U of o)U.left<C&&U.right>D&&U.top<B+w&&U.bottom>B&&(B=_?U.top-w-2-v:U.bottom+v+2);if(this.position=="absolute"?(p.style.top=(B-i.parent.top)/l+"px",mw(p,(D-i.parent.left)/r)):(p.style.top=B/l+"px",mw(p,D/r)),b){let U=g.left+(E?T.x:-T.x)-(D+14-7);b.style.left=U/r+"px"}d.overlap!==!0&&o.push({left:D,top:B,right:C,bottom:B+w}),p.classList.toggle("cm-tooltip-above",_),p.classList.toggle("cm-tooltip-below",!_),d.positioned&&d.positioned(i.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let i of this.manager.tooltipViews)i.dom.style.top=au}},{eventObservers:{scroll(){this.maybeMeasure()}}});function mw(i,e){let t=parseInt(i.style.left,10);(isNaN(t)||Math.abs(e-t)>1)&&(i.style.left=e+"px")}const f3=fe.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),d3={x:0,y:0},EO=xe.define({enables:[AO,f3]}),ld=xe.define({combine:i=>i.reduce((e,t)=>e.concat(t),[])});class Ud{static create(e){return new Ud(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new EA(e,ld,(t,n)=>this.createHostedView(t,n),t=>t.dom.remove())}createHostedView(e,t){let n=e.create(this.view);return n.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(n.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&n.mount&&n.mount(this.view),n}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let n of this.manager.tooltipViews){let r=n[e];if(r!==void 0){if(t===void 0)t=r;else if(t!==r)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const p3=EO.compute([ld],i=>{let e=i.facet(ld);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.map(t=>{var n;return(n=t.end)!==null&&n!==void 0?n:t.pos})),create:Ud.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class m3{constructor(e,t,n,r,l){this.view=e,this.source=t,this.field=n,this.setHover=r,this.hoverTime=l,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,n=e.docView.nearest(t.target);if(!n)return;let r,l=1;if(n instanceof zs)r=n.posAtStart;else{if(r=e.posAtCoords(t),r==null)return;let u=e.coordsAtPos(r);if(!u||t.y<u.top||t.y>u.bottom||t.x<u.left-e.defaultCharacterWidth||t.x>u.right+e.defaultCharacterWidth)return;let h=e.bidiSpans(e.state.doc.lineAt(r)).find(p=>p.from<=r&&p.to>=r),d=h&&h.dir==st.RTL?-1:1;l=t.x<u.left?-d:d}let o=this.source(e,r,l);if(o?.then){let u=this.pending={pos:r};o.then(h=>{this.pending==u&&(this.pending=null,h&&!(Array.isArray(h)&&!h.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(h)?h:[h])}))},h=>On(e.state,h,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(AO),t=e?e.manager.tooltips.findIndex(n=>n.create==Ud.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,n;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:r,tooltip:l}=this;if(r.length&&l&&!g3(l.dom,e)||this.pending){let{pos:o}=r[0]||this.pending,u=(n=(t=r[0])===null||t===void 0?void 0:t.end)!==null&&n!==void 0?n:o;(o==u?this.view.posAtCoords(this.lastMove)!=o:!y3(this.view,o,u,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:n}=this;n&&n.dom.contains(e.relatedTarget)?this.watchTooltipLeave(n.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=n=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(n.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Wh=4;function g3(i,e){let{left:t,right:n,top:r,bottom:l}=i.getBoundingClientRect(),o;if(o=i.querySelector(".cm-tooltip-arrow")){let u=o.getBoundingClientRect();r=Math.min(u.top,r),l=Math.max(u.bottom,l)}return e.clientX>=t-Wh&&e.clientX<=n+Wh&&e.clientY>=r-Wh&&e.clientY<=l+Wh}function y3(i,e,t,n,r,l){let o=i.scrollDOM.getBoundingClientRect(),u=i.documentTop+i.documentPadding.top+i.contentHeight;if(o.left>n||o.right<n||o.top>r||Math.min(o.bottom,u)<r)return!1;let h=i.posAtCoords({x:n,y:r},!1);return h>=e&&h<=t}function O3(i,e={}){let t=Be.define(),n=Lt.define({create(){return[]},update(r,l){if(r.length&&(e.hideOnChange&&(l.docChanged||l.selection)?r=[]:e.hideOn&&(r=r.filter(o=>!e.hideOn(l,o))),l.docChanged)){let o=[];for(let u of r){let h=l.changes.mapPos(u.pos,-1,un.TrackDel);if(h!=null){let d=Object.assign(Object.create(null),u);d.pos=h,d.end!=null&&(d.end=l.changes.mapPos(d.end)),o.push(d)}}r=o}for(let o of l.effects)o.is(t)&&(r=o.value),o.is(b3)&&(r=[]);return r},provide:r=>ld.from(r)});return{active:n,extension:[n,wt.define(r=>new m3(r,i,n,t,e.hoverTime||300)),p3]}}function RA(i,e){let t=i.plugin(AO);if(!t)return null;let n=t.manager.tooltips.indexOf(e);return n<0?null:t.manager.tooltipViews[n]}const b3=Be.define(),gw=xe.define({combine(i){let e,t;for(let n of i)e=e||n.topContainer,t=t||n.bottomContainer;return{topContainer:e,bottomContainer:t}}});function Uu(i,e){let t=i.plugin(NA),n=t?t.specs.indexOf(e):-1;return n>-1?t.panels[n]:null}const NA=wt.fromClass(class{constructor(i){this.input=i.state.facet(ju),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(i));let e=i.state.facet(gw);this.top=new Ih(i,!0,e.topContainer),this.bottom=new Ih(i,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(i){let e=i.state.facet(gw);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Ih(i.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Ih(i.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=i.state.facet(ju);if(t!=this.input){let n=t.filter(h=>h),r=[],l=[],o=[],u=[];for(let h of n){let d=this.specs.indexOf(h),p;d<0?(p=h(i.view),u.push(p)):(p=this.panels[d],p.update&&p.update(i)),r.push(p),(p.top?l:o).push(p)}this.specs=n,this.panels=r,this.top.sync(l),this.bottom.sync(o);for(let h of u)h.dom.classList.add("cm-panel"),h.mount&&h.mount()}else for(let n of this.panels)n.update&&n.update(i)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:i=>fe.scrollMargins.of(e=>{let t=e.plugin(i);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class Ih{constructor(e,t,n){this.view=e,this.top=t,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=yw(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=yw(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function yw(i){let e=i.nextSibling;return i.remove(),e}const ju=xe.define({enables:NA});class Gr extends _s{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Gr.prototype.elementClass="";Gr.prototype.toDOM=void 0;Gr.prototype.mapMode=un.TrackBefore;Gr.prototype.startSide=Gr.prototype.endSide=-1;Gr.prototype.point=!0;const Bf=xe.define(),v3=xe.define(),S3={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Je.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},Mu=xe.define();function x3(i){return[MA(),Mu.of({...S3,...i})]}const Ow=xe.define({combine:i=>i.some(e=>e)});function MA(i){return[w3]}const w3=wt.fromClass(class{constructor(i){this.view=i,this.domAfter=null,this.prevViewport=i.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=i.state.facet(Mu).map(e=>new vw(i,e)),this.fixed=!i.state.facet(Ow);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),i.scrollDOM.insertBefore(this.dom,i.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(i){if(this.updateGutters(i)){let e=this.prevViewport,t=i.view.viewport,n=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(n<(t.to-t.from)*.8)}if(i.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(Ow)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=i.view.viewport}syncGutters(i){let e=this.dom.nextSibling;i&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let t=Je.iter(this.view.state.facet(Bf),this.view.viewport.from),n=[],r=this.gutters.map(l=>new k3(l,this.view.viewport,-this.view.documentPadding.top));for(let l of this.view.viewportLineBlocks)if(n.length&&(n=[]),Array.isArray(l.type)){let o=!0;for(let u of l.type)if(u.type==kn.Text&&o){cy(t,n,u.from);for(let h of r)h.line(this.view,u,n);o=!1}else if(u.widget)for(let h of r)h.widget(this.view,u)}else if(l.type==kn.Text){cy(t,n,l.from);for(let o of r)o.line(this.view,l,n)}else if(l.widget)for(let o of r)o.widget(this.view,l);for(let l of r)l.finish();i&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(i){let e=i.startState.facet(Mu),t=i.state.facet(Mu),n=i.docChanged||i.heightChanged||i.viewportChanged||!Je.eq(i.startState.facet(Bf),i.state.facet(Bf),i.view.viewport.from,i.view.viewport.to);if(e==t)for(let r of this.gutters)r.update(i)&&(n=!0);else{n=!0;let r=[];for(let l of t){let o=e.indexOf(l);o<0?r.push(new vw(this.view,l)):(this.gutters[o].update(i),r.push(this.gutters[o]))}for(let l of this.gutters)l.dom.remove(),r.indexOf(l)<0&&l.destroy();for(let l of r)l.config.side=="after"?this.getDOMAfter().appendChild(l.dom):this.dom.appendChild(l.dom);this.gutters=r}return n}destroy(){for(let i of this.gutters)i.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:i=>fe.scrollMargins.of(e=>{let t=e.plugin(i);if(!t||t.gutters.length==0||!t.fixed)return null;let n=t.dom.offsetWidth*e.scaleX,r=t.domAfter?t.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==st.LTR?{left:n,right:r}:{right:n,left:r}})});function bw(i){return Array.isArray(i)?i:[i]}function cy(i,e,t){for(;i.value&&i.from<=t;)i.from==t&&e.push(i.value),i.next()}class k3{constructor(e,t,n){this.gutter=e,this.height=n,this.i=0,this.cursor=Je.iter(e.markers,t.from)}addElement(e,t,n){let{gutter:r}=this,l=(t.top-this.height)/e.scaleY,o=t.height/e.scaleY;if(this.i==r.elements.length){let u=new DA(e,o,l,n);r.elements.push(u),r.dom.appendChild(u.dom)}else r.elements[this.i].update(e,o,l,n);this.height=t.bottom,this.i++}line(e,t,n){let r=[];cy(this.cursor,r,t.from),n.length&&(r=r.concat(n));let l=this.gutter.config.lineMarker(e,t,r);l&&r.unshift(l);let o=this.gutter;r.length==0&&!o.config.renderEmptyElements||this.addElement(e,t,r)}widget(e,t){let n=this.gutter.config.widgetMarker(e,t.widget,t),r=n?[n]:null;for(let l of e.state.facet(v3)){let o=l(e,t.widget,t);o&&(r||(r=[])).push(o)}r&&this.addElement(e,t,r)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class vw{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let n in t.domEventHandlers)this.dom.addEventListener(n,r=>{let l=r.target,o;if(l!=this.dom&&this.dom.contains(l)){for(;l.parentNode!=this.dom;)l=l.parentNode;let h=l.getBoundingClientRect();o=(h.top+h.bottom)/2}else o=r.clientY;let u=e.lineBlockAtHeight(o-e.documentTop);t.domEventHandlers[n](e,u,r)&&r.preventDefault()});this.markers=bw(t.markers(e)),t.initialSpacer&&(this.spacer=new DA(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=bw(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],e);r!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[r])}let n=e.view.viewport;return!Je.eq(this.markers,t,n.from,n.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class DA{constructor(e,t,n,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,n,r)}update(e,t,n,r){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),T3(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,t){let n="cm-gutterElement",r=this.dom.firstChild;for(let l=0,o=0;;){let u=o,h=l<t.length?t[l++]:null,d=!1;if(h){let p=h.elementClass;p&&(n+=" "+p);for(let g=o;g<this.markers.length;g++)if(this.markers[g].compare(h)){u=g,d=!0;break}}else u=this.markers.length;for(;o<u;){let p=this.markers[o++];if(p.toDOM){p.destroy(r);let g=r.nextSibling;r.remove(),r=g}}if(!h)break;h.toDOM&&(d?r=r.nextSibling:this.dom.insertBefore(h.toDOM(e),r)),d&&o++}this.dom.className=n,this.markers=t}destroy(){this.setMarkers(null,[])}}function T3(i,e){if(i.length!=e.length)return!1;for(let t=0;t<i.length;t++)if(!i[t].compare(e[t]))return!1;return!0}const C3=xe.define(),A3=xe.define(),Ra=xe.define({combine(i){return fr(i,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let n=Object.assign({},e);for(let r in t){let l=n[r],o=t[r];n[r]=l?(u,h,d)=>l(u,h,d)||o(u,h,d):o}return n}})}});class Dg extends Gr{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Qg(i,e){return i.state.facet(Ra).formatNumber(e,i.state)}const E3=Mu.compute([Ra],i=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(C3)},lineMarker(e,t,n){return n.some(r=>r.toDOM)?null:new Dg(Qg(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,n)=>{for(let r of e.state.facet(A3)){let l=r(e,t,n);if(l)return l}return null},lineMarkerChange:e=>e.startState.facet(Ra)!=e.state.facet(Ra),initialSpacer(e){return new Dg(Qg(e,Sw(e.state.doc.lines)))},updateSpacer(e,t){let n=Qg(t.view,Sw(t.view.state.doc.lines));return n==e.number?e:new Dg(n)},domEventHandlers:i.facet(Ra).domEventHandlers,side:"before"}));function R3(i={}){return[Ra.of(i),MA(),E3]}function Sw(i){let e=9;for(;e<i;)e=e*10+9;return e}const N3=new class extends Gr{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},M3=Bf.compute(["selection"],i=>{let e=[],t=-1;for(let n of i.selection.ranges){let r=i.doc.lineAt(n.head).from;r>t&&(t=r,e.push(N3.range(r)))}return Je.of(e)});function D3(){return M3}let Q3=0,Yt=class{constructor(e={}){this.id=Q3++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Hu.match(e)),t=>{let n=e(t);return n===void 0?null:[this,n]}}};Yt.closedBy=new Yt({deserialize:i=>i.split(" ")});Yt.openedBy=new Yt({deserialize:i=>i.split(" ")});Yt.group=new Yt({deserialize:i=>i.split(" ")});Yt.isolate=new Yt({deserialize:i=>{if(i&&i!="rtl"&&i!="ltr"&&i!="auto")throw new RangeError("Invalid value for isolate: "+i);return i||"auto"}});Yt.contextHash=new Yt({perNode:!0});Yt.lookAhead=new Yt({perNode:!0});Yt.mounted=new Yt({perNode:!0});const z3=Object.create(null);let Hu=class QA{constructor(e,t,n,r=0){this.name=e,this.props=t,this.id=n,this.flags=r}static define(e){let t=e.props&&e.props.length?Object.create(null):z3,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new QA(e.name||"",t,e.id,n);if(e.props){for(let l of e.props)if(Array.isArray(l)||(l=l(r)),l){if(l[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[l[0].id]=l[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(Yt.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let n in e)for(let r of n.split(" "))t[r]=e[n];return n=>{for(let r=n.prop(Yt.group),l=-1;l<(r?r.length:0);l++){let o=t[l<0?n.name:r[l]];if(o)return o}}}};Hu.none=new Hu("",Object.create(null),0,8);var xw;(function(i){i[i.ExcludeBuffers=1]="ExcludeBuffers",i[i.IncludeAnonymous=2]="IncludeAnonymous",i[i.IgnoreMounts=4]="IgnoreMounts",i[i.IgnoreOverlays=8]="IgnoreOverlays"})(xw||(xw={}));new Yt({perNode:!0});let P3=0,Br=class hy{constructor(e,t,n,r){this.name=e,this.set=t,this.base=n,this.modified=r,this.id=P3++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let n=typeof e=="string"?e:"?";if(e instanceof hy&&(t=e),t?.base)throw new Error("Can not derive from a modified tag");let r=new hy(n,[],null,[]);if(r.set.push(r),t)for(let l of t.set)r.set.push(l);return r}static defineModifier(e){let t=new ww(e);return n=>n.modified.indexOf(t)>-1?n:ww.get(n.base||n,n.modified.concat(t).sort((r,l)=>r.id-l.id))}},B3=0,ww=class zA{constructor(e){this.name=e,this.instances=[],this.id=B3++}static get(e,t){if(!t.length)return e;let n=t[0].instances.find(u=>u.base==e&&_3(t,u.modified));if(n)return n;let r=[],l=new Br(e.name,r,e,t);for(let u of t)u.instances.push(l);let o=$3(t);for(let u of e.set)if(!u.modified.length)for(let h of o)r.push(zA.get(u,h));return l}};function _3(i,e){return i.length==e.length&&i.every((t,n)=>t==e[n])}function $3(i){let e=[[]];for(let t=0;t<i.length;t++)for(let n=0,r=e.length;n<r;n++)e.push(e[n].concat(i[t]));return e.sort((t,n)=>n.length-t.length)}function L3(i){let e=Object.create(null);for(let t in i){let n=i[t];Array.isArray(n)||(n=[n]);for(let r of t.split(" "))if(r){let l=[],o=2,u=r;for(let g=0;;){if(u=="..."&&g>0&&g+3==r.length){o=1;break}let O=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(u);if(!O)throw new RangeError("Invalid path: "+r);if(l.push(O[0]=="*"?"":O[0][0]=='"'?JSON.parse(O[0]):O[0]),g+=O[0].length,g==r.length)break;let b=r[g++];if(g==r.length&&b=="!"){o=0;break}if(b!="/")throw new RangeError("Invalid path: "+r);u=r.slice(g)}let h=l.length-1,d=l[h];if(!d)throw new RangeError("Invalid path: "+r);let p=new fy(n,o,h>0?l.slice(0,h):null);e[d]=p.sort(e[d])}}return q3.add(e)}const q3=new Yt;let fy=class{constructor(e,t,n,r){this.tags=e,this.mode=t,this.context=n,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}};fy.empty=new fy([],2,null);function U3(i,e){let t=Object.create(null);for(let l of i)if(!Array.isArray(l.tag))t[l.tag.id]=l.class;else for(let o of l.tag)t[o.id]=l.class;let{scope:n,all:r=null}={};return{style:l=>{let o=r;for(let u of l)for(let h of u.set){let d=t[h.id];if(d){o=o?o+" "+d:d;break}}return o},scope:n}}const ge=Br.define,Fh=ge(),xs=ge(),kw=ge(xs),Tw=ge(xs),ws=ge(),Yh=ge(ws),zg=ge(ws),Vi=ge(),pl=ge(Vi),zi=ge(),Pi=ge(),dy=ge(),ou=ge(dy),Zh=ge(),je={comment:Fh,lineComment:ge(Fh),blockComment:ge(Fh),docComment:ge(Fh),name:xs,variableName:ge(xs),typeName:kw,tagName:ge(kw),propertyName:Tw,attributeName:ge(Tw),className:ge(xs),labelName:ge(xs),namespace:ge(xs),macroName:ge(xs),literal:ws,string:Yh,docString:ge(Yh),character:ge(Yh),attributeValue:ge(Yh),number:zg,integer:ge(zg),float:ge(zg),bool:ge(ws),regexp:ge(ws),escape:ge(ws),color:ge(ws),url:ge(ws),keyword:zi,self:ge(zi),null:ge(zi),atom:ge(zi),unit:ge(zi),modifier:ge(zi),operatorKeyword:ge(zi),controlKeyword:ge(zi),definitionKeyword:ge(zi),moduleKeyword:ge(zi),operator:Pi,derefOperator:ge(Pi),arithmeticOperator:ge(Pi),logicOperator:ge(Pi),bitwiseOperator:ge(Pi),compareOperator:ge(Pi),updateOperator:ge(Pi),definitionOperator:ge(Pi),typeOperator:ge(Pi),controlOperator:ge(Pi),punctuation:dy,separator:ge(dy),bracket:ou,angleBracket:ge(ou),squareBracket:ge(ou),paren:ge(ou),brace:ge(ou),content:Vi,heading:pl,heading1:ge(pl),heading2:ge(pl),heading3:ge(pl),heading4:ge(pl),heading5:ge(pl),heading6:ge(pl),contentSeparator:ge(Vi),list:ge(Vi),quote:ge(Vi),emphasis:ge(Vi),strong:ge(Vi),link:ge(Vi),monospace:ge(Vi),strikethrough:ge(Vi),inserted:ge(),deleted:ge(),changed:ge(),invalid:ge(),meta:Zh,documentMeta:ge(Zh),annotation:ge(Zh),processingInstruction:ge(Zh),definition:Br.defineModifier("definition"),constant:Br.defineModifier("constant"),function:Br.defineModifier("function"),standard:Br.defineModifier("standard"),local:Br.defineModifier("local"),special:Br.defineModifier("special")};for(let i in je){let e=je[i];e instanceof Br&&(e.name=i)}U3([{tag:je.link,class:"tok-link"},{tag:je.heading,class:"tok-heading"},{tag:je.emphasis,class:"tok-emphasis"},{tag:je.strong,class:"tok-strong"},{tag:je.keyword,class:"tok-keyword"},{tag:je.atom,class:"tok-atom"},{tag:je.bool,class:"tok-bool"},{tag:je.url,class:"tok-url"},{tag:je.labelName,class:"tok-labelName"},{tag:je.inserted,class:"tok-inserted"},{tag:je.deleted,class:"tok-deleted"},{tag:je.literal,class:"tok-literal"},{tag:je.string,class:"tok-string"},{tag:je.number,class:"tok-number"},{tag:[je.regexp,je.escape,je.special(je.string)],class:"tok-string2"},{tag:je.variableName,class:"tok-variableName"},{tag:je.local(je.variableName),class:"tok-variableName tok-local"},{tag:je.definition(je.variableName),class:"tok-variableName tok-definition"},{tag:je.special(je.variableName),class:"tok-variableName2"},{tag:je.definition(je.propertyName),class:"tok-propertyName tok-definition"},{tag:je.typeName,class:"tok-typeName"},{tag:je.namespace,class:"tok-namespace"},{tag:je.className,class:"tok-className"},{tag:je.macroName,class:"tok-macroName"},{tag:je.propertyName,class:"tok-propertyName"},{tag:je.operator,class:"tok-operator"},{tag:je.comment,class:"tok-comment"},{tag:je.meta,class:"tok-meta"},{tag:je.invalid,class:"tok-invalid"},{tag:je.punctuation,class:"tok-punctuation"}]);var Pg;typeof navigator<"u"&&(!((Pg=navigator.scheduling)===null||Pg===void 0)&&Pg.isInputPending);const RO=xe.define({combine:i=>{if(!i.length)return"  ";let e=i[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(i[0]));return e}});function j3(i){let e=i.facet(RO);return e.charCodeAt(0)==9?i.tabSize*e.length:e.length}function H3(i,e){let t="",n=i.tabSize,r=i.facet(RO)[0];if(r=="	"){for(;e>=n;)t+="	",e-=n;r=" "}for(let l=0;l<e;l++)t+=r;return t}const V3=Object.create(null),Cw=[Hu.none],Aw=[],Ew=Object.create(null),X3=Object.create(null);for(let[i,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])X3[i]=G3(V3,e);function Bg(i,e){Aw.indexOf(i)>-1||(Aw.push(i),console.warn(e))}function G3(i,e){let t=[];for(let u of e.split(" ")){let h=[];for(let d of u.split(".")){let p=i[d]||je[d];p?typeof p=="function"?h.length?h=h.map(p):Bg(d,`Modifier ${d} used at start of tag`):h.length?Bg(d,`Tag ${d} used as modifier`):h=Array.isArray(p)?p:[p]:Bg(d,`Unknown highlighting tag ${d}`)}for(let d of h)t.push(d)}if(!t.length)return 0;let n=e.replace(/ /g,"_"),r=n+" "+t.map(u=>u.id),l=Ew[r];if(l)return l.id;let o=Ew[r]=Hu.define({id:Cw.length,name:n,props:[L3({[n]:t})]});return Cw.push(o),o.id}st.RTL,st.LTR;function PA(i,e){let t=-1;return i.changeByRange(n=>{let r=[];for(let o=n.from;o<=n.to;){let u=i.doc.lineAt(o);u.number>t&&(n.empty||n.to>u.from)&&(e(u,r,n),t=u.number),o=u.to+1}let l=i.changes(r);return{changes:r,range:re.range(l.mapPos(n.anchor,1),l.mapPos(n.head,1))}})}const W3=({state:i,dispatch:e})=>i.readOnly?!1:(e(i.update(PA(i,(t,n)=>{n.push({from:t.from,insert:i.facet(RO)})}),{userEvent:"input.indent"})),!0),I3=({state:i,dispatch:e})=>i.readOnly?!1:(e(i.update(PA(i,(t,n)=>{let r=/^\s*/.exec(t.text)[0];if(!r)return;let l=Ql(r,i.tabSize),o=0,u=H3(i,Math.max(0,l-j3(i)));for(;o<r.length&&o<u.length&&r.charCodeAt(o)==u.charCodeAt(o);)o++;n.push({from:t.from+o,to:t.from+r.length,insert:u.slice(o)})}),{userEvent:"delete.dedent"})),!0),F3={key:"Tab",run:W3,shift:I3},Y3=1024;let Z3=0,_g=class{constructor(e,t){this.from=e,this.to=t}},Ie=class{constructor(e={}){this.id=Z3++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=ur.match(e)),t=>{let n=e(t);return n===void 0?null:[this,n]}}};Ie.closedBy=new Ie({deserialize:i=>i.split(" ")});Ie.openedBy=new Ie({deserialize:i=>i.split(" ")});Ie.group=new Ie({deserialize:i=>i.split(" ")});Ie.isolate=new Ie({deserialize:i=>{if(i&&i!="rtl"&&i!="ltr"&&i!="auto")throw new RangeError("Invalid value for isolate: "+i);return i||"auto"}});Ie.contextHash=new Ie({perNode:!0});Ie.lookAhead=new Ie({perNode:!0});Ie.mounted=new Ie({perNode:!0});let ad=class{constructor(e,t,n){this.tree=e,this.overlay=t,this.parser=n}static get(e){return e&&e.props&&e.props[Ie.mounted.id]}};const K3=Object.create(null);let ur=class BA{constructor(e,t,n,r=0){this.name=e,this.props=t,this.id=n,this.flags=r}static define(e){let t=e.props&&e.props.length?Object.create(null):K3,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new BA(e.name||"",t,e.id,n);if(e.props){for(let l of e.props)if(Array.isArray(l)||(l=l(r)),l){if(l[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[l[0].id]=l[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(Ie.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let n in e)for(let r of n.split(" "))t[r]=e[n];return n=>{for(let r=n.prop(Ie.group),l=-1;l<(r?r.length:0);l++){let o=t[l<0?n.name:r[l]];if(o)return o}}}};ur.none=new ur("",Object.create(null),0,8);const Kh=new WeakMap,Rw=new WeakMap;var ln;(function(i){i[i.ExcludeBuffers=1]="ExcludeBuffers",i[i.IncludeAnonymous=2]="IncludeAnonymous",i[i.IgnoreMounts=4]="IgnoreMounts",i[i.IgnoreOverlays=8]="IgnoreOverlays"})(ln||(ln={}));let Fn=class py{constructor(e,t,n,r,l){if(this.type=e,this.children=t,this.positions=n,this.length=r,this.props=null,l&&l.length){this.props=Object.create(null);for(let[o,u]of l)this.props[typeof o=="number"?o:o.id]=u}}toString(){let e=ad.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let n of this.children){let r=n.toString();r&&(t&&(t+=","),t+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new yy(this.topNode,e)}cursorAt(e,t=0,n=0){let r=Kh.get(this)||this.topNode,l=new yy(r);return l.moveTo(e,t),Kh.set(this,l._tree),l}get topNode(){return new qs(this,0,0,null)}resolve(e,t=0){let n=Vu(Kh.get(this)||this.topNode,e,t,!1);return Kh.set(this,n),n}resolveInner(e,t=0){let n=Vu(Rw.get(this)||this.topNode,e,t,!0);return Rw.set(this,n),n}resolveStack(e,t=0){return n4(this,e,t)}iterate(e){let{enter:t,leave:n,from:r=0,to:l=this.length}=e,o=e.mode||0,u=(o&ln.IncludeAnonymous)>0;for(let h=this.cursor(o|ln.IncludeAnonymous);;){let d=!1;if(h.from<=l&&h.to>=r&&(!u&&h.type.isAnonymous||t(h)!==!1)){if(h.firstChild())continue;d=!0}for(;d&&n&&(u||!h.type.isAnonymous)&&n(h),!h.nextSibling();){if(!h.parent())return;d=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:MO(ur.none,this.children,this.positions,0,this.children.length,0,this.length,(t,n,r)=>new py(this.type,t,n,r,this.propValues),e.makeTree||((t,n,r)=>new py(ur.none,t,n,r)))}static build(e){return i4(e)}};Fn.empty=new Fn(ur.none,[],[],0);let J3=class _A{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new _A(this.buffer,this.index)}},ja=class $A{constructor(e,t,n){this.buffer=e,this.length=t,this.set=n}get type(){return ur.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],n=this.buffer[e+3],r=this.set.types[t],l=r.name;if(/\W/.test(l)&&!r.isError&&(l=JSON.stringify(l)),e+=4,n==e)return l;let o=[];for(;e<n;)o.push(this.childString(e)),e=this.buffer[e+3];return l+"("+o.join(",")+")"}findChild(e,t,n,r,l){let{buffer:o}=this,u=-1;for(let h=e;h!=t&&!(LA(l,r,o[h+1],o[h+2])&&(u=h,n>0));h=o[h+3]);return u}slice(e,t,n){let r=this.buffer,l=new Uint16Array(t-e),o=0;for(let u=e,h=0;u<t;){l[h++]=r[u++],l[h++]=r[u++]-n;let d=l[h++]=r[u++]-n;l[h++]=r[u++]-e,o=Math.max(o,d)}return new $A(l,o,this.set)}};function LA(i,e,t,n){switch(i){case-2:return t<e;case-1:return n>=e&&t<e;case 0:return t<e&&n>e;case 1:return t<=e&&n>e;case 2:return n>e;case 4:return!0}}function Vu(i,e,t,n){for(var r;i.from==i.to||(t<1?i.from>=e:i.from>e)||(t>-1?i.to<=e:i.to<e);){let o=!n&&i instanceof qs&&i.index<0?null:i.parent;if(!o)return i;i=o}let l=n?0:ln.IgnoreOverlays;if(n)for(let o=i,u=o.parent;u;o=u,u=o.parent)o instanceof qs&&o.index<0&&((r=u.enter(e,t,l))===null||r===void 0?void 0:r.from)!=o.from&&(i=u);for(;;){let o=i.enter(e,t,l);if(!o)return i;i=o}}let qA=class{cursor(e=0){return new yy(this,e)}getChild(e,t=null,n=null){let r=Nw(this,e,t,n);return r.length?r[0]:null}getChildren(e,t=null,n=null){return Nw(this,e,t,n)}resolve(e,t=0){return Vu(this,e,t,!1)}resolveInner(e,t=0){return Vu(this,e,t,!0)}matchContext(e){return my(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),n=this;for(;t;){let r=t.lastChild;if(!r||r.to!=t.to)break;r.type.isError&&r.from==r.to?(n=t,t=r.prevSibling):t=r}return n}get node(){return this}get next(){return this.parent}},qs=class _f extends qA{constructor(e,t,n,r){super(),this._tree=e,this.from=t,this.index=n,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,n,r,l=0){for(let o=this;;){for(let{children:u,positions:h}=o._tree,d=t>0?u.length:-1;e!=d;e+=t){let p=u[e],g=h[e]+o.from;if(LA(r,n,g,g+p.length)){if(p instanceof ja){if(l&ln.ExcludeBuffers)continue;let O=p.findChild(0,p.buffer.length,t,n-g,r);if(O>-1)return new gy(new e4(o,p,e,g),null,O)}else if(l&ln.IncludeAnonymous||!p.type.isAnonymous||NO(p)){let O;if(!(l&ln.IgnoreMounts)&&(O=ad.get(p))&&!O.overlay)return new _f(O.tree,g,e,o);let b=new _f(p,g,e,o);return l&ln.IncludeAnonymous||!b.type.isAnonymous?b:b.nextChild(t<0?p.children.length-1:0,t,n,r)}}}if(l&ln.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,n=0){let r;if(!(n&ln.IgnoreOverlays)&&(r=ad.get(this._tree))&&r.overlay){let l=e-this.from;for(let{from:o,to:u}of r.overlay)if((t>0?o<=l:o<l)&&(t<0?u>=l:u>l))return new _f(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,n)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}};function Nw(i,e,t,n){let r=i.cursor(),l=[];if(!r.firstChild())return l;if(t!=null){for(let o=!1;!o;)if(o=r.type.is(t),!r.nextSibling())return l}for(;;){if(n!=null&&r.type.is(n))return l;if(r.type.is(e)&&l.push(r.node),!r.nextSibling())return n==null?l:[]}}function my(i,e,t=e.length-1){for(let n=i;t>=0;n=n.parent){if(!n)return!1;if(!n.type.isAnonymous){if(e[t]&&e[t]!=n.name)return!1;t--}}return!0}let e4=class{constructor(e,t,n,r){this.parent=e,this.buffer=t,this.index=n,this.start=r}},gy=class Su extends qA{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,n){super(),this.context=e,this._parent=t,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}child(e,t,n){let{buffer:r}=this.context,l=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.context.start,n);return l<0?null:new Su(this.context,this,l)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,n=0){if(n&ln.ExcludeBuffers)return null;let{buffer:r}=this.context,l=r.findChild(this.index+4,r.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return l<0?null:new Su(this.context,this,l)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Su(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Su(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:n}=this.context,r=this.index+4,l=n.buffer[this.index+3];if(l>r){let o=n.buffer[this.index+1];e.push(n.slice(r,l,o)),t.push(0)}return new Fn(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}};function UA(i){if(!i.length)return null;let e=0,t=i[0];for(let l=1;l<i.length;l++){let o=i[l];(o.from>t.from||o.to<t.to)&&(t=o,e=l)}let n=t instanceof qs&&t.index<0?null:t.parent,r=i.slice();return n?r[e]=n:r.splice(e,1),new t4(r,t)}let t4=class{constructor(e,t){this.heads=e,this.node=t}get next(){return UA(this.heads)}};function n4(i,e,t){let n=i.resolveInner(e,t),r=null;for(let l=n instanceof qs?n:n.context.parent;l;l=l.parent)if(l.index<0){let o=l.parent;(r||(r=[n])).push(o.resolve(e,t)),l=o}else{let o=ad.get(l.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let u=new qs(o.tree,o.overlay[0].from+l.from,-1,l);(r||(r=[n])).push(Vu(u,e,t,!1))}}return r?UA(r):n}let yy=class{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof qs)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let n=e._parent;n;n=n._parent)this.stack.unshift(n.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:n,buffer:r}=this.buffer;return this.type=t||r.set.types[r.buffer[e]],this.from=n+r.buffer[e+1],this.to=n+r.buffer[e+2],!0}yield(e){return e?e instanceof qs?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,n,this.mode));let{buffer:r}=this.buffer,l=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.buffer.start,n);return l<0?!1:(this.stack.push(this.index),this.yieldBuf(l))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,n=this.mode){return this.buffer?n&ln.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&ln.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&ln.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,n=this.stack.length-1;if(e<0){let r=n<0?0:this.stack[n]+4;if(this.index!=r)return this.yieldBuf(t.findChild(r,this.index,-1,0,4))}else{let r=t.buffer[this.index+3];if(r<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(r)}return n<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,n,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let l=0;l<this.index;l++)if(r.buffer.buffer[l+3]<this.index)return!1;({index:t,parent:n}=r)}else({index:t,_parent:n}=this._tree);for(;n;{index:t,_parent:n}=n)if(t>-1)for(let l=t+e,o=e<0?-1:n._tree.children.length;l!=o;l+=e){let u=n._tree.children[l];if(this.mode&ln.IncludeAnonymous||u instanceof ja||!u.type.isAnonymous||NO(u))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer)e:for(let r=this.index,l=this.stack.length;l>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;t=o,n=l+1;break e}r=this.stack[--l]}for(let r=n;r<this.stack.length;r++)t=new gy(this.buffer,t,this.stack[r]);return this.bufferNode=new gy(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let n=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){n++;continue}this.type.isAnonymous||(r=!0)}for(;;){if(r&&t&&t(this),r=this.type.isAnonymous,!n)return;if(this.nextSibling())break;this.parent(),n--,r=!0}}}matchContext(e){if(!this.buffer)return my(this.node.parent,e);let{buffer:t}=this.buffer,{types:n}=t.set;for(let r=e.length-1,l=this.stack.length-1;r>=0;l--){if(l<0)return my(this._tree,e,r);let o=n[t.buffer[this.stack[l]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}};function NO(i){return i.children.some(e=>e instanceof ja||!e.type.isAnonymous||NO(e))}function i4(i){var e;let{buffer:t,nodeSet:n,maxBufferLength:r=Y3,reused:l=[],minRepeatType:o=n.types.length}=i,u=Array.isArray(t)?new J3(t,t.length):t,h=n.types,d=0,p=0;function g(A,B,C,U,$,K){let{id:L,start:Q,end:Y,size:te}=u,ae=p,j=d;for(;te<0;)if(u.next(),te==-1){let G=l[L];C.push(G),U.push(Q-A);return}else if(te==-3){d=L;return}else if(te==-4){p=L;return}else throw new RangeError(`Unrecognized record size: ${te}`);let se=h[L],de,pe,R=Q-A;if(Y-Q<=r&&(pe=w(u.pos-B,$))){let G=new Uint16Array(pe.size-pe.skip),Z=u.pos-pe.size,ne=G.length;for(;u.pos>Z;)ne=T(pe.start,G,ne);de=new ja(G,Y-pe.start,n),R=pe.start-A}else{let G=u.pos-te;u.next();let Z=[],ne=[],he=L>=o?L:-1,Me=0,Ce=Y;for(;u.pos>G;)he>=0&&u.id==he&&u.size>=0?(u.end<=Ce-r&&(v(Z,ne,Q,Me,u.end,Ce,he,ae,j),Me=Z.length,Ce=u.end),u.next()):K>2500?O(Q,G,Z,ne):g(Q,G,Z,ne,he,K+1);if(he>=0&&Me>0&&Me<Z.length&&v(Z,ne,Q,Me,Q,Ce,he,ae,j),Z.reverse(),ne.reverse(),he>-1&&Me>0){let nt=b(se,j);de=MO(se,Z,ne,0,Z.length,0,Y-Q,nt,nt)}else de=x(se,Z,ne,Y-Q,ae-Y,j)}C.push(de),U.push(R)}function O(A,B,C,U){let $=[],K=0,L=-1;for(;u.pos>B;){let{id:Q,start:Y,end:te,size:ae}=u;if(ae>4)u.next();else{if(L>-1&&Y<L)break;L<0&&(L=te-r),$.push(Q,Y,te),K++,u.next()}}if(K){let Q=new Uint16Array(K*4),Y=$[$.length-2];for(let te=$.length-3,ae=0;te>=0;te-=3)Q[ae++]=$[te],Q[ae++]=$[te+1]-Y,Q[ae++]=$[te+2]-Y,Q[ae++]=ae;C.push(new ja(Q,$[2]-Y,n)),U.push(Y-A)}}function b(A,B){return(C,U,$)=>{let K=0,L=C.length-1,Q,Y;if(L>=0&&(Q=C[L])instanceof Fn){if(!L&&Q.type==A&&Q.length==$)return Q;(Y=Q.prop(Ie.lookAhead))&&(K=U[L]+Q.length+Y)}return x(A,C,U,$,K,B)}}function v(A,B,C,U,$,K,L,Q,Y){let te=[],ae=[];for(;A.length>U;)te.push(A.pop()),ae.push(B.pop()+C-$);A.push(x(n.types[L],te,ae,K-$,Q-K,Y)),B.push($-C)}function x(A,B,C,U,$,K,L){if(K){let Q=[Ie.contextHash,K];L=L?[Q].concat(L):[Q]}if($>25){let Q=[Ie.lookAhead,$];L=L?[Q].concat(L):[Q]}return new Fn(A,B,C,U,L)}function w(A,B){let C=u.fork(),U=0,$=0,K=0,L=C.end-r,Q={size:0,start:0,skip:0};e:for(let Y=C.pos-A;C.pos>Y;){let te=C.size;if(C.id==B&&te>=0){Q.size=U,Q.start=$,Q.skip=K,K+=4,U+=4,C.next();continue}let ae=C.pos-te;if(te<0||ae<Y||C.start<L)break;let j=C.id>=o?4:0,se=C.start;for(C.next();C.pos>ae;){if(C.size<0)if(C.size==-3)j+=4;else break e;else C.id>=o&&(j+=4);C.next()}$=se,U+=te,K+=j}return(B<0||U==A)&&(Q.size=U,Q.start=$,Q.skip=K),Q.size>4?Q:void 0}function T(A,B,C){let{id:U,start:$,end:K,size:L}=u;if(u.next(),L>=0&&U<o){let Q=C;if(L>4){let Y=u.pos-(L-4);for(;u.pos>Y;)C=T(A,B,C)}B[--C]=Q,B[--C]=K-A,B[--C]=$-A,B[--C]=U}else L==-3?d=U:L==-4&&(p=U);return C}let E=[],D=[];for(;u.pos>0;)g(i.start||0,i.bufferStart||0,E,D,-1,0);let _=(e=i.length)!==null&&e!==void 0?e:E.length?D[0]+E[0].length:0;return new Fn(h[i.topID],E.reverse(),D.reverse(),_)}const Mw=new WeakMap;function $f(i,e){if(!i.isAnonymous||e instanceof ja||e.type!=i)return 1;let t=Mw.get(e);if(t==null){t=1;for(let n of e.children){if(n.type!=i||!(n instanceof Fn)){t=1;break}t+=$f(i,n)}Mw.set(e,t)}return t}function MO(i,e,t,n,r,l,o,u,h){let d=0;for(let v=n;v<r;v++)d+=$f(i,e[v]);let p=Math.ceil(d*1.5/8),g=[],O=[];function b(v,x,w,T,E){for(let D=w;D<T;){let _=D,A=x[D],B=$f(i,v[D]);for(D++;D<T;D++){let C=$f(i,v[D]);if(B+C>=p)break;B+=C}if(D==_+1){if(B>p){let C=v[_];b(C.children,C.positions,0,C.children.length,x[_]+E);continue}g.push(v[_])}else{let C=x[D-1]+v[D-1].length-A;g.push(MO(i,v,x,_,D,A,C,null,h))}O.push(A+E-l)}}return b(e,t,n,r,0),(u||h)(g,O,o)}let Lf=class Oy{constructor(e,t,n,r,l=!1,o=!1){this.from=e,this.to=t,this.tree=n,this.offset=r,this.open=(l?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],n=!1){let r=[new Oy(0,e.length,e,0,!1,n)];for(let l of t)l.to>e.length&&r.push(l);return r}static applyChanges(e,t,n=128){if(!t.length)return e;let r=[],l=1,o=e.length?e[0]:null;for(let u=0,h=0,d=0;;u++){let p=u<t.length?t[u]:null,g=p?p.fromA:1e9;if(g-h>=n)for(;o&&o.from<g;){let O=o;if(h>=O.from||g<=O.to||d){let b=Math.max(O.from,h)-d,v=Math.min(O.to,g)-d;O=b>=v?null:new Oy(b,v,O.tree,O.offset+d,u>0,!!p)}if(O&&r.push(O),o.to>g)break;o=l<e.length?e[l++]:null}if(!p)break;h=p.toA,d=p.toA-p.toB}return r}},r4=class{startParse(e,t,n){return typeof e=="string"&&(e=new s4(e)),n=n?n.length?n.map(r=>new _g(r.from,r.to)):[new _g(0,0)]:[new _g(0,e.length)],this.createParse(e,t||[],n)}parse(e,t,n){let r=this.startParse(e,t,n);for(;;){let l=r.advance();if(l)return l}}},s4=class{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}};new Ie({perNode:!0});let l4=0,_r=class by{constructor(e,t,n,r){this.name=e,this.set=t,this.base=n,this.modified=r,this.id=l4++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let n=typeof e=="string"?e:"?";if(e instanceof by&&(t=e),t?.base)throw new Error("Can not derive from a modified tag");let r=new by(n,[],null,[]);if(r.set.push(r),t)for(let l of t.set)r.set.push(l);return r}static defineModifier(e){let t=new Dw(e);return n=>n.modified.indexOf(t)>-1?n:Dw.get(n.base||n,n.modified.concat(t).sort((r,l)=>r.id-l.id))}},a4=0,Dw=class jA{constructor(e){this.name=e,this.instances=[],this.id=a4++}static get(e,t){if(!t.length)return e;let n=t[0].instances.find(u=>u.base==e&&o4(t,u.modified));if(n)return n;let r=[],l=new _r(e.name,r,e,t);for(let u of t)u.instances.push(l);let o=u4(t);for(let u of e.set)if(!u.modified.length)for(let h of o)r.push(jA.get(u,h));return l}};function o4(i,e){return i.length==e.length&&i.every((t,n)=>t==e[n])}function u4(i){let e=[[]];for(let t=0;t<i.length;t++)for(let n=0,r=e.length;n<r;n++)e.push(e[n].concat(i[t]));return e.sort((t,n)=>n.length-t.length)}function c4(i){let e=Object.create(null);for(let t in i){let n=i[t];Array.isArray(n)||(n=[n]);for(let r of t.split(" "))if(r){let l=[],o=2,u=r;for(let g=0;;){if(u=="..."&&g>0&&g+3==r.length){o=1;break}let O=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(u);if(!O)throw new RangeError("Invalid path: "+r);if(l.push(O[0]=="*"?"":O[0][0]=='"'?JSON.parse(O[0]):O[0]),g+=O[0].length,g==r.length)break;let b=r[g++];if(g==r.length&&b=="!"){o=0;break}if(b!="/")throw new RangeError("Invalid path: "+r);u=r.slice(g)}let h=l.length-1,d=l[h];if(!d)throw new RangeError("Invalid path: "+r);let p=new od(n,o,h>0?l.slice(0,h):null);e[d]=p.sort(e[d])}}return HA.add(e)}const HA=new Ie;let od=class{constructor(e,t,n,r){this.tags=e,this.mode=t,this.context=n,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}};od.empty=new od([],2,null);function VA(i,e){let t=Object.create(null);for(let l of i)if(!Array.isArray(l.tag))t[l.tag.id]=l.class;else for(let o of l.tag)t[o.id]=l.class;let{scope:n,all:r=null}=e||{};return{style:l=>{let o=r;for(let u of l)for(let h of u.set){let d=t[h.id];if(d){o=o?o+" "+d:d;break}}return o},scope:n}}function h4(i,e){let t=null;for(let n of i){let r=n.style(e);r&&(t=t?t+" "+r:r)}return t}function f4(i,e,t,n=0,r=i.length){let l=new d4(n,Array.isArray(e)?e:[e],t);l.highlightRange(i.cursor(),n,r,"",l.highlighters),l.flush(r)}let d4=class{constructor(e,t,n){this.at=e,this.highlighters=t,this.span=n,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,n,r,l){let{type:o,from:u,to:h}=e;if(u>=n||h<=t)return;o.isTop&&(l=this.highlighters.filter(b=>!b.scope||b.scope(o)));let d=r,p=p4(e)||od.empty,g=h4(l,p.tags);if(g&&(d&&(d+=" "),d+=g,p.mode==1&&(r+=(r?" ":"")+g)),this.startSpan(Math.max(t,u),d),p.opaque)return;let O=e.tree&&e.tree.prop(Ie.mounted);if(O&&O.overlay){let b=e.node.enter(O.overlay[0].from+u,1),v=this.highlighters.filter(w=>!w.scope||w.scope(O.tree.type)),x=e.firstChild();for(let w=0,T=u;;w++){let E=w<O.overlay.length?O.overlay[w]:null,D=E?E.from+u:h,_=Math.max(t,T),A=Math.min(n,D);if(_<A&&x)for(;e.from<A&&(this.highlightRange(e,_,A,r,l),this.startSpan(Math.min(A,e.to),d),!(e.to>=D||!e.nextSibling())););if(!E||D>n)break;T=E.to+u,T>t&&(this.highlightRange(b.cursor(),Math.max(t,E.from+u),Math.min(n,T),"",v),this.startSpan(Math.min(n,T),d))}x&&e.parent()}else if(e.firstChild()){O&&(r="");do if(!(e.to<=t)){if(e.from>=n)break;this.highlightRange(e,t,n,r,l),this.startSpan(Math.min(n,e.to),d)}while(e.nextSibling());e.parent()}}};function p4(i){let e=i.type.prop(HA);for(;e&&e.context&&!i.matchContext(e.context);)e=e.next;return e||null}const ye=_r.define,Jh=ye(),ks=ye(),Qw=ye(ks),zw=ye(ks),Ts=ye(),ef=ye(Ts),$g=ye(Ts),Xi=ye(),ml=ye(Xi),Bi=ye(),_i=ye(),vy=ye(),uu=ye(vy),tf=ye(),we={comment:Jh,lineComment:ye(Jh),blockComment:ye(Jh),docComment:ye(Jh),name:ks,variableName:ye(ks),typeName:Qw,tagName:ye(Qw),propertyName:zw,attributeName:ye(zw),className:ye(ks),labelName:ye(ks),namespace:ye(ks),macroName:ye(ks),literal:Ts,string:ef,docString:ye(ef),character:ye(ef),attributeValue:ye(ef),number:$g,integer:ye($g),float:ye($g),bool:ye(Ts),regexp:ye(Ts),escape:ye(Ts),color:ye(Ts),url:ye(Ts),keyword:Bi,self:ye(Bi),null:ye(Bi),atom:ye(Bi),unit:ye(Bi),modifier:ye(Bi),operatorKeyword:ye(Bi),controlKeyword:ye(Bi),definitionKeyword:ye(Bi),moduleKeyword:ye(Bi),operator:_i,derefOperator:ye(_i),arithmeticOperator:ye(_i),logicOperator:ye(_i),bitwiseOperator:ye(_i),compareOperator:ye(_i),updateOperator:ye(_i),definitionOperator:ye(_i),typeOperator:ye(_i),controlOperator:ye(_i),punctuation:vy,separator:ye(vy),bracket:uu,angleBracket:ye(uu),squareBracket:ye(uu),paren:ye(uu),brace:ye(uu),content:Xi,heading:ml,heading1:ye(ml),heading2:ye(ml),heading3:ye(ml),heading4:ye(ml),heading5:ye(ml),heading6:ye(ml),contentSeparator:ye(Xi),list:ye(Xi),quote:ye(Xi),emphasis:ye(Xi),strong:ye(Xi),link:ye(Xi),monospace:ye(Xi),strikethrough:ye(Xi),inserted:ye(),deleted:ye(),changed:ye(),invalid:ye(),meta:tf,documentMeta:ye(tf),annotation:ye(tf),processingInstruction:ye(tf),definition:_r.defineModifier("definition"),constant:_r.defineModifier("constant"),function:_r.defineModifier("function"),standard:_r.defineModifier("standard"),local:_r.defineModifier("local"),special:_r.defineModifier("special")};for(let i in we){let e=we[i];e instanceof _r&&(e.name=i)}VA([{tag:we.link,class:"tok-link"},{tag:we.heading,class:"tok-heading"},{tag:we.emphasis,class:"tok-emphasis"},{tag:we.strong,class:"tok-strong"},{tag:we.keyword,class:"tok-keyword"},{tag:we.atom,class:"tok-atom"},{tag:we.bool,class:"tok-bool"},{tag:we.url,class:"tok-url"},{tag:we.labelName,class:"tok-labelName"},{tag:we.inserted,class:"tok-inserted"},{tag:we.deleted,class:"tok-deleted"},{tag:we.literal,class:"tok-literal"},{tag:we.string,class:"tok-string"},{tag:we.number,class:"tok-number"},{tag:[we.regexp,we.escape,we.special(we.string)],class:"tok-string2"},{tag:we.variableName,class:"tok-variableName"},{tag:we.local(we.variableName),class:"tok-variableName tok-local"},{tag:we.definition(we.variableName),class:"tok-variableName tok-definition"},{tag:we.special(we.variableName),class:"tok-variableName2"},{tag:we.definition(we.propertyName),class:"tok-propertyName tok-definition"},{tag:we.typeName,class:"tok-typeName"},{tag:we.namespace,class:"tok-namespace"},{tag:we.className,class:"tok-className"},{tag:we.macroName,class:"tok-macroName"},{tag:we.propertyName,class:"tok-propertyName"},{tag:we.operator,class:"tok-operator"},{tag:we.comment,class:"tok-comment"},{tag:we.meta,class:"tok-meta"},{tag:we.invalid,class:"tok-invalid"},{tag:we.punctuation,class:"tok-punctuation"}]);var Lg;const xu=new Ie,m4=new Ie;let Ki=class{constructor(e,t,n=[],r=""){this.data=e,this.name=r,qe.prototype.hasOwnProperty("tree")||Object.defineProperty(qe.prototype,"tree",{get(){return vn(this)}}),this.parser=t,this.extension=[Us.of(this),qe.languageData.of((l,o,u)=>{let h=Pw(l,o,u),d=h.type.prop(xu);if(!d)return[];let p=l.facet(d),g=h.type.prop(m4);if(g){let O=h.resolve(o-h.from,u);for(let b of g)if(b.test(O,l)){let v=l.facet(b.facet);return b.type=="replace"?v:v.concat(p)}}return p})].concat(n)}isActiveAt(e,t,n=-1){return Pw(e,t,n).type.prop(xu)==this.data}findRegions(e){let t=e.facet(Us);if(t?.data==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let n=[],r=(l,o)=>{if(l.prop(xu)==this.data){n.push({from:o,to:o+l.length});return}let u=l.prop(Ie.mounted);if(u){if(u.tree.prop(xu)==this.data){if(u.overlay)for(let h of u.overlay)n.push({from:h.from+o,to:h.to+o});else n.push({from:o,to:o+l.length});return}else if(u.overlay){let h=n.length;if(r(u.tree,u.overlay[0].from+o),n.length>h)return}}for(let h=0;h<l.children.length;h++){let d=l.children[h];d instanceof Fn&&r(d,l.positions[h]+o)}};return r(vn(e),0),n}get allowsNesting(){return!0}};Ki.setState=Be.define();function Pw(i,e,t){let n=i.facet(Us),r=vn(i).topNode;if(!n||n.allowsNesting)for(let l=r;l;l=l.enter(e,t,ln.ExcludeBuffers))l.type.isTop&&(r=l);return r}function vn(i){let e=i.field(Ki.state,!1);return e?e.tree:Fn.empty}let g4=class{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let n=this.cursorPos-this.string.length;return e<n||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-n,t-n)}},cu=null,y4=class Sy{constructor(e,t,n=[],r,l,o,u,h){this.parser=e,this.state=t,this.fragments=n,this.tree=r,this.treeLen=l,this.viewport=o,this.skipped=u,this.scheduleOn=h,this.parse=null,this.tempSkipped=[]}static create(e,t,n){return new Sy(e,t,[],Fn.empty,0,n,[],null)}startParse(){return this.parser.startParse(new g4(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=Fn.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var n;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(Lf.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(n=this.parse.stoppedAt)!==null&&n!==void 0?n:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Lf.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=cu;cu=this;try{return e()}finally{cu=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=Bw(e,t.from,t.to);return e}changes(e,t){let{fragments:n,tree:r,treeLen:l,viewport:o,skipped:u}=this;if(this.takeTree(),!e.empty){let h=[];if(e.iterChangedRanges((d,p,g,O)=>h.push({fromA:d,toA:p,fromB:g,toB:O})),n=Lf.applyChanges(n,h),r=Fn.empty,l=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){u=[];for(let d of this.skipped){let p=e.mapPos(d.from,1),g=e.mapPos(d.to,-1);p<g&&u.push({from:p,to:g})}}}return new Sy(this.parser,t,n,r,l,o,u,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let n=0;n<this.skipped.length;n++){let{from:r,to:l}=this.skipped[n];r<e.to&&l>e.from&&(this.fragments=Bw(this.fragments,r,l),this.skipped.splice(n--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends r4{createParse(t,n,r){let l=r[0].from,o=r[r.length-1].to;return{parsedPos:l,advance(){let h=cu;if(h){for(let d of r)h.tempSkipped.push(d);e&&(h.scheduleOn=h.scheduleOn?Promise.all([h.scheduleOn,e]):e)}return this.parsedPos=o,new Fn(ur.none,[],[],o-l)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return cu}};function Bw(i,e,t){return Lf.applyChanges(i,[{fromA:e,toA:t,fromB:e,toB:t}])}let xy=class wy{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,n)||t.takeTree(),new wy(t)}static init(e){let t=Math.min(3e3,e.doc.length),n=y4.create(e.facet(Us).parser,e,{from:0,to:t});return n.work(20,t)||n.takeTree(),new wy(n)}};Ki.state=Lt.define({create:xy.init,update(i,e){for(let t of e.effects)if(t.is(Ki.setState))return t.value;return e.startState.facet(Us)!=e.state.facet(Us)?xy.init(e.state):i.apply(e)}});let XA=i=>{let e=setTimeout(()=>i(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(XA=i=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(i,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const qg=typeof navigator<"u"&&(!((Lg=navigator.scheduling)===null||Lg===void 0)&&Lg.isInputPending)?()=>navigator.scheduling.isInputPending():null,O4=wt.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Ki.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Ki.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=XA(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:r}}=this.view,l=n.field(Ki.state);if(l.tree==l.context.tree&&l.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!qg?Math.max(25,e.timeRemaining()-5):1e9),u=l.context.treeLen<r&&n.doc.length>r+1e3,h=l.context.work(()=>qg&&qg()||Date.now()>o,r+(u?0:1e5));this.chunkBudget-=Date.now()-t,(h||this.chunkBudget<=0)&&(l.context.takeTree(),this.view.dispatch({effects:Ki.setState.of(new xy(l.context))})),this.chunkBudget>0&&!(h&&!u)&&this.scheduleWork(),this.checkAsyncSchedule(l.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>On(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Us=xe.define({combine(i){return i.length?i[0]:null},enables:i=>[Ki.state,O4,fe.contentAttributes.compute([i],e=>{let t=e.facet(i);return t&&t.name?{"data-language":t.name}:{}})]}),b4=xe.define(),jd=xe.define({combine:i=>{if(!i.length)return"  ";let e=i[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(i[0]));return e}});function ud(i){let e=i.facet(jd);return e.charCodeAt(0)==9?i.tabSize*e.length:e.length}function Xu(i,e){let t="",n=i.tabSize,r=i.facet(jd)[0];if(r=="	"){for(;e>=n;)t+="	",e-=n;r=" "}for(let l=0;l<e;l++)t+=r;return t}function DO(i,e){i instanceof qe&&(i=new Hd(i));for(let n of i.state.facet(b4)){let r=n(i,e);if(r!==void 0)return r}let t=vn(i.state);return t.length>=e?S4(i,t,e):null}class Hd{constructor(e,t={}){this.state=e,this.options=t,this.unit=ud(e)}lineAt(e,t=1){let n=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:l}=this.options;return r!=null&&r>=n.from&&r<=n.to?l&&r==e?{text:"",from:e}:(t<0?r<e:r<=e)?{text:n.text.slice(r-n.from),from:r}:{text:n.text.slice(0,r-n.from),from:n.from}:n}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:n,from:r}=this.lineAt(e,t);return n.slice(e-r,Math.min(n.length,e+100-r))}column(e,t=1){let{text:n,from:r}=this.lineAt(e,t),l=this.countColumn(n,e-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(l+=o-this.countColumn(n,n.search(/\S|$/))),l}countColumn(e,t=e.length){return Ql(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:n,from:r}=this.lineAt(e,t),l=this.options.overrideIndentation;if(l){let o=l(r);if(o>-1)return o}return this.countColumn(n,n.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const v4=new Ie;function S4(i,e,t){let n=e.resolveStack(t),r=e.resolveInner(t,-1).resolve(t,0).enterUnfinishedNodesBefore(t);if(r!=n.node){let l=[];for(let o=r;o&&!(o.from<n.node.from||o.to>n.node.to||o.from==n.node.from&&o.type==n.node.type);o=o.parent)l.push(o);for(let o=l.length-1;o>=0;o--)n={node:l[o],next:n}}return GA(n,i,t)}function GA(i,e,t){for(let n=i;n;n=n.next){let r=w4(n.node);if(r)return r(QO.create(e,t,n))}return 0}function x4(i){return i.pos==i.options.simulateBreak&&i.options.simulateDoubleBreak}function w4(i){let e=i.type.prop(v4);if(e)return e;let t=i.firstChild,n;if(t&&(n=t.type.prop(Ie.closedBy))){let r=i.lastChild,l=r&&n.indexOf(r.name)>-1;return o=>A4(o,!0,1,void 0,l&&!x4(o)?r.from:void 0)}return i.parent==null?k4:null}function k4(){return 0}class QO extends Hd{constructor(e,t,n){super(e.state,e.options),this.base=e,this.pos=t,this.context=n}get node(){return this.context.node}static create(e,t,n){return new QO(e,t,n)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let n=e.resolve(t.from);for(;n.parent&&n.parent.from==n.from;)n=n.parent;if(T4(n,e))break;t=this.state.doc.lineAt(n.from)}return this.lineIndent(t.from)}continue(){return GA(this.context.next,this.base,this.pos)}}function T4(i,e){for(let t=e;t;t=t.parent)if(i==t)return!0;return!1}function C4(i){let e=i.node,t=e.childAfter(e.from),n=e.lastChild;if(!t)return null;let r=i.options.simulateBreak,l=i.state.doc.lineAt(t.from),o=r==null||r<=l.from?l.to:Math.min(l.to,r);for(let u=t.to;;){let h=e.childAfter(u);if(!h||h==n)return null;if(!h.type.isSkipped){if(h.from>=o)return null;let d=/^ */.exec(l.text.slice(t.to-l.from))[0].length;return{from:t.from,to:t.to+d}}u=h.to}}function A4(i,e,t,n,r){let l=i.textAfter,o=l.match(/^\s*/)[0].length,u=n&&l.slice(o,o+n.length)==n||r==i.pos+o,h=C4(i);return h?u?i.column(h.from):i.column(h.to):i.baseIndent+(u?0:i.unit*t)}const E4=200;function R4(){return qe.transactionFilter.of(i=>{if(!i.docChanged||!i.isUserEvent("input.type")&&!i.isUserEvent("input.complete"))return i;let e=i.startState.languageDataAt("indentOnInput",i.startState.selection.main.head);if(!e.length)return i;let t=i.newDoc,{head:n}=i.newSelection.main,r=t.lineAt(n);if(n>r.from+E4)return i;let l=t.sliceString(r.from,n);if(!e.some(d=>d.test(l)))return i;let{state:o}=i,u=-1,h=[];for(let{head:d}of o.selection.ranges){let p=o.doc.lineAt(d);if(p.from==u)continue;u=p.from;let g=DO(o,p.from);if(g==null)continue;let O=/^\s*/.exec(p.text)[0],b=Xu(o,g);O!=b&&h.push({from:p.from,to:p.from+O.length,insert:b})}return h.length?[i,{changes:h,sequential:!0}]:i})}const N4=xe.define(),M4=new Ie;function D4(i,e,t){let n=vn(i);if(n.length<t)return null;let r=n.resolveStack(t,1),l=null;for(let o=r;o;o=o.next){let u=o.node;if(u.to<=t||u.from>t)continue;if(l&&u.from<e)break;let h=u.type.prop(M4);if(h&&(u.to<n.length-50||n.length==i.doc.length||!Q4(u))){let d=h(u,i);d&&d.from<=t&&d.from>=e&&d.to>t&&(l=d)}}return l}function Q4(i){let e=i.lastChild;return e&&e.to==i.to&&e.type.isError}function cd(i,e,t){for(let n of i.facet(N4)){let r=n(i,e,t);if(r)return r}return D4(i,e,t)}function WA(i,e){let t=e.mapPos(i.from,1),n=e.mapPos(i.to,-1);return t>=n?void 0:{from:t,to:n}}const Vd=Be.define({map:WA}),gc=Be.define({map:WA});function IA(i){let e=[];for(let{head:t}of i.state.selection.ranges)e.some(n=>n.from<=t&&n.to>=t)||e.push(i.lineBlockAt(t));return e}const Ml=Lt.define({create(){return Re.none},update(i,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((t,n)=>i=_w(i,t,n)),i=i.map(e.changes);for(let t of e.effects)if(t.is(Vd)&&!z4(i,t.value.from,t.value.to)){let{preparePlaceholder:n}=e.state.facet(ZA),r=n?Re.replace({widget:new U4(n(e.state,t.value))}):$w;i=i.update({add:[r.range(t.value.from,t.value.to)]})}else t.is(gc)&&(i=i.update({filter:(n,r)=>t.value.from!=n||t.value.to!=r,filterFrom:t.value.from,filterTo:t.value.to}));return e.selection&&(i=_w(i,e.selection.main.head)),i},provide:i=>fe.decorations.from(i),toJSON(i,e){let t=[];return i.between(0,e.doc.length,(n,r)=>{t.push(n,r)}),t},fromJSON(i){if(!Array.isArray(i)||i.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<i.length;){let n=i[t++],r=i[t++];if(typeof n!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");e.push($w.range(n,r))}return Re.set(e,!0)}});function _w(i,e,t=e){let n=!1;return i.between(e,t,(r,l)=>{r<t&&l>e&&(n=!0)}),n?i.update({filterFrom:e,filterTo:t,filter:(r,l)=>r>=t||l<=e}):i}function hd(i,e,t){var n;let r=null;return(n=i.field(Ml,!1))===null||n===void 0||n.between(e,t,(l,o)=>{(!r||r.from>l)&&(r={from:l,to:o})}),r}function z4(i,e,t){let n=!1;return i.between(e,e,(r,l)=>{r==e&&l==t&&(n=!0)}),n}function FA(i,e){return i.field(Ml,!1)?e:e.concat(Be.appendConfig.of(KA()))}const P4=i=>{for(let e of IA(i)){let t=cd(i.state,e.from,e.to);if(t)return i.dispatch({effects:FA(i.state,[Vd.of(t),YA(i,t)])}),!0}return!1},B4=i=>{if(!i.state.field(Ml,!1))return!1;let e=[];for(let t of IA(i)){let n=hd(i.state,t.from,t.to);n&&e.push(gc.of(n),YA(i,n,!1))}return e.length&&i.dispatch({effects:e}),e.length>0};function YA(i,e,t=!0){let n=i.state.doc.lineAt(e.from).number,r=i.state.doc.lineAt(e.to).number;return fe.announce.of(`${i.state.phrase(t?"Folded lines":"Unfolded lines")} ${n} ${i.state.phrase("to")} ${r}.`)}const _4=i=>{let{state:e}=i,t=[];for(let n=0;n<e.doc.length;){let r=i.lineBlockAt(n),l=cd(e,r.from,r.to);l&&t.push(Vd.of(l)),n=(l?i.lineBlockAt(l.to):r).to+1}return t.length&&i.dispatch({effects:FA(i.state,t)}),!!t.length},$4=i=>{let e=i.state.field(Ml,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,i.state.doc.length,(n,r)=>{t.push(gc.of({from:n,to:r}))}),i.dispatch({effects:t}),!0},L4=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:P4},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:B4},{key:"Ctrl-Alt-[",run:_4},{key:"Ctrl-Alt-]",run:$4}],q4={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},ZA=xe.define({combine(i){return fr(i,q4)}});function KA(i){return[Ml,V4]}function JA(i,e){let{state:t}=i,n=t.facet(ZA),r=o=>{let u=i.lineBlockAt(i.posAtDOM(o.target)),h=hd(i.state,u.from,u.to);h&&i.dispatch({effects:gc.of(h)}),o.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(i,r,e);let l=document.createElement("span");return l.textContent=n.placeholderText,l.setAttribute("aria-label",t.phrase("folded code")),l.title=t.phrase("unfold"),l.className="cm-foldPlaceholder",l.onclick=r,l}const $w=Re.replace({widget:new class extends dr{toDOM(i){return JA(i,null)}}});class U4 extends dr{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return JA(e,this.value)}}const j4={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class Ug extends Gr{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function H4(i={}){let e={...j4,...i},t=new Ug(e,!0),n=new Ug(e,!1),r=wt.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(Us)!=o.state.facet(Us)||o.startState.field(Ml,!1)!=o.state.field(Ml,!1)||vn(o.startState)!=vn(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let u=new lr;for(let h of o.viewportLineBlocks){let d=hd(o.state,h.from,h.to)?n:cd(o.state,h.from,h.to)?t:null;d&&u.add(h.from,h.from,d)}return u.finish()}}),{domEventHandlers:l}=e;return[r,x3({class:"cm-foldGutter",markers(o){var u;return((u=o.plugin(r))===null||u===void 0?void 0:u.markers)||Je.empty},initialSpacer(){return new Ug(e,!1)},domEventHandlers:{...l,click:(o,u,h)=>{if(l.click&&l.click(o,u,h))return!0;let d=hd(o.state,u.from,u.to);if(d)return o.dispatch({effects:gc.of(d)}),!0;let p=cd(o.state,u.from,u.to);return p?(o.dispatch({effects:Vd.of(p)}),!0):!1}}}),KA()]}const V4=fe.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});let e2=class t2{constructor(e,t){this.specs=e;let n;function r(u){let h=ar.newName();return(n||(n=Object.create(null)))["."+h]=u,h}const l=typeof t.all=="string"?t.all:t.all?r(t.all):void 0,o=t.scope;this.scope=o instanceof Ki?u=>u.prop(xu)==o.data:o?u=>u==o:void 0,this.style=VA(e.map(u=>({tag:u.tag,class:u.class||r(Object.assign({},u,{tag:null}))})),{all:l}).style,this.module=n?new ar(n):null,this.themeType=t.themeType}static define(e,t){return new t2(e,t||{})}};const ky=xe.define(),n2=xe.define({combine(i){return i.length?[i[0]]:null}});function jg(i){let e=i.facet(ky);return e.length?e:i.facet(n2)}function X4(i,e){let t=[W4],n;return i instanceof e2&&(i.module&&t.push(fe.styleModule.of(i.module)),n=i.themeType),e?.fallback?t.push(n2.of(i)):n?t.push(ky.computeN([fe.darkTheme],r=>r.facet(fe.darkTheme)==(n=="dark")?[i]:[])):t.push(ky.of(i)),t}let G4=class{constructor(e){this.markCache=Object.create(null),this.tree=vn(e.state),this.decorations=this.buildDeco(e,jg(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=vn(e.state),n=jg(e.state),r=n!=jg(e.startState),{viewport:l}=e.view,o=e.changes.mapPos(this.decoratedTo,1);t.length<l.to&&!r&&t.type==this.tree.type&&o>=l.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(t!=this.tree||e.viewportChanged||r)&&(this.tree=t,this.decorations=this.buildDeco(e.view,n),this.decoratedTo=l.to)}buildDeco(e,t){if(!t||!this.tree.length)return Re.none;let n=new lr;for(let{from:r,to:l}of e.visibleRanges)f4(this.tree,t,(o,u,h)=>{n.add(o,u,this.markCache[h]||(this.markCache[h]=Re.mark({class:h})))},r,l);return n.finish()}};const W4=Fr.high(wt.fromClass(G4,{decorations:i=>i.decorations})),I4=e2.define([{tag:we.meta,color:"#404740"},{tag:we.link,textDecoration:"underline"},{tag:we.heading,textDecoration:"underline",fontWeight:"bold"},{tag:we.emphasis,fontStyle:"italic"},{tag:we.strong,fontWeight:"bold"},{tag:we.strikethrough,textDecoration:"line-through"},{tag:we.keyword,color:"#708"},{tag:[we.atom,we.bool,we.url,we.contentSeparator,we.labelName],color:"#219"},{tag:[we.literal,we.inserted],color:"#164"},{tag:[we.string,we.deleted],color:"#a11"},{tag:[we.regexp,we.escape,we.special(we.string)],color:"#e40"},{tag:we.definition(we.variableName),color:"#00f"},{tag:we.local(we.variableName),color:"#30a"},{tag:[we.typeName,we.namespace],color:"#085"},{tag:we.className,color:"#167"},{tag:[we.special(we.variableName),we.macroName],color:"#256"},{tag:we.definition(we.propertyName),color:"#00c"},{tag:we.comment,color:"#940"},{tag:we.invalid,color:"#f00"}]),F4=fe.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),i2=1e4,r2="()[]{}",s2=xe.define({combine(i){return fr(i,{afterCursor:!0,brackets:r2,maxScanDistance:i2,renderMatch:K4})}}),Y4=Re.mark({class:"cm-matchingBracket"}),Z4=Re.mark({class:"cm-nonmatchingBracket"});function K4(i){let e=[],t=i.matched?Y4:Z4;return e.push(t.range(i.start.from,i.start.to)),i.end&&e.push(t.range(i.end.from,i.end.to)),e}const J4=Lt.define({create(){return Re.none},update(i,e){if(!e.docChanged&&!e.selection)return i;let t=[],n=e.state.facet(s2);for(let r of e.state.selection.ranges){if(!r.empty)continue;let l=Ji(e.state,r.head,-1,n)||r.head>0&&Ji(e.state,r.head-1,1,n)||n.afterCursor&&(Ji(e.state,r.head,1,n)||r.head<e.state.doc.length&&Ji(e.state,r.head+1,-1,n));l&&(t=t.concat(n.renderMatch(l,e.state)))}return Re.set(t,!0)},provide:i=>fe.decorations.from(i)}),e_=[J4,F4];function t_(i={}){return[s2.of(i),e_]}const n_=new Ie;function Ty(i,e,t){let n=i.prop(e<0?Ie.openedBy:Ie.closedBy);if(n)return n;if(i.name.length==1){let r=t.indexOf(i.name);if(r>-1&&r%2==(e<0?1:0))return[t[r+e]]}return null}function Cy(i){let e=i.type.prop(n_);return e?e(i.node):i}function Ji(i,e,t,n={}){let r=n.maxScanDistance||i2,l=n.brackets||r2,o=vn(i),u=o.resolveInner(e,t);for(let h=u;h;h=h.parent){let d=Ty(h.type,t,l);if(d&&h.from<h.to){let p=Cy(h);if(p&&(t>0?e>=p.from&&e<p.to:e>p.from&&e<=p.to))return i_(i,e,t,h,p,d,l)}}return r_(i,e,t,o,u.type,r,l)}function i_(i,e,t,n,r,l,o){let u=n.parent,h={from:r.from,to:r.to},d=0,p=u?.cursor();if(p&&(t<0?p.childBefore(n.from):p.childAfter(n.to)))do if(t<0?p.to<=n.from:p.from>=n.to){if(d==0&&l.indexOf(p.type.name)>-1&&p.from<p.to){let g=Cy(p);return{start:h,end:g?{from:g.from,to:g.to}:void 0,matched:!0}}else if(Ty(p.type,t,o))d++;else if(Ty(p.type,-t,o)){if(d==0){let g=Cy(p);return{start:h,end:g&&g.from<g.to?{from:g.from,to:g.to}:void 0,matched:!1}}d--}}while(t<0?p.prevSibling():p.nextSibling());return{start:h,matched:!1}}function r_(i,e,t,n,r,l,o){let u=t<0?i.sliceDoc(e-1,e):i.sliceDoc(e,e+1),h=o.indexOf(u);if(h<0||h%2==0!=t>0)return null;let d={from:t<0?e-1:e,to:t>0?e+1:e},p=i.doc.iterRange(e,t>0?i.doc.length:0),g=0;for(let O=0;!p.next().done&&O<=l;){let b=p.value;t<0&&(O+=b.length);let v=e+O*t;for(let x=t>0?0:b.length-1,w=t>0?b.length:-1;x!=w;x+=t){let T=o.indexOf(b[x]);if(!(T<0||n.resolveInner(v+x,1).type!=r))if(T%2==0==t>0)g++;else{if(g==1)return{start:d,end:{from:v+x,to:v+x+1},matched:T>>1==h>>1};g--}}t>0&&(O+=b.length)}return p.done?{start:d,matched:!1}:null}const s_=Object.create(null),Lw=[ur.none],qw=[],Uw=Object.create(null),l_=Object.create(null);for(let[i,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])l_[i]=a_(s_,e);function Hg(i,e){qw.indexOf(i)>-1||(qw.push(i),console.warn(e))}function a_(i,e){let t=[];for(let u of e.split(" ")){let h=[];for(let d of u.split(".")){let p=i[d]||we[d];p?typeof p=="function"?h.length?h=h.map(p):Hg(d,`Modifier ${d} used at start of tag`):h.length?Hg(d,`Tag ${d} used as modifier`):h=Array.isArray(p)?p:[p]:Hg(d,`Unknown highlighting tag ${d}`)}for(let d of h)t.push(d)}if(!t.length)return 0;let n=e.replace(/ /g,"_"),r=n+" "+t.map(u=>u.id),l=Uw[r];if(l)return l.id;let o=Uw[r]=ur.define({id:Lw.length,name:n,props:[c4({[n]:t})]});return Lw.push(o),o.id}st.RTL,st.LTR;const o_=i=>{let{state:e}=i,t=e.doc.lineAt(e.selection.main.from),n=PO(i.state,t.from);return n.line?u_(i):n.block?h_(i):!1};function zO(i,e){return({state:t,dispatch:n})=>{if(t.readOnly)return!1;let r=i(e,t);return r?(n(t.update(r)),!0):!1}}const u_=zO(p_,0),c_=zO(l2,0),h_=zO((i,e)=>l2(i,e,d_(e)),0);function PO(i,e){let t=i.languageDataAt("commentTokens",e,1);return t.length?t[0]:{}}const hu=50;function f_(i,{open:e,close:t},n,r){let l=i.sliceDoc(n-hu,n),o=i.sliceDoc(r,r+hu),u=/\s*$/.exec(l)[0].length,h=/^\s*/.exec(o)[0].length,d=l.length-u;if(l.slice(d-e.length,d)==e&&o.slice(h,h+t.length)==t)return{open:{pos:n-u,margin:u&&1},close:{pos:r+h,margin:h&&1}};let p,g;r-n<=2*hu?p=g=i.sliceDoc(n,r):(p=i.sliceDoc(n,n+hu),g=i.sliceDoc(r-hu,r));let O=/^\s*/.exec(p)[0].length,b=/\s*$/.exec(g)[0].length,v=g.length-b-t.length;return p.slice(O,O+e.length)==e&&g.slice(v,v+t.length)==t?{open:{pos:n+O+e.length,margin:/\s/.test(p.charAt(O+e.length))?1:0},close:{pos:r-b-t.length,margin:/\s/.test(g.charAt(v-1))?1:0}}:null}function d_(i){let e=[];for(let t of i.selection.ranges){let n=i.doc.lineAt(t.from),r=t.to<=n.to?n:i.doc.lineAt(t.to);r.from>n.from&&r.from==t.to&&(r=t.to==n.to+1?n:i.doc.lineAt(t.to-1));let l=e.length-1;l>=0&&e[l].to>n.from?e[l].to=r.to:e.push({from:n.from+/^\s*/.exec(n.text)[0].length,to:r.to})}return e}function l2(i,e,t=e.selection.ranges){let n=t.map(l=>PO(e,l.from).block);if(!n.every(l=>l))return null;let r=t.map((l,o)=>f_(e,n[o],l.from,l.to));if(i!=2&&!r.every(l=>l))return{changes:e.changes(t.map((l,o)=>r[o]?[]:[{from:l.from,insert:n[o].open+" "},{from:l.to,insert:" "+n[o].close}]))};if(i!=1&&r.some(l=>l)){let l=[];for(let o=0,u;o<r.length;o++)if(u=r[o]){let h=n[o],{open:d,close:p}=u;l.push({from:d.pos-h.open.length,to:d.pos+d.margin},{from:p.pos-p.margin,to:p.pos+h.close.length})}return{changes:l}}return null}function p_(i,e,t=e.selection.ranges){let n=[],r=-1;for(let{from:l,to:o}of t){let u=n.length,h=1e9,d=PO(e,l).line;if(d){for(let p=l;p<=o;){let g=e.doc.lineAt(p);if(g.from>r&&(l==o||o>g.from)){r=g.from;let O=/^\s*/.exec(g.text)[0].length,b=O==g.length,v=g.text.slice(O,O+d.length)==d?O:-1;O<g.text.length&&O<h&&(h=O),n.push({line:g,comment:v,token:d,indent:O,empty:b,single:!1})}p=g.to+1}if(h<1e9)for(let p=u;p<n.length;p++)n[p].indent<n[p].line.text.length&&(n[p].indent=h);n.length==u+1&&(n[u].single=!0)}}if(i!=2&&n.some(l=>l.comment<0&&(!l.empty||l.single))){let l=[];for(let{line:u,token:h,indent:d,empty:p,single:g}of n)(g||!p)&&l.push({from:u.from+d,insert:h+" "});let o=e.changes(l);return{changes:o,selection:e.selection.map(o,1)}}else if(i!=1&&n.some(l=>l.comment>=0)){let l=[];for(let{line:o,comment:u,token:h}of n)if(u>=0){let d=o.from+u,p=d+h.length;o.text[p-o.from]==" "&&p++,l.push({from:d,to:p})}return{changes:l}}return null}const Ay=ki.define(),m_=ki.define(),g_=xe.define(),a2=xe.define({combine(i){return fr(i,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(n,r)=>e(n,r)||t(n,r)})}}),o2=Lt.define({create(){return er.empty},update(i,e){let t=e.state.facet(a2),n=e.annotation(Ay);if(n){let h=zn.fromTransaction(e,n.selection),d=n.side,p=d==0?i.undone:i.done;return h?p=fd(p,p.length,t.minDepth,h):p=h2(p,e.startState.selection),new er(d==0?n.rest:p,d==0?p:n.rest)}let r=e.annotation(m_);if((r=="full"||r=="before")&&(i=i.isolate()),e.annotation($t.addToHistory)===!1)return e.changes.empty?i:i.addMapping(e.changes.desc);let l=zn.fromTransaction(e),o=e.annotation($t.time),u=e.annotation($t.userEvent);return l?i=i.addChanges(l,o,u,t,e):e.selection&&(i=i.addSelection(e.startState.selection,o,u,t.newGroupDelay)),(r=="full"||r=="after")&&(i=i.isolate()),i},toJSON(i){return{done:i.done.map(e=>e.toJSON()),undone:i.undone.map(e=>e.toJSON())}},fromJSON(i){return new er(i.done.map(zn.fromJSON),i.undone.map(zn.fromJSON))}});function y_(i={}){return[o2,a2.of(i),fe.domEventHandlers({beforeinput(e,t){let n=e.inputType=="historyUndo"?u2:e.inputType=="historyRedo"?Ey:null;return n?(e.preventDefault(),n(t)):!1}})]}function Xd(i,e){return function({state:t,dispatch:n}){if(!e&&t.readOnly)return!1;let r=t.field(o2,!1);if(!r)return!1;let l=r.pop(i,t,e);return l?(n(l),!0):!1}}const u2=Xd(0,!1),Ey=Xd(1,!1),O_=Xd(0,!0),b_=Xd(1,!0);class zn{constructor(e,t,n,r,l){this.changes=e,this.effects=t,this.mapped=n,this.startSelection=r,this.selectionsAfter=l}setSelAfter(e){return new zn(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,n;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(n=this.startSelection)===null||n===void 0?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(e){return new zn(e.changes&&Ht.fromJSON(e.changes),[],e.mapped&&rr.fromJSON(e.mapped),e.startSelection&&re.fromJSON(e.startSelection),e.selectionsAfter.map(re.fromJSON))}static fromTransaction(e,t){let n=ui;for(let r of e.startState.facet(g_)){let l=r(e);l.length&&(n=n.concat(l))}return!n.length&&e.changes.empty?null:new zn(e.changes.invert(e.startState.doc),n,void 0,t||e.startState.selection,ui)}static selection(e){return new zn(void 0,ui,void 0,void 0,e)}}function fd(i,e,t,n){let r=e+1>t+20?e-t-1:0,l=i.slice(r,e);return l.push(n),l}function v_(i,e){let t=[],n=!1;return i.iterChangedRanges((r,l)=>t.push(r,l)),e.iterChangedRanges((r,l,o,u)=>{for(let h=0;h<t.length;){let d=t[h++],p=t[h++];u>=d&&o<=p&&(n=!0)}}),n}function S_(i,e){return i.ranges.length==e.ranges.length&&i.ranges.filter((t,n)=>t.empty!=e.ranges[n].empty).length===0}function c2(i,e){return i.length?e.length?i.concat(e):i:e}const ui=[],x_=200;function h2(i,e){if(i.length){let t=i[i.length-1],n=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-x_));return n.length&&n[n.length-1].eq(e)?i:(n.push(e),fd(i,i.length-1,1e9,t.setSelAfter(n)))}else return[zn.selection([e])]}function w_(i){let e=i[i.length-1],t=i.slice();return t[i.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function Vg(i,e){if(!i.length)return i;let t=i.length,n=ui;for(;t;){let r=k_(i[t-1],e,n);if(r.changes&&!r.changes.empty||r.effects.length){let l=i.slice(0,t);return l[t-1]=r,l}else e=r.mapped,t--,n=r.selectionsAfter}return n.length?[zn.selection(n)]:ui}function k_(i,e,t){let n=c2(i.selectionsAfter.length?i.selectionsAfter.map(u=>u.map(e)):ui,t);if(!i.changes)return zn.selection(n);let r=i.changes.map(e),l=e.mapDesc(i.changes,!0),o=i.mapped?i.mapped.composeDesc(l):l;return new zn(r,Be.mapEffects(i.effects,e),o,i.startSelection.map(l),n)}const T_=/^(input\.type|delete)($|\.)/;class er{constructor(e,t,n=0,r=void 0){this.done=e,this.undone=t,this.prevTime=n,this.prevUserEvent=r}isolate(){return this.prevTime?new er(this.done,this.undone):this}addChanges(e,t,n,r,l){let o=this.done,u=o[o.length-1];return u&&u.changes&&!u.changes.empty&&e.changes&&(!n||T_.test(n))&&(!u.selectionsAfter.length&&t-this.prevTime<r.newGroupDelay&&r.joinToEvent(l,v_(u.changes,e.changes))||n=="input.type.compose")?o=fd(o,o.length-1,r.minDepth,new zn(e.changes.compose(u.changes),c2(Be.mapEffects(e.effects,u.changes),u.effects),u.mapped,u.startSelection,ui)):o=fd(o,o.length,r.minDepth,e),new er(o,ui,t,n)}addSelection(e,t,n,r){let l=this.done.length?this.done[this.done.length-1].selectionsAfter:ui;return l.length>0&&t-this.prevTime<r&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&S_(l[l.length-1],e)?this:new er(h2(this.done,e),this.undone,t,n)}addMapping(e){return new er(Vg(this.done,e),Vg(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,n){let r=e==0?this.done:this.undone;if(r.length==0)return null;let l=r[r.length-1],o=l.selectionsAfter[0]||t.selection;if(n&&l.selectionsAfter.length)return t.update({selection:l.selectionsAfter[l.selectionsAfter.length-1],annotations:Ay.of({side:e,rest:w_(r),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(l.changes){let u=r.length==1?ui:r.slice(0,r.length-1);return l.mapped&&(u=Vg(u,l.mapped)),t.update({changes:l.changes,selection:l.startSelection,effects:l.effects,annotations:Ay.of({side:e,rest:u,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}er.empty=new er(ui,ui);const C_=[{key:"Mod-z",run:u2,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Ey,preventDefault:!0},{linux:"Ctrl-Shift-z",run:Ey,preventDefault:!0},{key:"Mod-u",run:O_,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:b_,preventDefault:!0}];function to(i,e){return re.create(i.ranges.map(e),i.mainIndex)}function pr(i,e){return i.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Ti({state:i,dispatch:e},t){let n=to(i.selection,t);return n.eq(i.selection,!0)?!1:(e(pr(i,n)),!0)}function Gd(i,e){return re.cursor(e?i.to:i.from)}function f2(i,e){return Ti(i,t=>t.empty?i.moveByChar(t,e):Gd(t,e))}function Sn(i){return i.textDirectionAt(i.state.selection.main.head)==st.LTR}const d2=i=>f2(i,!Sn(i)),p2=i=>f2(i,Sn(i));function m2(i,e){return Ti(i,t=>t.empty?i.moveByGroup(t,e):Gd(t,e))}const A_=i=>m2(i,!Sn(i)),E_=i=>m2(i,Sn(i));function R_(i,e,t){if(e.type.prop(t))return!0;let n=e.to-e.from;return n&&(n>2||/[^\s,.;:]/.test(i.sliceDoc(e.from,e.to)))||e.firstChild}function Wd(i,e,t){let n=vn(i).resolveInner(e.head),r=t?Ie.closedBy:Ie.openedBy;for(let h=e.head;;){let d=t?n.childAfter(h):n.childBefore(h);if(!d)break;R_(i,d,r)?n=d:h=t?d.to:d.from}let l=n.type.prop(r),o,u;return l&&(o=t?Ji(i,n.from,1):Ji(i,n.to,-1))&&o.matched?u=t?o.end.to:o.end.from:u=t?n.to:n.from,re.cursor(u,t?-1:1)}const N_=i=>Ti(i,e=>Wd(i.state,e,!Sn(i))),M_=i=>Ti(i,e=>Wd(i.state,e,Sn(i)));function g2(i,e){return Ti(i,t=>{if(!t.empty)return Gd(t,e);let n=i.moveVertically(t,e);return n.head!=t.head?n:i.moveToLineBoundary(t,e)})}const y2=i=>g2(i,!1),O2=i=>g2(i,!0);function b2(i){let e=i.scrollDOM.clientHeight<i.scrollDOM.scrollHeight-2,t=0,n=0,r;if(e){for(let l of i.state.facet(fe.scrollMargins)){let o=l(i);o?.top&&(t=Math.max(o?.top,t)),o?.bottom&&(n=Math.max(o?.bottom,n))}r=i.scrollDOM.clientHeight-t-n}else r=(i.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:n,selfScroll:e,height:Math.max(i.defaultLineHeight,r-5)}}function v2(i,e){let t=b2(i),{state:n}=i,r=to(n.selection,o=>o.empty?i.moveVertically(o,e,t.height):Gd(o,e));if(r.eq(n.selection))return!1;let l;if(t.selfScroll){let o=i.coordsAtPos(n.selection.main.head),u=i.scrollDOM.getBoundingClientRect(),h=u.top+t.marginTop,d=u.bottom-t.marginBottom;o&&o.top>h&&o.bottom<d&&(l=fe.scrollIntoView(r.main.head,{y:"start",yMargin:o.top-h}))}return i.dispatch(pr(n,r),{effects:l}),!0}const jw=i=>v2(i,!1),Ry=i=>v2(i,!0);function Gs(i,e,t){let n=i.lineBlockAt(e.head),r=i.moveToLineBoundary(e,t);if(r.head==e.head&&r.head!=(t?n.to:n.from)&&(r=i.moveToLineBoundary(e,t,!1)),!t&&r.head==n.from&&n.length){let l=/^\s*/.exec(i.state.sliceDoc(n.from,Math.min(n.from+100,n.to)))[0].length;l&&e.head!=n.from+l&&(r=re.cursor(n.from+l))}return r}const D_=i=>Ti(i,e=>Gs(i,e,!0)),Q_=i=>Ti(i,e=>Gs(i,e,!1)),z_=i=>Ti(i,e=>Gs(i,e,!Sn(i))),P_=i=>Ti(i,e=>Gs(i,e,Sn(i))),B_=i=>Ti(i,e=>re.cursor(i.lineBlockAt(e.head).from,1)),__=i=>Ti(i,e=>re.cursor(i.lineBlockAt(e.head).to,-1));function $_(i,e,t){let n=!1,r=to(i.selection,l=>{let o=Ji(i,l.head,-1)||Ji(i,l.head,1)||l.head>0&&Ji(i,l.head-1,1)||l.head<i.doc.length&&Ji(i,l.head+1,-1);if(!o||!o.end)return l;n=!0;let u=o.start.from==l.head?o.end.to:o.end.from;return re.cursor(u)});return n?(e(pr(i,r)),!0):!1}const L_=({state:i,dispatch:e})=>$_(i,e);function pi(i,e){let t=to(i.state.selection,n=>{let r=e(n);return re.range(n.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return t.eq(i.state.selection)?!1:(i.dispatch(pr(i.state,t)),!0)}function S2(i,e){return pi(i,t=>i.moveByChar(t,e))}const x2=i=>S2(i,!Sn(i)),w2=i=>S2(i,Sn(i));function k2(i,e){return pi(i,t=>i.moveByGroup(t,e))}const q_=i=>k2(i,!Sn(i)),U_=i=>k2(i,Sn(i)),j_=i=>pi(i,e=>Wd(i.state,e,!Sn(i))),H_=i=>pi(i,e=>Wd(i.state,e,Sn(i)));function T2(i,e){return pi(i,t=>i.moveVertically(t,e))}const C2=i=>T2(i,!1),A2=i=>T2(i,!0);function E2(i,e){return pi(i,t=>i.moveVertically(t,e,b2(i).height))}const Hw=i=>E2(i,!1),Vw=i=>E2(i,!0),V_=i=>pi(i,e=>Gs(i,e,!0)),X_=i=>pi(i,e=>Gs(i,e,!1)),G_=i=>pi(i,e=>Gs(i,e,!Sn(i))),W_=i=>pi(i,e=>Gs(i,e,Sn(i))),I_=i=>pi(i,e=>re.cursor(i.lineBlockAt(e.head).from)),F_=i=>pi(i,e=>re.cursor(i.lineBlockAt(e.head).to)),Xw=({state:i,dispatch:e})=>(e(pr(i,{anchor:0})),!0),Gw=({state:i,dispatch:e})=>(e(pr(i,{anchor:i.doc.length})),!0),Ww=({state:i,dispatch:e})=>(e(pr(i,{anchor:i.selection.main.anchor,head:0})),!0),Iw=({state:i,dispatch:e})=>(e(pr(i,{anchor:i.selection.main.anchor,head:i.doc.length})),!0),Y_=({state:i,dispatch:e})=>(e(i.update({selection:{anchor:0,head:i.doc.length},userEvent:"select"})),!0),Z_=({state:i,dispatch:e})=>{let t=Id(i).map(({from:n,to:r})=>re.range(n,Math.min(r+1,i.doc.length)));return e(i.update({selection:re.create(t),userEvent:"select"})),!0},K_=({state:i,dispatch:e})=>{let t=to(i.selection,n=>{let r=vn(i),l=r.resolveStack(n.from,1);if(n.empty){let o=r.resolveStack(n.from,-1);o.node.from>=l.node.from&&o.node.to<=l.node.to&&(l=o)}for(let o=l;o;o=o.next){let{node:u}=o;if((u.from<n.from&&u.to>=n.to||u.to>n.to&&u.from<=n.from)&&o.next)return re.range(u.to,u.from)}return n});return t.eq(i.selection)?!1:(e(pr(i,t)),!0)},J_=({state:i,dispatch:e})=>{let t=i.selection,n=null;return t.ranges.length>1?n=re.create([t.main]):t.main.empty||(n=re.create([re.cursor(t.main.head)])),n?(e(pr(i,n)),!0):!1};function yc(i,e){if(i.state.readOnly)return!1;let t="delete.selection",{state:n}=i,r=n.changeByRange(l=>{let{from:o,to:u}=l;if(o==u){let h=e(l);h<o?(t="delete.backward",h=nf(i,h,!1)):h>o&&(t="delete.forward",h=nf(i,h,!0)),o=Math.min(o,h),u=Math.max(u,h)}else o=nf(i,o,!1),u=nf(i,u,!0);return o==u?{range:l}:{changes:{from:o,to:u},range:re.cursor(o,o<l.head?-1:1)}});return r.changes.empty?!1:(i.dispatch(n.update(r,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?fe.announce.of(n.phrase("Selection deleted")):void 0})),!0)}function nf(i,e,t){if(i instanceof fe)for(let n of i.state.facet(fe.atomicRanges).map(r=>r(i)))n.between(e,e,(r,l)=>{r<e&&l>e&&(e=t?l:r)});return e}const R2=(i,e,t)=>yc(i,n=>{let r=n.from,{state:l}=i,o=l.doc.lineAt(r),u,h;if(t&&!e&&r>o.from&&r<o.from+200&&!/[^ \t]/.test(u=o.text.slice(0,r-o.from))){if(u[u.length-1]=="	")return r-1;let d=Ql(u,l.tabSize),p=d%ud(l)||ud(l);for(let g=0;g<p&&u[u.length-1-g]==" ";g++)r--;h=r}else h=cn(o.text,r-o.from,e,e)+o.from,h==r&&o.number!=(e?l.doc.lines:1)?h+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(h-o.from,r-o.from))&&(h=cn(o.text,h-o.from,!1,!1)+o.from);return h}),Ny=i=>R2(i,!1,!0),N2=i=>R2(i,!0,!1),M2=(i,e)=>yc(i,t=>{let n=t.head,{state:r}=i,l=r.doc.lineAt(n),o=r.charCategorizer(n);for(let u=null;;){if(n==(e?l.to:l.from)){n==t.head&&l.number!=(e?r.doc.lines:1)&&(n+=e?1:-1);break}let h=cn(l.text,n-l.from,e)+l.from,d=l.text.slice(Math.min(n,h)-l.from,Math.max(n,h)-l.from),p=o(d);if(u!=null&&p!=u)break;(d!=" "||n!=t.head)&&(u=p),n=h}return n}),D2=i=>M2(i,!1),e5=i=>M2(i,!0),t5=i=>yc(i,e=>{let t=i.lineBlockAt(e.head).to;return e.head<t?t:Math.min(i.state.doc.length,e.head+1)}),n5=i=>yc(i,e=>{let t=i.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),i5=i=>yc(i,e=>{let t=i.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(i.state.doc.length,e.head+1)}),r5=({state:i,dispatch:e})=>{if(i.readOnly)return!1;let t=i.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:Ze.of(["",""])},range:re.cursor(n.from)}));return e(i.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},s5=({state:i,dispatch:e})=>{if(i.readOnly)return!1;let t=i.changeByRange(n=>{if(!n.empty||n.from==0||n.from==i.doc.length)return{range:n};let r=n.from,l=i.doc.lineAt(r),o=r==l.from?r-1:cn(l.text,r-l.from,!1)+l.from,u=r==l.to?r+1:cn(l.text,r-l.from,!0)+l.from;return{changes:{from:o,to:u,insert:i.doc.slice(r,u).append(i.doc.slice(o,r))},range:re.cursor(u)}});return t.changes.empty?!1:(e(i.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Id(i){let e=[],t=-1;for(let n of i.selection.ranges){let r=i.doc.lineAt(n.from),l=i.doc.lineAt(n.to);if(!n.empty&&n.to==l.from&&(l=i.doc.lineAt(n.to-1)),t>=r.number){let o=e[e.length-1];o.to=l.to,o.ranges.push(n)}else e.push({from:r.from,to:l.to,ranges:[n]});t=l.number+1}return e}function Q2(i,e,t){if(i.readOnly)return!1;let n=[],r=[];for(let l of Id(i)){if(t?l.to==i.doc.length:l.from==0)continue;let o=i.doc.lineAt(t?l.to+1:l.from-1),u=o.length+1;if(t){n.push({from:l.to,to:o.to},{from:l.from,insert:o.text+i.lineBreak});for(let h of l.ranges)r.push(re.range(Math.min(i.doc.length,h.anchor+u),Math.min(i.doc.length,h.head+u)))}else{n.push({from:o.from,to:l.from},{from:l.to,insert:i.lineBreak+o.text});for(let h of l.ranges)r.push(re.range(h.anchor-u,h.head-u))}}return n.length?(e(i.update({changes:n,scrollIntoView:!0,selection:re.create(r,i.selection.mainIndex),userEvent:"move.line"})),!0):!1}const l5=({state:i,dispatch:e})=>Q2(i,e,!1),a5=({state:i,dispatch:e})=>Q2(i,e,!0);function z2(i,e,t){if(i.readOnly)return!1;let n=[];for(let r of Id(i))t?n.push({from:r.from,insert:i.doc.slice(r.from,r.to)+i.lineBreak}):n.push({from:r.to,insert:i.lineBreak+i.doc.slice(r.from,r.to)});return e(i.update({changes:n,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const o5=({state:i,dispatch:e})=>z2(i,e,!1),u5=({state:i,dispatch:e})=>z2(i,e,!0),c5=i=>{if(i.state.readOnly)return!1;let{state:e}=i,t=e.changes(Id(e).map(({from:r,to:l})=>(r>0?r--:l<e.doc.length&&l++,{from:r,to:l}))),n=to(e.selection,r=>{let l;if(i.lineWrapping){let o=i.lineBlockAt(r.head),u=i.coordsAtPos(r.head,r.assoc||1);u&&(l=o.bottom+i.documentTop-u.bottom+i.defaultLineHeight/2)}return i.moveVertically(r,!0,l)}).map(t);return i.dispatch({changes:t,selection:n,scrollIntoView:!0,userEvent:"delete.line"}),!0};function h5(i,e){if(/\(\)|\[\]|\{\}/.test(i.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=vn(i).resolveInner(e),n=t.childBefore(e),r=t.childAfter(e),l;return n&&r&&n.to<=e&&r.from>=e&&(l=n.type.prop(Ie.closedBy))&&l.indexOf(r.name)>-1&&i.doc.lineAt(n.to).from==i.doc.lineAt(r.from).from&&!/\S/.test(i.sliceDoc(n.to,r.from))?{from:n.to,to:r.from}:null}const Fw=P2(!1),f5=P2(!0);function P2(i){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange(r=>{let{from:l,to:o}=r,u=e.doc.lineAt(l),h=!i&&l==o&&h5(e,l);i&&(l=o=(o<=u.to?u:e.doc.lineAt(o)).to);let d=new Hd(e,{simulateBreak:l,simulateDoubleBreak:!!h}),p=DO(d,l);for(p==null&&(p=Ql(/^\s*/.exec(e.doc.lineAt(l).text)[0],e.tabSize));o<u.to&&/\s/.test(u.text[o-u.from]);)o++;h?{from:l,to:o}=h:l>u.from&&l<u.from+100&&!/\S/.test(u.text.slice(0,l))&&(l=u.from);let g=["",Xu(e,p)];return h&&g.push(Xu(e,d.lineIndent(u.from,-1))),{changes:{from:l,to:o,insert:Ze.of(g)},range:re.cursor(l+1+g[1].length)}});return t(e.update(n,{scrollIntoView:!0,userEvent:"input"})),!0}}function BO(i,e){let t=-1;return i.changeByRange(n=>{let r=[];for(let o=n.from;o<=n.to;){let u=i.doc.lineAt(o);u.number>t&&(n.empty||n.to>u.from)&&(e(u,r,n),t=u.number),o=u.to+1}let l=i.changes(r);return{changes:r,range:re.range(l.mapPos(n.anchor,1),l.mapPos(n.head,1))}})}const d5=({state:i,dispatch:e})=>{if(i.readOnly)return!1;let t=Object.create(null),n=new Hd(i,{overrideIndentation:l=>{let o=t[l];return o??-1}}),r=BO(i,(l,o,u)=>{let h=DO(n,l.from);if(h==null)return;/\S/.test(l.text)||(h=0);let d=/^\s*/.exec(l.text)[0],p=Xu(i,h);(d!=p||u.from<l.from+d.length)&&(t[l.from]=h,o.push({from:l.from,to:l.from+d.length,insert:p}))});return r.changes.empty||e(i.update(r,{userEvent:"indent"})),!0},p5=({state:i,dispatch:e})=>i.readOnly?!1:(e(i.update(BO(i,(t,n)=>{n.push({from:t.from,insert:i.facet(jd)})}),{userEvent:"input.indent"})),!0),m5=({state:i,dispatch:e})=>i.readOnly?!1:(e(i.update(BO(i,(t,n)=>{let r=/^\s*/.exec(t.text)[0];if(!r)return;let l=Ql(r,i.tabSize),o=0,u=Xu(i,Math.max(0,l-ud(i)));for(;o<r.length&&o<u.length&&r.charCodeAt(o)==u.charCodeAt(o);)o++;n.push({from:t.from+o,to:t.from+r.length,insert:u.slice(o)})}),{userEvent:"delete.dedent"})),!0),g5=i=>(i.setTabFocusMode(),!0),y5=[{key:"Ctrl-b",run:d2,shift:x2,preventDefault:!0},{key:"Ctrl-f",run:p2,shift:w2},{key:"Ctrl-p",run:y2,shift:C2},{key:"Ctrl-n",run:O2,shift:A2},{key:"Ctrl-a",run:B_,shift:I_},{key:"Ctrl-e",run:__,shift:F_},{key:"Ctrl-d",run:N2},{key:"Ctrl-h",run:Ny},{key:"Ctrl-k",run:t5},{key:"Ctrl-Alt-h",run:D2},{key:"Ctrl-o",run:r5},{key:"Ctrl-t",run:s5},{key:"Ctrl-v",run:Ry}],O5=[{key:"ArrowLeft",run:d2,shift:x2,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:A_,shift:q_,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:z_,shift:G_,preventDefault:!0},{key:"ArrowRight",run:p2,shift:w2,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:E_,shift:U_,preventDefault:!0},{mac:"Cmd-ArrowRight",run:P_,shift:W_,preventDefault:!0},{key:"ArrowUp",run:y2,shift:C2,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Xw,shift:Ww},{mac:"Ctrl-ArrowUp",run:jw,shift:Hw},{key:"ArrowDown",run:O2,shift:A2,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Gw,shift:Iw},{mac:"Ctrl-ArrowDown",run:Ry,shift:Vw},{key:"PageUp",run:jw,shift:Hw},{key:"PageDown",run:Ry,shift:Vw},{key:"Home",run:Q_,shift:X_,preventDefault:!0},{key:"Mod-Home",run:Xw,shift:Ww},{key:"End",run:D_,shift:V_,preventDefault:!0},{key:"Mod-End",run:Gw,shift:Iw},{key:"Enter",run:Fw,shift:Fw},{key:"Mod-a",run:Y_},{key:"Backspace",run:Ny,shift:Ny},{key:"Delete",run:N2},{key:"Mod-Backspace",mac:"Alt-Backspace",run:D2},{key:"Mod-Delete",mac:"Alt-Delete",run:e5},{mac:"Mod-Backspace",run:n5},{mac:"Mod-Delete",run:i5}].concat(y5.map(i=>({mac:i.key,run:i.run,shift:i.shift}))),b5=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:N_,shift:j_},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:M_,shift:H_},{key:"Alt-ArrowUp",run:l5},{key:"Shift-Alt-ArrowUp",run:o5},{key:"Alt-ArrowDown",run:a5},{key:"Shift-Alt-ArrowDown",run:u5},{key:"Escape",run:J_},{key:"Mod-Enter",run:f5},{key:"Alt-l",mac:"Ctrl-l",run:Z_},{key:"Mod-i",run:K_,preventDefault:!0},{key:"Mod-[",run:m5},{key:"Mod-]",run:p5},{key:"Mod-Alt-\\",run:d5},{key:"Shift-Mod-k",run:c5},{key:"Shift-Mod-\\",run:L_},{key:"Mod-/",run:o_},{key:"Alt-A",run:c_},{key:"Ctrl-m",mac:"Shift-Alt-m",run:g5}].concat(O5),Yw=typeof String.prototype.normalize=="function"?i=>i.normalize("NFKD"):i=>i;class Ha{constructor(e,t,n=0,r=e.length,l,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(n,r),this.bufferStart=n,this.normalize=l?u=>l(Yw(u)):Yw,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Mn(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=dO(e),n=this.bufferStart+this.bufferPos;this.bufferPos+=Yi(e);let r=this.normalize(t);if(r.length)for(let l=0,o=n;;l++){let u=r.charCodeAt(l),h=this.match(u,o,this.bufferPos+this.bufferStart);if(l==r.length-1){if(h)return this.value=h,this;break}o==n&&l<t.length&&t.charCodeAt(l)==u&&o++}}}match(e,t,n){let r=null;for(let l=0;l<this.matches.length;l+=2){let o=this.matches[l],u=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?r={from:this.matches[l+1],to:n}:(this.matches[l]++,u=!0)),u||(this.matches.splice(l,2),l-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?r={from:t,to:n}:this.matches.push(1,t)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferStart)&&(r=null),r}}typeof Symbol<"u"&&(Ha.prototype[Symbol.iterator]=function(){return this});const B2={from:-1,to:-1,match:/.*/.exec("")},_O="gm"+(/x/.unicode==null?"":"u");class _2{constructor(e,t,n,r=0,l=e.length){if(this.text=e,this.to=l,this.curLine="",this.done=!1,this.value=B2,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new $2(e,t,n,r,l);this.re=new RegExp(t,_O+(n?.ignoreCase?"i":"")),this.test=n?.test,this.iter=e.iter();let o=e.lineAt(r);this.curLineStart=o.from,this.matchPos=dd(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let n=this.curLineStart+t.index,r=n+t[0].length;if(this.matchPos=dd(this.text,r+(n==r?1:0)),n==this.curLineStart+this.curLine.length&&this.nextLine(),(n<r||n>this.value.to)&&(!this.test||this.test(n,r,t)))return this.value={from:n,to:r,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const Xg=new WeakMap;class za{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,n){let r=Xg.get(e);if(!r||r.from>=n||r.to<=t){let u=new za(t,e.sliceString(t,n));return Xg.set(e,u),u}if(r.from==t&&r.to==n)return r;let{text:l,from:o}=r;return o>t&&(l=e.sliceString(t,o)+l,o=t),r.to<n&&(l+=e.sliceString(r.to,n)),Xg.set(e,new za(o,l)),new za(t,l.slice(t-o,n-o))}}class $2{constructor(e,t,n,r,l){this.text=e,this.to=l,this.done=!1,this.value=B2,this.matchPos=dd(e,r),this.re=new RegExp(t,_O+(n?.ignoreCase?"i":"")),this.test=n?.test,this.flat=za.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let n=this.flat.from+t.index,r=n+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(n,r,t)))return this.value={from:n,to:r,match:t},this.matchPos=dd(this.text,r+(n==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=za.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(_2.prototype[Symbol.iterator]=$2.prototype[Symbol.iterator]=function(){return this});function v5(i){try{return new RegExp(i,_O),!0}catch{return!1}}function dd(i,e){if(e>=i.length)return e;let t=i.lineAt(e),n;for(;e<t.to&&(n=t.text.charCodeAt(e-t.from))>=56320&&n<57344;)e++;return e}function My(i){let e=String(i.state.doc.lineAt(i.state.selection.main.head).number),t=dt("input",{class:"cm-textfield",name:"line",value:e}),n=dt("form",{class:"cm-gotoLine",onkeydown:l=>{l.keyCode==27?(l.preventDefault(),i.dispatch({effects:Du.of(!1)}),i.focus()):l.keyCode==13&&(l.preventDefault(),r())},onsubmit:l=>{l.preventDefault(),r()}},dt("label",i.state.phrase("Go to line"),": ",t)," ",dt("button",{class:"cm-button",type:"submit"},i.state.phrase("go")),dt("button",{name:"close",onclick:()=>{i.dispatch({effects:Du.of(!1)}),i.focus()},"aria-label":i.state.phrase("close"),type:"button"},[""]));function r(){let l=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!l)return;let{state:o}=i,u=o.doc.lineAt(o.selection.main.head),[,h,d,p,g]=l,O=p?+p.slice(1):0,b=d?+d:u.number;if(d&&g){let w=b/100;h&&(w=w*(h=="-"?-1:1)+u.number/o.doc.lines),b=Math.round(o.doc.lines*w)}else d&&h&&(b=b*(h=="-"?-1:1)+u.number);let v=o.doc.line(Math.max(1,Math.min(o.doc.lines,b))),x=re.cursor(v.from+Math.max(0,Math.min(O,v.length)));i.dispatch({effects:[Du.of(!1),fe.scrollIntoView(x.from,{y:"center"})],selection:x}),i.focus()}return{dom:n}}const Du=Be.define(),Zw=Lt.define({create(){return!0},update(i,e){for(let t of e.effects)t.is(Du)&&(i=t.value);return i},provide:i=>ju.from(i,e=>e?My:null)}),S5=i=>{let e=Uu(i,My);if(!e){let t=[Du.of(!0)];i.state.field(Zw,!1)==null&&t.push(Be.appendConfig.of([Zw,x5])),i.dispatch({effects:t}),e=Uu(i,My)}return e&&e.dom.querySelector("input").select(),!0},x5=fe.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),w5={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},k5=xe.define({combine(i){return fr(i,w5,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function T5(i){return[N5,R5]}const C5=Re.mark({class:"cm-selectionMatch"}),A5=Re.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function Kw(i,e,t,n){return(t==0||i(e.sliceDoc(t-1,t))!=xt.Word)&&(n==e.doc.length||i(e.sliceDoc(n,n+1))!=xt.Word)}function E5(i,e,t,n){return i(e.sliceDoc(t,t+1))==xt.Word&&i(e.sliceDoc(n-1,n))==xt.Word}const R5=wt.fromClass(class{constructor(i){this.decorations=this.getDeco(i)}update(i){(i.selectionSet||i.docChanged||i.viewportChanged)&&(this.decorations=this.getDeco(i.view))}getDeco(i){let e=i.state.facet(k5),{state:t}=i,n=t.selection;if(n.ranges.length>1)return Re.none;let r=n.main,l,o=null;if(r.empty){if(!e.highlightWordAroundCursor)return Re.none;let h=t.wordAt(r.head);if(!h)return Re.none;o=t.charCategorizer(r.head),l=t.sliceDoc(h.from,h.to)}else{let h=r.to-r.from;if(h<e.minSelectionLength||h>200)return Re.none;if(e.wholeWords){if(l=t.sliceDoc(r.from,r.to),o=t.charCategorizer(r.head),!(Kw(o,t,r.from,r.to)&&E5(o,t,r.from,r.to)))return Re.none}else if(l=t.sliceDoc(r.from,r.to),!l)return Re.none}let u=[];for(let h of i.visibleRanges){let d=new Ha(t.doc,l,h.from,h.to);for(;!d.next().done;){let{from:p,to:g}=d.value;if((!o||Kw(o,t,p,g))&&(r.empty&&p<=r.from&&g>=r.to?u.push(A5.range(p,g)):(p>=r.to||g<=r.from)&&u.push(C5.range(p,g)),u.length>e.maxMatches))return Re.none}}return Re.set(u)}},{decorations:i=>i.decorations}),N5=fe.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),M5=({state:i,dispatch:e})=>{let{selection:t}=i,n=re.create(t.ranges.map(r=>i.wordAt(r.head)||re.cursor(r.head)),t.mainIndex);return n.eq(t)?!1:(e(i.update({selection:n})),!0)};function D5(i,e){let{main:t,ranges:n}=i.selection,r=i.wordAt(t.head),l=r&&r.from==t.from&&r.to==t.to;for(let o=!1,u=new Ha(i.doc,e,n[n.length-1].to);;)if(u.next(),u.done){if(o)return null;u=new Ha(i.doc,e,0,Math.max(0,n[n.length-1].from-1)),o=!0}else{if(o&&n.some(h=>h.from==u.value.from))continue;if(l){let h=i.wordAt(u.value.from);if(!h||h.from!=u.value.from||h.to!=u.value.to)continue}return u.value}}const Q5=({state:i,dispatch:e})=>{let{ranges:t}=i.selection;if(t.some(l=>l.from===l.to))return M5({state:i,dispatch:e});let n=i.sliceDoc(t[0].from,t[0].to);if(i.selection.ranges.some(l=>i.sliceDoc(l.from,l.to)!=n))return!1;let r=D5(i,n);return r?(e(i.update({selection:i.selection.addRange(re.range(r.from,r.to),!1),effects:fe.scrollIntoView(r.to)})),!0):!1},no=xe.define({combine(i){return fr(i,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new X5(e),scrollToMatch:e=>fe.scrollIntoView(e)})}});class L2{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||v5(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,n)=>n=="n"?`
`:n=="r"?"\r":n=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new _5(this):new P5(this)}getCursor(e,t=0,n){let r=e.doc?e:qe.create({doc:e});return n==null&&(n=r.doc.length),this.regexp?Aa(this,r,t,n):Ca(this,r,t,n)}}class q2{constructor(e){this.spec=e}}function Ca(i,e,t,n){return new Ha(e.doc,i.unquoted,t,n,i.caseSensitive?void 0:r=>r.toLowerCase(),i.wholeWord?z5(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function z5(i,e){return(t,n,r,l)=>((l>t||l+r.length<n)&&(l=Math.max(0,t-2),r=i.sliceString(l,Math.min(i.length,n+2))),(e(pd(r,t-l))!=xt.Word||e(md(r,t-l))!=xt.Word)&&(e(md(r,n-l))!=xt.Word||e(pd(r,n-l))!=xt.Word))}class P5 extends q2{constructor(e){super(e)}nextMatch(e,t,n){let r=Ca(this.spec,e,n,e.doc.length).nextOverlapping();if(r.done){let l=Math.min(e.doc.length,t+this.spec.unquoted.length);r=Ca(this.spec,e,0,l).nextOverlapping()}return r.done||r.value.from==t&&r.value.to==n?null:r.value}prevMatchInRange(e,t,n){for(let r=n;;){let l=Math.max(t,r-1e4-this.spec.unquoted.length),o=Ca(this.spec,e,l,r),u=null;for(;!o.nextOverlapping().done;)u=o.value;if(u)return u;if(l==t)return null;r-=1e4}}prevMatch(e,t,n){let r=this.prevMatchInRange(e,0,t);return r||(r=this.prevMatchInRange(e,Math.max(0,n-this.spec.unquoted.length),e.doc.length)),r&&(r.from!=t||r.to!=n)?r:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let n=Ca(this.spec,e,0,e.doc.length),r=[];for(;!n.next().done;){if(r.length>=t)return null;r.push(n.value)}return r}highlight(e,t,n,r){let l=Ca(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(n+this.spec.unquoted.length,e.doc.length));for(;!l.next().done;)r(l.value.from,l.value.to)}}function Aa(i,e,t,n){return new _2(e.doc,i.search,{ignoreCase:!i.caseSensitive,test:i.wholeWord?B5(e.charCategorizer(e.selection.main.head)):void 0},t,n)}function pd(i,e){return i.slice(cn(i,e,!1),e)}function md(i,e){return i.slice(e,cn(i,e))}function B5(i){return(e,t,n)=>!n[0].length||(i(pd(n.input,n.index))!=xt.Word||i(md(n.input,n.index))!=xt.Word)&&(i(md(n.input,n.index+n[0].length))!=xt.Word||i(pd(n.input,n.index+n[0].length))!=xt.Word)}class _5 extends q2{nextMatch(e,t,n){let r=Aa(this.spec,e,n,e.doc.length).next();return r.done&&(r=Aa(this.spec,e,0,t).next()),r.done?null:r.value}prevMatchInRange(e,t,n){for(let r=1;;r++){let l=Math.max(t,n-r*1e4),o=Aa(this.spec,e,l,n),u=null;for(;!o.next().done;)u=o.value;if(u&&(l==t||u.from>l+10))return u;if(l==t)return null}}prevMatch(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(t,n)=>{if(n=="&")return e.match[0];if(n=="$")return"$";for(let r=n.length;r>0;r--){let l=+n.slice(0,r);if(l>0&&l<e.match.length)return e.match[l]+n.slice(r)}return t})}matchAll(e,t){let n=Aa(this.spec,e,0,e.doc.length),r=[];for(;!n.next().done;){if(r.length>=t)return null;r.push(n.value)}return r}highlight(e,t,n,r){let l=Aa(this.spec,e,Math.max(0,t-250),Math.min(n+250,e.doc.length));for(;!l.next().done;)r(l.value.from,l.value.to)}}const Gu=Be.define(),$O=Be.define(),Bs=Lt.define({create(i){return new Gg(Dy(i).create(),null)},update(i,e){for(let t of e.effects)t.is(Gu)?i=new Gg(t.value.create(),i.panel):t.is($O)&&(i=new Gg(i.query,t.value?LO:null));return i},provide:i=>ju.from(i,e=>e.panel)});class Gg{constructor(e,t){this.query=e,this.panel=t}}const $5=Re.mark({class:"cm-searchMatch"}),L5=Re.mark({class:"cm-searchMatch cm-searchMatch-selected"}),q5=wt.fromClass(class{constructor(i){this.view=i,this.decorations=this.highlight(i.state.field(Bs))}update(i){let e=i.state.field(Bs);(e!=i.startState.field(Bs)||i.docChanged||i.selectionSet||i.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:i,panel:e}){if(!e||!i.spec.valid)return Re.none;let{view:t}=this,n=new lr;for(let r=0,l=t.visibleRanges,o=l.length;r<o;r++){let{from:u,to:h}=l[r];for(;r<o-1&&h>l[r+1].from-500;)h=l[++r].to;i.highlight(t.state,u,h,(d,p)=>{let g=t.state.selection.ranges.some(O=>O.from==d&&O.to==p);n.add(d,p,g?L5:$5)})}return n.finish()}},{decorations:i=>i.decorations});function Oc(i){return e=>{let t=e.state.field(Bs,!1);return t&&t.query.spec.valid?i(e,t):H2(e)}}const gd=Oc((i,{query:e})=>{let{to:t}=i.state.selection.main,n=e.nextMatch(i.state,t,t);if(!n)return!1;let r=re.single(n.from,n.to),l=i.state.facet(no);return i.dispatch({selection:r,effects:[qO(i,n),l.scrollToMatch(r.main,i)],userEvent:"select.search"}),j2(i),!0}),yd=Oc((i,{query:e})=>{let{state:t}=i,{from:n}=t.selection.main,r=e.prevMatch(t,n,n);if(!r)return!1;let l=re.single(r.from,r.to),o=i.state.facet(no);return i.dispatch({selection:l,effects:[qO(i,r),o.scrollToMatch(l.main,i)],userEvent:"select.search"}),j2(i),!0}),U5=Oc((i,{query:e})=>{let t=e.matchAll(i.state,1e3);return!t||!t.length?!1:(i.dispatch({selection:re.create(t.map(n=>re.range(n.from,n.to))),userEvent:"select.search.matches"}),!0)}),j5=({state:i,dispatch:e})=>{let t=i.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:n,to:r}=t.main,l=[],o=0;for(let u=new Ha(i.doc,i.sliceDoc(n,r));!u.next().done;){if(l.length>1e3)return!1;u.value.from==n&&(o=l.length),l.push(re.range(u.value.from,u.value.to))}return e(i.update({selection:re.create(l,o),userEvent:"select.search.matches"})),!0},Jw=Oc((i,{query:e})=>{let{state:t}=i,{from:n,to:r}=t.selection.main;if(t.readOnly)return!1;let l=e.nextMatch(t,n,n);if(!l)return!1;let o=l,u=[],h,d,p=[];o.from==n&&o.to==r&&(d=t.toText(e.getReplacement(o)),u.push({from:o.from,to:o.to,insert:d}),o=e.nextMatch(t,o.from,o.to),p.push(fe.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(n).number)+".")));let g=i.state.changes(u);return o&&(h=re.single(o.from,o.to).map(g),p.push(qO(i,o)),p.push(t.facet(no).scrollToMatch(h.main,i))),i.dispatch({changes:g,selection:h,effects:p,userEvent:"input.replace"}),!0}),H5=Oc((i,{query:e})=>{if(i.state.readOnly)return!1;let t=e.matchAll(i.state,1e9).map(r=>{let{from:l,to:o}=r;return{from:l,to:o,insert:e.getReplacement(r)}});if(!t.length)return!1;let n=i.state.phrase("replaced $ matches",t.length)+".";return i.dispatch({changes:t,effects:fe.announce.of(n),userEvent:"input.replace.all"}),!0});function LO(i){return i.state.facet(no).createPanel(i)}function Dy(i,e){var t,n,r,l,o;let u=i.selection.main,h=u.empty||u.to>u.from+100?"":i.sliceDoc(u.from,u.to);if(e&&!h)return e;let d=i.facet(no);return new L2({search:((t=e?.literal)!==null&&t!==void 0?t:d.literal)?h:h.replace(/\n/g,"\\n"),caseSensitive:(n=e?.caseSensitive)!==null&&n!==void 0?n:d.caseSensitive,literal:(r=e?.literal)!==null&&r!==void 0?r:d.literal,regexp:(l=e?.regexp)!==null&&l!==void 0?l:d.regexp,wholeWord:(o=e?.wholeWord)!==null&&o!==void 0?o:d.wholeWord})}function U2(i){let e=Uu(i,LO);return e&&e.dom.querySelector("[main-field]")}function j2(i){let e=U2(i);e&&e==i.root.activeElement&&e.select()}const H2=i=>{let e=i.state.field(Bs,!1);if(e&&e.panel){let t=U2(i);if(t&&t!=i.root.activeElement){let n=Dy(i.state,e.query.spec);n.valid&&i.dispatch({effects:Gu.of(n)}),t.focus(),t.select()}}else i.dispatch({effects:[$O.of(!0),e?Gu.of(Dy(i.state,e.query.spec)):Be.appendConfig.of(W5)]});return!0},V2=i=>{let e=i.state.field(Bs,!1);if(!e||!e.panel)return!1;let t=Uu(i,LO);return t&&t.dom.contains(i.root.activeElement)&&i.focus(),i.dispatch({effects:$O.of(!1)}),!0},V5=[{key:"Mod-f",run:H2,scope:"editor search-panel"},{key:"F3",run:gd,shift:yd,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:gd,shift:yd,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:V2,scope:"editor search-panel"},{key:"Mod-Shift-l",run:j5},{key:"Mod-Alt-g",run:S5},{key:"Mod-d",run:Q5,preventDefault:!0}];class X5{constructor(e){this.view=e;let t=this.query=e.state.field(Bs).query.spec;this.commit=this.commit.bind(this),this.searchField=dt("input",{value:t.search,placeholder:Gn(e,"Find"),"aria-label":Gn(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=dt("input",{value:t.replace,placeholder:Gn(e,"Replace"),"aria-label":Gn(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=dt("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=dt("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=dt("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function n(r,l,o){return dt("button",{class:"cm-button",name:r,onclick:l,type:"button"},o)}this.dom=dt("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,n("next",()=>gd(e),[Gn(e,"next")]),n("prev",()=>yd(e),[Gn(e,"previous")]),n("select",()=>U5(e),[Gn(e,"all")]),dt("label",null,[this.caseField,Gn(e,"match case")]),dt("label",null,[this.reField,Gn(e,"regexp")]),dt("label",null,[this.wordField,Gn(e,"by word")]),...e.state.readOnly?[]:[dt("br"),this.replaceField,n("replace",()=>Jw(e),[Gn(e,"replace")]),n("replaceAll",()=>H5(e),[Gn(e,"replace all")])],dt("button",{name:"close",onclick:()=>V2(e),"aria-label":Gn(e,"close"),type:"button"},[""])])}commit(){let e=new L2({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Gu.of(e)}))}keydown(e){NB(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?yd:gd)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),Jw(this.view))}update(e){for(let t of e.transactions)for(let n of t.effects)n.is(Gu)&&!n.value.eq(this.query)&&this.setQuery(n.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(no).top}}function Gn(i,e){return i.state.phrase(e)}const rf=30,sf=/[\s\.,:;?!]/;function qO(i,{from:e,to:t}){let n=i.state.doc.lineAt(e),r=i.state.doc.lineAt(t).to,l=Math.max(n.from,e-rf),o=Math.min(r,t+rf),u=i.state.sliceDoc(l,o);if(l!=n.from){for(let h=0;h<rf;h++)if(!sf.test(u[h+1])&&sf.test(u[h])){u=u.slice(h);break}}if(o!=r){for(let h=u.length-1;h>u.length-rf;h--)if(!sf.test(u[h-1])&&sf.test(u[h])){u=u.slice(0,h);break}}return fe.announce.of(`${i.state.phrase("current match")}. ${u} ${i.state.phrase("on line")} ${n.number}.`)}const G5=fe.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),W5=[Bs,Fr.low(q5),G5];class X2{constructor(e,t,n,r){this.state=e,this.pos=t,this.explicit=n,this.view=r,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=vn(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),n=Math.max(t.from,this.pos-250),r=t.text.slice(n-t.from,this.pos-t.from),l=r.search(G2(e,!1));return l<0?null:{from:n+l,to:this.pos,text:r.slice(l)}}get aborted(){return this.abortListeners==null}addEventListener(e,t,n){e=="abort"&&this.abortListeners&&(this.abortListeners.push(t),n&&n.onDocChange&&(this.abortOnDocChange=!0))}}function ek(i){let e=Object.keys(i).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function I5(i){let e=Object.create(null),t=Object.create(null);for(let{label:r}of i){e[r[0]]=!0;for(let l=1;l<r.length;l++)t[r[l]]=!0}let n=ek(e)+ek(t)+"*$";return[new RegExp("^"+n),new RegExp(n)]}function F5(i){let e=i.map(r=>typeof r=="string"?{label:r}:r),[t,n]=e.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:I5(e);return r=>{let l=r.matchBefore(n);return l||r.explicit?{from:l?l.from:r.pos,options:e,validFor:t}:null}}class tk{constructor(e,t,n,r){this.completion=e,this.source=t,this.match=n,this.score=r}}function Tl(i){return i.selection.main.from}function G2(i,e){var t;let{source:n}=i,r=e&&n[0]!="^",l=n[n.length-1]!="$";return!r&&!l?i:new RegExp(`${r?"^":""}(?:${n})${l?"$":""}`,(t=i.flags)!==null&&t!==void 0?t:i.ignoreCase?"i":"")}const W2=ki.define();function Y5(i,e,t,n){let{main:r}=i.selection,l=t-r.from,o=n-r.from;return Object.assign(Object.assign({},i.changeByRange(u=>{if(u!=r&&t!=n&&i.sliceDoc(u.from+l,u.from+o)!=i.sliceDoc(t,n))return{range:u};let h=i.toText(e);return{changes:{from:u.from+l,to:n==r.from?u.to:u.from+o,insert:h},range:re.cursor(u.from+l+h.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const nk=new WeakMap;function Z5(i){if(!Array.isArray(i))return i;let e=nk.get(i);return e||nk.set(i,e=F5(i)),e}const Od=Be.define(),Wu=Be.define();class K5{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let n=Mn(e,t),r=Yi(n);this.chars.push(n);let l=e.slice(t,t+r),o=l.toUpperCase();this.folded.push(Mn(o==l?l.toLowerCase():o,0)),t+=r}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:n,any:r,precise:l,byWord:o}=this;if(t.length==1){let E=Mn(e,0),D=Yi(E),_=D==e.length?0:-100;if(E!=t[0])if(E==n[0])_+=-200;else return null;return this.ret(_,[0,D])}let u=e.indexOf(this.pattern);if(u==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let h=t.length,d=0;if(u<0){for(let E=0,D=Math.min(e.length,200);E<D&&d<h;){let _=Mn(e,E);(_==t[d]||_==n[d])&&(r[d++]=E),E+=Yi(_)}if(d<h)return null}let p=0,g=0,O=!1,b=0,v=-1,x=-1,w=/[a-z]/.test(e),T=!0;for(let E=0,D=Math.min(e.length,200),_=0;E<D&&g<h;){let A=Mn(e,E);u<0&&(p<h&&A==t[p]&&(l[p++]=E),b<h&&(A==t[b]||A==n[b]?(b==0&&(v=E),x=E+1,b++):b=0));let B,C=A<255?A>=48&&A<=57||A>=97&&A<=122?2:A>=65&&A<=90?1:0:(B=dO(A))!=B.toLowerCase()?1:B!=B.toUpperCase()?2:0;(!E||C==1&&w||_==0&&C!=0)&&(t[g]==A||n[g]==A&&(O=!0)?o[g++]=E:o.length&&(T=!1)),_=C,E+=Yi(A)}return g==h&&o[0]==0&&T?this.result(-100+(O?-200:0),o,e):b==h&&v==0?this.ret(-200-e.length+(x==e.length?0:-100),[0,x]):u>-1?this.ret(-700-e.length,[u,u+this.pattern.length]):b==h?this.ret(-900-e.length,[v,x]):g==h?this.result(-100+(O?-200:0)+-700+(T?0:-1100),o,e):t.length==2?null:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,t,n){let r=[],l=0;for(let o of t){let u=o+(this.astral?Yi(Mn(n,o)):1);l&&r[l-1]==o?r[l-1]=u:(r[l++]=o,r[l++]=u)}return this.ret(e-n.length,r)}}class J5{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),n=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return n==null?null:(this.matched=[0,t.length],this.score=n+(e.length==this.pattern.length?0:-100),this)}}const Ft=xe.define({combine(i){return fr(i,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:e$,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>n=>ik(e(n),t(n)),optionClass:(e,t)=>n=>ik(e(n),t(n)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})}});function ik(i,e){return i?e?i+" "+e:i:e}function e$(i,e,t,n,r,l){let o=i.textDirection==st.RTL,u=o,h=!1,d="top",p,g,O=e.left-r.left,b=r.right-e.right,v=n.right-n.left,x=n.bottom-n.top;if(u&&O<Math.min(v,b)?u=!1:!u&&b<Math.min(v,O)&&(u=!0),v<=(u?O:b))p=Math.max(r.top,Math.min(t.top,r.bottom-x))-e.top,g=Math.min(400,u?O:b);else{h=!0,g=Math.min(400,(o?e.right:r.right-e.left)-30);let E=r.bottom-e.bottom;E>=x||E>e.top?p=t.bottom-e.top:(d="bottom",p=e.bottom-t.top)}let w=(e.bottom-e.top)/l.offsetHeight,T=(e.right-e.left)/l.offsetWidth;return{style:`${d}: ${p/w}px; max-width: ${g/T}px`,class:"cm-completionInfo-"+(h?o?"left-narrow":"right-narrow":u?"left":"right")}}function t$(i){let e=i.addToOptions.slice();return i.icons&&e.push({render(t){let n=document.createElement("div");return n.classList.add("cm-completionIcon"),t.type&&n.classList.add(...t.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),n.setAttribute("aria-hidden","true"),n},position:20}),e.push({render(t,n,r,l){let o=document.createElement("span");o.className="cm-completionLabel";let u=t.displayLabel||t.label,h=0;for(let d=0;d<l.length;){let p=l[d++],g=l[d++];p>h&&o.appendChild(document.createTextNode(u.slice(h,p)));let O=o.appendChild(document.createElement("span"));O.appendChild(document.createTextNode(u.slice(p,g))),O.className="cm-completionMatchedText",h=g}return h<u.length&&o.appendChild(document.createTextNode(u.slice(h))),o},position:50},{render(t){if(!t.detail)return null;let n=document.createElement("span");return n.className="cm-completionDetail",n.textContent=t.detail,n},position:80}),e.sort((t,n)=>t.position-n.position).map(t=>t.render)}function Wg(i,e,t){if(i<=t)return{from:0,to:i};if(e<0&&(e=0),e<=i>>1){let r=Math.floor(e/t);return{from:r*t,to:(r+1)*t}}let n=Math.floor((i-e)/t);return{from:i-(n+1)*t,to:i-n*t}}class n${constructor(e,t,n){this.view=e,this.stateField=t,this.applyCompletion=n,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:h=>this.placeInfo(h),key:this},this.space=null,this.currentClass="";let r=e.state.field(t),{options:l,selected:o}=r.open,u=e.state.facet(Ft);this.optionContent=t$(u),this.optionClass=u.optionClass,this.tooltipClass=u.tooltipClass,this.range=Wg(l.length,o,u.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",h=>{let{options:d}=e.state.field(t).open;for(let p=h.target,g;p&&p!=this.dom;p=p.parentNode)if(p.nodeName=="LI"&&(g=/-(\d+)$/.exec(p.id))&&+g[1]<d.length){this.applyCompletion(e,d[+g[1]]),h.preventDefault();return}}),this.dom.addEventListener("focusout",h=>{let d=e.state.field(this.stateField,!1);d&&d.tooltip&&e.state.facet(Ft).closeOnBlur&&h.relatedTarget!=e.contentDOM&&e.dispatch({effects:Wu.of(null)})}),this.showOptions(l,r.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let n=e.state.field(this.stateField),r=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),n!=r){let{options:l,selected:o,disabled:u}=n.open;(!r.open||r.open.options!=l)&&(this.range=Wg(l.length,o,e.state.facet(Ft).maxRenderedOptions),this.showOptions(l,n.id)),this.updateSel(),u!=((t=r.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!u)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let n of this.currentClass.split(" "))n&&this.dom.classList.remove(n);for(let n of t.split(" "))n&&this.dom.classList.add(n);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=Wg(t.options.length,t.selected,this.view.state.facet(Ft).maxRenderedOptions),this.showOptions(t.options,e.id)),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:n}=t.options[t.selected],{info:r}=n;if(!r)return;let l=typeof r=="string"?document.createTextNode(r):r(n);if(!l)return;"then"in l?l.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,n)}).catch(o=>On(this.view.state,o,"completion info")):this.addInfoPane(l,n)}}addInfoPane(e,t){this.destroyInfo();let n=this.info=document.createElement("div");if(n.className="cm-tooltip cm-completionInfo",e.nodeType!=null)n.appendChild(e),this.infoDestroy=null;else{let{dom:r,destroy:l}=e;n.appendChild(r),this.infoDestroy=l||null}this.dom.appendChild(n),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let n=this.list.firstChild,r=this.range.from;n;n=n.nextSibling,r++)n.nodeName!="LI"||!n.id?r--:r==e?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),t=n):n.hasAttribute("aria-selected")&&n.removeAttribute("aria-selected");return t&&r$(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),l=this.space;if(!l){let o=this.dom.ownerDocument.documentElement;l={left:0,top:0,right:o.clientWidth,bottom:o.clientHeight}}return r.top>Math.min(l.bottom,t.bottom)-10||r.bottom<Math.max(l.top,t.top)+10?null:this.view.state.facet(Ft).positionInfo(this.view,t,r,n,l,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,n){const r=document.createElement("ul");r.id=t,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions")),r.addEventListener("mousedown",o=>{o.target==r&&o.preventDefault()});let l=null;for(let o=n.from;o<n.to;o++){let{completion:u,match:h}=e[o],{section:d}=u;if(d){let O=typeof d=="string"?d:d.name;if(O!=l&&(o>n.from||n.from==0))if(l=O,typeof d!="string"&&d.header)r.appendChild(d.header(d));else{let b=r.appendChild(document.createElement("completion-section"));b.textContent=O}}const p=r.appendChild(document.createElement("li"));p.id=t+"-"+o,p.setAttribute("role","option");let g=this.optionClass(u);g&&(p.className=g);for(let O of this.optionContent){let b=O(u,this.view.state,this.view,h);b&&p.appendChild(b)}}return n.from&&r.classList.add("cm-completionListIncompleteTop"),n.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function i$(i,e){return t=>new n$(t,i,e)}function r$(i,e){let t=i.getBoundingClientRect(),n=e.getBoundingClientRect(),r=t.height/i.offsetHeight;n.top<t.top?i.scrollTop-=(t.top-n.top)/r:n.bottom>t.bottom&&(i.scrollTop+=(n.bottom-t.bottom)/r)}function rk(i){return(i.boost||0)*100+(i.apply?10:0)+(i.info?5:0)+(i.type?1:0)}function s$(i,e){let t=[],n=null,r=d=>{t.push(d);let{section:p}=d.completion;if(p){n||(n=[]);let g=typeof p=="string"?p:p.name;n.some(O=>O.name==g)||n.push(typeof p=="string"?{name:g}:p)}},l=e.facet(Ft);for(let d of i)if(d.hasResult()){let p=d.result.getMatch;if(d.result.filter===!1)for(let g of d.result.options)r(new tk(g,d.source,p?p(g):[],1e9-t.length));else{let g=e.sliceDoc(d.from,d.to),O,b=l.filterStrict?new J5(g):new K5(g);for(let v of d.result.options)if(O=b.match(v.label)){let x=v.displayLabel?p?p(v,O.matched):[]:O.matched;r(new tk(v,d.source,x,O.score+(v.boost||0)))}}}if(n){let d=Object.create(null),p=0,g=(O,b)=>{var v,x;return((v=O.rank)!==null&&v!==void 0?v:1e9)-((x=b.rank)!==null&&x!==void 0?x:1e9)||(O.name<b.name?-1:1)};for(let O of n.sort(g))p-=1e5,d[O.name]=p;for(let O of t){let{section:b}=O.completion;b&&(O.score+=d[typeof b=="string"?b:b.name])}}let o=[],u=null,h=l.compareCompletions;for(let d of t.sort((p,g)=>g.score-p.score||h(p.completion,g.completion))){let p=d.completion;!u||u.label!=p.label||u.detail!=p.detail||u.type!=null&&p.type!=null&&u.type!=p.type||u.apply!=p.apply||u.boost!=p.boost?o.push(d):rk(d.completion)>rk(u)&&(o[o.length-1]=d),u=d.completion}return o}class Na{constructor(e,t,n,r,l,o){this.options=e,this.attrs=t,this.tooltip=n,this.timestamp=r,this.selected=l,this.disabled=o}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new Na(this.options,sk(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,n,r,l,o){if(r&&!o&&e.some(d=>d.isPending))return r.setDisabled();let u=s$(e,t);if(!u.length)return r&&e.some(d=>d.isPending)?r.setDisabled():null;let h=t.facet(Ft).selectOnOpen?0:-1;if(r&&r.selected!=h&&r.selected!=-1){let d=r.options[r.selected].completion;for(let p=0;p<u.length;p++)if(u[p].completion==d){h=p;break}}return new Na(u,sk(n,h),{pos:e.reduce((d,p)=>p.hasResult()?Math.min(d,p.from):d,1e8),create:h$,above:l.aboveCursor},r?r.timestamp:Date.now(),h,!1)}map(e){return new Na(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new Na(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class bd{constructor(e,t,n){this.active=e,this.id=t,this.open=n}static start(){return new bd(u$,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,n=t.facet(Ft),l=(n.override||t.languageDataAt("autocomplete",Tl(t)).map(Z5)).map(h=>(this.active.find(p=>p.source==h)||new ci(h,this.active.some(p=>p.state!=0)?1:0)).update(e,n));l.length==this.active.length&&l.every((h,d)=>h==this.active[d])&&(l=this.active);let o=this.open,u=e.effects.some(h=>h.is(UO));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||l.some(h=>h.hasResult()&&e.changes.touchesRange(h.from,h.to))||!l$(l,this.active)||u?o=Na.build(l,t,this.id,o,n,u):o&&o.disabled&&!l.some(h=>h.isPending)&&(o=null),!o&&l.every(h=>!h.isPending)&&l.some(h=>h.hasResult())&&(l=l.map(h=>h.hasResult()?new ci(h.source,0):h));for(let h of e.effects)h.is(F2)&&(o=o&&o.setSelected(h.value,this.id));return l==this.active&&o==this.open?this:new bd(l,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?a$:o$}}function l$(i,e){if(i==e)return!0;for(let t=0,n=0;;){for(;t<i.length&&!i[t].hasResult();)t++;for(;n<e.length&&!e[n].hasResult();)n++;let r=t==i.length,l=n==e.length;if(r||l)return r==l;if(i[t++].result!=e[n++].result)return!1}}const a$={"aria-autocomplete":"list"},o$={};function sk(i,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":i};return e>-1&&(t["aria-activedescendant"]=i+"-"+e),t}const u$=[];function I2(i,e){if(i.isUserEvent("input.complete")){let n=i.annotation(W2);if(n&&e.activateOnCompletion(n))return 12}let t=i.isUserEvent("input.type");return t&&e.activateOnTyping?5:t?1:i.isUserEvent("delete.backward")?2:i.selection?8:i.docChanged?16:0}class ci{constructor(e,t,n=!1){this.source=e,this.state=t,this.explicit=n}hasResult(){return!1}get isPending(){return this.state==1}update(e,t){let n=I2(e,t),r=this;(n&8||n&16&&this.touches(e))&&(r=new ci(r.source,0)),n&4&&r.state==0&&(r=new ci(this.source,1)),r=r.updateFor(e,n);for(let l of e.effects)if(l.is(Od))r=new ci(r.source,1,l.value);else if(l.is(Wu))r=new ci(r.source,0);else if(l.is(UO))for(let o of l.value)o.source==r.source&&(r=o);return r}updateFor(e,t){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(Tl(e.state))}}class Pa extends ci{constructor(e,t,n,r,l,o){super(e,3,t),this.limit=n,this.result=r,this.from=l,this.to=o}hasResult(){return!0}updateFor(e,t){var n;if(!(t&3))return this.map(e.changes);let r=this.result;r.map&&!e.changes.empty&&(r=r.map(r,e.changes));let l=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),u=Tl(e.state);if(u>o||!r||t&2&&(Tl(e.startState)==this.from||u<this.limit))return new ci(this.source,t&4?1:0);let h=e.changes.mapPos(this.limit);return c$(r.validFor,e.state,l,o)?new Pa(this.source,this.explicit,h,r,l,o):r.update&&(r=r.update(r,l,o,new X2(e.state,u,!1)))?new Pa(this.source,this.explicit,h,r,r.from,(n=r.to)!==null&&n!==void 0?n:Tl(e.state)):new ci(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new Pa(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new ci(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function c$(i,e,t,n){if(!i)return!1;let r=e.sliceDoc(t,n);return typeof i=="function"?i(r,t,n,e):G2(i,!0).test(r)}const UO=Be.define({map(i,e){return i.map(t=>t.map(e))}}),F2=Be.define(),Qn=Lt.define({create(){return bd.start()},update(i,e){return i.update(e)},provide:i=>[EO.from(i,e=>e.tooltip),fe.contentAttributes.from(i,e=>e.attrs)]});function jO(i,e){const t=e.completion.apply||e.completion.label;let n=i.state.field(Qn).active.find(r=>r.source==e.source);return n instanceof Pa?(typeof t=="string"?i.dispatch(Object.assign(Object.assign({},Y5(i.state,t,n.from,n.to)),{annotations:W2.of(e.completion)})):t(i,e.completion,n.from,n.to),!0):!1}const h$=i$(Qn,jO);function lf(i,e="option"){return t=>{let n=t.state.field(Qn,!1);if(!n||!n.open||n.open.disabled||Date.now()-n.open.timestamp<t.state.facet(Ft).interactionDelay)return!1;let r=1,l;e=="page"&&(l=RA(t,n.open.tooltip))&&(r=Math.max(2,Math.floor(l.dom.offsetHeight/l.dom.querySelector("li").offsetHeight)-1));let{length:o}=n.open.options,u=n.open.selected>-1?n.open.selected+r*(i?1:-1):i?0:o-1;return u<0?u=e=="page"?0:o-1:u>=o&&(u=e=="page"?o-1:0),t.dispatch({effects:F2.of(u)}),!0}}const f$=i=>{let e=i.state.field(Qn,!1);return i.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<i.state.facet(Ft).interactionDelay?!1:jO(i,e.open.options[e.open.selected])},lk=i=>i.state.field(Qn,!1)?(i.dispatch({effects:Od.of(!0)}),!0):!1,d$=i=>{let e=i.state.field(Qn,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(i.dispatch({effects:Wu.of(null)}),!0)};class p${constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const m$=50,g$=1e3,y$=wt.fromClass(class{constructor(i){this.view=i,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of i.state.field(Qn).active)e.isPending&&this.startQuery(e)}update(i){let e=i.state.field(Qn),t=i.state.facet(Ft);if(!i.selectionSet&&!i.docChanged&&i.startState.field(Qn)==e)return;let n=i.transactions.some(l=>{let o=I2(l,t);return o&8||(l.selection||l.docChanged)&&!(o&3)});for(let l=0;l<this.running.length;l++){let o=this.running[l];if(n||o.context.abortOnDocChange&&i.docChanged||o.updates.length+i.transactions.length>m$&&Date.now()-o.time>g$){for(let u of o.context.abortListeners)try{u()}catch(h){On(this.view.state,h)}o.context.abortListeners=null,this.running.splice(l--,1)}else o.updates.push(...i.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),i.transactions.some(l=>l.effects.some(o=>o.is(Od)))&&(this.pendingStart=!0);let r=this.pendingStart?50:t.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(l=>l.isPending&&!this.running.some(o=>o.active.source==l.source))?setTimeout(()=>this.startUpdate(),r):-1,this.composing!=0)for(let l of i.transactions)l.isUserEvent("input.type")?this.composing=2:this.composing==2&&l.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:i}=this.view,e=i.field(Qn);for(let t of e.active)t.isPending&&!this.running.some(n=>n.active.source==t.source)&&this.startQuery(t);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Ft).updateSyncTime))}startQuery(i){let{state:e}=this.view,t=Tl(e),n=new X2(e,t,i.explicit,this.view),r=new p$(i,n);this.running.push(r),Promise.resolve(i.source(n)).then(l=>{r.context.aborted||(r.done=l||null,this.scheduleAccept())},l=>{this.view.dispatch({effects:Wu.of(null)}),On(this.view.state,l)})}scheduleAccept(){this.running.every(i=>i.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Ft).updateSyncTime))}accept(){var i;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(Ft),n=this.view.state.field(Qn);for(let r=0;r<this.running.length;r++){let l=this.running[r];if(l.done===void 0)continue;if(this.running.splice(r--,1),l.done){let u=Tl(l.updates.length?l.updates[0].startState:this.view.state),h=Math.min(u,l.done.from+(l.active.explicit?0:1)),d=new Pa(l.active.source,l.active.explicit,h,l.done,l.done.from,(i=l.done.to)!==null&&i!==void 0?i:u);for(let p of l.updates)d=d.update(p,t);if(d.hasResult()){e.push(d);continue}}let o=n.active.find(u=>u.source==l.active.source);if(o&&o.isPending)if(l.done==null){let u=new ci(l.active.source,0);for(let h of l.updates)u=u.update(h,t);u.isPending||e.push(u)}else this.startQuery(o)}(e.length||n.open&&n.open.disabled)&&this.view.dispatch({effects:UO.of(e)})}},{eventHandlers:{blur(i){let e=this.view.state.field(Qn,!1);if(e&&e.tooltip&&this.view.state.facet(Ft).closeOnBlur){let t=e.open&&RA(this.view,e.open.tooltip);(!t||!t.dom.contains(i.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:Wu.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Od.of(!1)}),20),this.composing=0}}}),O$=typeof navigator=="object"&&/Win/.test(navigator.platform),b$=Fr.highest(fe.domEventHandlers({keydown(i,e){let t=e.state.field(Qn,!1);if(!t||!t.open||t.open.disabled||t.open.selected<0||i.key.length>1||i.ctrlKey&&!(O$&&i.altKey)||i.metaKey)return!1;let n=t.open.options[t.open.selected],r=t.active.find(o=>o.source==n.source),l=n.completion.commitCharacters||r.result.commitCharacters;return l&&l.indexOf(i.key)>-1&&jO(e,n),!1}})),v$=fe.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),Iu={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},wl=Be.define({map(i,e){let t=e.mapPos(i,-1,un.TrackAfter);return t??void 0}}),HO=new class extends _s{};HO.startSide=1;HO.endSide=-1;const Y2=Lt.define({create(){return Je.empty},update(i,e){if(i=i.map(e.changes),e.selection){let t=e.state.doc.lineAt(e.selection.main.head);i=i.update({filter:n=>n>=t.from&&n<=t.to})}for(let t of e.effects)t.is(wl)&&(i=i.update({add:[HO.range(t.value,t.value+1)]}));return i}});function S$(){return[w$,Y2]}const Ig="()[]{}<>";function Z2(i){for(let e=0;e<Ig.length;e+=2)if(Ig.charCodeAt(e)==i)return Ig.charAt(e+1);return dO(i<128?i:i+1)}function K2(i,e){return i.languageDataAt("closeBrackets",e)[0]||Iu}const x$=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),w$=fe.inputHandler.of((i,e,t,n)=>{if((x$?i.composing:i.compositionStarted)||i.state.readOnly)return!1;let r=i.state.selection.main;if(n.length>2||n.length==2&&Yi(Mn(n,0))==1||e!=r.from||t!=r.to)return!1;let l=C$(i.state,n);return l?(i.dispatch(l),!0):!1}),k$=({state:i,dispatch:e})=>{if(i.readOnly)return!1;let n=K2(i,i.selection.main.head).brackets||Iu.brackets,r=null,l=i.changeByRange(o=>{if(o.empty){let u=A$(i.doc,o.head);for(let h of n)if(h==u&&Fd(i.doc,o.head)==Z2(Mn(h,0)))return{changes:{from:o.head-h.length,to:o.head+h.length},range:re.cursor(o.head-h.length)}}return{range:r=o}});return r||e(i.update(l,{scrollIntoView:!0,userEvent:"delete.backward"})),!r},T$=[{key:"Backspace",run:k$}];function C$(i,e){let t=K2(i,i.selection.main.head),n=t.brackets||Iu.brackets;for(let r of n){let l=Z2(Mn(r,0));if(e==r)return l==r?N$(i,r,n.indexOf(r+r+r)>-1,t):E$(i,r,l,t.before||Iu.before);if(e==l&&J2(i,i.selection.main.from))return R$(i,r,l)}return null}function J2(i,e){let t=!1;return i.field(Y2).between(0,i.doc.length,n=>{n==e&&(t=!0)}),t}function Fd(i,e){let t=i.sliceString(e,e+2);return t.slice(0,Yi(Mn(t,0)))}function A$(i,e){let t=i.sliceString(e-2,e);return Yi(Mn(t,0))==t.length?t:t.slice(1)}function E$(i,e,t,n){let r=null,l=i.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:t,from:o.to}],effects:wl.of(o.to+e.length),range:re.range(o.anchor+e.length,o.head+e.length)};let u=Fd(i.doc,o.head);return!u||/\s/.test(u)||n.indexOf(u)>-1?{changes:{insert:e+t,from:o.head},effects:wl.of(o.head+e.length),range:re.cursor(o.head+e.length)}:{range:r=o}});return r?null:i.update(l,{scrollIntoView:!0,userEvent:"input.type"})}function R$(i,e,t){let n=null,r=i.changeByRange(l=>l.empty&&Fd(i.doc,l.head)==t?{changes:{from:l.head,to:l.head+t.length,insert:t},range:re.cursor(l.head+t.length)}:n={range:l});return n?null:i.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function N$(i,e,t,n){let r=n.stringPrefixes||Iu.stringPrefixes,l=null,o=i.changeByRange(u=>{if(!u.empty)return{changes:[{insert:e,from:u.from},{insert:e,from:u.to}],effects:wl.of(u.to+e.length),range:re.range(u.anchor+e.length,u.head+e.length)};let h=u.head,d=Fd(i.doc,h),p;if(d==e){if(ak(i,h))return{changes:{insert:e+e,from:h},effects:wl.of(h+e.length),range:re.cursor(h+e.length)};if(J2(i,h)){let O=t&&i.sliceDoc(h,h+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:h,to:h+O.length,insert:O},range:re.cursor(h+O.length)}}}else{if(t&&i.sliceDoc(h-2*e.length,h)==e+e&&(p=ok(i,h-2*e.length,r))>-1&&ak(i,p))return{changes:{insert:e+e+e+e,from:h},effects:wl.of(h+e.length),range:re.cursor(h+e.length)};if(i.charCategorizer(h)(d)!=xt.Word&&ok(i,h,r)>-1&&!M$(i,h,e,r))return{changes:{insert:e+e,from:h},effects:wl.of(h+e.length),range:re.cursor(h+e.length)}}return{range:l=u}});return l?null:i.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function ak(i,e){let t=vn(i).resolveInner(e+1);return t.parent&&t.from==e}function M$(i,e,t,n){let r=vn(i).resolveInner(e,-1),l=n.reduce((o,u)=>Math.max(o,u.length),0);for(let o=0;o<5;o++){let u=i.sliceDoc(r.from,Math.min(r.to,r.from+t.length+l)),h=u.indexOf(t);if(!h||h>-1&&n.indexOf(u.slice(0,h))>-1){let p=r.firstChild;for(;p&&p.from==r.from&&p.to-p.from>t.length+h;){if(i.sliceDoc(p.to-t.length,p.to)==t)return!1;p=p.firstChild}return!0}let d=r.to==e&&r.parent;if(!d)break;r=d}return!1}function ok(i,e,t){let n=i.charCategorizer(e);if(n(i.sliceDoc(e-1,e))!=xt.Word)return e;for(let r of t){let l=e-r.length;if(i.sliceDoc(l,e)==r&&n(i.sliceDoc(l-1,l))!=xt.Word)return l}return-1}function D$(i={}){return[b$,Qn,Ft.of(i),y$,Q$,v$]}const eE=[{key:"Ctrl-Space",run:lk},{mac:"Alt-`",run:lk},{key:"Escape",run:d$},{key:"ArrowDown",run:lf(!0)},{key:"ArrowUp",run:lf(!1)},{key:"PageDown",run:lf(!0,"page")},{key:"PageUp",run:lf(!1,"page")},{key:"Enter",run:f$}],Q$=Fr.highest(pc.computeN([Ft],i=>i.facet(Ft).defaultKeymap?[eE]:[]));class uk{constructor(e,t,n){this.from=e,this.to=t,this.diagnostic=n}}class vl{constructor(e,t,n){this.diagnostics=e,this.panel=t,this.selected=n}static init(e,t,n){let r=n.facet(Fu).markerFilter;r&&(e=r(e,n));let l=e.slice().sort((p,g)=>p.from-g.from||p.to-g.to),o=new lr,u=[],h=0;for(let p=0;;){let g=p==l.length?null:l[p];if(!g&&!u.length)break;let O,b;for(u.length?(O=h,b=u.reduce((x,w)=>Math.min(x,w.to),g&&g.from>O?g.from:1e8)):(O=g.from,b=g.to,u.push(g),p++);p<l.length;){let x=l[p];if(x.from==O&&(x.to>x.from||x.to==O))u.push(x),p++,b=Math.min(x.to,b);else{b=Math.min(x.from,b);break}}let v=G$(u);if(u.some(x=>x.from==x.to||x.from==x.to-1&&n.doc.lineAt(x.from).to==x.from))o.add(O,O,Re.widget({widget:new j$(v),diagnostics:u.slice()}));else{let x=u.reduce((w,T)=>T.markClass?w+" "+T.markClass:w,"");o.add(O,b,Re.mark({class:"cm-lintRange cm-lintRange-"+v+x,diagnostics:u.slice(),inclusiveEnd:u.some(w=>w.to>b)}))}h=b;for(let x=0;x<u.length;x++)u[x].to<=h&&u.splice(x--,1)}let d=o.finish();return new vl(d,t,Va(d))}}function Va(i,e=null,t=0){let n=null;return i.between(t,1e9,(r,l,{spec:o})=>{if(!(e&&o.diagnostics.indexOf(e)<0))if(!n)n=new uk(r,l,e||o.diagnostics[0]);else{if(o.diagnostics.indexOf(n.diagnostic)<0)return!1;n=new uk(n.from,l,n.diagnostic)}}),n}function z$(i,e){let t=e.pos,n=e.end||t,r=i.state.facet(Fu).hideOn(i,t,n);if(r!=null)return r;let l=i.startState.doc.lineAt(e.pos);return!!(i.effects.some(o=>o.is(tE))||i.changes.touchesRange(l.from,Math.max(l.to,n)))}function P$(i,e){return i.field(Yn,!1)?e:e.concat(Be.appendConfig.of(W$))}const tE=Be.define(),VO=Be.define(),nE=Be.define(),Yn=Lt.define({create(){return new vl(Re.none,null,null)},update(i,e){if(e.docChanged&&i.diagnostics.size){let t=i.diagnostics.map(e.changes),n=null,r=i.panel;if(i.selected){let l=e.changes.mapPos(i.selected.from,1);n=Va(t,i.selected.diagnostic,l)||Va(t,null,l)}!t.size&&r&&e.state.facet(Fu).autoPanel&&(r=null),i=new vl(t,r,n)}for(let t of e.effects)if(t.is(tE)){let n=e.state.facet(Fu).autoPanel?t.value.length?Yu.open:null:i.panel;i=vl.init(t.value,n,e.state)}else t.is(VO)?i=new vl(i.diagnostics,t.value?Yu.open:null,i.selected):t.is(nE)&&(i=new vl(i.diagnostics,i.panel,t.value));return i},provide:i=>[ju.from(i,e=>e.panel),fe.decorations.from(i,e=>e.diagnostics)]}),B$=Re.mark({class:"cm-lintRange cm-lintRange-active"});function _$(i,e,t){let{diagnostics:n}=i.state.field(Yn),r,l=-1,o=-1;n.between(e-(t<0?1:0),e+(t>0?1:0),(h,d,{spec:p})=>{if(e>=h&&e<=d&&(h==d||(e>h||t>0)&&(e<d||t<0)))return r=p.diagnostics,l=h,o=d,!1});let u=i.state.facet(Fu).tooltipFilter;return r&&u&&(r=u(r,i.state)),r?{pos:l,end:o,above:i.state.doc.lineAt(l).to<o,create(){return{dom:$$(i,r)}}}:null}function $$(i,e){return dt("ul",{class:"cm-tooltip-lint"},e.map(t=>rE(i,t,!1)))}const L$=i=>{let e=i.state.field(Yn,!1);(!e||!e.panel)&&i.dispatch({effects:P$(i.state,[VO.of(!0)])});let t=Uu(i,Yu.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},ck=i=>{let e=i.state.field(Yn,!1);return!e||!e.panel?!1:(i.dispatch({effects:VO.of(!1)}),!0)},q$=i=>{let e=i.state.field(Yn,!1);if(!e)return!1;let t=i.state.selection.main,n=e.diagnostics.iter(t.to+1);return!n.value&&(n=e.diagnostics.iter(0),!n.value||n.from==t.from&&n.to==t.to)?!1:(i.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0}),!0)},U$=[{key:"Mod-Shift-m",run:L$,preventDefault:!0},{key:"F8",run:q$}],Fu=xe.define({combine(i){return Object.assign({sources:i.map(e=>e.source).filter(e=>e!=null)},fr(i.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,t)=>e?t?n=>e(n)||t(n):e:t}))}});function iE(i){let e=[];if(i)e:for(let{name:t}of i){for(let n=0;n<t.length;n++){let r=t[n];if(/[a-zA-Z]/.test(r)&&!e.some(l=>l.toLowerCase()==r.toLowerCase())){e.push(r);continue e}}e.push("")}return e}function rE(i,e,t){var n;let r=t?iE(e.actions):[];return dt("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},dt("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(i):e.message),(n=e.actions)===null||n===void 0?void 0:n.map((l,o)=>{let u=!1,h=O=>{if(O.preventDefault(),u)return;u=!0;let b=Va(i.state.field(Yn).diagnostics,e);b&&l.apply(i,b.from,b.to)},{name:d}=l,p=r[o]?d.indexOf(r[o]):-1,g=p<0?d:[d.slice(0,p),dt("u",d.slice(p,p+1)),d.slice(p+1)];return dt("button",{type:"button",class:"cm-diagnosticAction",onclick:h,onmousedown:h,"aria-label":` Action: ${d}${p<0?"":` (access key "${r[o]})"`}.`},g)}),e.source&&dt("div",{class:"cm-diagnosticSource"},e.source))}class j$ extends dr{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return dt("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class hk{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=rE(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Yu{constructor(e){this.view=e,this.items=[];let t=r=>{if(r.keyCode==27)ck(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:l}=this.items[this.selectedIndex],o=iE(l.actions);for(let u=0;u<o.length;u++)if(o[u].toUpperCase().charCodeAt(0)==r.keyCode){let h=Va(this.view.state.field(Yn).diagnostics,l);h&&l.actions[u].apply(e,h.from,h.to)}}else return;r.preventDefault()},n=r=>{for(let l=0;l<this.items.length;l++)this.items[l].dom.contains(r.target)&&this.moveSelection(l)};this.list=dt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:n}),this.dom=dt("div",{class:"cm-panel-lint"},this.list,dt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>ck(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(Yn).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(Yn),n=0,r=!1,l=null,o=new Set;for(e.between(0,this.view.state.doc.length,(u,h,{spec:d})=>{for(let p of d.diagnostics){if(o.has(p))continue;o.add(p);let g=-1,O;for(let b=n;b<this.items.length;b++)if(this.items[b].diagnostic==p){g=b;break}g<0?(O=new hk(this.view,p),this.items.splice(n,0,O),r=!0):(O=this.items[g],g>n&&(this.items.splice(n,g-n),r=!0)),t&&O.diagnostic==t.diagnostic?O.dom.hasAttribute("aria-selected")||(O.dom.setAttribute("aria-selected","true"),l=O):O.dom.hasAttribute("aria-selected")&&O.dom.removeAttribute("aria-selected"),n++}});n<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new hk(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),l?(this.list.setAttribute("aria-activedescendant",l.id),this.view.requestMeasure({key:this,read:()=>({sel:l.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:u,panel:h})=>{let d=h.height/this.list.offsetHeight;u.top<h.top?this.list.scrollTop-=(h.top-u.top)/d:u.bottom>h.bottom&&(this.list.scrollTop+=(u.bottom-h.bottom)/d)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function t(){let n=e;e=n.nextSibling,n.remove()}for(let n of this.items)if(n.dom.parentNode==this.list){for(;e!=n.dom;)t();e=n.dom.nextSibling}else this.list.insertBefore(n.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(Yn),n=Va(t.diagnostics,this.items[e].diagnostic);n&&this.view.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0,effects:nE.of(n)})}static open(e){return new Yu(e)}}function H$(i,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(i)}</svg>')`}function af(i){return H$(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${i}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const V$=fe.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:af("#d11")},".cm-lintRange-warning":{backgroundImage:af("orange")},".cm-lintRange-info":{backgroundImage:af("#999")},".cm-lintRange-hint":{backgroundImage:af("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function X$(i){return i=="error"?4:i=="warning"?3:i=="info"?2:1}function G$(i){let e="hint",t=1;for(let n of i){let r=X$(n.severity);r>t&&(t=r,e=n.severity)}return e}const W$=[Yn,fe.decorations.compute([Yn],i=>{let{selected:e,panel:t}=i.field(Yn);return!e||!t||e.from==e.to?Re.none:Re.set([B$.range(e.from,e.to)])}),O3(_$,{hideOn:z$}),V$];var fk=function(e){e===void 0&&(e={});var{crosshairCursor:t=!1}=e,n=[];e.closeBracketsKeymap!==!1&&(n=n.concat(T$)),e.defaultKeymap!==!1&&(n=n.concat(b5)),e.searchKeymap!==!1&&(n=n.concat(V5)),e.historyKeymap!==!1&&(n=n.concat(C_)),e.foldKeymap!==!1&&(n=n.concat(L4)),e.completionKeymap!==!1&&(n=n.concat(eE)),e.lintKeymap!==!1&&(n=n.concat(U$));var r=[];return e.lineNumbers!==!1&&r.push(R3()),e.highlightActiveLineGutter!==!1&&r.push(D3()),e.highlightSpecialChars!==!1&&r.push(WB()),e.history!==!1&&r.push(y_()),e.foldGutter!==!1&&r.push(H4()),e.drawSelection!==!1&&r.push(BB()),e.dropCursor!==!1&&r.push(UB()),e.allowMultipleSelections!==!1&&r.push(qe.allowMultipleSelections.of(!0)),e.indentOnInput!==!1&&r.push(R4()),e.syntaxHighlighting!==!1&&r.push(X4(I4,{fallback:!0})),e.bracketMatching!==!1&&r.push(t_()),e.closeBrackets!==!1&&r.push(S$()),e.autocompletion!==!1&&r.push(D$()),e.rectangularSelection!==!1&&r.push(a3()),t!==!1&&r.push(c3()),e.highlightActiveLine!==!1&&r.push(JB()),e.highlightSelectionMatches!==!1&&r.push(T5()),e.tabSize&&typeof e.tabSize=="number"&&r.push(jd.of(" ".repeat(e.tabSize))),r.concat([pc.of(n.flat())]).filter(Boolean)};const I$=1024;let F$=0,Fg=class{constructor(e,t){this.from=e,this.to=t}},Ot=class{constructor(e={}){this.id=F$++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=cr.match(e)),t=>{let n=e(t);return n===void 0?null:[this,n]}}};Ot.closedBy=new Ot({deserialize:i=>i.split(" ")});Ot.openedBy=new Ot({deserialize:i=>i.split(" ")});Ot.group=new Ot({deserialize:i=>i.split(" ")});Ot.isolate=new Ot({deserialize:i=>{if(i&&i!="rtl"&&i!="ltr"&&i!="auto")throw new RangeError("Invalid value for isolate: "+i);return i||"auto"}});Ot.contextHash=new Ot({perNode:!0});Ot.lookAhead=new Ot({perNode:!0});Ot.mounted=new Ot({perNode:!0});let vd=class{constructor(e,t,n){this.tree=e,this.overlay=t,this.parser=n}static get(e){return e&&e.props&&e.props[Ot.mounted.id]}};const Y$=Object.create(null);let cr=class sE{constructor(e,t,n,r=0){this.name=e,this.props=t,this.id=n,this.flags=r}static define(e){let t=e.props&&e.props.length?Object.create(null):Y$,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new sE(e.name||"",t,e.id,n);if(e.props){for(let l of e.props)if(Array.isArray(l)||(l=l(r)),l){if(l[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[l[0].id]=l[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(Ot.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let n in e)for(let r of n.split(" "))t[r]=e[n];return n=>{for(let r=n.prop(Ot.group),l=-1;l<(r?r.length:0);l++){let o=t[l<0?n.name:r[l]];if(o)return o}}}};cr.none=new cr("",Object.create(null),0,8);const of=new WeakMap,dk=new WeakMap;var an;(function(i){i[i.ExcludeBuffers=1]="ExcludeBuffers",i[i.IncludeAnonymous=2]="IncludeAnonymous",i[i.IgnoreMounts=4]="IgnoreMounts",i[i.IgnoreOverlays=8]="IgnoreOverlays"})(an||(an={}));let Zn=class Qy{constructor(e,t,n,r,l){if(this.type=e,this.children=t,this.positions=n,this.length=r,this.props=null,l&&l.length){this.props=Object.create(null);for(let[o,u]of l)this.props[typeof o=="number"?o:o.id]=u}}toString(){let e=vd.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let n of this.children){let r=n.toString();r&&(t&&(t+=","),t+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new By(this.topNode,e)}cursorAt(e,t=0,n=0){let r=of.get(this)||this.topNode,l=new By(r);return l.moveTo(e,t),of.set(this,l._tree),l}get topNode(){return new js(this,0,0,null)}resolve(e,t=0){let n=Zu(of.get(this)||this.topNode,e,t,!1);return of.set(this,n),n}resolveInner(e,t=0){let n=Zu(dk.get(this)||this.topNode,e,t,!0);return dk.set(this,n),n}resolveStack(e,t=0){return eL(this,e,t)}iterate(e){let{enter:t,leave:n,from:r=0,to:l=this.length}=e,o=e.mode||0,u=(o&an.IncludeAnonymous)>0;for(let h=this.cursor(o|an.IncludeAnonymous);;){let d=!1;if(h.from<=l&&h.to>=r&&(!u&&h.type.isAnonymous||t(h)!==!1)){if(h.firstChild())continue;d=!0}for(;d&&n&&(u||!h.type.isAnonymous)&&n(h),!h.nextSibling();){if(!h.parent())return;d=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:GO(cr.none,this.children,this.positions,0,this.children.length,0,this.length,(t,n,r)=>new Qy(this.type,t,n,r,this.propValues),e.makeTree||((t,n,r)=>new Qy(cr.none,t,n,r)))}static build(e){return tL(e)}};Zn.empty=new Zn(cr.none,[],[],0);let Z$=class lE{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new lE(this.buffer,this.index)}},Xa=class aE{constructor(e,t,n){this.buffer=e,this.length=t,this.set=n}get type(){return cr.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],n=this.buffer[e+3],r=this.set.types[t],l=r.name;if(/\W/.test(l)&&!r.isError&&(l=JSON.stringify(l)),e+=4,n==e)return l;let o=[];for(;e<n;)o.push(this.childString(e)),e=this.buffer[e+3];return l+"("+o.join(",")+")"}findChild(e,t,n,r,l){let{buffer:o}=this,u=-1;for(let h=e;h!=t&&!(oE(l,r,o[h+1],o[h+2])&&(u=h,n>0));h=o[h+3]);return u}slice(e,t,n){let r=this.buffer,l=new Uint16Array(t-e),o=0;for(let u=e,h=0;u<t;){l[h++]=r[u++],l[h++]=r[u++]-n;let d=l[h++]=r[u++]-n;l[h++]=r[u++]-e,o=Math.max(o,d)}return new aE(l,o,this.set)}};function oE(i,e,t,n){switch(i){case-2:return t<e;case-1:return n>=e&&t<e;case 0:return t<e&&n>e;case 1:return t<=e&&n>e;case 2:return n>e;case 4:return!0}}function Zu(i,e,t,n){for(var r;i.from==i.to||(t<1?i.from>=e:i.from>e)||(t>-1?i.to<=e:i.to<e);){let o=!n&&i instanceof js&&i.index<0?null:i.parent;if(!o)return i;i=o}let l=n?0:an.IgnoreOverlays;if(n)for(let o=i,u=o.parent;u;o=u,u=o.parent)o instanceof js&&o.index<0&&((r=u.enter(e,t,l))===null||r===void 0?void 0:r.from)!=o.from&&(i=u);for(;;){let o=i.enter(e,t,l);if(!o)return i;i=o}}let uE=class{cursor(e=0){return new By(this,e)}getChild(e,t=null,n=null){let r=pk(this,e,t,n);return r.length?r[0]:null}getChildren(e,t=null,n=null){return pk(this,e,t,n)}resolve(e,t=0){return Zu(this,e,t,!1)}resolveInner(e,t=0){return Zu(this,e,t,!0)}matchContext(e){return zy(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),n=this;for(;t;){let r=t.lastChild;if(!r||r.to!=t.to)break;r.type.isError&&r.from==r.to?(n=t,t=r.prevSibling):t=r}return n}get node(){return this}get next(){return this.parent}},js=class qf extends uE{constructor(e,t,n,r){super(),this._tree=e,this.from=t,this.index=n,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,n,r,l=0){for(let o=this;;){for(let{children:u,positions:h}=o._tree,d=t>0?u.length:-1;e!=d;e+=t){let p=u[e],g=h[e]+o.from;if(oE(r,n,g,g+p.length)){if(p instanceof Xa){if(l&an.ExcludeBuffers)continue;let O=p.findChild(0,p.buffer.length,t,n-g,r);if(O>-1)return new Py(new K$(o,p,e,g),null,O)}else if(l&an.IncludeAnonymous||!p.type.isAnonymous||XO(p)){let O;if(!(l&an.IgnoreMounts)&&(O=vd.get(p))&&!O.overlay)return new qf(O.tree,g,e,o);let b=new qf(p,g,e,o);return l&an.IncludeAnonymous||!b.type.isAnonymous?b:b.nextChild(t<0?p.children.length-1:0,t,n,r)}}}if(l&an.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,n=0){let r;if(!(n&an.IgnoreOverlays)&&(r=vd.get(this._tree))&&r.overlay){let l=e-this.from;for(let{from:o,to:u}of r.overlay)if((t>0?o<=l:o<l)&&(t<0?u>=l:u>l))return new qf(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,n)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}};function pk(i,e,t,n){let r=i.cursor(),l=[];if(!r.firstChild())return l;if(t!=null){for(let o=!1;!o;)if(o=r.type.is(t),!r.nextSibling())return l}for(;;){if(n!=null&&r.type.is(n))return l;if(r.type.is(e)&&l.push(r.node),!r.nextSibling())return n==null?l:[]}}function zy(i,e,t=e.length-1){for(let n=i;t>=0;n=n.parent){if(!n)return!1;if(!n.type.isAnonymous){if(e[t]&&e[t]!=n.name)return!1;t--}}return!0}let K$=class{constructor(e,t,n,r){this.parent=e,this.buffer=t,this.index=n,this.start=r}},Py=class wu extends uE{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,n){super(),this.context=e,this._parent=t,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}child(e,t,n){let{buffer:r}=this.context,l=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.context.start,n);return l<0?null:new wu(this.context,this,l)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,n=0){if(n&an.ExcludeBuffers)return null;let{buffer:r}=this.context,l=r.findChild(this.index+4,r.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return l<0?null:new wu(this.context,this,l)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new wu(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new wu(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:n}=this.context,r=this.index+4,l=n.buffer[this.index+3];if(l>r){let o=n.buffer[this.index+1];e.push(n.slice(r,l,o)),t.push(0)}return new Zn(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}};function cE(i){if(!i.length)return null;let e=0,t=i[0];for(let l=1;l<i.length;l++){let o=i[l];(o.from>t.from||o.to<t.to)&&(t=o,e=l)}let n=t instanceof js&&t.index<0?null:t.parent,r=i.slice();return n?r[e]=n:r.splice(e,1),new J$(r,t)}let J$=class{constructor(e,t){this.heads=e,this.node=t}get next(){return cE(this.heads)}};function eL(i,e,t){let n=i.resolveInner(e,t),r=null;for(let l=n instanceof js?n:n.context.parent;l;l=l.parent)if(l.index<0){let o=l.parent;(r||(r=[n])).push(o.resolve(e,t)),l=o}else{let o=vd.get(l.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let u=new js(o.tree,o.overlay[0].from+l.from,-1,l);(r||(r=[n])).push(Zu(u,e,t,!1))}}return r?cE(r):n}let By=class{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof js)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let n=e._parent;n;n=n._parent)this.stack.unshift(n.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:n,buffer:r}=this.buffer;return this.type=t||r.set.types[r.buffer[e]],this.from=n+r.buffer[e+1],this.to=n+r.buffer[e+2],!0}yield(e){return e?e instanceof js?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,n,this.mode));let{buffer:r}=this.buffer,l=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.buffer.start,n);return l<0?!1:(this.stack.push(this.index),this.yieldBuf(l))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,n=this.mode){return this.buffer?n&an.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&an.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&an.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,n=this.stack.length-1;if(e<0){let r=n<0?0:this.stack[n]+4;if(this.index!=r)return this.yieldBuf(t.findChild(r,this.index,-1,0,4))}else{let r=t.buffer[this.index+3];if(r<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(r)}return n<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,n,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let l=0;l<this.index;l++)if(r.buffer.buffer[l+3]<this.index)return!1;({index:t,parent:n}=r)}else({index:t,_parent:n}=this._tree);for(;n;{index:t,_parent:n}=n)if(t>-1)for(let l=t+e,o=e<0?-1:n._tree.children.length;l!=o;l+=e){let u=n._tree.children[l];if(this.mode&an.IncludeAnonymous||u instanceof Xa||!u.type.isAnonymous||XO(u))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer)e:for(let r=this.index,l=this.stack.length;l>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;t=o,n=l+1;break e}r=this.stack[--l]}for(let r=n;r<this.stack.length;r++)t=new Py(this.buffer,t,this.stack[r]);return this.bufferNode=new Py(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let n=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){n++;continue}this.type.isAnonymous||(r=!0)}for(;;){if(r&&t&&t(this),r=this.type.isAnonymous,!n)return;if(this.nextSibling())break;this.parent(),n--,r=!0}}}matchContext(e){if(!this.buffer)return zy(this.node.parent,e);let{buffer:t}=this.buffer,{types:n}=t.set;for(let r=e.length-1,l=this.stack.length-1;r>=0;l--){if(l<0)return zy(this._tree,e,r);let o=n[t.buffer[this.stack[l]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}};function XO(i){return i.children.some(e=>e instanceof Xa||!e.type.isAnonymous||XO(e))}function tL(i){var e;let{buffer:t,nodeSet:n,maxBufferLength:r=I$,reused:l=[],minRepeatType:o=n.types.length}=i,u=Array.isArray(t)?new Z$(t,t.length):t,h=n.types,d=0,p=0;function g(A,B,C,U,$,K){let{id:L,start:Q,end:Y,size:te}=u,ae=p,j=d;for(;te<0;)if(u.next(),te==-1){let G=l[L];C.push(G),U.push(Q-A);return}else if(te==-3){d=L;return}else if(te==-4){p=L;return}else throw new RangeError(`Unrecognized record size: ${te}`);let se=h[L],de,pe,R=Q-A;if(Y-Q<=r&&(pe=w(u.pos-B,$))){let G=new Uint16Array(pe.size-pe.skip),Z=u.pos-pe.size,ne=G.length;for(;u.pos>Z;)ne=T(pe.start,G,ne);de=new Xa(G,Y-pe.start,n),R=pe.start-A}else{let G=u.pos-te;u.next();let Z=[],ne=[],he=L>=o?L:-1,Me=0,Ce=Y;for(;u.pos>G;)he>=0&&u.id==he&&u.size>=0?(u.end<=Ce-r&&(v(Z,ne,Q,Me,u.end,Ce,he,ae,j),Me=Z.length,Ce=u.end),u.next()):K>2500?O(Q,G,Z,ne):g(Q,G,Z,ne,he,K+1);if(he>=0&&Me>0&&Me<Z.length&&v(Z,ne,Q,Me,Q,Ce,he,ae,j),Z.reverse(),ne.reverse(),he>-1&&Me>0){let nt=b(se,j);de=GO(se,Z,ne,0,Z.length,0,Y-Q,nt,nt)}else de=x(se,Z,ne,Y-Q,ae-Y,j)}C.push(de),U.push(R)}function O(A,B,C,U){let $=[],K=0,L=-1;for(;u.pos>B;){let{id:Q,start:Y,end:te,size:ae}=u;if(ae>4)u.next();else{if(L>-1&&Y<L)break;L<0&&(L=te-r),$.push(Q,Y,te),K++,u.next()}}if(K){let Q=new Uint16Array(K*4),Y=$[$.length-2];for(let te=$.length-3,ae=0;te>=0;te-=3)Q[ae++]=$[te],Q[ae++]=$[te+1]-Y,Q[ae++]=$[te+2]-Y,Q[ae++]=ae;C.push(new Xa(Q,$[2]-Y,n)),U.push(Y-A)}}function b(A,B){return(C,U,$)=>{let K=0,L=C.length-1,Q,Y;if(L>=0&&(Q=C[L])instanceof Zn){if(!L&&Q.type==A&&Q.length==$)return Q;(Y=Q.prop(Ot.lookAhead))&&(K=U[L]+Q.length+Y)}return x(A,C,U,$,K,B)}}function v(A,B,C,U,$,K,L,Q,Y){let te=[],ae=[];for(;A.length>U;)te.push(A.pop()),ae.push(B.pop()+C-$);A.push(x(n.types[L],te,ae,K-$,Q-K,Y)),B.push($-C)}function x(A,B,C,U,$,K,L){if(K){let Q=[Ot.contextHash,K];L=L?[Q].concat(L):[Q]}if($>25){let Q=[Ot.lookAhead,$];L=L?[Q].concat(L):[Q]}return new Zn(A,B,C,U,L)}function w(A,B){let C=u.fork(),U=0,$=0,K=0,L=C.end-r,Q={size:0,start:0,skip:0};e:for(let Y=C.pos-A;C.pos>Y;){let te=C.size;if(C.id==B&&te>=0){Q.size=U,Q.start=$,Q.skip=K,K+=4,U+=4,C.next();continue}let ae=C.pos-te;if(te<0||ae<Y||C.start<L)break;let j=C.id>=o?4:0,se=C.start;for(C.next();C.pos>ae;){if(C.size<0)if(C.size==-3)j+=4;else break e;else C.id>=o&&(j+=4);C.next()}$=se,U+=te,K+=j}return(B<0||U==A)&&(Q.size=U,Q.start=$,Q.skip=K),Q.size>4?Q:void 0}function T(A,B,C){let{id:U,start:$,end:K,size:L}=u;if(u.next(),L>=0&&U<o){let Q=C;if(L>4){let Y=u.pos-(L-4);for(;u.pos>Y;)C=T(A,B,C)}B[--C]=Q,B[--C]=K-A,B[--C]=$-A,B[--C]=U}else L==-3?d=U:L==-4&&(p=U);return C}let E=[],D=[];for(;u.pos>0;)g(i.start||0,i.bufferStart||0,E,D,-1,0);let _=(e=i.length)!==null&&e!==void 0?e:E.length?D[0]+E[0].length:0;return new Zn(h[i.topID],E.reverse(),D.reverse(),_)}const mk=new WeakMap;function Uf(i,e){if(!i.isAnonymous||e instanceof Xa||e.type!=i)return 1;let t=mk.get(e);if(t==null){t=1;for(let n of e.children){if(n.type!=i||!(n instanceof Zn)){t=1;break}t+=Uf(i,n)}mk.set(e,t)}return t}function GO(i,e,t,n,r,l,o,u,h){let d=0;for(let v=n;v<r;v++)d+=Uf(i,e[v]);let p=Math.ceil(d*1.5/8),g=[],O=[];function b(v,x,w,T,E){for(let D=w;D<T;){let _=D,A=x[D],B=Uf(i,v[D]);for(D++;D<T;D++){let C=Uf(i,v[D]);if(B+C>=p)break;B+=C}if(D==_+1){if(B>p){let C=v[_];b(C.children,C.positions,0,C.children.length,x[_]+E);continue}g.push(v[_])}else{let C=x[D-1]+v[D-1].length-A;g.push(GO(i,v,x,_,D,A,C,null,h))}O.push(A+E-l)}}return b(e,t,n,r,0),(u||h)(g,O,o)}let jf=class _y{constructor(e,t,n,r,l=!1,o=!1){this.from=e,this.to=t,this.tree=n,this.offset=r,this.open=(l?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],n=!1){let r=[new _y(0,e.length,e,0,!1,n)];for(let l of t)l.to>e.length&&r.push(l);return r}static applyChanges(e,t,n=128){if(!t.length)return e;let r=[],l=1,o=e.length?e[0]:null;for(let u=0,h=0,d=0;;u++){let p=u<t.length?t[u]:null,g=p?p.fromA:1e9;if(g-h>=n)for(;o&&o.from<g;){let O=o;if(h>=O.from||g<=O.to||d){let b=Math.max(O.from,h)-d,v=Math.min(O.to,g)-d;O=b>=v?null:new _y(b,v,O.tree,O.offset+d,u>0,!!p)}if(O&&r.push(O),o.to>g)break;o=l<e.length?e[l++]:null}if(!p)break;h=p.toA,d=p.toA-p.toB}return r}},nL=class{startParse(e,t,n){return typeof e=="string"&&(e=new iL(e)),n=n?n.length?n.map(r=>new Fg(r.from,r.to)):[new Fg(0,0)]:[new Fg(0,e.length)],this.createParse(e,t||[],n)}parse(e,t,n){let r=this.startParse(e,t,n);for(;;){let l=r.advance();if(l)return l}}},iL=class{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}};new Ot({perNode:!0});let rL=0,$r=class $y{constructor(e,t,n,r){this.name=e,this.set=t,this.base=n,this.modified=r,this.id=rL++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let n=typeof e=="string"?e:"?";if(e instanceof $y&&(t=e),t?.base)throw new Error("Can not derive from a modified tag");let r=new $y(n,[],null,[]);if(r.set.push(r),t)for(let l of t.set)r.set.push(l);return r}static defineModifier(e){let t=new gk(e);return n=>n.modified.indexOf(t)>-1?n:gk.get(n.base||n,n.modified.concat(t).sort((r,l)=>r.id-l.id))}},sL=0,gk=class hE{constructor(e){this.name=e,this.instances=[],this.id=sL++}static get(e,t){if(!t.length)return e;let n=t[0].instances.find(u=>u.base==e&&lL(t,u.modified));if(n)return n;let r=[],l=new $r(e.name,r,e,t);for(let u of t)u.instances.push(l);let o=aL(t);for(let u of e.set)if(!u.modified.length)for(let h of o)r.push(hE.get(u,h));return l}};function lL(i,e){return i.length==e.length&&i.every((t,n)=>t==e[n])}function aL(i){let e=[[]];for(let t=0;t<i.length;t++)for(let n=0,r=e.length;n<r;n++)e.push(e[n].concat(i[t]));return e.sort((t,n)=>n.length-t.length)}function oL(i){let e=Object.create(null);for(let t in i){let n=i[t];Array.isArray(n)||(n=[n]);for(let r of t.split(" "))if(r){let l=[],o=2,u=r;for(let g=0;;){if(u=="..."&&g>0&&g+3==r.length){o=1;break}let O=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(u);if(!O)throw new RangeError("Invalid path: "+r);if(l.push(O[0]=="*"?"":O[0][0]=='"'?JSON.parse(O[0]):O[0]),g+=O[0].length,g==r.length)break;let b=r[g++];if(g==r.length&&b=="!"){o=0;break}if(b!="/")throw new RangeError("Invalid path: "+r);u=r.slice(g)}let h=l.length-1,d=l[h];if(!d)throw new RangeError("Invalid path: "+r);let p=new Sd(n,o,h>0?l.slice(0,h):null);e[d]=p.sort(e[d])}}return fE.add(e)}const fE=new Ot;let Sd=class{constructor(e,t,n,r){this.tags=e,this.mode=t,this.context=n,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}};Sd.empty=new Sd([],2,null);function dE(i,e){let t=Object.create(null);for(let l of i)if(!Array.isArray(l.tag))t[l.tag.id]=l.class;else for(let o of l.tag)t[o.id]=l.class;let{scope:n,all:r=null}=e||{};return{style:l=>{let o=r;for(let u of l)for(let h of u.set){let d=t[h.id];if(d){o=o?o+" "+d:d;break}}return o},scope:n}}function uL(i,e){let t=null;for(let n of i){let r=n.style(e);r&&(t=t?t+" "+r:r)}return t}function cL(i,e,t,n=0,r=i.length){let l=new hL(n,Array.isArray(e)?e:[e],t);l.highlightRange(i.cursor(),n,r,"",l.highlighters),l.flush(r)}class hL{constructor(e,t,n){this.at=e,this.highlighters=t,this.span=n,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,n,r,l){let{type:o,from:u,to:h}=e;if(u>=n||h<=t)return;o.isTop&&(l=this.highlighters.filter(b=>!b.scope||b.scope(o)));let d=r,p=fL(e)||Sd.empty,g=uL(l,p.tags);if(g&&(d&&(d+=" "),d+=g,p.mode==1&&(r+=(r?" ":"")+g)),this.startSpan(Math.max(t,u),d),p.opaque)return;let O=e.tree&&e.tree.prop(Ot.mounted);if(O&&O.overlay){let b=e.node.enter(O.overlay[0].from+u,1),v=this.highlighters.filter(w=>!w.scope||w.scope(O.tree.type)),x=e.firstChild();for(let w=0,T=u;;w++){let E=w<O.overlay.length?O.overlay[w]:null,D=E?E.from+u:h,_=Math.max(t,T),A=Math.min(n,D);if(_<A&&x)for(;e.from<A&&(this.highlightRange(e,_,A,r,l),this.startSpan(Math.min(A,e.to),d),!(e.to>=D||!e.nextSibling())););if(!E||D>n)break;T=E.to+u,T>t&&(this.highlightRange(b.cursor(),Math.max(t,E.from+u),Math.min(n,T),"",v),this.startSpan(Math.min(n,T),d))}x&&e.parent()}else if(e.firstChild()){O&&(r="");do if(!(e.to<=t)){if(e.from>=n)break;this.highlightRange(e,t,n,r,l),this.startSpan(Math.min(n,e.to),d)}while(e.nextSibling());e.parent()}}}function fL(i){let e=i.type.prop(fE);for(;e&&e.context&&!i.matchContext(e.context);)e=e.next;return e||null}const Oe=$r.define,uf=Oe(),Cs=Oe(),yk=Oe(Cs),Ok=Oe(Cs),As=Oe(),cf=Oe(As),Yg=Oe(As),Gi=Oe(),gl=Oe(Gi),$i=Oe(),Li=Oe(),Ly=Oe(),fu=Oe(Ly),hf=Oe(),ce={comment:uf,lineComment:Oe(uf),blockComment:Oe(uf),docComment:Oe(uf),name:Cs,variableName:Oe(Cs),typeName:yk,tagName:Oe(yk),propertyName:Ok,attributeName:Oe(Ok),className:Oe(Cs),labelName:Oe(Cs),namespace:Oe(Cs),macroName:Oe(Cs),literal:As,string:cf,docString:Oe(cf),character:Oe(cf),attributeValue:Oe(cf),number:Yg,integer:Oe(Yg),float:Oe(Yg),bool:Oe(As),regexp:Oe(As),escape:Oe(As),color:Oe(As),url:Oe(As),keyword:$i,self:Oe($i),null:Oe($i),atom:Oe($i),unit:Oe($i),modifier:Oe($i),operatorKeyword:Oe($i),controlKeyword:Oe($i),definitionKeyword:Oe($i),moduleKeyword:Oe($i),operator:Li,derefOperator:Oe(Li),arithmeticOperator:Oe(Li),logicOperator:Oe(Li),bitwiseOperator:Oe(Li),compareOperator:Oe(Li),updateOperator:Oe(Li),definitionOperator:Oe(Li),typeOperator:Oe(Li),controlOperator:Oe(Li),punctuation:Ly,separator:Oe(Ly),bracket:fu,angleBracket:Oe(fu),squareBracket:Oe(fu),paren:Oe(fu),brace:Oe(fu),content:Gi,heading:gl,heading1:Oe(gl),heading2:Oe(gl),heading3:Oe(gl),heading4:Oe(gl),heading5:Oe(gl),heading6:Oe(gl),contentSeparator:Oe(Gi),list:Oe(Gi),quote:Oe(Gi),emphasis:Oe(Gi),strong:Oe(Gi),link:Oe(Gi),monospace:Oe(Gi),strikethrough:Oe(Gi),inserted:Oe(),deleted:Oe(),changed:Oe(),invalid:Oe(),meta:hf,documentMeta:Oe(hf),annotation:Oe(hf),processingInstruction:Oe(hf),definition:$r.defineModifier("definition"),constant:$r.defineModifier("constant"),function:$r.defineModifier("function"),standard:$r.defineModifier("standard"),local:$r.defineModifier("local"),special:$r.defineModifier("special")};for(let i in ce){let e=ce[i];e instanceof $r&&(e.name=i)}dE([{tag:ce.link,class:"tok-link"},{tag:ce.heading,class:"tok-heading"},{tag:ce.emphasis,class:"tok-emphasis"},{tag:ce.strong,class:"tok-strong"},{tag:ce.keyword,class:"tok-keyword"},{tag:ce.atom,class:"tok-atom"},{tag:ce.bool,class:"tok-bool"},{tag:ce.url,class:"tok-url"},{tag:ce.labelName,class:"tok-labelName"},{tag:ce.inserted,class:"tok-inserted"},{tag:ce.deleted,class:"tok-deleted"},{tag:ce.literal,class:"tok-literal"},{tag:ce.string,class:"tok-string"},{tag:ce.number,class:"tok-number"},{tag:[ce.regexp,ce.escape,ce.special(ce.string)],class:"tok-string2"},{tag:ce.variableName,class:"tok-variableName"},{tag:ce.local(ce.variableName),class:"tok-variableName tok-local"},{tag:ce.definition(ce.variableName),class:"tok-variableName tok-definition"},{tag:ce.special(ce.variableName),class:"tok-variableName2"},{tag:ce.definition(ce.propertyName),class:"tok-propertyName tok-definition"},{tag:ce.typeName,class:"tok-typeName"},{tag:ce.namespace,class:"tok-namespace"},{tag:ce.className,class:"tok-className"},{tag:ce.macroName,class:"tok-macroName"},{tag:ce.propertyName,class:"tok-propertyName"},{tag:ce.operator,class:"tok-operator"},{tag:ce.comment,class:"tok-comment"},{tag:ce.meta,class:"tok-meta"},{tag:ce.invalid,class:"tok-invalid"},{tag:ce.punctuation,class:"tok-punctuation"}]);var Zg;const ku=new Ot,dL=new Ot;let tr=class{constructor(e,t,n=[],r=""){this.data=e,this.name=r,qe.prototype.hasOwnProperty("tree")||Object.defineProperty(qe.prototype,"tree",{get(){return Ku(this)}}),this.parser=t,this.extension=[Ga.of(this),qe.languageData.of((l,o,u)=>{let h=bk(l,o,u),d=h.type.prop(ku);if(!d)return[];let p=l.facet(d),g=h.type.prop(dL);if(g){let O=h.resolve(o-h.from,u);for(let b of g)if(b.test(O,l)){let v=l.facet(b.facet);return b.type=="replace"?v:v.concat(p)}}return p})].concat(n)}isActiveAt(e,t,n=-1){return bk(e,t,n).type.prop(ku)==this.data}findRegions(e){let t=e.facet(Ga);if(t?.data==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let n=[],r=(l,o)=>{if(l.prop(ku)==this.data){n.push({from:o,to:o+l.length});return}let u=l.prop(Ot.mounted);if(u){if(u.tree.prop(ku)==this.data){if(u.overlay)for(let h of u.overlay)n.push({from:h.from+o,to:h.to+o});else n.push({from:o,to:o+l.length});return}else if(u.overlay){let h=n.length;if(r(u.tree,u.overlay[0].from+o),n.length>h)return}}for(let h=0;h<l.children.length;h++){let d=l.children[h];d instanceof Zn&&r(d,l.positions[h]+o)}};return r(Ku(e),0),n}get allowsNesting(){return!0}};tr.setState=Be.define();function bk(i,e,t){let n=i.facet(Ga),r=Ku(i).topNode;if(!n||n.allowsNesting)for(let l=r;l;l=l.enter(e,t,an.ExcludeBuffers))l.type.isTop&&(r=l);return r}function Ku(i){let e=i.field(tr.state,!1);return e?e.tree:Zn.empty}let pL=class{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let n=this.cursorPos-this.string.length;return e<n||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-n,t-n)}},du=null,mL=class qy{constructor(e,t,n=[],r,l,o,u,h){this.parser=e,this.state=t,this.fragments=n,this.tree=r,this.treeLen=l,this.viewport=o,this.skipped=u,this.scheduleOn=h,this.parse=null,this.tempSkipped=[]}static create(e,t,n){return new qy(e,t,[],Zn.empty,0,n,[],null)}startParse(){return this.parser.startParse(new pL(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=Zn.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var n;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(jf.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(n=this.parse.stoppedAt)!==null&&n!==void 0?n:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(jf.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=du;du=this;try{return e()}finally{du=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=vk(e,t.from,t.to);return e}changes(e,t){let{fragments:n,tree:r,treeLen:l,viewport:o,skipped:u}=this;if(this.takeTree(),!e.empty){let h=[];if(e.iterChangedRanges((d,p,g,O)=>h.push({fromA:d,toA:p,fromB:g,toB:O})),n=jf.applyChanges(n,h),r=Zn.empty,l=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){u=[];for(let d of this.skipped){let p=e.mapPos(d.from,1),g=e.mapPos(d.to,-1);p<g&&u.push({from:p,to:g})}}}return new qy(this.parser,t,n,r,l,o,u,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let n=0;n<this.skipped.length;n++){let{from:r,to:l}=this.skipped[n];r<e.to&&l>e.from&&(this.fragments=vk(this.fragments,r,l),this.skipped.splice(n--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends nL{createParse(t,n,r){let l=r[0].from,o=r[r.length-1].to;return{parsedPos:l,advance(){let h=du;if(h){for(let d of r)h.tempSkipped.push(d);e&&(h.scheduleOn=h.scheduleOn?Promise.all([h.scheduleOn,e]):e)}return this.parsedPos=o,new Zn(cr.none,[],[],o-l)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return du}};function vk(i,e,t){return jf.applyChanges(i,[{fromA:e,toA:t,fromB:e,toB:t}])}let Uy=class jy{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,n)||t.takeTree(),new jy(t)}static init(e){let t=Math.min(3e3,e.doc.length),n=mL.create(e.facet(Ga).parser,e,{from:0,to:t});return n.work(20,t)||n.takeTree(),new jy(n)}};tr.state=Lt.define({create:Uy.init,update(i,e){for(let t of e.effects)if(t.is(tr.setState))return t.value;return e.startState.facet(Ga)!=e.state.facet(Ga)?Uy.init(e.state):i.apply(e)}});let pE=i=>{let e=setTimeout(()=>i(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(pE=i=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(i,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const Kg=typeof navigator<"u"&&(!((Zg=navigator.scheduling)===null||Zg===void 0)&&Zg.isInputPending)?()=>navigator.scheduling.isInputPending():null,gL=wt.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(tr.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(tr.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=pE(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:r}}=this.view,l=n.field(tr.state);if(l.tree==l.context.tree&&l.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!Kg?Math.max(25,e.timeRemaining()-5):1e9),u=l.context.treeLen<r&&n.doc.length>r+1e3,h=l.context.work(()=>Kg&&Kg()||Date.now()>o,r+(u?0:1e5));this.chunkBudget-=Date.now()-t,(h||this.chunkBudget<=0)&&(l.context.takeTree(),this.view.dispatch({effects:tr.setState.of(new Uy(l.context))})),this.chunkBudget>0&&!(h&&!u)&&this.scheduleWork(),this.checkAsyncSchedule(l.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>On(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Ga=xe.define({combine(i){return i.length?i[0]:null},enables:i=>[tr.state,gL,fe.contentAttributes.compute([i],e=>{let t=e.facet(i);return t&&t.name?{"data-language":t.name}:{}})]});class Yd{constructor(e,t){this.specs=e;let n;function r(u){let h=ar.newName();return(n||(n=Object.create(null)))["."+h]=u,h}const l=typeof t.all=="string"?t.all:t.all?r(t.all):void 0,o=t.scope;this.scope=o instanceof tr?u=>u.prop(ku)==o.data:o?u=>u==o:void 0,this.style=dE(e.map(u=>({tag:u.tag,class:u.class||r(Object.assign({},u,{tag:null}))})),{all:l}).style,this.module=n?new ar(n):null,this.themeType=t.themeType}static define(e,t){return new Yd(e,t||{})}}const Hy=xe.define(),yL=xe.define({combine(i){return i.length?[i[0]]:null}});function Jg(i){let e=i.facet(Hy);return e.length?e:i.facet(yL)}function OL(i,e){let t=[vL],n;return i instanceof Yd&&(i.module&&t.push(fe.styleModule.of(i.module)),n=i.themeType),n?t.push(Hy.computeN([fe.darkTheme],r=>r.facet(fe.darkTheme)==(n=="dark")?[i]:[])):t.push(Hy.of(i)),t}class bL{constructor(e){this.markCache=Object.create(null),this.tree=Ku(e.state),this.decorations=this.buildDeco(e,Jg(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=Ku(e.state),n=Jg(e.state),r=n!=Jg(e.startState),{viewport:l}=e.view,o=e.changes.mapPos(this.decoratedTo,1);t.length<l.to&&!r&&t.type==this.tree.type&&o>=l.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(t!=this.tree||e.viewportChanged||r)&&(this.tree=t,this.decorations=this.buildDeco(e.view,n),this.decoratedTo=l.to)}buildDeco(e,t){if(!t||!this.tree.length)return Re.none;let n=new lr;for(let{from:r,to:l}of e.visibleRanges)cL(this.tree,t,(o,u,h)=>{n.add(o,u,this.markCache[h]||(this.markCache[h]=Re.mark({class:h})))},r,l);return n.finish()}}const vL=Fr.high(wt.fromClass(bL,{decorations:i=>i.decorations})),SL=Object.create(null),Sk=[cr.none],xk=[],wk=Object.create(null),xL=Object.create(null);for(let[i,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])xL[i]=wL(SL,e);function e0(i,e){xk.indexOf(i)>-1||(xk.push(i),console.warn(e))}function wL(i,e){let t=[];for(let u of e.split(" ")){let h=[];for(let d of u.split(".")){let p=i[d]||ce[d];p?typeof p=="function"?h.length?h=h.map(p):e0(d,`Modifier ${d} used at start of tag`):h.length?e0(d,`Tag ${d} used as modifier`):h=Array.isArray(p)?p:[p]:e0(d,`Unknown highlighting tag ${d}`)}for(let d of h)t.push(d)}if(!t.length)return 0;let n=e.replace(/ /g,"_"),r=n+" "+t.map(u=>u.id),l=wk[r];if(l)return l.id;let o=wk[r]=cr.define({id:Sk.length,name:n,props:[oL({[n]:t})]});return Sk.push(o),o.id}st.RTL,st.LTR;const kL="#e5c07b",kk="#e06c75",TL="#56b6c2",CL="#ffffff",Hf="#abb2bf",Vy="#7d8799",AL="#61afef",EL="#98c379",Tk="#d19a66",RL="#c678dd",NL="#21252b",Ck="#2c313a",Ak="#282c34",t0="#353a42",ML="#3E4451",Ek="#528bff",DL=fe.theme({"&":{color:Hf,backgroundColor:Ak},".cm-content":{caretColor:Ek},".cm-cursor, .cm-dropCursor":{borderLeftColor:Ek},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:ML},".cm-panels":{backgroundColor:NL,color:Hf},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:Ak,color:Vy,border:"none"},".cm-activeLineGutter":{backgroundColor:Ck},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:t0},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:t0,borderBottomColor:t0},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:Ck,color:Hf}}},{dark:!0}),QL=Yd.define([{tag:ce.keyword,color:RL},{tag:[ce.name,ce.deleted,ce.character,ce.propertyName,ce.macroName],color:kk},{tag:[ce.function(ce.variableName),ce.labelName],color:AL},{tag:[ce.color,ce.constant(ce.name),ce.standard(ce.name)],color:Tk},{tag:[ce.definition(ce.name),ce.separator],color:Hf},{tag:[ce.typeName,ce.className,ce.number,ce.changed,ce.annotation,ce.modifier,ce.self,ce.namespace],color:kL},{tag:[ce.operator,ce.operatorKeyword,ce.url,ce.escape,ce.regexp,ce.link,ce.special(ce.string)],color:TL},{tag:[ce.meta,ce.comment],color:Vy},{tag:ce.strong,fontWeight:"bold"},{tag:ce.emphasis,fontStyle:"italic"},{tag:ce.strikethrough,textDecoration:"line-through"},{tag:ce.link,color:Vy,textDecoration:"underline"},{tag:ce.heading,fontWeight:"bold",color:kk},{tag:[ce.atom,ce.bool,ce.special(ce.variableName)],color:Tk},{tag:[ce.processingInstruction,ce.string,ce.inserted],color:EL},{tag:ce.invalid,color:CL}]),zL=[DL,OL(QL)];var PL=fe.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),BL=function(e){e===void 0&&(e={});var{indentWithTab:t=!0,editable:n=!0,readOnly:r=!1,theme:l="light",placeholder:o="",basicSetup:u=!0}=e,h=[];switch(t&&h.unshift(pc.of([F3])),u&&(typeof u=="boolean"?h.unshift(fk()):h.unshift(fk(u))),o&&h.unshift(i3(o)),l){case"light":h.push(PL);break;case"dark":h.push(zL);break;case"none":break;default:h.push(l);break}return n===!1&&h.push(fe.editable.of(!1)),r&&h.push(qe.readOnly.of(!0)),[...h]},_L=i=>({line:i.state.doc.lineAt(i.state.selection.main.from),lineCount:i.state.doc.lines,lineBreak:i.state.lineBreak,length:i.state.doc.length,readOnly:i.state.readOnly,tabSize:i.state.tabSize,selection:i.state.selection,selectionAsSingle:i.state.selection.asSingle().main,ranges:i.state.selection.ranges,selectionCode:i.state.sliceDoc(i.state.selection.main.from,i.state.selection.main.to),selections:i.state.selection.ranges.map(e=>i.state.sliceDoc(e.from,e.to)),selectedText:i.state.selection.ranges.some(e=>!e.empty)});class $L{constructor(e,t){this.timeLeftMS=void 0,this.timeoutMS=void 0,this.isCancelled=!1,this.isTimeExhausted=!1,this.callbacks=[],this.timeLeftMS=t,this.timeoutMS=t,this.callbacks.push(e)}tick(){if(!this.isCancelled&&!this.isTimeExhausted&&(this.timeLeftMS--,this.timeLeftMS<=0)){this.isTimeExhausted=!0;var e=this.callbacks.slice();this.callbacks.length=0,e.forEach(t=>{try{t()}catch(n){console.error("TimeoutLatch callback error:",n)}})}}cancel(){this.isCancelled=!0,this.callbacks.length=0}reset(){this.timeLeftMS=this.timeoutMS,this.isCancelled=!1,this.isTimeExhausted=!1}get isDone(){return this.isCancelled||this.isTimeExhausted}}class Rk{constructor(){this.interval=null,this.latches=new Set}add(e){this.latches.add(e),this.start()}remove(e){this.latches.delete(e),this.latches.size===0&&this.stop()}start(){this.interval===null&&(this.interval=setInterval(()=>{this.latches.forEach(e=>{e.tick(),e.isDone&&this.remove(e)})},1))}stop(){this.interval!==null&&(clearInterval(this.interval),this.interval=null)}}var n0=null,LL=()=>typeof window>"u"?new Rk:(n0||(n0=new Rk),n0),Nk=ki.define(),qL=200,UL=[];function jL(i){var{value:e,selection:t,onChange:n,onStatistics:r,onCreateEditor:l,onUpdate:o,extensions:u=UL,autoFocus:h,theme:d="light",height:p=null,minHeight:g=null,maxHeight:O=null,width:b=null,minWidth:v=null,maxWidth:x=null,placeholder:w="",editable:T=!0,readOnly:E=!1,indentWithTab:D=!0,basicSetup:_=!0,root:A,initialState:B}=i,[C,U]=M.useState(),[$,K]=M.useState(),[L,Q]=M.useState(),Y=M.useState(()=>({current:null}))[0],te=M.useState(()=>({current:null}))[0],ae=fe.theme({"&":{height:p,minHeight:g,maxHeight:O,width:b,minWidth:v,maxWidth:x},"& .cm-scroller":{height:"100% !important"}}),j=fe.updateListener.of(pe=>{if(pe.docChanged&&typeof n=="function"&&!pe.transactions.some(Z=>Z.annotation(Nk))){Y.current?Y.current.reset():(Y.current=new $L(()=>{if(te.current){var Z=te.current;te.current=null,Z()}Y.current=null},qL),LL().add(Y.current));var R=pe.state.doc,G=R.toString();n(G,pe)}r&&r(_L(pe))}),se=BL({theme:d,editable:T,readOnly:E,placeholder:w,indentWithTab:D,basicSetup:_}),de=[j,ae,...se];return o&&typeof o=="function"&&de.push(fe.updateListener.of(o)),de=de.concat(u),M.useLayoutEffect(()=>{if(C&&!L){var pe={doc:e,selection:t,extensions:de},R=B?qe.fromJSON(B.json,pe,B.fields):qe.create(pe);if(Q(R),!$){var G=new fe({state:R,parent:C,root:A});K(G),l&&l(G,R)}}return()=>{$&&(Q(void 0),K(void 0))}},[C,L]),M.useEffect(()=>{i.container&&U(i.container)},[i.container]),M.useEffect(()=>()=>{$&&($.destroy(),K(void 0)),Y.current&&(Y.current.cancel(),Y.current=null)},[$]),M.useEffect(()=>{h&&$&&$.focus()},[h,$]),M.useEffect(()=>{$&&$.dispatch({effects:Be.reconfigure.of(de)})},[d,u,p,g,O,b,v,x,w,T,E,D,_,n,o]),M.useEffect(()=>{if(e!==void 0){var pe=$?$.state.doc.toString():"";if($&&e!==pe){var R=Y.current&&!Y.current.isDone,G=()=>{$&&e!==$.state.doc.toString()&&$.dispatch({changes:{from:0,to:$.state.doc.toString().length,insert:e||""},annotations:[Nk.of(!0)]})};R?te.current=G:G()}}},[e,$]),{state:L,setState:Q,view:$,setView:K,container:C,setContainer:U}}var HL=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],mE=M.forwardRef((i,e)=>{var{className:t,value:n="",selection:r,extensions:l=[],onChange:o,onStatistics:u,onCreateEditor:h,onUpdate:d,autoFocus:p,theme:g="light",height:O,minHeight:b,maxHeight:v,width:x,minWidth:w,maxWidth:T,basicSetup:E,placeholder:D,indentWithTab:_,editable:A,readOnly:B,root:C,initialState:U}=i,$=Mz(i,HL),K=M.useRef(null),{state:L,view:Q,container:Y,setContainer:te}=jL({root:C,value:n,autoFocus:p,theme:g,height:O,minHeight:b,maxHeight:v,width:x,minWidth:w,maxWidth:T,basicSetup:E,placeholder:D,indentWithTab:_,editable:A,readOnly:B,selection:r,onChange:o,onStatistics:u,onCreateEditor:h,onUpdate:d,extensions:l,initialState:U});M.useImperativeHandle(e,()=>({editor:K.current,state:L,view:Q}),[K,Y,L,Q]);var ae=M.useCallback(se=>{K.current=se,te(se)},[te]);if(typeof n!="string")throw new Error("value must be typeof string but got "+typeof n);var j=typeof g=="string"?"cm-theme-"+g:"cm-theme";return P.jsx("div",E0({ref:ae,className:""+j+(t?" "+t:"")},$))});mE.displayName="CodeMirror";const gE=1024;let VL=0,i0=class{constructor(e,t){this.from=e,this.to=t}},vt=class{constructor(e={}){this.id=VL++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Wr.match(e)),t=>{let n=e(t);return n===void 0?null:[this,n]}}};vt.closedBy=new vt({deserialize:i=>i.split(" ")});vt.openedBy=new vt({deserialize:i=>i.split(" ")});vt.group=new vt({deserialize:i=>i.split(" ")});vt.isolate=new vt({deserialize:i=>{if(i&&i!="rtl"&&i!="ltr"&&i!="auto")throw new RangeError("Invalid value for isolate: "+i);return i||"auto"}});vt.contextHash=new vt({perNode:!0});vt.lookAhead=new vt({perNode:!0});vt.mounted=new vt({perNode:!0});let xd=class{constructor(e,t,n){this.tree=e,this.overlay=t,this.parser=n}static get(e){return e&&e.props&&e.props[vt.mounted.id]}};const XL=Object.create(null);let Wr=class yE{constructor(e,t,n,r=0){this.name=e,this.props=t,this.id=n,this.flags=r}static define(e){let t=e.props&&e.props.length?Object.create(null):XL,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new yE(e.name||"",t,e.id,n);if(e.props){for(let l of e.props)if(Array.isArray(l)||(l=l(r)),l){if(l[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[l[0].id]=l[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(vt.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let n in e)for(let r of n.split(" "))t[r]=e[n];return n=>{for(let r=n.prop(vt.group),l=-1;l<(r?r.length:0);l++){let o=t[l<0?n.name:r[l]];if(o)return o}}}};Wr.none=new Wr("",Object.create(null),0,8);class WO{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let n of this.types){let r=null;for(let l of e){let o=l(n);o&&(r||(r=Object.assign({},n.props)),r[o[0].id]=o[1])}t.push(r?new Wr(n.name,r,n.id,n.flags):n)}return new WO(t)}}const ff=new WeakMap,Mk=new WeakMap;var on;(function(i){i[i.ExcludeBuffers=1]="ExcludeBuffers",i[i.IncludeAnonymous=2]="IncludeAnonymous",i[i.IgnoreMounts=4]="IgnoreMounts",i[i.IgnoreOverlays=8]="IgnoreOverlays"})(on||(on={}));let vi=class Xy{constructor(e,t,n,r,l){if(this.type=e,this.children=t,this.positions=n,this.length=r,this.props=null,l&&l.length){this.props=Object.create(null);for(let[o,u]of l)this.props[typeof o=="number"?o:o.id]=u}}toString(){let e=xd.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let n of this.children){let r=n.toString();r&&(t&&(t+=","),t+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new Iy(this.topNode,e)}cursorAt(e,t=0,n=0){let r=ff.get(this)||this.topNode,l=new Iy(r);return l.moveTo(e,t),ff.set(this,l._tree),l}get topNode(){return new Hs(this,0,0,null)}resolve(e,t=0){let n=Ju(ff.get(this)||this.topNode,e,t,!1);return ff.set(this,n),n}resolveInner(e,t=0){let n=Ju(Mk.get(this)||this.topNode,e,t,!0);return Mk.set(this,n),n}resolveStack(e,t=0){return FL(this,e,t)}iterate(e){let{enter:t,leave:n,from:r=0,to:l=this.length}=e,o=e.mode||0,u=(o&on.IncludeAnonymous)>0;for(let h=this.cursor(o|on.IncludeAnonymous);;){let d=!1;if(h.from<=l&&h.to>=r&&(!u&&h.type.isAnonymous||t(h)!==!1)){if(h.firstChild())continue;d=!0}for(;d&&n&&(u||!h.type.isAnonymous)&&n(h),!h.nextSibling();){if(!h.parent())return;d=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:FO(Wr.none,this.children,this.positions,0,this.children.length,0,this.length,(t,n,r)=>new Xy(this.type,t,n,r,this.propValues),e.makeTree||((t,n,r)=>new Xy(Wr.none,t,n,r)))}static build(e){return YL(e)}};vi.empty=new vi(Wr.none,[],[],0);let GL=class OE{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new OE(this.buffer,this.index)}},Wa=class bE{constructor(e,t,n){this.buffer=e,this.length=t,this.set=n}get type(){return Wr.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],n=this.buffer[e+3],r=this.set.types[t],l=r.name;if(/\W/.test(l)&&!r.isError&&(l=JSON.stringify(l)),e+=4,n==e)return l;let o=[];for(;e<n;)o.push(this.childString(e)),e=this.buffer[e+3];return l+"("+o.join(",")+")"}findChild(e,t,n,r,l){let{buffer:o}=this,u=-1;for(let h=e;h!=t&&!(vE(l,r,o[h+1],o[h+2])&&(u=h,n>0));h=o[h+3]);return u}slice(e,t,n){let r=this.buffer,l=new Uint16Array(t-e),o=0;for(let u=e,h=0;u<t;){l[h++]=r[u++],l[h++]=r[u++]-n;let d=l[h++]=r[u++]-n;l[h++]=r[u++]-e,o=Math.max(o,d)}return new bE(l,o,this.set)}};function vE(i,e,t,n){switch(i){case-2:return t<e;case-1:return n>=e&&t<e;case 0:return t<e&&n>e;case 1:return t<=e&&n>e;case 2:return n>e;case 4:return!0}}function Ju(i,e,t,n){for(var r;i.from==i.to||(t<1?i.from>=e:i.from>e)||(t>-1?i.to<=e:i.to<e);){let o=!n&&i instanceof Hs&&i.index<0?null:i.parent;if(!o)return i;i=o}let l=n?0:on.IgnoreOverlays;if(n)for(let o=i,u=o.parent;u;o=u,u=o.parent)o instanceof Hs&&o.index<0&&((r=u.enter(e,t,l))===null||r===void 0?void 0:r.from)!=o.from&&(i=u);for(;;){let o=i.enter(e,t,l);if(!o)return i;i=o}}let SE=class{cursor(e=0){return new Iy(this,e)}getChild(e,t=null,n=null){let r=Dk(this,e,t,n);return r.length?r[0]:null}getChildren(e,t=null,n=null){return Dk(this,e,t,n)}resolve(e,t=0){return Ju(this,e,t,!1)}resolveInner(e,t=0){return Ju(this,e,t,!0)}matchContext(e){return Gy(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),n=this;for(;t;){let r=t.lastChild;if(!r||r.to!=t.to)break;r.type.isError&&r.from==r.to?(n=t,t=r.prevSibling):t=r}return n}get node(){return this}get next(){return this.parent}},Hs=class Vf extends SE{constructor(e,t,n,r){super(),this._tree=e,this.from=t,this.index=n,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,n,r,l=0){for(let o=this;;){for(let{children:u,positions:h}=o._tree,d=t>0?u.length:-1;e!=d;e+=t){let p=u[e],g=h[e]+o.from;if(vE(r,n,g,g+p.length)){if(p instanceof Wa){if(l&on.ExcludeBuffers)continue;let O=p.findChild(0,p.buffer.length,t,n-g,r);if(O>-1)return new Wy(new WL(o,p,e,g),null,O)}else if(l&on.IncludeAnonymous||!p.type.isAnonymous||IO(p)){let O;if(!(l&on.IgnoreMounts)&&(O=xd.get(p))&&!O.overlay)return new Vf(O.tree,g,e,o);let b=new Vf(p,g,e,o);return l&on.IncludeAnonymous||!b.type.isAnonymous?b:b.nextChild(t<0?p.children.length-1:0,t,n,r)}}}if(l&on.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,n=0){let r;if(!(n&on.IgnoreOverlays)&&(r=xd.get(this._tree))&&r.overlay){let l=e-this.from;for(let{from:o,to:u}of r.overlay)if((t>0?o<=l:o<l)&&(t<0?u>=l:u>l))return new Vf(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,n)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}};function Dk(i,e,t,n){let r=i.cursor(),l=[];if(!r.firstChild())return l;if(t!=null){for(let o=!1;!o;)if(o=r.type.is(t),!r.nextSibling())return l}for(;;){if(n!=null&&r.type.is(n))return l;if(r.type.is(e)&&l.push(r.node),!r.nextSibling())return n==null?l:[]}}function Gy(i,e,t=e.length-1){for(let n=i;t>=0;n=n.parent){if(!n)return!1;if(!n.type.isAnonymous){if(e[t]&&e[t]!=n.name)return!1;t--}}return!0}let WL=class{constructor(e,t,n,r){this.parent=e,this.buffer=t,this.index=n,this.start=r}},Wy=class Tu extends SE{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,n){super(),this.context=e,this._parent=t,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}child(e,t,n){let{buffer:r}=this.context,l=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.context.start,n);return l<0?null:new Tu(this.context,this,l)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,n=0){if(n&on.ExcludeBuffers)return null;let{buffer:r}=this.context,l=r.findChild(this.index+4,r.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return l<0?null:new Tu(this.context,this,l)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Tu(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Tu(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:n}=this.context,r=this.index+4,l=n.buffer[this.index+3];if(l>r){let o=n.buffer[this.index+1];e.push(n.slice(r,l,o)),t.push(0)}return new vi(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}};function xE(i){if(!i.length)return null;let e=0,t=i[0];for(let l=1;l<i.length;l++){let o=i[l];(o.from>t.from||o.to<t.to)&&(t=o,e=l)}let n=t instanceof Hs&&t.index<0?null:t.parent,r=i.slice();return n?r[e]=n:r.splice(e,1),new IL(r,t)}let IL=class{constructor(e,t){this.heads=e,this.node=t}get next(){return xE(this.heads)}};function FL(i,e,t){let n=i.resolveInner(e,t),r=null;for(let l=n instanceof Hs?n:n.context.parent;l;l=l.parent)if(l.index<0){let o=l.parent;(r||(r=[n])).push(o.resolve(e,t)),l=o}else{let o=xd.get(l.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let u=new Hs(o.tree,o.overlay[0].from+l.from,-1,l);(r||(r=[n])).push(Ju(u,e,t,!1))}}return r?xE(r):n}let Iy=class{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Hs)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let n=e._parent;n;n=n._parent)this.stack.unshift(n.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:n,buffer:r}=this.buffer;return this.type=t||r.set.types[r.buffer[e]],this.from=n+r.buffer[e+1],this.to=n+r.buffer[e+2],!0}yield(e){return e?e instanceof Hs?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,n,this.mode));let{buffer:r}=this.buffer,l=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.buffer.start,n);return l<0?!1:(this.stack.push(this.index),this.yieldBuf(l))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,n=this.mode){return this.buffer?n&on.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&on.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&on.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,n=this.stack.length-1;if(e<0){let r=n<0?0:this.stack[n]+4;if(this.index!=r)return this.yieldBuf(t.findChild(r,this.index,-1,0,4))}else{let r=t.buffer[this.index+3];if(r<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(r)}return n<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,n,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let l=0;l<this.index;l++)if(r.buffer.buffer[l+3]<this.index)return!1;({index:t,parent:n}=r)}else({index:t,_parent:n}=this._tree);for(;n;{index:t,_parent:n}=n)if(t>-1)for(let l=t+e,o=e<0?-1:n._tree.children.length;l!=o;l+=e){let u=n._tree.children[l];if(this.mode&on.IncludeAnonymous||u instanceof Wa||!u.type.isAnonymous||IO(u))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer)e:for(let r=this.index,l=this.stack.length;l>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;t=o,n=l+1;break e}r=this.stack[--l]}for(let r=n;r<this.stack.length;r++)t=new Wy(this.buffer,t,this.stack[r]);return this.bufferNode=new Wy(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let n=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){n++;continue}this.type.isAnonymous||(r=!0)}for(;;){if(r&&t&&t(this),r=this.type.isAnonymous,!n)return;if(this.nextSibling())break;this.parent(),n--,r=!0}}}matchContext(e){if(!this.buffer)return Gy(this.node.parent,e);let{buffer:t}=this.buffer,{types:n}=t.set;for(let r=e.length-1,l=this.stack.length-1;r>=0;l--){if(l<0)return Gy(this._tree,e,r);let o=n[t.buffer[this.stack[l]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}};function IO(i){return i.children.some(e=>e instanceof Wa||!e.type.isAnonymous||IO(e))}function YL(i){var e;let{buffer:t,nodeSet:n,maxBufferLength:r=gE,reused:l=[],minRepeatType:o=n.types.length}=i,u=Array.isArray(t)?new GL(t,t.length):t,h=n.types,d=0,p=0;function g(A,B,C,U,$,K){let{id:L,start:Q,end:Y,size:te}=u,ae=p,j=d;for(;te<0;)if(u.next(),te==-1){let G=l[L];C.push(G),U.push(Q-A);return}else if(te==-3){d=L;return}else if(te==-4){p=L;return}else throw new RangeError(`Unrecognized record size: ${te}`);let se=h[L],de,pe,R=Q-A;if(Y-Q<=r&&(pe=w(u.pos-B,$))){let G=new Uint16Array(pe.size-pe.skip),Z=u.pos-pe.size,ne=G.length;for(;u.pos>Z;)ne=T(pe.start,G,ne);de=new Wa(G,Y-pe.start,n),R=pe.start-A}else{let G=u.pos-te;u.next();let Z=[],ne=[],he=L>=o?L:-1,Me=0,Ce=Y;for(;u.pos>G;)he>=0&&u.id==he&&u.size>=0?(u.end<=Ce-r&&(v(Z,ne,Q,Me,u.end,Ce,he,ae,j),Me=Z.length,Ce=u.end),u.next()):K>2500?O(Q,G,Z,ne):g(Q,G,Z,ne,he,K+1);if(he>=0&&Me>0&&Me<Z.length&&v(Z,ne,Q,Me,Q,Ce,he,ae,j),Z.reverse(),ne.reverse(),he>-1&&Me>0){let nt=b(se,j);de=FO(se,Z,ne,0,Z.length,0,Y-Q,nt,nt)}else de=x(se,Z,ne,Y-Q,ae-Y,j)}C.push(de),U.push(R)}function O(A,B,C,U){let $=[],K=0,L=-1;for(;u.pos>B;){let{id:Q,start:Y,end:te,size:ae}=u;if(ae>4)u.next();else{if(L>-1&&Y<L)break;L<0&&(L=te-r),$.push(Q,Y,te),K++,u.next()}}if(K){let Q=new Uint16Array(K*4),Y=$[$.length-2];for(let te=$.length-3,ae=0;te>=0;te-=3)Q[ae++]=$[te],Q[ae++]=$[te+1]-Y,Q[ae++]=$[te+2]-Y,Q[ae++]=ae;C.push(new Wa(Q,$[2]-Y,n)),U.push(Y-A)}}function b(A,B){return(C,U,$)=>{let K=0,L=C.length-1,Q,Y;if(L>=0&&(Q=C[L])instanceof vi){if(!L&&Q.type==A&&Q.length==$)return Q;(Y=Q.prop(vt.lookAhead))&&(K=U[L]+Q.length+Y)}return x(A,C,U,$,K,B)}}function v(A,B,C,U,$,K,L,Q,Y){let te=[],ae=[];for(;A.length>U;)te.push(A.pop()),ae.push(B.pop()+C-$);A.push(x(n.types[L],te,ae,K-$,Q-K,Y)),B.push($-C)}function x(A,B,C,U,$,K,L){if(K){let Q=[vt.contextHash,K];L=L?[Q].concat(L):[Q]}if($>25){let Q=[vt.lookAhead,$];L=L?[Q].concat(L):[Q]}return new vi(A,B,C,U,L)}function w(A,B){let C=u.fork(),U=0,$=0,K=0,L=C.end-r,Q={size:0,start:0,skip:0};e:for(let Y=C.pos-A;C.pos>Y;){let te=C.size;if(C.id==B&&te>=0){Q.size=U,Q.start=$,Q.skip=K,K+=4,U+=4,C.next();continue}let ae=C.pos-te;if(te<0||ae<Y||C.start<L)break;let j=C.id>=o?4:0,se=C.start;for(C.next();C.pos>ae;){if(C.size<0)if(C.size==-3)j+=4;else break e;else C.id>=o&&(j+=4);C.next()}$=se,U+=te,K+=j}return(B<0||U==A)&&(Q.size=U,Q.start=$,Q.skip=K),Q.size>4?Q:void 0}function T(A,B,C){let{id:U,start:$,end:K,size:L}=u;if(u.next(),L>=0&&U<o){let Q=C;if(L>4){let Y=u.pos-(L-4);for(;u.pos>Y;)C=T(A,B,C)}B[--C]=Q,B[--C]=K-A,B[--C]=$-A,B[--C]=U}else L==-3?d=U:L==-4&&(p=U);return C}let E=[],D=[];for(;u.pos>0;)g(i.start||0,i.bufferStart||0,E,D,-1,0);let _=(e=i.length)!==null&&e!==void 0?e:E.length?D[0]+E[0].length:0;return new vi(h[i.topID],E.reverse(),D.reverse(),_)}const Qk=new WeakMap;function Xf(i,e){if(!i.isAnonymous||e instanceof Wa||e.type!=i)return 1;let t=Qk.get(e);if(t==null){t=1;for(let n of e.children){if(n.type!=i||!(n instanceof vi)){t=1;break}t+=Xf(i,n)}Qk.set(e,t)}return t}function FO(i,e,t,n,r,l,o,u,h){let d=0;for(let v=n;v<r;v++)d+=Xf(i,e[v]);let p=Math.ceil(d*1.5/8),g=[],O=[];function b(v,x,w,T,E){for(let D=w;D<T;){let _=D,A=x[D],B=Xf(i,v[D]);for(D++;D<T;D++){let C=Xf(i,v[D]);if(B+C>=p)break;B+=C}if(D==_+1){if(B>p){let C=v[_];b(C.children,C.positions,0,C.children.length,x[_]+E);continue}g.push(v[_])}else{let C=x[D-1]+v[D-1].length-A;g.push(FO(i,v,x,_,D,A,C,null,h))}O.push(A+E-l)}}return b(e,t,n,r,0),(u||h)(g,O,o)}let ZL=class{startParse(e,t,n){return typeof e=="string"&&(e=new KL(e)),n=n?n.length?n.map(r=>new i0(r.from,r.to)):[new i0(0,0)]:[new i0(0,e.length)],this.createParse(e,t||[],n)}parse(e,t,n){let r=this.startParse(e,t,n);for(;;){let l=r.advance();if(l)return l}}},KL=class{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}};new vt({perNode:!0});var zk={};class wd{constructor(e,t,n,r,l,o,u,h,d,p=0,g){this.p=e,this.stack=t,this.state=n,this.reducePos=r,this.pos=l,this.score=o,this.buffer=u,this.bufferBase=h,this.curContext=d,this.lookAhead=p,this.parent=g}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,n=0){let r=e.parser.context;return new wd(e,[],t,n,n,0,[],0,r?new Pk(r,r.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let n=e>>19,r=e&65535,{parser:l}=this.p,o=this.reducePos<this.pos-25;o&&this.setLookAhead(this.pos);let u=l.dynamicPrecedence(r);if(u&&(this.score+=u),n==0){this.pushState(l.getGoto(this.state,r,!0),this.reducePos),r<l.minRepeatTerm&&this.storeNode(r,this.reducePos,this.reducePos,o?8:4,!0),this.reduceContext(r,this.reducePos);return}let h=this.stack.length-(n-1)*3-(e&262144?6:0),d=h?this.stack[h-2]:this.p.ranges[0].from,p=this.reducePos-d;p>=2e3&&!(!((t=this.p.parser.nodeSet.types[r])===null||t===void 0)&&t.isAnonymous)&&(d==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=p):this.p.lastBigReductionSize<p&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=d,this.p.lastBigReductionSize=p));let g=h?this.stack[h-1]:0,O=this.bufferBase+this.buffer.length-g;if(r<l.minRepeatTerm||e&131072){let b=l.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(r,d,b,O+4,!0)}if(e&262144)this.state=this.stack[h];else{let b=this.stack[h-3];this.state=l.getGoto(b,r,!0)}for(;this.stack.length>h;)this.stack.pop();this.reduceContext(r,d)}storeNode(e,t,n,r=4,l=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let o=this,u=this.buffer.length;if(u==0&&o.parent&&(u=o.bufferBase-o.parent.bufferBase,o=o.parent),u>0&&o.buffer[u-4]==0&&o.buffer[u-1]>-1){if(t==n)return;if(o.buffer[u-2]>=t){o.buffer[u-2]=n;return}}}if(!l||this.pos==n)this.buffer.push(e,t,n,r);else{let o=this.buffer.length;if(o>0&&this.buffer[o-4]!=0){let u=!1;for(let h=o;h>0&&this.buffer[h-2]>n;h-=4)if(this.buffer[h-1]>=0){u=!0;break}if(u)for(;o>0&&this.buffer[o-2]>n;)this.buffer[o]=this.buffer[o-4],this.buffer[o+1]=this.buffer[o-3],this.buffer[o+2]=this.buffer[o-2],this.buffer[o+3]=this.buffer[o-1],o-=4,r>4&&(r-=4)}this.buffer[o]=e,this.buffer[o+1]=t,this.buffer[o+2]=n,this.buffer[o+3]=r}}shift(e,t,n,r){if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let l=e,{parser:o}=this.p;(r>this.pos||t<=o.maxNode)&&(this.pos=r,o.stateFlag(l,1)||(this.reducePos=r)),this.pushState(l,n),this.shiftContext(t,n),t<=o.maxNode&&this.buffer.push(t,n,r,4)}else this.pos=r,this.shiftContext(t,n),t<=this.p.parser.maxNode&&this.buffer.push(t,n,r,4)}apply(e,t,n,r){e&65536?this.reduce(e):this.shift(e,t,n,r)}useNode(e,t){let n=this.p.reused.length-1;(n<0||this.p.reused[n]!=e)&&(this.p.reused.push(e),n++);let r=this.pos;this.reducePos=this.pos=r+e.length,this.pushState(t,r),this.buffer.push(n,r,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let n=e.buffer.slice(t),r=e.bufferBase+t;for(;e&&r==e.bufferBase;)e=e.parent;return new wd(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,n,r,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let n=e<=this.p.parser.maxNode;n&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,n?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new JL(this);;){let n=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(n==0)return!1;if((n&65536)==0)return!0;t.reduce(n)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let r=[];for(let l=0,o;l<t.length;l+=2)(o=t[l+1])!=this.state&&this.p.parser.hasAction(o,e)&&r.push(t[l],o);if(this.stack.length<120)for(let l=0;r.length<8&&l<t.length;l+=2){let o=t[l+1];r.some((u,h)=>h&1&&u==o)||r.push(t[l],o)}t=r}let n=[];for(let r=0;r<t.length&&n.length<4;r+=2){let l=t[r+1];if(l==this.state)continue;let o=this.split();o.pushState(l,this.pos),o.storeNode(0,o.pos,o.pos,4,!0),o.shiftContext(t[r],this.pos),o.reducePos=this.pos,o.score-=200,n.push(o)}return n}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if((t&65536)==0)return!1;if(!e.validAction(this.state,t)){let n=t>>19,r=t&65535,l=this.stack.length-n*3;if(l<0||e.getGoto(this.stack[l],r,!1)<0){let o=this.findForcedReduction();if(o==null)return!1;t=o}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],n=(r,l)=>{if(!t.includes(r))return t.push(r),e.allActions(r,o=>{if(!(o&393216))if(o&65536){let u=(o>>19)-l;if(u>1){let h=o&65535,d=this.stack.length-u*3;if(d>=0&&e.getGoto(this.stack[d],h,!1)>=0)return u<<19|65536|h}}else{let u=n(o,l+1);if(u!=null)return u}})};return n(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new Pk(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class Pk{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class JL{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,n=e>>19;n==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(n-1)*3;let r=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=r}}class kd{constructor(e,t,n){this.stack=e,this.pos=t,this.index=n,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new kd(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new kd(this.stack,this.pos,this.index)}}function df(i,e=Uint16Array){if(typeof i!="string")return i;let t=null;for(let n=0,r=0;n<i.length;){let l=0;for(;;){let o=i.charCodeAt(n++),u=!1;if(o==126){l=65535;break}o>=92&&o--,o>=34&&o--;let h=o-32;if(h>=46&&(h-=46,u=!0),l+=h,u)break;l*=46}t?t[r++]=l:t=new e(l)}return t}class Gf{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const Bk=new Gf;class eq{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=Bk,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let n=this.range,r=this.rangeIndex,l=this.pos+e;for(;l<n.from;){if(!r)return null;let o=this.ranges[--r];l-=n.from-o.to,n=o}for(;t<0?l>n.to:l>=n.to;){if(r==this.ranges.length-1)return null;let o=this.ranges[++r];l+=o.from-n.to,n=o}return l}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,n,r;if(t>=0&&t<this.chunk.length)n=this.pos+e,r=this.chunk.charCodeAt(t);else{let l=this.resolveOffset(e,1);if(l==null)return-1;if(n=l,n>=this.chunk2Pos&&n<this.chunk2Pos+this.chunk2.length)r=this.chunk2.charCodeAt(n-this.chunk2Pos);else{let o=this.rangeIndex,u=this.range;for(;u.to<=n;)u=this.ranges[++o];this.chunk2=this.input.chunk(this.chunk2Pos=n),n+this.chunk2.length>u.to&&(this.chunk2=this.chunk2.slice(0,u.to-n)),r=this.chunk2.charCodeAt(0)}}return n>=this.token.lookAhead&&(this.token.lookAhead=n+1),r}acceptToken(e,t=0){let n=t?this.resolveOffset(t,-1):this.pos;if(n==null||n<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=n}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=Bk,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let n="";for(let r of this.ranges){if(r.from>=t)break;r.to>e&&(n+=this.input.read(Math.max(r.from,e),Math.min(r.to,t)))}return n}}class Ba{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:n}=t.p;tq(this.data,e,t,this.id,n.data,n.tokenPrecTable)}}Ba.prototype.contextual=Ba.prototype.fallback=Ba.prototype.extend=!1;Ba.prototype.fallback=Ba.prototype.extend=!1;class Zd{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function tq(i,e,t,n,r,l){let o=0,u=1<<n,{dialect:h}=t.p.parser;e:for(;(u&i[o])!=0;){let d=i[o+1];for(let b=o+3;b<d;b+=2)if((i[b+1]&u)>0){let v=i[b];if(h.allows(v)&&(e.token.value==-1||e.token.value==v||nq(v,e.token.value,r,l))){e.acceptToken(v);break}}let p=e.next,g=0,O=i[o+2];if(e.next<0&&O>g&&i[d+O*3-3]==65535){o=i[d+O*3-1];continue e}for(;g<O;){let b=g+O>>1,v=d+b+(b<<1),x=i[v],w=i[v+1]||65536;if(p<x)O=b;else if(p>=w)g=b+1;else{o=i[v+2],e.advance();continue e}}break}}function _k(i,e,t){for(let n=e,r;(r=i[n])!=65535;n++)if(r==t)return n-e;return-1}function nq(i,e,t,n){let r=_k(t,n,e);return r<0||_k(t,n,i)<r}const Wn=typeof process<"u"&&zk&&/\bparse\b/.test(zk.LOG);let r0=null;function $k(i,e,t){let n=i.cursor(on.IncludeAnonymous);for(n.moveTo(e);;)if(!(t<0?n.childBefore(e):n.childAfter(e)))for(;;){if((t<0?n.to<e:n.from>e)&&!n.type.isError)return t<0?Math.max(0,Math.min(n.to-1,e-25)):Math.min(i.length,Math.max(n.from+1,e+25));if(t<0?n.prevSibling():n.nextSibling())break;if(!n.parent())return t<0?0:i.length}}class iq{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?$k(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?$k(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let n=this.trees[t],r=this.index[t];if(r==n.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let l=n.children[r],o=this.start[t]+n.positions[r];if(o>e)return this.nextStart=o,null;if(l instanceof vi){if(o==e){if(o<this.safeFrom)return null;let u=o+l.length;if(u<=this.safeTo){let h=l.prop(vt.lookAhead);if(!h||u+h<this.fragment.to)return l}}this.index[t]++,o+l.length>=Math.max(this.safeFrom,e)&&(this.trees.push(l),this.start.push(o),this.index.push(0))}else this.index[t]++,this.nextStart=o+l.length}}}class rq{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(n=>new Gf)}getActions(e){let t=0,n=null,{parser:r}=e.p,{tokenizers:l}=r,o=r.stateSlot(e.state,3),u=e.curContext?e.curContext.hash:0,h=0;for(let d=0;d<l.length;d++){if((1<<d&o)==0)continue;let p=l[d],g=this.tokens[d];if(!(n&&!p.fallback)&&((p.contextual||g.start!=e.pos||g.mask!=o||g.context!=u)&&(this.updateCachedToken(g,p,e),g.mask=o,g.context=u),g.lookAhead>g.end+25&&(h=Math.max(g.lookAhead,h)),g.value!=0)){let O=t;if(g.extended>-1&&(t=this.addActions(e,g.extended,g.end,t)),t=this.addActions(e,g.value,g.end,t),!p.extend&&(n=g,t>O))break}}for(;this.actions.length>t;)this.actions.pop();return h&&e.setLookAhead(h),!n&&e.pos==this.stream.end&&(n=new Gf,n.value=e.p.parser.eofTerm,n.start=n.end=e.pos,t=this.addActions(e,n.value,n.end,t)),this.mainToken=n,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new Gf,{pos:n,p:r}=e;return t.start=n,t.end=Math.min(n+1,r.stream.end),t.value=n==r.stream.end?r.parser.eofTerm:0,t}updateCachedToken(e,t,n){let r=this.stream.clipPos(n.pos);if(t.token(this.stream.reset(r,e),n),e.value>-1){let{parser:l}=n.p;for(let o=0;o<l.specialized.length;o++)if(l.specialized[o]==e.value){let u=l.specializers[o](this.stream.read(e.start,e.end),n);if(u>=0&&n.p.parser.dialect.allows(u>>1)){(u&1)==0?e.value=u>>1:e.extended=u>>1;break}}}else e.value=0,e.end=this.stream.clipPos(r+1)}putAction(e,t,n,r){for(let l=0;l<r;l+=3)if(this.actions[l]==e)return r;return this.actions[r++]=e,this.actions[r++]=t,this.actions[r++]=n,r}addActions(e,t,n,r){let{state:l}=e,{parser:o}=e.p,{data:u}=o;for(let h=0;h<2;h++)for(let d=o.stateSlot(l,h?2:1);;d+=3){if(u[d]==65535)if(u[d+1]==1)d=Lr(u,d+2);else{r==0&&u[d+1]==2&&(r=this.putAction(Lr(u,d+2),t,n,r));break}u[d]==t&&(r=this.putAction(Lr(u,d+1),t,n,r))}return r}}class sq{constructor(e,t,n,r){this.parser=e,this.input=t,this.ranges=r,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new eq(t,r),this.tokens=new rq(e,this.stream),this.topTerm=e.top[1];let{from:l}=r[0];this.stacks=[wd.start(this,e.top[0],l)],this.fragments=n.length&&this.stream.end-l>e.bufferLength*4?new iq(n,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,n=this.stacks=[],r,l;if(this.bigReductionCount>300&&e.length==1){let[o]=e;for(;o.forceReduce()&&o.stack.length&&o.stack[o.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let o=0;o<e.length;o++){let u=e[o];for(;;){if(this.tokens.mainToken=null,u.pos>t)n.push(u);else{if(this.advanceStack(u,n,e))continue;{r||(r=[],l=[]),r.push(u);let h=this.tokens.getMainToken(u);l.push(h.value,h.end)}}break}}if(!n.length){let o=r&&oq(r);if(o)return Wn&&console.log("Finish with "+this.stackID(o)),this.stackToTree(o);if(this.parser.strict)throw Wn&&r&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&r){let o=this.stoppedAt!=null&&r[0].pos>this.stoppedAt?r[0]:this.runRecovery(r,l,n);if(o)return Wn&&console.log("Force-finish "+this.stackID(o)),this.stackToTree(o.forceAll())}if(this.recovering){let o=this.recovering==1?1:this.recovering*3;if(n.length>o)for(n.sort((u,h)=>h.score-u.score);n.length>o;)n.pop();n.some(u=>u.reducePos>t)&&this.recovering--}else if(n.length>1){e:for(let o=0;o<n.length-1;o++){let u=n[o];for(let h=o+1;h<n.length;h++){let d=n[h];if(u.sameState(d)||u.buffer.length>500&&d.buffer.length>500)if((u.score-d.score||u.buffer.length-d.buffer.length)>0)n.splice(h--,1);else{n.splice(o--,1);continue e}}}n.length>12&&n.splice(12,n.length-12)}this.minStackPos=n[0].pos;for(let o=1;o<n.length;o++)n[o].pos<this.minStackPos&&(this.minStackPos=n[o].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,n){let r=e.pos,{parser:l}=this,o=Wn?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&r>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let d=e.curContext&&e.curContext.tracker.strict,p=d?e.curContext.hash:0;for(let g=this.fragments.nodeAt(r);g;){let O=this.parser.nodeSet.types[g.type.id]==g.type?l.getGoto(e.state,g.type.id):-1;if(O>-1&&g.length&&(!d||(g.prop(vt.contextHash)||0)==p))return e.useNode(g,O),Wn&&console.log(o+this.stackID(e)+` (via reuse of ${l.getName(g.type.id)})`),!0;if(!(g instanceof vi)||g.children.length==0||g.positions[0]>0)break;let b=g.children[0];if(b instanceof vi&&g.positions[0]==0)g=b;else break}}let u=l.stateSlot(e.state,4);if(u>0)return e.reduce(u),Wn&&console.log(o+this.stackID(e)+` (via always-reduce ${l.getName(u&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let h=this.tokens.getActions(e);for(let d=0;d<h.length;){let p=h[d++],g=h[d++],O=h[d++],b=d==h.length||!n,v=b?e:e.split(),x=this.tokens.mainToken;if(v.apply(p,g,x?x.start:v.pos,O),Wn&&console.log(o+this.stackID(v)+` (via ${(p&65536)==0?"shift":`reduce of ${l.getName(p&65535)}`} for ${l.getName(g)} @ ${r}${v==e?"":", split"})`),b)return!0;v.pos>r?t.push(v):n.push(v)}return!1}advanceFully(e,t){let n=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>n)return Lk(e,t),!0}}runRecovery(e,t,n){let r=null,l=!1;for(let o=0;o<e.length;o++){let u=e[o],h=t[o<<1],d=t[(o<<1)+1],p=Wn?this.stackID(u)+" -> ":"";if(u.deadEnd&&(l||(l=!0,u.restart(),Wn&&console.log(p+this.stackID(u)+" (restarted)"),this.advanceFully(u,n))))continue;let g=u.split(),O=p;for(let b=0;g.forceReduce()&&b<10&&(Wn&&console.log(O+this.stackID(g)+" (via force-reduce)"),!this.advanceFully(g,n));b++)Wn&&(O=this.stackID(g)+" -> ");for(let b of u.recoverByInsert(h))Wn&&console.log(p+this.stackID(b)+" (via recover-insert)"),this.advanceFully(b,n);this.stream.end>u.pos?(d==u.pos&&(d++,h=0),u.recoverByDelete(h,d),Wn&&console.log(p+this.stackID(u)+` (via recover-delete ${this.parser.getName(h)})`),Lk(u,n)):(!r||r.score<u.score)&&(r=u)}return r}stackToTree(e){return e.close(),vi.build({buffer:kd.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(r0||(r0=new WeakMap)).get(e);return t||r0.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function Lk(i,e){for(let t=0;t<e.length;t++){let n=e[t];if(n.pos==i.pos&&n.sameState(i)){e[t].score<i.score&&(e[t]=i);return}}e.push(i)}class lq{constructor(e,t,n){this.source=e,this.flags=t,this.disabled=n}allows(e){return!this.disabled||this.disabled[e]==0}}const s0=i=>i;class aq{constructor(e){this.start=e.start,this.shift=e.shift||s0,this.reduce=e.reduce||s0,this.reuse=e.reuse||s0,this.hash=e.hash||(()=>0),this.strict=e.strict!==!1}}class Td extends ZL{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let u=0;u<e.repeatNodeCount;u++)t.push("");let n=Object.keys(e.topRules).map(u=>e.topRules[u][1]),r=[];for(let u=0;u<t.length;u++)r.push([]);function l(u,h,d){r[u].push([h,h.deserialize(String(d))])}if(e.nodeProps)for(let u of e.nodeProps){let h=u[0];typeof h=="string"&&(h=vt[h]);for(let d=1;d<u.length;){let p=u[d++];if(p>=0)l(p,h,u[d++]);else{let g=u[d+-p];for(let O=-p;O>0;O--)l(u[d++],h,g);d++}}}this.nodeSet=new WO(t.map((u,h)=>Wr.define({name:h>=this.minRepeatTerm?void 0:u,id:h,props:r[h],top:n.indexOf(h)>-1,error:h==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(h)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=gE;let o=df(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let u=0;u<this.specializerSpecs.length;u++)this.specialized[u]=this.specializerSpecs[u].term;this.specializers=this.specializerSpecs.map(qk),this.states=df(e.states,Uint32Array),this.data=df(e.stateData),this.goto=df(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(u=>typeof u=="number"?new Ba(o,u):u),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,n){let r=new sq(this,e,t,n);for(let l of this.wrappers)r=l(r,e,t,n);return r}getGoto(e,t,n=!1){let r=this.goto;if(t>=r[0])return-1;for(let l=r[t+1];;){let o=r[l++],u=o&1,h=r[l++];if(u&&n)return h;for(let d=l+(o>>1);l<d;l++)if(r[l]==e)return h;if(u)return-1}}hasAction(e,t){let n=this.data;for(let r=0;r<2;r++)for(let l=this.stateSlot(e,r?2:1),o;;l+=3){if((o=n[l])==65535)if(n[l+1]==1)o=n[l=Lr(n,l+2)];else{if(n[l+1]==2)return Lr(n,l+2);break}if(o==t||o==0)return Lr(n,l+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,n=>n==t?!0:null)}allActions(e,t){let n=this.stateSlot(e,4),r=n?t(n):void 0;for(let l=this.stateSlot(e,1);r==null;l+=3){if(this.data[l]==65535)if(this.data[l+1]==1)l=Lr(this.data,l+2);else break;r=t(Lr(this.data,l+1))}return r}nextStates(e){let t=[];for(let n=this.stateSlot(e,1);;n+=3){if(this.data[n]==65535)if(this.data[n+1]==1)n=Lr(this.data,n+2);else break;if((this.data[n+2]&1)==0){let r=this.data[n+1];t.some((l,o)=>o&1&&l==r)||t.push(this.data[n],r)}}return t}configure(e){let t=Object.assign(Object.create(Td.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let n=this.topRules[e.top];if(!n)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=n}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(n=>{let r=e.tokenizers.find(l=>l.from==n);return r?r.to:n})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((n,r)=>{let l=e.specializers.find(u=>u.from==n.external);if(!l)return n;let o=Object.assign(Object.assign({},n),{external:l.to});return t.specializers[r]=qk(o),o})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),n=t.map(()=>!1);if(e)for(let l of e.split(" ")){let o=t.indexOf(l);o>=0&&(n[o]=!0)}let r=null;for(let l=0;l<t.length;l++)if(!n[l])for(let o=this.dialects[t[l]],u;(u=this.data[o++])!=65535;)(r||(r=new Uint8Array(this.maxTerm+1)))[u]=1;return new lq(e,n,r)}static deserialize(e){return new Td(e)}}function Lr(i,e){return i[e]|i[e+1]<<16}function oq(i){let e=null;for(let t of i){let n=t.p.stoppedAt;(t.pos==t.p.stream.end||n!=null&&t.pos>n)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function qk(i){if(i.external){let e=i.extend?1:0;return(t,n)=>i.external(t,n)<<1|e}return i.get}let uq=0,qr=class Fy{constructor(e,t,n,r){this.name=e,this.set=t,this.base=n,this.modified=r,this.id=uq++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let n=typeof e=="string"?e:"?";if(e instanceof Fy&&(t=e),t?.base)throw new Error("Can not derive from a modified tag");let r=new Fy(n,[],null,[]);if(r.set.push(r),t)for(let l of t.set)r.set.push(l);return r}static defineModifier(e){let t=new Uk(e);return n=>n.modified.indexOf(t)>-1?n:Uk.get(n.base||n,n.modified.concat(t).sort((r,l)=>r.id-l.id))}},cq=0,Uk=class wE{constructor(e){this.name=e,this.instances=[],this.id=cq++}static get(e,t){if(!t.length)return e;let n=t[0].instances.find(u=>u.base==e&&hq(t,u.modified));if(n)return n;let r=[],l=new qr(e.name,r,e,t);for(let u of t)u.instances.push(l);let o=fq(t);for(let u of e.set)if(!u.modified.length)for(let h of o)r.push(wE.get(u,h));return l}};function hq(i,e){return i.length==e.length&&i.every((t,n)=>t==e[n])}function fq(i){let e=[[]];for(let t=0;t<i.length;t++)for(let n=0,r=e.length;n<r;n++)e.push(e[n].concat(i[t]));return e.sort((t,n)=>n.length-t.length)}function dq(i){let e=Object.create(null);for(let t in i){let n=i[t];Array.isArray(n)||(n=[n]);for(let r of t.split(" "))if(r){let l=[],o=2,u=r;for(let g=0;;){if(u=="..."&&g>0&&g+3==r.length){o=1;break}let O=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(u);if(!O)throw new RangeError("Invalid path: "+r);if(l.push(O[0]=="*"?"":O[0][0]=='"'?JSON.parse(O[0]):O[0]),g+=O[0].length,g==r.length)break;let b=r[g++];if(g==r.length&&b=="!"){o=0;break}if(b!="/")throw new RangeError("Invalid path: "+r);u=r.slice(g)}let h=l.length-1,d=l[h];if(!d)throw new RangeError("Invalid path: "+r);let p=new Yy(n,o,h>0?l.slice(0,h):null);e[d]=p.sort(e[d])}}return pq.add(e)}const pq=new vt;let Yy=class{constructor(e,t,n,r){this.tags=e,this.mode=t,this.context=n,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}};Yy.empty=new Yy([],2,null);function mq(i,e){let t=Object.create(null);for(let l of i)if(!Array.isArray(l.tag))t[l.tag.id]=l.class;else for(let o of l.tag)t[o.id]=l.class;let{scope:n,all:r=null}={};return{style:l=>{let o=r;for(let u of l)for(let h of u.set){let d=t[h.id];if(d){o=o?o+" "+d:d;break}}return o},scope:n}}const be=qr.define,pf=be(),Es=be(),jk=be(Es),Hk=be(Es),Rs=be(),mf=be(Rs),l0=be(Rs),Wi=be(),yl=be(Wi),qi=be(),Ui=be(),Zy=be(),pu=be(Zy),gf=be(),Se={comment:pf,lineComment:be(pf),blockComment:be(pf),docComment:be(pf),name:Es,variableName:be(Es),typeName:jk,tagName:be(jk),propertyName:Hk,attributeName:be(Hk),className:be(Es),labelName:be(Es),namespace:be(Es),macroName:be(Es),literal:Rs,string:mf,docString:be(mf),character:be(mf),attributeValue:be(mf),number:l0,integer:be(l0),float:be(l0),bool:be(Rs),regexp:be(Rs),escape:be(Rs),color:be(Rs),url:be(Rs),keyword:qi,self:be(qi),null:be(qi),atom:be(qi),unit:be(qi),modifier:be(qi),operatorKeyword:be(qi),controlKeyword:be(qi),definitionKeyword:be(qi),moduleKeyword:be(qi),operator:Ui,derefOperator:be(Ui),arithmeticOperator:be(Ui),logicOperator:be(Ui),bitwiseOperator:be(Ui),compareOperator:be(Ui),updateOperator:be(Ui),definitionOperator:be(Ui),typeOperator:be(Ui),controlOperator:be(Ui),punctuation:Zy,separator:be(Zy),bracket:pu,angleBracket:be(pu),squareBracket:be(pu),paren:be(pu),brace:be(pu),content:Wi,heading:yl,heading1:be(yl),heading2:be(yl),heading3:be(yl),heading4:be(yl),heading5:be(yl),heading6:be(yl),contentSeparator:be(Wi),list:be(Wi),quote:be(Wi),emphasis:be(Wi),strong:be(Wi),link:be(Wi),monospace:be(Wi),strikethrough:be(Wi),inserted:be(),deleted:be(),changed:be(),invalid:be(),meta:gf,documentMeta:be(gf),annotation:be(gf),processingInstruction:be(gf),definition:qr.defineModifier("definition"),constant:qr.defineModifier("constant"),function:qr.defineModifier("function"),standard:qr.defineModifier("standard"),local:qr.defineModifier("local"),special:qr.defineModifier("special")};for(let i in Se){let e=Se[i];e instanceof qr&&(e.name=i)}mq([{tag:Se.link,class:"tok-link"},{tag:Se.heading,class:"tok-heading"},{tag:Se.emphasis,class:"tok-emphasis"},{tag:Se.strong,class:"tok-strong"},{tag:Se.keyword,class:"tok-keyword"},{tag:Se.atom,class:"tok-atom"},{tag:Se.bool,class:"tok-bool"},{tag:Se.url,class:"tok-url"},{tag:Se.labelName,class:"tok-labelName"},{tag:Se.inserted,class:"tok-inserted"},{tag:Se.deleted,class:"tok-deleted"},{tag:Se.literal,class:"tok-literal"},{tag:Se.string,class:"tok-string"},{tag:Se.number,class:"tok-number"},{tag:[Se.regexp,Se.escape,Se.special(Se.string)],class:"tok-string2"},{tag:Se.variableName,class:"tok-variableName"},{tag:Se.local(Se.variableName),class:"tok-variableName tok-local"},{tag:Se.definition(Se.variableName),class:"tok-variableName tok-definition"},{tag:Se.special(Se.variableName),class:"tok-variableName2"},{tag:Se.definition(Se.propertyName),class:"tok-propertyName tok-definition"},{tag:Se.typeName,class:"tok-typeName"},{tag:Se.namespace,class:"tok-namespace"},{tag:Se.className,class:"tok-className"},{tag:Se.macroName,class:"tok-macroName"},{tag:Se.propertyName,class:"tok-propertyName"},{tag:Se.operator,class:"tok-operator"},{tag:Se.comment,class:"tok-comment"},{tag:Se.meta,class:"tok-meta"},{tag:Se.invalid,class:"tok-invalid"},{tag:Se.punctuation,class:"tok-punctuation"}]);const gq=1,kE=194,TE=195,yq=196,Vk=197,Oq=198,bq=199,vq=200,Sq=2,CE=3,Xk=201,xq=24,wq=25,kq=49,Tq=50,Cq=55,Aq=56,Eq=57,Rq=59,Nq=60,Mq=61,Dq=62,Qq=63,zq=65,Pq=238,Bq=71,_q=241,$q=242,Lq=243,qq=244,Uq=245,jq=246,Hq=247,Vq=248,AE=72,Xq=249,Gq=250,Wq=251,Iq=252,Fq=253,Yq=254,Zq=255,Kq=256,Jq=73,eU=77,tU=263,nU=112,iU=130,rU=151,sU=152,lU=155,Dl=10,ec=13,YO=32,Kd=9,ZO=35,aU=40,oU=46,Ky=123,Gk=125,EE=39,RE=34,Wk=92,uU=111,cU=120,hU=78,fU=117,dU=85,pU=new Set([wq,kq,Tq,tU,zq,iU,Aq,Eq,Pq,Dq,Qq,AE,Jq,eU,Nq,Mq,rU,sU,lU,nU]);function a0(i){return i==Dl||i==ec}function o0(i){return i>=48&&i<=57||i>=65&&i<=70||i>=97&&i<=102}const mU=new Zd((i,e)=>{let t;if(i.next<0)i.acceptToken(bq);else if(e.context.flags&Wf)a0(i.next)&&i.acceptToken(Oq,1);else if(((t=i.peek(-1))<0||a0(t))&&e.canShift(Vk)){let n=0;for(;i.next==YO||i.next==Kd;)i.advance(),n++;(i.next==Dl||i.next==ec||i.next==ZO)&&i.acceptToken(Vk,-n)}else a0(i.next)&&i.acceptToken(yq,1)},{contextual:!0}),gU=new Zd((i,e)=>{let t=e.context;if(t.flags)return;let n=i.peek(-1);if(n==Dl||n==ec){let r=0,l=0;for(;;){if(i.next==YO)r++;else if(i.next==Kd)r+=8-r%8;else break;i.advance(),l++}r!=t.indent&&i.next!=Dl&&i.next!=ec&&i.next!=ZO&&(r<t.indent?i.acceptToken(TE,-l):i.acceptToken(kE))}}),Wf=1,NE=2,Dr=4,Qr=8,zr=16,Pr=32;function If(i,e,t){this.parent=i,this.indent=e,this.flags=t,this.hash=(i?i.hash+i.hash<<8:0)+e+(e<<4)+t+(t<<6)}const yU=new If(null,0,0);function OU(i){let e=0;for(let t=0;t<i.length;t++)e+=i.charCodeAt(t)==Kd?8-e%8:1;return e}const Ik=new Map([[_q,0],[$q,Dr],[Lq,Qr],[qq,Qr|Dr],[Uq,zr],[jq,zr|Dr],[Hq,zr|Qr],[Vq,zr|Qr|Dr],[Xq,Pr],[Gq,Pr|Dr],[Wq,Pr|Qr],[Iq,Pr|Qr|Dr],[Fq,Pr|zr],[Yq,Pr|zr|Dr],[Zq,Pr|zr|Qr],[Kq,Pr|zr|Qr|Dr]].map(([i,e])=>[i,e|NE])),bU=new aq({start:yU,reduce(i,e,t,n){return i.flags&Wf&&pU.has(e)||(e==Bq||e==AE)&&i.flags&NE?i.parent:i},shift(i,e,t,n){return e==kE?new If(i,OU(n.read(n.pos,t.pos)),0):e==TE?i.parent:e==xq||e==Cq||e==Rq||e==CE?new If(i,0,Wf):Ik.has(e)?new If(i,0,Ik.get(e)|i.flags&Wf):i},hash(i){return i.hash}}),vU=new Zd(i=>{for(let e=0;e<5;e++){if(i.next!="print".charCodeAt(e))return;i.advance()}if(!/\w/.test(String.fromCharCode(i.next)))for(let e=0;;e++){let t=i.peek(e);if(!(t==YO||t==Kd)){t!=aU&&t!=oU&&t!=Dl&&t!=ec&&t!=ZO&&i.acceptToken(gq);return}}}),SU=new Zd((i,e)=>{let{flags:t}=e.context,n=t&Dr?RE:EE,r=(t&Qr)>0,l=!(t&zr),o=(t&Pr)>0,u=i.pos;for(;!(i.next<0);)if(o&&i.next==Ky)if(i.peek(1)==Ky)i.advance(2);else{if(i.pos==u){i.acceptToken(CE,1);return}break}else if(l&&i.next==Wk){if(i.pos==u){i.advance();let h=i.next;h>=0&&(i.advance(),xU(i,h)),i.acceptToken(Sq);return}break}else if(i.next==Wk&&!l&&i.peek(1)>-1)i.advance(2);else if(i.next==n&&(!r||i.peek(1)==n&&i.peek(2)==n)){if(i.pos==u){i.acceptToken(Xk,r?3:1);return}break}else if(i.next==Dl){if(r)i.advance();else if(i.pos==u){i.acceptToken(Xk);return}break}else i.advance();i.pos>u&&i.acceptToken(vq)});function xU(i,e){if(e==uU)for(let t=0;t<2&&i.next>=48&&i.next<=55;t++)i.advance();else if(e==cU)for(let t=0;t<2&&o0(i.next);t++)i.advance();else if(e==fU)for(let t=0;t<4&&o0(i.next);t++)i.advance();else if(e==dU)for(let t=0;t<8&&o0(i.next);t++)i.advance();else if(e==hU&&i.next==Ky){for(i.advance();i.next>=0&&i.next!=Gk&&i.next!=EE&&i.next!=RE&&i.next!=Dl;)i.advance();i.next==Gk&&i.advance()}}const wU=dq({'async "*" "**" FormatConversion FormatSpec':Se.modifier,"for while if elif else try except finally return raise break continue with pass assert await yield match case":Se.controlKeyword,"in not and or is del":Se.operatorKeyword,"from def class global nonlocal lambda":Se.definitionKeyword,import:Se.moduleKeyword,"with as print":Se.keyword,Boolean:Se.bool,None:Se.null,VariableName:Se.variableName,"CallExpression/VariableName":Se.function(Se.variableName),"FunctionDefinition/VariableName":Se.function(Se.definition(Se.variableName)),"ClassDefinition/VariableName":Se.definition(Se.className),PropertyName:Se.propertyName,"CallExpression/MemberExpression/PropertyName":Se.function(Se.propertyName),Comment:Se.lineComment,Number:Se.number,String:Se.string,FormatString:Se.special(Se.string),Escape:Se.escape,UpdateOp:Se.updateOperator,"ArithOp!":Se.arithmeticOperator,BitOp:Se.bitwiseOperator,CompareOp:Se.compareOperator,AssignOp:Se.definitionOperator,Ellipsis:Se.punctuation,At:Se.meta,"( )":Se.paren,"[ ]":Se.squareBracket,"{ }":Se.brace,".":Se.derefOperator,", ;":Se.separator}),kU={__proto__:null,await:44,or:54,and:56,in:60,not:62,is:64,if:70,else:72,lambda:76,yield:94,from:96,async:102,for:104,None:162,True:164,False:164,del:178,pass:182,break:186,continue:190,return:194,raise:202,import:206,as:208,global:212,nonlocal:214,assert:218,type:223,elif:236,while:240,try:246,except:248,finally:250,with:254,def:258,class:268,match:279,case:285},TU=Td.deserialize({version:14,states:"##jO`QeOOP$}OSOOO&WQtO'#HUOOQS'#Co'#CoOOQS'#Cp'#CpO'vQdO'#CnO*UQtO'#HTOOQS'#HU'#HUOOQS'#DU'#DUOOQS'#HT'#HTO*rQdO'#D_O+VQdO'#DfO+gQdO'#DjO+zOWO'#DuO,VOWO'#DvO.[QtO'#GuOOQS'#Gu'#GuO'vQdO'#GtO0ZQtO'#GtOOQS'#Eb'#EbO0rQdO'#EcOOQS'#Gs'#GsO0|QdO'#GrOOQV'#Gr'#GrO1XQdO'#FYOOQS'#G^'#G^O1^QdO'#FXOOQV'#IS'#ISOOQV'#Gq'#GqOOQV'#Fq'#FqQ`QeOOO'vQdO'#CqO1lQdO'#C}O1sQdO'#DRO2RQdO'#HYO2cQtO'#EVO'vQdO'#EWOOQS'#EY'#EYOOQS'#E['#E[OOQS'#E^'#E^O2wQdO'#E`O3_QdO'#EdO3rQdO'#EfO3zQtO'#EfO1XQdO'#EiO0rQdO'#ElO1XQdO'#EnO0rQdO'#EtO0rQdO'#EwO4VQdO'#EyO4^QdO'#FOO4iQdO'#EzO0rQdO'#FOO1XQdO'#FQO1XQdO'#FVO4nQdO'#F[P4uOdO'#GpPOOO)CBd)CBdOOQS'#Ce'#CeOOQS'#Cf'#CfOOQS'#Cg'#CgOOQS'#Ch'#ChOOQS'#Ci'#CiOOQS'#Cj'#CjOOQS'#Cl'#ClO'vQdO,59OO'vQdO,59OO'vQdO,59OO'vQdO,59OO'vQdO,59OO'vQdO,59OO5TQdO'#DoOOQS,5:Y,5:YO5hQdO'#HdOOQS,5:],5:]O5uQ!fO,5:]O5zQtO,59YO1lQdO,59bO1lQdO,59bO1lQdO,59bO8jQdO,59bO8oQdO,59bO8vQdO,59jO8}QdO'#HTO:TQdO'#HSOOQS'#HS'#HSOOQS'#D['#D[O:lQdO,59aO'vQdO,59aO:zQdO,59aOOQS,59y,59yO;PQdO,5:RO'vQdO,5:ROOQS,5:Q,5:QO;_QdO,5:QO;dQdO,5:XO'vQdO,5:XO'vQdO,5:VOOQS,5:U,5:UO;uQdO,5:UO;zQdO,5:WOOOW'#Fy'#FyO<POWO,5:aOOQS,5:a,5:aO<[QdO'#HwOOOW'#Dw'#DwOOOW'#Fz'#FzO<lOWO,5:bOOQS,5:b,5:bOOQS'#F}'#F}O<zQtO,5:iO?lQtO,5=`O@VQ#xO,5=`O@vQtO,5=`OOQS,5:},5:}OA_QeO'#GWOBqQdO,5;^OOQV,5=^,5=^OB|QtO'#IPOCkQdO,5;tOOQS-E:[-E:[OOQV,5;s,5;sO4dQdO'#FQOOQV-E9o-E9oOCsQtO,59]OEzQtO,59iOFeQdO'#HVOFpQdO'#HVO1XQdO'#HVOF{QdO'#DTOGTQdO,59mOGYQdO'#HZO'vQdO'#HZO0rQdO,5=tOOQS,5=t,5=tO0rQdO'#EROOQS'#ES'#ESOGwQdO'#GPOHXQdO,58|OHXQdO,58|O*xQdO,5:oOHgQtO'#H]OOQS,5:r,5:rOOQS,5:z,5:zOHzQdO,5;OOI]QdO'#IOO1XQdO'#H}OOQS,5;Q,5;QOOQS'#GT'#GTOIqQtO,5;QOJPQdO,5;QOJUQdO'#IQOOQS,5;T,5;TOJdQdO'#H|OOQS,5;W,5;WOJuQdO,5;YO4iQdO,5;`O4iQdO,5;cOJ}QtO'#ITO'vQdO'#ITOKXQdO,5;eO4VQdO,5;eO0rQdO,5;jO1XQdO,5;lOK^QeO'#EuOLjQgO,5;fO!!kQdO'#IUO4iQdO,5;jO!!vQdO,5;lO!#OQdO,5;qO!#ZQtO,5;vO'vQdO,5;vPOOO,5=[,5=[P!#bOSO,5=[P!#jOdO,5=[O!&bQtO1G.jO!&iQtO1G.jO!)YQtO1G.jO!)dQtO1G.jO!+}QtO1G.jO!,bQtO1G.jO!,uQdO'#HcO!-TQtO'#GuO0rQdO'#HcO!-_QdO'#HbOOQS,5:Z,5:ZO!-gQdO,5:ZO!-lQdO'#HeO!-wQdO'#HeO!.[QdO,5>OOOQS'#Ds'#DsOOQS1G/w1G/wOOQS1G.|1G.|O!/[QtO1G.|O!/cQtO1G.|O1lQdO1G.|O!0OQdO1G/UOOQS'#DZ'#DZO0rQdO,59tOOQS1G.{1G.{O!0VQdO1G/eO!0gQdO1G/eO!0oQdO1G/fO'vQdO'#H[O!0tQdO'#H[O!0yQtO1G.{O!1ZQdO,59iO!2aQdO,5=zO!2qQdO,5=zO!2yQdO1G/mO!3OQtO1G/mOOQS1G/l1G/lO!3`QdO,5=uO!4VQdO,5=uO0rQdO1G/qO!4tQdO1G/sO!4yQtO1G/sO!5ZQtO1G/qOOQS1G/p1G/pOOQS1G/r1G/rOOOW-E9w-E9wOOQS1G/{1G/{O!5kQdO'#HxO0rQdO'#HxO!5|QdO,5>cOOOW-E9x-E9xOOQS1G/|1G/|OOQS-E9{-E9{O!6[Q#xO1G2zO!6{QtO1G2zO'vQdO,5<jOOQS,5<j,5<jOOQS-E9|-E9|OOQS,5<r,5<rOOQS-E:U-E:UOOQV1G0x1G0xO1XQdO'#GRO!7dQtO,5>kOOQS1G1`1G1`O!8RQdO1G1`OOQS'#DV'#DVO0rQdO,5=qOOQS,5=q,5=qO!8WQdO'#FrO!8cQdO,59oO!8kQdO1G/XO!8uQtO,5=uOOQS1G3`1G3`OOQS,5:m,5:mO!9fQdO'#GtOOQS,5<k,5<kOOQS-E9}-E9}O!9wQdO1G.hOOQS1G0Z1G0ZO!:VQdO,5=wO!:gQdO,5=wO0rQdO1G0jO0rQdO1G0jO!:xQdO,5>jO!;ZQdO,5>jO1XQdO,5>jO!;lQdO,5>iOOQS-E:R-E:RO!;qQdO1G0lO!;|QdO1G0lO!<RQdO,5>lO!<aQdO,5>lO!<oQdO,5>hO!=VQdO,5>hO!=hQdO'#EpO0rQdO1G0tO!=sQdO1G0tO!=xQgO1G0zO!AvQgO1G0}O!EqQdO,5>oO!E{QdO,5>oO!FTQtO,5>oO0rQdO1G1PO!F_QdO1G1PO4iQdO1G1UO!!vQdO1G1WOOQV,5;a,5;aO!FdQfO,5;aO!FiQgO1G1QO!JjQdO'#GZO4iQdO1G1QO4iQdO1G1QO!JzQdO,5>pO!KXQdO,5>pO1XQdO,5>pOOQV1G1U1G1UO!KaQdO'#FSO!KrQ!fO1G1WO!KzQdO1G1WOOQV1G1]1G1]O4iQdO1G1]O!LPQdO1G1]O!LXQdO'#F^OOQV1G1b1G1bO!#ZQtO1G1bPOOO1G2v1G2vP!L^OSO1G2vOOQS,5=},5=}OOQS'#Dp'#DpO0rQdO,5=}O!LfQdO,5=|O!LyQdO,5=|OOQS1G/u1G/uO!MRQdO,5>PO!McQdO,5>PO!MkQdO,5>PO!NOQdO,5>PO!N`QdO,5>POOQS1G3j1G3jOOQS7+$h7+$hO!8kQdO7+$pO#!RQdO1G.|O#!YQdO1G.|OOQS1G/`1G/`OOQS,5<`,5<`O'vQdO,5<`OOQS7+%P7+%PO#!aQdO7+%POOQS-E9r-E9rOOQS7+%Q7+%QO#!qQdO,5=vO'vQdO,5=vOOQS7+$g7+$gO#!vQdO7+%PO##OQdO7+%QO##TQdO1G3fOOQS7+%X7+%XO##eQdO1G3fO##mQdO7+%XOOQS,5<_,5<_O'vQdO,5<_O##rQdO1G3aOOQS-E9q-E9qO#$iQdO7+%]OOQS7+%_7+%_O#$wQdO1G3aO#%fQdO7+%_O#%kQdO1G3gO#%{QdO1G3gO#&TQdO7+%]O#&YQdO,5>dO#&sQdO,5>dO#&sQdO,5>dOOQS'#Dx'#DxO#'UO&jO'#DzO#'aO`O'#HyOOOW1G3}1G3}O#'fQdO1G3}O#'nQdO1G3}O#'yQ#xO7+(fO#(jQtO1G2UP#)TQdO'#GOOOQS,5<m,5<mOOQS-E:P-E:POOQS7+&z7+&zOOQS1G3]1G3]OOQS,5<^,5<^OOQS-E9p-E9pOOQS7+$s7+$sO#)bQdO,5=`O#){QdO,5=`O#*^QtO,5<aO#*qQdO1G3cOOQS-E9s-E9sOOQS7+&U7+&UO#+RQdO7+&UO#+aQdO,5<nO#+uQdO1G4UOOQS-E:Q-E:QO#,WQdO1G4UOOQS1G4T1G4TOOQS7+&W7+&WO#,iQdO7+&WOOQS,5<p,5<pO#,tQdO1G4WOOQS-E:S-E:SOOQS,5<l,5<lO#-SQdO1G4SOOQS-E:O-E:OO1XQdO'#EqO#-jQdO'#EqO#-uQdO'#IRO#-}QdO,5;[OOQS7+&`7+&`O0rQdO7+&`O#.SQgO7+&fO!JmQdO'#GXO4iQdO7+&fO4iQdO7+&iO#2QQtO,5<tO'vQdO,5<tO#2[QdO1G4ZOOQS-E:W-E:WO#2fQdO1G4ZO4iQdO7+&kO0rQdO7+&kOOQV7+&p7+&pO!KrQ!fO7+&rO!KzQdO7+&rO`QeO1G0{OOQV-E:X-E:XO4iQdO7+&lO4iQdO7+&lOOQV,5<u,5<uO#2nQdO,5<uO!JmQdO,5<uOOQV7+&l7+&lO#2yQgO7+&lO#6tQdO,5<vO#7PQdO1G4[OOQS-E:Y-E:YO#7^QdO1G4[O#7fQdO'#IWO#7tQdO'#IWO1XQdO'#IWOOQS'#IW'#IWO#8PQdO'#IVOOQS,5;n,5;nO#8XQdO,5;nO0rQdO'#FUOOQV7+&r7+&rO4iQdO7+&rOOQV7+&w7+&wO4iQdO7+&wO#8^QfO,5;xOOQV7+&|7+&|POOO7+(b7+(bO#8cQdO1G3iOOQS,5<c,5<cO#8qQdO1G3hOOQS-E9u-E9uO#9UQdO,5<dO#9aQdO,5<dO#9tQdO1G3kOOQS-E9v-E9vO#:UQdO1G3kO#:^QdO1G3kO#:nQdO1G3kO#:UQdO1G3kOOQS<<H[<<H[O#:yQtO1G1zOOQS<<Hk<<HkP#;WQdO'#FtO8vQdO1G3bO#;eQdO1G3bO#;jQdO<<HkOOQS<<Hl<<HlO#;zQdO7+)QOOQS<<Hs<<HsO#<[QtO1G1yP#<{QdO'#FsO#=YQdO7+)RO#=jQdO7+)RO#=rQdO<<HwO#=wQdO7+({OOQS<<Hy<<HyO#>nQdO,5<bO'vQdO,5<bOOQS-E9t-E9tOOQS<<Hw<<HwOOQS,5<g,5<gO0rQdO,5<gO#>sQdO1G4OOOQS-E9y-E9yO#?^QdO1G4OO<[QdO'#H{OOOO'#D{'#D{OOOO'#F|'#F|O#?oO&jO,5:fOOOW,5>e,5>eOOOW7+)i7+)iO#?zQdO7+)iO#@SQdO1G2zO#@mQdO1G2zP'vQdO'#FuO0rQdO<<IpO1XQdO1G2YP1XQdO'#GSO#AOQdO7+)pO#AaQdO7+)pOOQS<<Ir<<IrP1XQdO'#GUP0rQdO'#GQOOQS,5;],5;]O#ArQdO,5>mO#BQQdO,5>mOOQS1G0v1G0vOOQS<<Iz<<IzOOQV-E:V-E:VO4iQdO<<JQOOQV,5<s,5<sO4iQdO,5<sOOQV<<JQ<<JQOOQV<<JT<<JTO#BYQtO1G2`P#BdQdO'#GYO#BkQdO7+)uO#BuQgO<<JVO4iQdO<<JVOOQV<<J^<<J^O4iQdO<<J^O!KrQ!fO<<J^O#FpQgO7+&gOOQV<<JW<<JWO#FzQgO<<JWOOQV1G2a1G2aO1XQdO1G2aO#JuQdO1G2aO4iQdO<<JWO1XQdO1G2bP0rQdO'#G[O#KQQdO7+)vO#K_QdO7+)vOOQS'#FT'#FTO0rQdO,5>rO#KgQdO,5>rO#KrQdO,5>rO#K}QdO,5>qO#L`QdO,5>qOOQS1G1Y1G1YOOQS,5;p,5;pOOQV<<Jc<<JcO#LhQdO1G1dOOQS7+)T7+)TP#LmQdO'#FwO#L}QdO1G2OO#MbQdO1G2OO#MrQdO1G2OP#M}QdO'#FxO#N[QdO7+)VO#NlQdO7+)VO#NlQdO7+)VO#NtQdO7+)VO$ UQdO7+(|O8vQdO7+(|OOQSAN>VAN>VO$ oQdO<<LmOOQSAN>cAN>cO0rQdO1G1|O$!PQtO1G1|P$!ZQdO'#FvOOQS1G2R1G2RP$!hQdO'#F{O$!uQdO7+)jO$#`QdO,5>gOOOO-E9z-E9zOOOW<<MT<<MTO$#nQdO7+(fOOQSAN?[AN?[OOQS7+'t7+'tO$$XQdO<<M[OOQS,5<q,5<qO$$jQdO1G4XOOQS-E:T-E:TOOQVAN?lAN?lOOQV1G2_1G2_O4iQdOAN?qO$$xQgOAN?qOOQVAN?xAN?xO4iQdOAN?xOOQV<<JR<<JRO4iQdOAN?rO4iQdO7+'{OOQV7+'{7+'{O1XQdO7+'{OOQVAN?rAN?rOOQS7+'|7+'|O$(sQdO<<MbOOQS1G4^1G4^O0rQdO1G4^OOQS,5<w,5<wO$)QQdO1G4]OOQS-E:Z-E:ZOOQU'#G_'#G_O$)cQfO7+'OO$)nQdO'#F_O$*uQdO7+'jO$+VQdO7+'jOOQS7+'j7+'jO$+bQdO<<LqO$+rQdO<<LqO$+rQdO<<LqO$+zQdO'#H^OOQS<<Lh<<LhO$,UQdO<<LhOOQS7+'h7+'hOOQS'#D|'#D|OOOO1G4R1G4RO$,oQdO1G4RO$,wQdO1G4RP!=hQdO'#GVOOQVG25]G25]O4iQdOG25]OOQVG25dG25dOOQVG25^G25^OOQV<<Kg<<KgO4iQdO<<KgOOQS7+)x7+)xP$-SQdO'#G]OOQU-E:]-E:]OOQV<<Jj<<JjO$-vQtO'#FaOOQS'#Fc'#FcO$.WQdO'#FbO$.xQdO'#FbOOQS'#Fb'#FbO$.}QdO'#IYO$)nQdO'#FiO$)nQdO'#FiO$/fQdO'#FjO$)nQdO'#FkO$/mQdO'#IZOOQS'#IZ'#IZO$0[QdO,5;yOOQS<<KU<<KUO$0dQdO<<KUO$0tQdOANB]O$1UQdOANB]O$1^QdO'#H_OOQS'#H_'#H_O1sQdO'#DcO$1wQdO,5=xOOQSANBSANBSOOOO7+)m7+)mO$2`QdO7+)mOOQVLD*wLD*wOOQVANARANARO5uQ!fO'#GaO$2hQtO,5<SO$)nQdO'#FmOOQS,5<W,5<WOOQS'#Fd'#FdO$3YQdO,5;|O$3_QdO,5;|OOQS'#Fg'#FgO$)nQdO'#G`O$4PQdO,5<QO$4kQdO,5>tO$4{QdO,5>tO1XQdO,5<PO$5^QdO,5<TO$5cQdO,5<TO$)nQdO'#I[O$5hQdO'#I[O$5mQdO,5<UOOQS,5<V,5<VO0rQdO'#FpOOQU1G1e1G1eO4iQdO1G1eOOQSAN@pAN@pO$5rQdOG27wO$6SQdO,59}OOQS1G3d1G3dOOOO<<MX<<MXOOQS,5<{,5<{OOQS-E:_-E:_O$6XQtO'#FaO$6`QdO'#I]O$6nQdO'#I]O$6vQdO,5<XOOQS1G1h1G1hO$6{QdO1G1hO$7QQdO,5<zOOQS-E:^-E:^O$7lQdO,5=OO$8TQdO1G4`OOQS-E:b-E:bOOQS1G1k1G1kOOQS1G1o1G1oO$8eQdO,5>vO$)nQdO,5>vOOQS1G1p1G1pOOQS,5<[,5<[OOQU7+'P7+'PO$+zQdO1G/iO$)nQdO,5<YO$8sQdO,5>wO$8zQdO,5>wOOQS1G1s1G1sOOQS7+'S7+'SP$)nQdO'#GdO$9SQdO1G4bO$9^QdO1G4bO$9fQdO1G4bOOQS7+%T7+%TO$9tQdO1G1tO$:SQtO'#FaO$:ZQdO,5<}OOQS,5<},5<}O$:iQdO1G4cOOQS-E:a-E:aO$)nQdO,5<|O$:pQdO,5<|O$:uQdO7+)|OOQS-E:`-E:`O$;PQdO7+)|O$)nQdO,5<ZP$)nQdO'#GcO$;XQdO1G2hO$)nQdO1G2hP$;gQdO'#GbO$;nQdO<<MhO$;xQdO1G1uO$<WQdO7+(SO8vQdO'#C}O8vQdO,59bO8vQdO,59bO8vQdO,59bO$<fQtO,5=`O8vQdO1G.|O0rQdO1G/XO0rQdO7+$pP$<yQdO'#GOO'vQdO'#GtO$=WQdO,59bO$=]QdO,59bO$=dQdO,59mO$=iQdO1G/UO1sQdO'#DRO8vQdO,59j",stateData:"$>S~O%cOS%^OSSOS%]PQ~OPdOVaOfoOhYOopOs!POvqO!PrO!Q{O!T!SO!U!RO!XZO!][O!h`O!r`O!s`O!t`O!{tO!}uO#PvO#RwO#TxO#XyO#ZzO#^|O#_|O#a}O#c!OO#l!QO#o!TO#s!UO#u!VO#z!WO#}hO$P!XO%oRO%pRO%tSO%uWO&Z]O&[]O&]]O&^]O&_]O&`]O&a]O&b]O&c^O&d^O&e^O&f^O&g^O&h^O&i^O&j^O~O%]!YO~OV!aO_!aOa!bOh!iO!X!kO!f!mO%j![O%k!]O%l!^O%m!_O%n!_O%o!`O%p!`O%q!aO%r!aO%s!aO~Ok%xXl%xXm%xXn%xXo%xXp%xXs%xXz%xX{%xX!x%xX#g%xX%[%xX%_%xX%z%xXg%xX!T%xX!U%xX%{%xX!W%xX![%xX!Q%xX#[%xXt%xX!m%xX~P%SOfoOhYO!XZO!][O!h`O!r`O!s`O!t`O%oRO%pRO%tSO%uWO&Z]O&[]O&]]O&^]O&_]O&`]O&a]O&b]O&c^O&d^O&e^O&f^O&g^O&h^O&i^O&j^O~Oz%wX{%wX#g%wX%[%wX%_%wX%z%wX~Ok!pOl!qOm!oOn!oOo!rOp!sOs!tO!x%wX~P)pOV!zOg!|Oo0cOv0qO!PrO~P'vOV#OOo0cOv0qO!W#PO~P'vOV#SOa#TOo0cOv0qO![#UO~P'vOQ#XO%`#XO%a#ZO~OQ#^OR#[O%`#^O%a#`O~OV%iX_%iXa%iXh%iXk%iXl%iXm%iXn%iXo%iXp%iXs%iXz%iX!X%iX!f%iX%j%iX%k%iX%l%iX%m%iX%n%iX%o%iX%p%iX%q%iX%r%iX%s%iXg%iX!T%iX!U%iX~O&Z]O&[]O&]]O&^]O&_]O&`]O&a]O&b]O&c^O&d^O&e^O&f^O&g^O&h^O&i^O&j^O{%iX!x%iX#g%iX%[%iX%_%iX%z%iX%{%iX!W%iX![%iX!Q%iX#[%iXt%iX!m%iX~P,eOz#dO{%hX!x%hX#g%hX%[%hX%_%hX%z%hX~Oo0cOv0qO~P'vO#g#gO%[#iO%_#iO~O%uWO~O!T#nO#u!VO#z!WO#}hO~OopO~P'vOV#sOa#tO%uWO{wP~OV#xOo0cOv0qO!Q#yO~P'vO{#{O!x$QO%z#|O#g!yX%[!yX%_!yX~OV#xOo0cOv0qO#g#SX%[#SX%_#SX~P'vOo0cOv0qO#g#WX%[#WX%_#WX~P'vOh$WO%uWO~O!f$YO!r$YO%uWO~OV$eO~P'vO!U$gO#s$hO#u$iO~O{$jO~OV$qO~P'vOS$sO%[$rO%_$rO%c$tO~OV$}Oa$}Og%POo0cOv0qO~P'vOo0cOv0qO{%SO~P'vO&Y%UO~Oa!bOh!iO!X!kO!f!mOVba_bakbalbambanbaobapbasbazba{ba!xba#gba%[ba%_ba%jba%kba%lba%mba%nba%oba%pba%qba%rba%sba%zbagba!Tba!Uba%{ba!Wba![ba!Qba#[batba!mba~On%ZO~Oo%ZO~P'vOo0cO~P'vOk0eOl0fOm0dOn0dOo0mOp0nOs0rOg%wX!T%wX!U%wX%{%wX!W%wX![%wX!Q%wX#[%wX!m%wX~P)pO%{%]Og%vXz%vX!T%vX!U%vX!W%vX{%vX~Og%_Oz%`O!T%dO!U%cO~Og%_O~Oz%gO!T%dO!U%cO!W&SX~O!W%kO~Oz%lO{%nO!T%dO!U%cO![%}X~O![%rO~O![%sO~OQ#XO%`#XO%a%uO~OV%wOo0cOv0qO!PrO~P'vOQ#^OR#[O%`#^O%a%zO~OV!qa_!qaa!qah!qak!qal!qam!qan!qao!qap!qas!qaz!qa{!qa!X!qa!f!qa!x!qa#g!qa%[!qa%_!qa%j!qa%k!qa%l!qa%m!qa%n!qa%o!qa%p!qa%q!qa%r!qa%s!qa%z!qag!qa!T!qa!U!qa%{!qa!W!qa![!qa!Q!qa#[!qat!qa!m!qa~P#yOz%|O{%ha!x%ha#g%ha%[%ha%_%ha%z%ha~P%SOV&OOopOvqO{%ha!x%ha#g%ha%[%ha%_%ha%z%ha~P'vOz%|O{%ha!x%ha#g%ha%[%ha%_%ha%z%ha~OPdOVaOopOvqO!PrO!Q{O!{tO!}uO#PvO#RwO#TxO#XyO#ZzO#^|O#_|O#a}O#c!OO#g$zX%[$zX%_$zX~P'vO#g#gO%[&TO%_&TO~O!f&UOh&sX%[&sXz&sX#[&sX#g&sX%_&sX#Z&sXg&sX~Oh!iO%[&WO~Okealeameaneaoeapeaseazea{ea!xea#gea%[ea%_ea%zeagea!Tea!Uea%{ea!Wea![ea!Qea#[eatea!mea~P%SOsqazqa{qa#gqa%[qa%_qa%zqa~Ok!pOl!qOm!oOn!oOo!rOp!sO!xqa~PEcO%z&YOz%yX{%yX~O%uWOz%yX{%yX~Oz&]O{wX~O{&_O~Oz%lO#g%}X%[%}X%_%}Xg%}X{%}X![%}X!m%}X%z%}X~OV0lOo0cOv0qO!PrO~P'vO%z#|O#gUa%[Ua%_Ua~Oz&hO#g&PX%[&PX%_&PXn&PX~P%SOz&kO!Q&jO#g#Wa%[#Wa%_#Wa~Oz&lO#[&nO#g&rX%[&rX%_&rXg&rX~O!f$YO!r$YO#Z&qO%uWO~O#Z&qO~Oz&sO#g&tX%[&tX%_&tX~Oz&uO#g&pX%[&pX%_&pX{&pX~O!X&wO%z&xO~Oz&|On&wX~P%SOn'PO~OPdOVaOopOvqO!PrO!Q{O!{tO!}uO#PvO#RwO#TxO#XyO#ZzO#^|O#_|O#a}O#c!OO%['UO~P'vOt'YO#p'WO#q'XOP#naV#naf#nah#nao#nas#nav#na!P#na!Q#na!T#na!U#na!X#na!]#na!h#na!r#na!s#na!t#na!{#na!}#na#P#na#R#na#T#na#X#na#Z#na#^#na#_#na#a#na#c#na#l#na#o#na#s#na#u#na#z#na#}#na$P#na%X#na%o#na%p#na%t#na%u#na&Z#na&[#na&]#na&^#na&_#na&`#na&a#na&b#na&c#na&d#na&e#na&f#na&g#na&h#na&i#na&j#na%Z#na%_#na~Oz'ZO#[']O{&xX~Oh'_O!X&wO~Oh!iO{$jO!X&wO~O{'eO~P%SO%['hO%_'hO~OS'iO%['hO%_'hO~OV!aO_!aOa!bOh!iO!X!kO!f!mO%l!^O%m!_O%n!_O%o!`O%p!`O%q!aO%r!aO%s!aOkWilWimWinWioWipWisWizWi{Wi!xWi#gWi%[Wi%_Wi%jWi%zWigWi!TWi!UWi%{Wi!WWi![Wi!QWi#[WitWi!mWi~O%k!]O~P!#uO%kWi~P!#uOV!aO_!aOa!bOh!iO!X!kO!f!mO%o!`O%p!`O%q!aO%r!aO%s!aOkWilWimWinWioWipWisWizWi{Wi!xWi#gWi%[Wi%_Wi%jWi%kWi%lWi%zWigWi!TWi!UWi%{Wi!WWi![Wi!QWi#[WitWi!mWi~O%m!_O%n!_O~P!&pO%mWi%nWi~P!&pOa!bOh!iO!X!kO!f!mOkWilWimWinWioWipWisWizWi{Wi!xWi#gWi%[Wi%_Wi%jWi%kWi%lWi%mWi%nWi%oWi%pWi%zWigWi!TWi!UWi%{Wi!WWi![Wi!QWi#[WitWi!mWi~OV!aO_!aO%q!aO%r!aO%s!aO~P!)nOVWi_Wi%qWi%rWi%sWi~P!)nO!T%dO!U%cOg&VXz&VX~O%z'kO%{'kO~P,eOz'mOg&UX~Og'oO~Oz'pO{'rO!W&XX~Oo0cOv0qOz'pO{'sO!W&XX~P'vO!W'uO~Om!oOn!oOo!rOp!sOkjisjizji{ji!xji#gji%[ji%_ji%zji~Ol!qO~P!.aOlji~P!.aOk0eOl0fOm0dOn0dOo0mOp0nO~Ot'wO~P!/jOV'|Og'}Oo0cOv0qO~P'vOg'}Oz(OO~Og(QO~O!U(SO~Og(TOz(OO!T%dO!U%cO~P%SOk0eOl0fOm0dOn0dOo0mOp0nOgqa!Tqa!Uqa%{qa!Wqa![qa!Qqa#[qatqa!mqa~PEcOV'|Oo0cOv0qO!W&Sa~P'vOz(WO!W&Sa~O!W(XO~Oz(WO!T%dO!U%cO!W&Sa~P%SOV(]Oo0cOv0qO![%}a#g%}a%[%}a%_%}ag%}a{%}a!m%}a%z%}a~P'vOz(^O![%}a#g%}a%[%}a%_%}ag%}a{%}a!m%}a%z%}a~O![(aO~Oz(^O!T%dO!U%cO![%}a~P%SOz(dO!T%dO!U%cO![&Ta~P%SOz(gO{&lX![&lX!m&lX%z&lX~O{(kO![(mO!m(nO%z(jO~OV&OOopOvqO{%hi!x%hi#g%hi%[%hi%_%hi%z%hi~P'vOz(pO{%hi!x%hi#g%hi%[%hi%_%hi%z%hi~O!f&UOh&sa%[&saz&sa#[&sa#g&sa%_&sa#Z&sag&sa~O%[(uO~OV#sOa#tO%uWO~Oz&]O{wa~OopOvqO~P'vOz(^O#g%}a%[%}a%_%}ag%}a{%}a![%}a!m%}a%z%}a~P%SOz(zO#g%hX%[%hX%_%hX%z%hX~O%z#|O#gUi%[Ui%_Ui~O#g&Pa%[&Pa%_&Pan&Pa~P'vOz(}O#g&Pa%[&Pa%_&Pan&Pa~O%uWO#g&ra%[&ra%_&rag&ra~Oz)SO#g&ra%[&ra%_&rag&ra~Og)VO~OV)WOh$WO%uWO~O#Z)XO~O%uWO#g&ta%[&ta%_&ta~Oz)ZO#g&ta%[&ta%_&ta~Oo0cOv0qO#g&pa%[&pa%_&pa{&pa~P'vOz)^O#g&pa%[&pa%_&pa{&pa~OV)`Oa)`O%uWO~O%z)eO~Ot)hO#j)gOP#hiV#hif#hih#hio#his#hiv#hi!P#hi!Q#hi!T#hi!U#hi!X#hi!]#hi!h#hi!r#hi!s#hi!t#hi!{#hi!}#hi#P#hi#R#hi#T#hi#X#hi#Z#hi#^#hi#_#hi#a#hi#c#hi#l#hi#o#hi#s#hi#u#hi#z#hi#}#hi$P#hi%X#hi%o#hi%p#hi%t#hi%u#hi&Z#hi&[#hi&]#hi&^#hi&_#hi&`#hi&a#hi&b#hi&c#hi&d#hi&e#hi&f#hi&g#hi&h#hi&i#hi&j#hi%Z#hi%_#hi~Ot)iOP#kiV#kif#kih#kio#kis#kiv#ki!P#ki!Q#ki!T#ki!U#ki!X#ki!]#ki!h#ki!r#ki!s#ki!t#ki!{#ki!}#ki#P#ki#R#ki#T#ki#X#ki#Z#ki#^#ki#_#ki#a#ki#c#ki#l#ki#o#ki#s#ki#u#ki#z#ki#}#ki$P#ki%X#ki%o#ki%p#ki%t#ki%u#ki&Z#ki&[#ki&]#ki&^#ki&_#ki&`#ki&a#ki&b#ki&c#ki&d#ki&e#ki&f#ki&g#ki&h#ki&i#ki&j#ki%Z#ki%_#ki~OV)kOn&wa~P'vOz)lOn&wa~Oz)lOn&wa~P%SOn)pO~O%Y)tO~Ot)wO#p'WO#q)vOP#niV#nif#nih#nio#nis#niv#ni!P#ni!Q#ni!T#ni!U#ni!X#ni!]#ni!h#ni!r#ni!s#ni!t#ni!{#ni!}#ni#P#ni#R#ni#T#ni#X#ni#Z#ni#^#ni#_#ni#a#ni#c#ni#l#ni#o#ni#s#ni#u#ni#z#ni#}#ni$P#ni%X#ni%o#ni%p#ni%t#ni%u#ni&Z#ni&[#ni&]#ni&^#ni&_#ni&`#ni&a#ni&b#ni&c#ni&d#ni&e#ni&f#ni&g#ni&h#ni&i#ni&j#ni%Z#ni%_#ni~OV)zOo0cOv0qO{$jO~P'vOo0cOv0qO{&xa~P'vOz*OO{&xa~OV*SOa*TOg*WO%q*UO%uWO~O{$jO&{*YO~Oh'_O~Oh!iO{$jO~O%[*_O~O%[*aO%_*aO~OV$}Oa$}Oo0cOv0qOg&Ua~P'vOz*dOg&Ua~Oo0cOv0qO{*gO!W&Xa~P'vOz*hO!W&Xa~Oo0cOv0qOz*hO{*kO!W&Xa~P'vOo0cOv0qOz*hO!W&Xa~P'vOz*hO{*kO!W&Xa~Om0dOn0dOo0mOp0nOgjikjisjizji!Tji!Uji%{ji!Wji{ji![ji#gji%[ji%_ji!Qji#[jitji!mji%zji~Ol0fO~P!NkOlji~P!NkOV'|Og*pOo0cOv0qO~P'vOn*rO~Og*pOz*tO~Og*uO~OV'|Oo0cOv0qO!W&Si~P'vOz*vO!W&Si~O!W*wO~OV(]Oo0cOv0qO![%}i#g%}i%[%}i%_%}ig%}i{%}i!m%}i%z%}i~P'vOz*zO!T%dO!U%cO![&Ti~Oz*}O![%}i#g%}i%[%}i%_%}ig%}i{%}i!m%}i%z%}i~O![+OO~Oa+QOo0cOv0qO![&Ti~P'vOz*zO![&Ti~O![+SO~OV+UOo0cOv0qO{&la![&la!m&la%z&la~P'vOz+VO{&la![&la!m&la%z&la~O!]+YO&n+[O![!nX~O![+^O~O{(kO![+_O~O{(kO![+_O!m+`O~OV&OOopOvqO{%hq!x%hq#g%hq%[%hq%_%hq%z%hq~P'vOz$ri{$ri!x$ri#g$ri%[$ri%_$ri%z$ri~P%SOV&OOopOvqO~P'vOV&OOo0cOv0qO#g%ha%[%ha%_%ha%z%ha~P'vOz+aO#g%ha%[%ha%_%ha%z%ha~Oz$ia#g$ia%[$ia%_$ian$ia~P%SO#g&Pi%[&Pi%_&Pin&Pi~P'vOz+dO#g#Wq%[#Wq%_#Wq~O#[+eOz$va#g$va%[$va%_$vag$va~O%uWO#g&ri%[&ri%_&rig&ri~Oz+gO#g&ri%[&ri%_&rig&ri~OV+iOh$WO%uWO~O%uWO#g&ti%[&ti%_&ti~Oo0cOv0qO#g&pi%[&pi%_&pi{&pi~P'vO{#{Oz#eX!W#eX~Oz+mO!W&uX~O!W+oO~Ot+rO#j)gOP#hqV#hqf#hqh#hqo#hqs#hqv#hq!P#hq!Q#hq!T#hq!U#hq!X#hq!]#hq!h#hq!r#hq!s#hq!t#hq!{#hq!}#hq#P#hq#R#hq#T#hq#X#hq#Z#hq#^#hq#_#hq#a#hq#c#hq#l#hq#o#hq#s#hq#u#hq#z#hq#}#hq$P#hq%X#hq%o#hq%p#hq%t#hq%u#hq&Z#hq&[#hq&]#hq&^#hq&_#hq&`#hq&a#hq&b#hq&c#hq&d#hq&e#hq&f#hq&g#hq&h#hq&i#hq&j#hq%Z#hq%_#hq~On$|az$|a~P%SOV)kOn&wi~P'vOz+yOn&wi~Oz,TO{$jO#[,TO~O#q,VOP#nqV#nqf#nqh#nqo#nqs#nqv#nq!P#nq!Q#nq!T#nq!U#nq!X#nq!]#nq!h#nq!r#nq!s#nq!t#nq!{#nq!}#nq#P#nq#R#nq#T#nq#X#nq#Z#nq#^#nq#_#nq#a#nq#c#nq#l#nq#o#nq#s#nq#u#nq#z#nq#}#nq$P#nq%X#nq%o#nq%p#nq%t#nq%u#nq&Z#nq&[#nq&]#nq&^#nq&_#nq&`#nq&a#nq&b#nq&c#nq&d#nq&e#nq&f#nq&g#nq&h#nq&i#nq&j#nq%Z#nq%_#nq~O#[,WOz%Oa{%Oa~Oo0cOv0qO{&xi~P'vOz,YO{&xi~O{#{O%z,[Og&zXz&zX~O%uWOg&zXz&zX~Oz,`Og&yX~Og,bO~O%Y,eO~O!T%dO!U%cOg&Viz&Vi~OV$}Oa$}Oo0cOv0qOg&Ui~P'vO{,hOz$la!W$la~Oo0cOv0qO{,iOz$la!W$la~P'vOo0cOv0qO{*gO!W&Xi~P'vOz,lO!W&Xi~Oo0cOv0qOz,lO!W&Xi~P'vOz,lO{,oO!W&Xi~Og$hiz$hi!W$hi~P%SOV'|Oo0cOv0qO~P'vOn,qO~OV'|Og,rOo0cOv0qO~P'vOV'|Oo0cOv0qO!W&Sq~P'vOz$gi![$gi#g$gi%[$gi%_$gig$gi{$gi!m$gi%z$gi~P%SOV(]Oo0cOv0qO~P'vOa+QOo0cOv0qO![&Tq~P'vOz,sO![&Tq~O![,tO~OV(]Oo0cOv0qO![%}q#g%}q%[%}q%_%}qg%}q{%}q!m%}q%z%}q~P'vO{,uO~OV+UOo0cOv0qO{&li![&li!m&li%z&li~P'vOz,zO{&li![&li!m&li%z&li~O!]+YO&n+[O![!na~O{(kO![,}O~OV&OOo0cOv0qO#g%hi%[%hi%_%hi%z%hi~P'vOz-OO#g%hi%[%hi%_%hi%z%hi~O%uWO#g&rq%[&rq%_&rqg&rq~Oz-RO#g&rq%[&rq%_&rqg&rq~OV)`Oa)`O%uWO!W&ua~Oz-TO!W&ua~On$|iz$|i~P%SOV)kO~P'vOV)kOn&wq~P'vOt-XOP#myV#myf#myh#myo#mys#myv#my!P#my!Q#my!T#my!U#my!X#my!]#my!h#my!r#my!s#my!t#my!{#my!}#my#P#my#R#my#T#my#X#my#Z#my#^#my#_#my#a#my#c#my#l#my#o#my#s#my#u#my#z#my#}#my$P#my%X#my%o#my%p#my%t#my%u#my&Z#my&[#my&]#my&^#my&_#my&`#my&a#my&b#my&c#my&d#my&e#my&f#my&g#my&h#my&i#my&j#my%Z#my%_#my~O%Z-]O%_-]O~P`O#q-^OP#nyV#nyf#nyh#nyo#nys#nyv#ny!P#ny!Q#ny!T#ny!U#ny!X#ny!]#ny!h#ny!r#ny!s#ny!t#ny!{#ny!}#ny#P#ny#R#ny#T#ny#X#ny#Z#ny#^#ny#_#ny#a#ny#c#ny#l#ny#o#ny#s#ny#u#ny#z#ny#}#ny$P#ny%X#ny%o#ny%p#ny%t#ny%u#ny&Z#ny&[#ny&]#ny&^#ny&_#ny&`#ny&a#ny&b#ny&c#ny&d#ny&e#ny&f#ny&g#ny&h#ny&i#ny&j#ny%Z#ny%_#ny~Oz-aO{$jO#[-aO~Oo0cOv0qO{&xq~P'vOz-dO{&xq~O%z,[Og&zaz&za~O{#{Og&zaz&za~OV*SOa*TO%q*UO%uWOg&ya~Oz-hOg&ya~O$S-lO~OV$}Oa$}Oo0cOv0qO~P'vOo0cOv0qO{-mOz$li!W$li~P'vOo0cOv0qOz$li!W$li~P'vO{-mOz$li!W$li~Oo0cOv0qO{*gO~P'vOo0cOv0qO{*gO!W&Xq~P'vOz-pO!W&Xq~Oo0cOv0qOz-pO!W&Xq~P'vOs-sO!T%dO!U%cOg&Oq!W&Oq![&Oqz&Oq~P!/jOa+QOo0cOv0qO![&Ty~P'vOz$ji![$ji~P%SOa+QOo0cOv0qO~P'vOV+UOo0cOv0qO~P'vOV+UOo0cOv0qO{&lq![&lq!m&lq%z&lq~P'vO{(kO![-xO!m-yO%z-wO~OV&OOo0cOv0qO#g%hq%[%hq%_%hq%z%hq~P'vO%uWO#g&ry%[&ry%_&ryg&ry~OV)`Oa)`O%uWO!W&ui~Ot-}OP#m!RV#m!Rf#m!Rh#m!Ro#m!Rs#m!Rv#m!R!P#m!R!Q#m!R!T#m!R!U#m!R!X#m!R!]#m!R!h#m!R!r#m!R!s#m!R!t#m!R!{#m!R!}#m!R#P#m!R#R#m!R#T#m!R#X#m!R#Z#m!R#^#m!R#_#m!R#a#m!R#c#m!R#l#m!R#o#m!R#s#m!R#u#m!R#z#m!R#}#m!R$P#m!R%X#m!R%o#m!R%p#m!R%t#m!R%u#m!R&Z#m!R&[#m!R&]#m!R&^#m!R&_#m!R&`#m!R&a#m!R&b#m!R&c#m!R&d#m!R&e#m!R&f#m!R&g#m!R&h#m!R&i#m!R&j#m!R%Z#m!R%_#m!R~Oo0cOv0qO{&xy~P'vOV*SOa*TO%q*UO%uWOg&yi~O$S-lO%Z.VO%_.VO~OV.aOh._O!X.^O!].`O!h.YO!s.[O!t.[O%p.XO%uWO&Z]O&[]O&]]O&^]O&_]O&`]O&a]O&b]O~Oo0cOv0qOz$lq!W$lq~P'vO{.fOz$lq!W$lq~Oo0cOv0qO{*gO!W&Xy~P'vOz.gO!W&Xy~Oo0cOv.kO~P'vOs-sO!T%dO!U%cOg&Oy!W&Oy![&Oyz&Oy~P!/jO{(kO![.nO~O{(kO![.nO!m.oO~OV*SOa*TO%q*UO%uWO~Oh.tO!f.rOz$TX#[$TX%j$TXg$TX~Os$TX{$TX!W$TX![$TX~P$-bO%o.vO%p.vOs$UXz$UX{$UX#[$UX%j$UX!W$UXg$UX![$UX~O!h.xO~Oz.|O#[/OO%j.yOs&|X{&|X!W&|Xg&|X~Oa/RO~P$)zOh.tOs&}Xz&}X{&}X#[&}X%j&}X!W&}Xg&}X![&}X~Os/VO{$jO~Oo0cOv0qOz$ly!W$ly~P'vOo0cOv0qO{*gO!W&X!R~P'vOz/ZO!W&X!R~Og&RXs&RX!T&RX!U&RX!W&RX![&RXz&RX~P!/jOs-sO!T%dO!U%cOg&Qa!W&Qa![&Qaz&Qa~O{(kO![/^O~O!f.rOh$[as$[az$[a{$[a#[$[a%j$[a!W$[ag$[a![$[a~O!h/eO~O%o.vO%p.vOs$Uaz$Ua{$Ua#[$Ua%j$Ua!W$Uag$Ua![$Ua~O%j.yOs$Yaz$Ya{$Ya#[$Ya!W$Yag$Ya![$Ya~Os&|a{&|a!W&|ag&|a~P$)nOz/jOs&|a{&|a!W&|ag&|a~O!W/mO~Og/mO~O{/oO~O![/pO~Oo0cOv0qO{*gO!W&X!Z~P'vO{/sO~O%z/tO~P$-bOz/uO#[/OO%j.yOg'PX~Oz/uOg'PX~Og/wO~O!h/xO~O#[/OOs%Saz%Sa{%Sa%j%Sa!W%Sag%Sa![%Sa~O#[/OO%j.yOs%Waz%Wa{%Wa!W%Wag%Wa~Os&|i{&|i!W&|ig&|i~P$)nOz/zO#[/OO%j.yO!['Oa~Og'Pa~P$)nOz0SOg'Pa~Oa0UO!['Oi~P$)zOz0WO!['Oi~Oz0WO#[/OO%j.yO!['Oi~O#[/OO%j.yOg$biz$bi~O%z0ZO~P$-bO#[/OO%j.yOg%Vaz%Va~Og'Pi~P$)nO{0^O~Oa0UO!['Oq~P$)zOz0`O!['Oq~O#[/OO%j.yOz%Ui![%Ui~Oa0UO~P$)zOa0UO!['Oy~P$)zO#[/OO%j.yOg$ciz$ci~O#[/OO%j.yOz%Uq![%Uq~Oz+aO#g%ha%[%ha%_%ha%z%ha~P%SOV&OOo0cOv0qO~P'vOn0hO~Oo0hO~P'vO{0iO~Ot0jO~P!/jO&]&Z&j&h&i&g&f&d&e&c&b&`&a&_&^&[%u~",goto:"!=j'QPPPPPP'RP'Z*s+[+t,_,y-fP.SP'Z.r.r'ZPPP'Z2[PPPPPP2[5PPP5PP7b7k=sPP=v>h>kPP'Z'ZPP>zPP'Z'ZPP'Z'Z'Z'Z'Z?O?w'ZP?zP@QDXGuGyPG|HWH['ZPPPH_Hk'RP'R'RP'RP'RP'RP'RP'R'R'RP'RPP'RPP'RP'RPHqH}IVPI^IdPI^PI^I^PPPI^PKrPK{LVL]KrPI^LfPI^PLmLsPLwM]MzNeLwLwNkNxLwLwLwLw! ^! d! g! l! o! y!!P!!]!!o!!u!#P!#V!#s!#y!$P!$Z!$a!$g!$y!%T!%Z!%a!%k!%q!%w!%}!&T!&Z!&e!&k!&u!&{!'U!'[!'k!'s!'}!(UPPPPPPPPPPP!([!(_!(e!(n!(x!)TPPPPPPPPPPPP!-u!/Z!3^!6oPP!6w!7W!7a!8Y!8P!8c!8i!8l!8o!8r!8z!9jPPPPPPPPPPPPPPPPP!9m!9q!9wP!:]!:a!:m!:v!;S!;j!;m!;p!;v!;|!<S!<VP!<_!<h!=d!=g]eOn#g$j)t,P'}`OTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!i!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$e$g$h$j$q$}%S%Z%^%`%c%g%l%n%w%|&O&Z&_&h&j&k&u&x&|'P'W'Z'l'm'p'r's'w'|(O(S(W(](^(d(g(p(r(z(})^)e)g)k)l)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+Q+U+V+Y+a+c+d+k+x+y,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0l0n0r{!cQ#c#p$R$d$p%e%j%p%q&`'O'g(q(|)j*o*x+w,v0g}!dQ#c#p$R$d$p$u%e%j%p%q&`'O'g(q(|)j*o*x+w,v0g!P!eQ#c#p$R$d$p$u$v%e%j%p%q&`'O'g(q(|)j*o*x+w,v0g!R!fQ#c#p$R$d$p$u$v$w%e%j%p%q&`'O'g(q(|)j*o*x+w,v0g!T!gQ#c#p$R$d$p$u$v$w$x%e%j%p%q&`'O'g(q(|)j*o*x+w,v0g!V!hQ#c#p$R$d$p$u$v$w$x$y%e%j%p%q&`'O'g(q(|)j*o*x+w,v0g!Z!hQ!n#c#p$R$d$p$u$v$w$x$y$z%e%j%p%q&`'O'g(q(|)j*o*x+w,v0g'}TOTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!i!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$e$g$h$j$q$}%S%Z%^%`%c%g%l%n%w%|&O&Z&_&h&j&k&u&x&|'P'W'Z'l'm'p'r's'w'|(O(S(W(](^(d(g(p(r(z(})^)e)g)k)l)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+Q+U+V+Y+a+c+d+k+x+y,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0l0n0r&eVOYZ[dnprxy}!P!Q!U!i!k!o!p!q!s!t#[#d#g#y#{#}$Q$h$j$}%S%Z%^%`%g%l%n%w%|&Z&_&j&k&u&x'P'W'Z'l'm'p'r's'w(O(W(^(d(g(p(r(z)^)e)g)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+U+V+Y+a+d+k,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0n0r%oXOYZ[dnrxy}!P!Q!U!i!k#[#d#g#y#{#}$Q$h$j$}%S%^%`%g%l%n%w%|&Z&_&j&k&u&x'P'W'Z'l'm'p'r's'w(O(W(^(d(g(p(r(z)^)e)g)p)t)z*O*Y*d*g*h*k*q*t*v*y*z*}+U+V+Y+a+d+k,P,X,Y,],g,h,i,k,l,o,s,u,w,y,z-O-d-f-m-p.f.g/V/Z0i0j0kQ#vqQ/[.kR0o0q't`OTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$e$g$h$j$q$}%S%Z%^%`%c%g%l%n%w%|&O&Z&_&h&j&k&u&x&|'P'W'Z'l'p'r's'w'|(O(S(W(](^(d(g(p(r(z(})^)e)g)k)l)p)t)z*O*Y*g*h*k*q*r*t*v*y*z*}+Q+U+V+Y+a+c+d+k+x+y,P,X,Y,],h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0l0n0rh#jhz{$W$Z&l&q)S)X+f+g-RW#rq&].k0qQ$]|Q$a!OQ$n!VQ$o!WW$|!i'm*d,gS&[#s#tQ'S$iQ(s&UQ)U&nU)Y&s)Z+jW)a&w+m-T-{Q*Q']W*R'_,`-h.TQ+l)`S,_*S*TQ-Q+eQ-_,TQ-c,WQ.R-al.W-l.^._.a.z.|/R/j/o/t/y0U0Z0^Q/S.`Q/a.tQ/l/OU0P/u0S0[X0V/z0W0_0`R&Z#r!_!wYZ!P!Q!k%S%`%g'p'r's(O(W)g*g*h*k*q*t*v,h,i,k,l,o-m-p.f.g/ZR%^!vQ!{YQ%x#[Q&d#}Q&g$QR,{+YT.j-s/s!Y!jQ!n#c#p$R$d$p$u$v$w$x$y$z%e%j%p%q&`'O'g(q(|)j*o*x+w,v0gQ&X#kQ'c$oR*^'dR'l$|Q%V!mR/_.r'|_OTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!i!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$e$g$h$j$q$}%S%Z%^%`%c%g%l%n%w%|&O&Z&_&h&j&k&u&x&|'P'W'Z'l'm'p'r's'w'|(O(S(W(](^(d(g(p(r(z(})^)e)g)k)l)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+Q+U+V+Y+a+c+d+k+x+y,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0l0n0rS#a_#b!P.[-l.^._.`.a.t.z.|/R/j/o/t/u/y/z0S0U0W0Z0[0^0_0`'|_OTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!i!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$e$g$h$j$q$}%S%Z%^%`%c%g%l%n%w%|&O&Z&_&h&j&k&u&x&|'P'W'Z'l'm'p'r's'w'|(O(S(W(](^(d(g(p(r(z(})^)e)g)k)l)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+Q+U+V+Y+a+c+d+k+x+y,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0l0n0rT#a_#bT#^^#_R(o%xa(l%x(n(o+`,{-y-z.oT+[(k+]R-z,{Q$PsQ+l)aQ,^*RR-e,_X#}s$O$P&fQ&y$aQ'a$nQ'd$oR)s'SQ)b&wV-S+m-T-{ZgOn$j)t,PXkOn)t,PQ$k!TQ&z$bQ&{$cQ'^$mQ'b$oQ)q'RQ)x'WQ){'XQ)|'YQ*Z'`S*]'c'dQ+s)gQ+u)hQ+v)iQ+z)oS+|)r*[Q,Q)vQ,R)wS,S)y)zQ,d*^Q-V+rQ-W+tQ-Y+{S-Z+},OQ-`,UQ-b,VQ-|-XQ.O-[Q.P-^Q.Q-_Q.p-}Q.q.RQ/W.dR/r/XWkOn)t,PR#mjQ'`$nS)r'S'aR,O)sQ,]*RR-f,^Q*['`Q+})rR-[,OZiOjn)t,PQ'f$pR*`'gT-j,e-ku.c-l.^._.a.t.z.|/R/j/o/t/u/y0S0U0Z0[0^t.c-l.^._.a.t.z.|/R/j/o/t/u/y0S0U0Z0[0^Q/S.`X0V/z0W0_0`!P.Z-l.^._.`.a.t.z.|/R/j/o/t/u/y/z0S0U0W0Z0[0^0_0`Q.w.YR/f.xg.z.].{/b/i/n/|0O0Q0]0a0bu.b-l.^._.a.t.z.|/R/j/o/t/u/y0S0U0Z0[0^X.u.W.b/a0PR/c.tV0R/u0S0[R/X.dQnOS#on,PR,P)tQ&^#uR(x&^S%m#R#wS(_%m(bT(b%p&`Q%a!yQ%h!}W(P%a%h(U(YQ(U%eR(Y%jQ&i$RR)O&iQ(e%qQ*{(`T+R(e*{Q'n%OR*e'nS'q%R%SY*i'q*j,m-q.hU*j'r's'tU,m*k*l*mS-q,n,oR.h-rQ#Y]R%t#YQ#_^R%y#_Q(h%vS+W(h+XR+X(iQ+](kR,|+]Q#b_R%{#bQ#ebQ%}#cW&Q#e%}({+bQ({&cR+b0gQ$OsS&e$O&fR&f$PQ&v$_R)_&vQ&V#jR(t&VQ&m$VS)T&m+hR+h)UQ$Z{R&p$ZQ&t$]R)[&tQ+n)bR-U+nQ#hfR&S#hQ)f&zR+q)fQ&}$dS)m&})nR)n'OQ'V$kR)u'VQ'[$lS*P'[,ZR,Z*QQ,a*VR-i,aWjOn)t,PR#ljQ-k,eR.U-kd.{.]/b/i/n/|0O0Q0]0a0bR/h.{U.s.W/a0PR/`.sQ/{/nS0X/{0YR0Y/|S/v/b/cR0T/vQ.}.]R/k.}R!ZPXmOn)t,PWlOn)t,PR'T$jYfOn$j)t,PR&R#g[sOn#g$j)t,PR&d#}&dQOYZ[dnprxy}!P!Q!U!i!k!o!p!q!s!t#[#d#g#y#{#}$Q$h$j$}%S%Z%^%`%g%l%n%w%|&Z&_&j&k&u&x'P'W'Z'l'm'p'r's'w(O(W(^(d(g(p(r(z)^)e)g)p)t)z*O*Y*d*g*h*k*q*r*t*v*y*z*}+U+V+Y+a+d+k,P,X,Y,],g,h,i,k,l,o,q,s,u,w,y,z-O-d-f-m-p-s.f.g/V/Z/s0c0d0e0f0h0i0j0k0n0rQ!nTQ#caQ#poU$Rt%c(SS$d!R$gQ$p!XQ$u!cQ$v!dQ$w!eQ$x!fQ$y!gQ$z!hQ%e!zQ%j#OQ%p#SQ%q#TQ&`#xQ'O$eQ'g$qQ(q&OU(|&h(}+cW)j&|)l+x+yQ*o'|Q*x(]Q+w)kQ,v+QR0g0lQ!yYQ!}ZQ$b!PQ$c!QQ%R!kQ't%S^'{%`%g(O(W*q*t*v^*f'p*h,k,l-p.g/ZQ*l'rQ*m'sQ+t)gQ,j*gQ,n*kQ-n,hQ-o,iQ-r,oQ.e-mR/Y.f[bOn#g$j)t,P!^!vYZ!P!Q!k%S%`%g'p'r's(O(W)g*g*h*k*q*t*v,h,i,k,l,o-m-p.f.g/ZQ#R[Q#fdS#wrxQ$UyW$_}$Q'P)pS$l!U$hW${!i'm*d,gS%v#[+Y`&P#d%|(p(r(z+a-O0kQ&a#yQ&b#{Q&c#}Q'j$}Q'z%^W([%l(^*y*}Q(`%nQ(i%wQ(v&ZS(y&_0iQ)P&jQ)Q&kU)]&u)^+kQ)d&xQ)y'WY)}'Z*O,X,Y-dQ*b'lS*n'w0jW+P(d*z,s,wW+T(g+V,y,zQ+p)eQ,U)zQ,c*YQ,x+UQ-P+dQ-e,]Q-v,uQ.S-fR/q/VhUOn#d#g$j%|&_'w(p(r)t,P%U!uYZ[drxy}!P!Q!U!i!k#[#y#{#}$Q$h$}%S%^%`%g%l%n%w&Z&j&k&u&x'P'W'Z'l'm'p'r's(O(W(^(d(g(z)^)e)g)p)z*O*Y*d*g*h*k*q*t*v*y*z*}+U+V+Y+a+d+k,X,Y,],g,h,i,k,l,o,s,u,w,y,z-O-d-f-m-p.f.g/V/Z0i0j0kQ#qpW%W!o!s0d0nQ%X!pQ%Y!qQ%[!tQ%f0cS'v%Z0hQ'x0eQ'y0fQ,p*rQ-u,qS.i-s/sR0p0rU#uq.k0qR(w&][cOn#g$j)t,PZ!xY#[#}$Q+YQ#W[Q#zrR$TxQ%b!yQ%i!}Q%o#RQ'j${Q(V%eQ(Z%jQ(c%pQ(f%qQ*|(`Q,f*bQ-t,pQ.m-uR/].lQ$StQ(R%cR*s(SQ.l-sR/}/sR#QZR#V[R%Q!iQ%O!iV*c'm*d,g!Z!lQ!n#c#p$R$d$p$u$v$w$x$y$z%e%j%p%q&`'O'g(q(|)j*o*x+w,v0gR%T!kT#]^#_Q%x#[R,{+YQ(m%xS+_(n(oQ,}+`Q-x,{S.n-y-zR/^.oT+Z(k+]Q$`}Q&g$QQ)o'PR+{)pQ$XzQ)W&qR+i)XQ$XzQ&o$WQ)W&qR+i)XQ#khW$Vz$W&q)XQ$[{Q&r$ZZ)R&l)S+f+g-RR$^|R)c&wXlOn)t,PQ$f!RR'Q$gQ$m!UR'R$hR*X'_Q*V'_V-g,`-h.TQ.d-lQ/P.^R/Q._U.]-l.^._Q/U.aQ/b.tQ/g.zU/i.|/j/yQ/n/RQ/|/oQ0O/tU0Q/u0S0[Q0]0UQ0a0ZR0b0^R/T.`R/d.t",nodeNames:" print Escape { Comment Script AssignStatement * BinaryExpression BitOp BitOp BitOp BitOp ArithOp ArithOp @ ArithOp ** UnaryExpression ArithOp BitOp AwaitExpression await ) ( ParenthesizedExpression BinaryExpression or and CompareOp in not is UnaryExpression ConditionalExpression if else LambdaExpression lambda ParamList VariableName AssignOp , : NamedExpression AssignOp YieldExpression yield from TupleExpression ComprehensionExpression async for LambdaExpression ] [ ArrayExpression ArrayComprehensionExpression } { DictionaryExpression DictionaryComprehensionExpression SetExpression SetComprehensionExpression CallExpression ArgList AssignOp MemberExpression . PropertyName Number String FormatString FormatReplacement FormatSelfDoc FormatConversion FormatSpec FormatReplacement FormatSelfDoc ContinuedString Ellipsis None Boolean TypeDef AssignOp UpdateStatement UpdateOp ExpressionStatement DeleteStatement del PassStatement pass BreakStatement break ContinueStatement continue ReturnStatement return YieldStatement PrintStatement RaiseStatement raise ImportStatement import as ScopeStatement global nonlocal AssertStatement assert TypeDefinition type TypeParamList TypeParam StatementGroup ; IfStatement Body elif WhileStatement while ForStatement TryStatement try except finally WithStatement with FunctionDefinition def ParamList AssignOp TypeDef ClassDefinition class DecoratedStatement Decorator At MatchStatement match MatchBody MatchClause case CapturePattern LiteralPattern ArithOp ArithOp AsPattern OrPattern LogicOp AttributePattern SequencePattern MappingPattern StarPattern ClassPattern PatternArgList KeywordPattern KeywordPattern Guard",maxTerm:277,context:bU,nodeProps:[["isolate",-5,4,71,72,73,77,""],["group",-15,6,85,87,88,90,92,94,96,98,99,100,102,105,108,110,"Statement Statement",-22,8,18,21,25,40,49,50,56,57,60,61,62,63,64,67,70,71,72,79,80,81,82,"Expression",-10,114,116,119,121,122,126,128,133,135,138,"Statement",-9,143,144,147,148,150,151,152,153,154,"Pattern"],["openedBy",23,"(",54,"[",58,"{"],["closedBy",24,")",55,"]",59,"}"]],propSources:[wU],skippedNodes:[0,4],repeatNodeCount:34,tokenData:"!2|~R!`OX%TXY%oY[%T[]%o]p%Tpq%oqr'ars)Yst*xtu%Tuv,dvw-hwx.Uxy/tyz0[z{0r{|2S|}2p}!O3W!O!P4_!P!Q:Z!Q!R;k!R![>_![!]Do!]!^Es!^!_FZ!_!`Gk!`!aHX!a!b%T!b!cIf!c!dJU!d!eK^!e!hJU!h!i!#f!i!tJU!t!u!,|!u!wJU!w!x!.t!x!}JU!}#O!0S#O#P&o#P#Q!0j#Q#R!1Q#R#SJU#S#T%T#T#UJU#U#VK^#V#YJU#Y#Z!#f#Z#fJU#f#g!,|#g#iJU#i#j!.t#j#oJU#o#p!1n#p#q!1s#q#r!2a#r#s!2f#s$g%T$g;'SJU;'S;=`KW<%lOJU`%YT&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%T`%lP;=`<%l%To%v]&n`%c_OX%TXY%oY[%T[]%o]p%Tpq%oq#O%T#O#P&o#P#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To&tX&n`OY%TYZ%oZ]%T]^%o^#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc'f[&n`O!_%T!_!`([!`#T%T#T#U(r#U#f%T#f#g(r#g#h(r#h#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc(cTmR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc(yT!mR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk)aV&n`&[ZOr%Trs)vs#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk){V&n`Or%Trs*bs#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk*iT&n`&^ZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To+PZS_&n`OY*xYZ%TZ]*x]^%T^#o*x#o#p+r#p#q*x#q#r+r#r;'S*x;'S;=`,^<%lO*x_+wTS_OY+rZ]+r^;'S+r;'S;=`,W<%lO+r_,ZP;=`<%l+ro,aP;=`<%l*xj,kV%rQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tj-XT!xY&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tj-oV%lQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk.]V&n`&ZZOw%Twx.rx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk.wV&n`Ow%Twx/^x#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk/eT&n`&]ZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk/{ThZ&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc0cTgR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk0yXVZ&n`Oz%Tz{1f{!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk1mVaR&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk2ZV%oZ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc2wTzR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To3_W%pZ&n`O!_%T!_!`-Q!`!a3w!a#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Td4OT&{S&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk4fX!fQ&n`O!O%T!O!P5R!P!Q%T!Q![6T![#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk5WV&n`O!O%T!O!P5m!P#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk5tT!rZ&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti6[a!hX&n`O!Q%T!Q![6T![!g%T!g!h7a!h!l%T!l!m9s!m#R%T#R#S6T#S#X%T#X#Y7a#Y#^%T#^#_9s#_#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti7fZ&n`O{%T{|8X|}%T}!O8X!O!Q%T!Q![8s![#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti8^V&n`O!Q%T!Q![8s![#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti8z]!hX&n`O!Q%T!Q![8s![!l%T!l!m9s!m#R%T#R#S8s#S#^%T#^#_9s#_#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti9zT!hX&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk:bX%qR&n`O!P%T!P!Q:}!Q!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tj;UV%sQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti;ro!hX&n`O!O%T!O!P=s!P!Q%T!Q![>_![!d%T!d!e?q!e!g%T!g!h7a!h!l%T!l!m9s!m!q%T!q!rA]!r!z%T!z!{Bq!{#R%T#R#S>_#S#U%T#U#V?q#V#X%T#X#Y7a#Y#^%T#^#_9s#_#c%T#c#dA]#d#l%T#l#mBq#m#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti=xV&n`O!Q%T!Q![6T![#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti>fc!hX&n`O!O%T!O!P=s!P!Q%T!Q![>_![!g%T!g!h7a!h!l%T!l!m9s!m#R%T#R#S>_#S#X%T#X#Y7a#Y#^%T#^#_9s#_#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti?vY&n`O!Q%T!Q!R@f!R!S@f!S#R%T#R#S@f#S#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti@mY!hX&n`O!Q%T!Q!R@f!R!S@f!S#R%T#R#S@f#S#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TiAbX&n`O!Q%T!Q!YA}!Y#R%T#R#SA}#S#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TiBUX!hX&n`O!Q%T!Q!YA}!Y#R%T#R#SA}#S#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TiBv]&n`O!Q%T!Q![Co![!c%T!c!iCo!i#R%T#R#SCo#S#T%T#T#ZCo#Z#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TiCv]!hX&n`O!Q%T!Q![Co![!c%T!c!iCo!i#R%T#R#SCo#S#T%T#T#ZCo#Z#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%ToDvV{_&n`O!_%T!_!`E]!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TcEdT%{R&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkEzT#gZ&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkFbXmR&n`O!^%T!^!_F}!_!`([!`!a([!a#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TjGUV%mQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkGrV%zZ&n`O!_%T!_!`([!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkH`WmR&n`O!_%T!_!`([!`!aHx!a#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TjIPV%nQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkIoV_Q#}P&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%ToJ_]&n`&YS%uZO!Q%T!Q![JU![!c%T!c!}JU!}#R%T#R#SJU#S#T%T#T#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUoKZP;=`<%lJUoKge&n`&YS%uZOr%Trs)Ysw%Twx.Ux!Q%T!Q![JU![!c%T!c!tJU!t!uLx!u!}JU!}#R%T#R#SJU#S#T%T#T#fJU#f#gLx#g#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUoMRa&n`&YS%uZOr%TrsNWsw%Twx! vx!Q%T!Q![JU![!c%T!c!}JU!}#R%T#R#SJU#S#T%T#T#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUkN_V&n`&`ZOr%TrsNts#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkNyV&n`Or%Trs! `s#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk! gT&n`&bZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk! }V&n`&_ZOw%Twx!!dx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!!iV&n`Ow%Twx!#Ox#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!#VT&n`&aZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To!#oe&n`&YS%uZOr%Trs!%Qsw%Twx!&px!Q%T!Q![JU![!c%T!c!tJU!t!u!(`!u!}JU!}#R%T#R#SJU#S#T%T#T#fJU#f#g!(`#g#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUk!%XV&n`&dZOr%Trs!%ns#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!%sV&n`Or%Trs!&Ys#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!&aT&n`&fZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!&wV&n`&cZOw%Twx!'^x#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!'cV&n`Ow%Twx!'xx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!(PT&n`&eZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To!(ia&n`&YS%uZOr%Trs!)nsw%Twx!+^x!Q%T!Q![JU![!c%T!c!}JU!}#R%T#R#SJU#S#T%T#T#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUk!)uV&n`&hZOr%Trs!*[s#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!*aV&n`Or%Trs!*vs#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!*}T&n`&jZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!+eV&n`&gZOw%Twx!+zx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!,PV&n`Ow%Twx!,fx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!,mT&n`&iZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To!-Vi&n`&YS%uZOr%TrsNWsw%Twx! vx!Q%T!Q![JU![!c%T!c!dJU!d!eLx!e!hJU!h!i!(`!i!}JU!}#R%T#R#SJU#S#T%T#T#UJU#U#VLx#V#YJU#Y#Z!(`#Z#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUo!.}a&n`&YS%uZOr%Trs)Ysw%Twx.Ux!Q%T!Q![JU![!c%T!c!}JU!}#R%T#R#SJU#S#T%T#T#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUk!0ZT!XZ&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc!0qT!WR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tj!1XV%kQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%T~!1sO!]~k!1zV%jR&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%T~!2fO![~i!2mT%tX&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%T",tokenizers:[vU,gU,mU,SU,0,1,2,3,4],topRules:{Script:[0,5]},specialized:[{term:221,get:i=>kU[i]||-1}],tokenPrec:7668}),CU=1024;let AU=0;class u0{constructor(e,t){this.from=e,this.to=t}}class gt{constructor(e={}){this.id=AU++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=di.match(e)),t=>{let n=e(t);return n===void 0?null:[this,n]}}}gt.closedBy=new gt({deserialize:i=>i.split(" ")});gt.openedBy=new gt({deserialize:i=>i.split(" ")});gt.group=new gt({deserialize:i=>i.split(" ")});gt.isolate=new gt({deserialize:i=>{if(i&&i!="rtl"&&i!="ltr"&&i!="auto")throw new RangeError("Invalid value for isolate: "+i);return i||"auto"}});gt.contextHash=new gt({perNode:!0});gt.lookAhead=new gt({perNode:!0});gt.mounted=new gt({perNode:!0});class Cd{constructor(e,t,n){this.tree=e,this.overlay=t,this.parser=n}static get(e){return e&&e.props&&e.props[gt.mounted.id]}}const EU=Object.create(null);class di{constructor(e,t,n,r=0){this.name=e,this.props=t,this.id=n,this.flags=r}static define(e){let t=e.props&&e.props.length?Object.create(null):EU,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new di(e.name||"",t,e.id,n);if(e.props){for(let l of e.props)if(Array.isArray(l)||(l=l(r)),l){if(l[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[l[0].id]=l[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(gt.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let n in e)for(let r of n.split(" "))t[r]=e[n];return n=>{for(let r=n.prop(gt.group),l=-1;l<(r?r.length:0);l++){let o=t[l<0?n.name:r[l]];if(o)return o}}}}di.none=new di("",Object.create(null),0,8);const yf=new WeakMap,Fk=new WeakMap;var It;(function(i){i[i.ExcludeBuffers=1]="ExcludeBuffers",i[i.IncludeAnonymous=2]="IncludeAnonymous",i[i.IgnoreMounts=4]="IgnoreMounts",i[i.IgnoreOverlays=8]="IgnoreOverlays"})(It||(It={}));class bn{constructor(e,t,n,r,l){if(this.type=e,this.children=t,this.positions=n,this.length=r,this.props=null,l&&l.length){this.props=Object.create(null);for(let[o,u]of l)this.props[typeof o=="number"?o:o.id]=u}}toString(){let e=Cd.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let n of this.children){let r=n.toString();r&&(t&&(t+=","),t+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new eO(this.topNode,e)}cursorAt(e,t=0,n=0){let r=yf.get(this)||this.topNode,l=new eO(r);return l.moveTo(e,t),yf.set(this,l._tree),l}get topNode(){return new _n(this,0,0,null)}resolve(e,t=0){let n=tc(yf.get(this)||this.topNode,e,t,!1);return yf.set(this,n),n}resolveInner(e,t=0){let n=tc(Fk.get(this)||this.topNode,e,t,!0);return Fk.set(this,n),n}resolveStack(e,t=0){return MU(this,e,t)}iterate(e){let{enter:t,leave:n,from:r=0,to:l=this.length}=e,o=e.mode||0,u=(o&It.IncludeAnonymous)>0;for(let h=this.cursor(o|It.IncludeAnonymous);;){let d=!1;if(h.from<=l&&h.to>=r&&(!u&&h.type.isAnonymous||t(h)!==!1)){if(h.firstChild())continue;d=!0}for(;d&&n&&(u||!h.type.isAnonymous)&&n(h),!h.nextSibling();){if(!h.parent())return;d=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:eb(di.none,this.children,this.positions,0,this.children.length,0,this.length,(t,n,r)=>new bn(this.type,t,n,r,this.propValues),e.makeTree||((t,n,r)=>new bn(di.none,t,n,r)))}static build(e){return DU(e)}}bn.empty=new bn(di.none,[],[],0);class KO{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new KO(this.buffer,this.index)}}class Vs{constructor(e,t,n){this.buffer=e,this.length=t,this.set=n}get type(){return di.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],n=this.buffer[e+3],r=this.set.types[t],l=r.name;if(/\W/.test(l)&&!r.isError&&(l=JSON.stringify(l)),e+=4,n==e)return l;let o=[];for(;e<n;)o.push(this.childString(e)),e=this.buffer[e+3];return l+"("+o.join(",")+")"}findChild(e,t,n,r,l){let{buffer:o}=this,u=-1;for(let h=e;h!=t&&!(ME(l,r,o[h+1],o[h+2])&&(u=h,n>0));h=o[h+3]);return u}slice(e,t,n){let r=this.buffer,l=new Uint16Array(t-e),o=0;for(let u=e,h=0;u<t;){l[h++]=r[u++],l[h++]=r[u++]-n;let d=l[h++]=r[u++]-n;l[h++]=r[u++]-e,o=Math.max(o,d)}return new Vs(l,o,this.set)}}function ME(i,e,t,n){switch(i){case-2:return t<e;case-1:return n>=e&&t<e;case 0:return t<e&&n>e;case 1:return t<=e&&n>e;case 2:return n>e;case 4:return!0}}function tc(i,e,t,n){for(var r;i.from==i.to||(t<1?i.from>=e:i.from>e)||(t>-1?i.to<=e:i.to<e);){let o=!n&&i instanceof _n&&i.index<0?null:i.parent;if(!o)return i;i=o}let l=n?0:It.IgnoreOverlays;if(n)for(let o=i,u=o.parent;u;o=u,u=o.parent)o instanceof _n&&o.index<0&&((r=u.enter(e,t,l))===null||r===void 0?void 0:r.from)!=o.from&&(i=u);for(;;){let o=i.enter(e,t,l);if(!o)return i;i=o}}class DE{cursor(e=0){return new eO(this,e)}getChild(e,t=null,n=null){let r=Yk(this,e,t,n);return r.length?r[0]:null}getChildren(e,t=null,n=null){return Yk(this,e,t,n)}resolve(e,t=0){return tc(this,e,t,!1)}resolveInner(e,t=0){return tc(this,e,t,!0)}matchContext(e){return Jy(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),n=this;for(;t;){let r=t.lastChild;if(!r||r.to!=t.to)break;r.type.isError&&r.from==r.to?(n=t,t=r.prevSibling):t=r}return n}get node(){return this}get next(){return this.parent}}class _n extends DE{constructor(e,t,n,r){super(),this._tree=e,this.from=t,this.index=n,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,n,r,l=0){for(let o=this;;){for(let{children:u,positions:h}=o._tree,d=t>0?u.length:-1;e!=d;e+=t){let p=u[e],g=h[e]+o.from;if(ME(r,n,g,g+p.length)){if(p instanceof Vs){if(l&It.ExcludeBuffers)continue;let O=p.findChild(0,p.buffer.length,t,n-g,r);if(O>-1)return new nr(new RU(o,p,e,g),null,O)}else if(l&It.IncludeAnonymous||!p.type.isAnonymous||JO(p)){let O;if(!(l&It.IgnoreMounts)&&(O=Cd.get(p))&&!O.overlay)return new _n(O.tree,g,e,o);let b=new _n(p,g,e,o);return l&It.IncludeAnonymous||!b.type.isAnonymous?b:b.nextChild(t<0?p.children.length-1:0,t,n,r)}}}if(l&It.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,n=0){let r;if(!(n&It.IgnoreOverlays)&&(r=Cd.get(this._tree))&&r.overlay){let l=e-this.from;for(let{from:o,to:u}of r.overlay)if((t>0?o<=l:o<l)&&(t<0?u>=l:u>l))return new _n(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,n)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function Yk(i,e,t,n){let r=i.cursor(),l=[];if(!r.firstChild())return l;if(t!=null){for(let o=!1;!o;)if(o=r.type.is(t),!r.nextSibling())return l}for(;;){if(n!=null&&r.type.is(n))return l;if(r.type.is(e)&&l.push(r.node),!r.nextSibling())return n==null?l:[]}}function Jy(i,e,t=e.length-1){for(let n=i;t>=0;n=n.parent){if(!n)return!1;if(!n.type.isAnonymous){if(e[t]&&e[t]!=n.name)return!1;t--}}return!0}class RU{constructor(e,t,n,r){this.parent=e,this.buffer=t,this.index=n,this.start=r}}class nr extends DE{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,n){super(),this.context=e,this._parent=t,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}child(e,t,n){let{buffer:r}=this.context,l=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.context.start,n);return l<0?null:new nr(this.context,this,l)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,n=0){if(n&It.ExcludeBuffers)return null;let{buffer:r}=this.context,l=r.findChild(this.index+4,r.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return l<0?null:new nr(this.context,this,l)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new nr(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new nr(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:n}=this.context,r=this.index+4,l=n.buffer[this.index+3];if(l>r){let o=n.buffer[this.index+1];e.push(n.slice(r,l,o)),t.push(0)}return new bn(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function QE(i){if(!i.length)return null;let e=0,t=i[0];for(let l=1;l<i.length;l++){let o=i[l];(o.from>t.from||o.to<t.to)&&(t=o,e=l)}let n=t instanceof _n&&t.index<0?null:t.parent,r=i.slice();return n?r[e]=n:r.splice(e,1),new NU(r,t)}class NU{constructor(e,t){this.heads=e,this.node=t}get next(){return QE(this.heads)}}function MU(i,e,t){let n=i.resolveInner(e,t),r=null;for(let l=n instanceof _n?n:n.context.parent;l;l=l.parent)if(l.index<0){let o=l.parent;(r||(r=[n])).push(o.resolve(e,t)),l=o}else{let o=Cd.get(l.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let u=new _n(o.tree,o.overlay[0].from+l.from,-1,l);(r||(r=[n])).push(tc(u,e,t,!1))}}return r?QE(r):n}class eO{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof _n)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let n=e._parent;n;n=n._parent)this.stack.unshift(n.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:n,buffer:r}=this.buffer;return this.type=t||r.set.types[r.buffer[e]],this.from=n+r.buffer[e+1],this.to=n+r.buffer[e+2],!0}yield(e){return e?e instanceof _n?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,n,this.mode));let{buffer:r}=this.buffer,l=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.buffer.start,n);return l<0?!1:(this.stack.push(this.index),this.yieldBuf(l))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,n=this.mode){return this.buffer?n&It.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&It.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&It.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,n=this.stack.length-1;if(e<0){let r=n<0?0:this.stack[n]+4;if(this.index!=r)return this.yieldBuf(t.findChild(r,this.index,-1,0,4))}else{let r=t.buffer[this.index+3];if(r<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(r)}return n<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,n,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let l=0;l<this.index;l++)if(r.buffer.buffer[l+3]<this.index)return!1;({index:t,parent:n}=r)}else({index:t,_parent:n}=this._tree);for(;n;{index:t,_parent:n}=n)if(t>-1)for(let l=t+e,o=e<0?-1:n._tree.children.length;l!=o;l+=e){let u=n._tree.children[l];if(this.mode&It.IncludeAnonymous||u instanceof Vs||!u.type.isAnonymous||JO(u))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer)e:for(let r=this.index,l=this.stack.length;l>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;t=o,n=l+1;break e}r=this.stack[--l]}for(let r=n;r<this.stack.length;r++)t=new nr(this.buffer,t,this.stack[r]);return this.bufferNode=new nr(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let n=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){n++;continue}this.type.isAnonymous||(r=!0)}for(;;){if(r&&t&&t(this),r=this.type.isAnonymous,!n)return;if(this.nextSibling())break;this.parent(),n--,r=!0}}}matchContext(e){if(!this.buffer)return Jy(this.node.parent,e);let{buffer:t}=this.buffer,{types:n}=t.set;for(let r=e.length-1,l=this.stack.length-1;r>=0;l--){if(l<0)return Jy(this._tree,e,r);let o=n[t.buffer[this.stack[l]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}}function JO(i){return i.children.some(e=>e instanceof Vs||!e.type.isAnonymous||JO(e))}function DU(i){var e;let{buffer:t,nodeSet:n,maxBufferLength:r=CU,reused:l=[],minRepeatType:o=n.types.length}=i,u=Array.isArray(t)?new KO(t,t.length):t,h=n.types,d=0,p=0;function g(A,B,C,U,$,K){let{id:L,start:Q,end:Y,size:te}=u,ae=p,j=d;for(;te<0;)if(u.next(),te==-1){let G=l[L];C.push(G),U.push(Q-A);return}else if(te==-3){d=L;return}else if(te==-4){p=L;return}else throw new RangeError(`Unrecognized record size: ${te}`);let se=h[L],de,pe,R=Q-A;if(Y-Q<=r&&(pe=w(u.pos-B,$))){let G=new Uint16Array(pe.size-pe.skip),Z=u.pos-pe.size,ne=G.length;for(;u.pos>Z;)ne=T(pe.start,G,ne);de=new Vs(G,Y-pe.start,n),R=pe.start-A}else{let G=u.pos-te;u.next();let Z=[],ne=[],he=L>=o?L:-1,Me=0,Ce=Y;for(;u.pos>G;)he>=0&&u.id==he&&u.size>=0?(u.end<=Ce-r&&(v(Z,ne,Q,Me,u.end,Ce,he,ae,j),Me=Z.length,Ce=u.end),u.next()):K>2500?O(Q,G,Z,ne):g(Q,G,Z,ne,he,K+1);if(he>=0&&Me>0&&Me<Z.length&&v(Z,ne,Q,Me,Q,Ce,he,ae,j),Z.reverse(),ne.reverse(),he>-1&&Me>0){let nt=b(se,j);de=eb(se,Z,ne,0,Z.length,0,Y-Q,nt,nt)}else de=x(se,Z,ne,Y-Q,ae-Y,j)}C.push(de),U.push(R)}function O(A,B,C,U){let $=[],K=0,L=-1;for(;u.pos>B;){let{id:Q,start:Y,end:te,size:ae}=u;if(ae>4)u.next();else{if(L>-1&&Y<L)break;L<0&&(L=te-r),$.push(Q,Y,te),K++,u.next()}}if(K){let Q=new Uint16Array(K*4),Y=$[$.length-2];for(let te=$.length-3,ae=0;te>=0;te-=3)Q[ae++]=$[te],Q[ae++]=$[te+1]-Y,Q[ae++]=$[te+2]-Y,Q[ae++]=ae;C.push(new Vs(Q,$[2]-Y,n)),U.push(Y-A)}}function b(A,B){return(C,U,$)=>{let K=0,L=C.length-1,Q,Y;if(L>=0&&(Q=C[L])instanceof bn){if(!L&&Q.type==A&&Q.length==$)return Q;(Y=Q.prop(gt.lookAhead))&&(K=U[L]+Q.length+Y)}return x(A,C,U,$,K,B)}}function v(A,B,C,U,$,K,L,Q,Y){let te=[],ae=[];for(;A.length>U;)te.push(A.pop()),ae.push(B.pop()+C-$);A.push(x(n.types[L],te,ae,K-$,Q-K,Y)),B.push($-C)}function x(A,B,C,U,$,K,L){if(K){let Q=[gt.contextHash,K];L=L?[Q].concat(L):[Q]}if($>25){let Q=[gt.lookAhead,$];L=L?[Q].concat(L):[Q]}return new bn(A,B,C,U,L)}function w(A,B){let C=u.fork(),U=0,$=0,K=0,L=C.end-r,Q={size:0,start:0,skip:0};e:for(let Y=C.pos-A;C.pos>Y;){let te=C.size;if(C.id==B&&te>=0){Q.size=U,Q.start=$,Q.skip=K,K+=4,U+=4,C.next();continue}let ae=C.pos-te;if(te<0||ae<Y||C.start<L)break;let j=C.id>=o?4:0,se=C.start;for(C.next();C.pos>ae;){if(C.size<0)if(C.size==-3)j+=4;else break e;else C.id>=o&&(j+=4);C.next()}$=se,U+=te,K+=j}return(B<0||U==A)&&(Q.size=U,Q.start=$,Q.skip=K),Q.size>4?Q:void 0}function T(A,B,C){let{id:U,start:$,end:K,size:L}=u;if(u.next(),L>=0&&U<o){let Q=C;if(L>4){let Y=u.pos-(L-4);for(;u.pos>Y;)C=T(A,B,C)}B[--C]=Q,B[--C]=K-A,B[--C]=$-A,B[--C]=U}else L==-3?d=U:L==-4&&(p=U);return C}let E=[],D=[];for(;u.pos>0;)g(i.start||0,i.bufferStart||0,E,D,-1,0);let _=(e=i.length)!==null&&e!==void 0?e:E.length?D[0]+E[0].length:0;return new bn(h[i.topID],E.reverse(),D.reverse(),_)}const Zk=new WeakMap;function Ff(i,e){if(!i.isAnonymous||e instanceof Vs||e.type!=i)return 1;let t=Zk.get(e);if(t==null){t=1;for(let n of e.children){if(n.type!=i||!(n instanceof bn)){t=1;break}t+=Ff(i,n)}Zk.set(e,t)}return t}function eb(i,e,t,n,r,l,o,u,h){let d=0;for(let v=n;v<r;v++)d+=Ff(i,e[v]);let p=Math.ceil(d*1.5/8),g=[],O=[];function b(v,x,w,T,E){for(let D=w;D<T;){let _=D,A=x[D],B=Ff(i,v[D]);for(D++;D<T;D++){let C=Ff(i,v[D]);if(B+C>=p)break;B+=C}if(D==_+1){if(B>p){let C=v[_];b(C.children,C.positions,0,C.children.length,x[_]+E);continue}g.push(v[_])}else{let C=x[D-1]+v[D-1].length-A;g.push(eb(i,v,x,_,D,A,C,null,h))}O.push(A+E-l)}}return b(e,t,n,r,0),(u||h)(g,O,o)}class QU{constructor(){this.map=new WeakMap}setBuffer(e,t,n){let r=this.map.get(e);r||this.map.set(e,r=new Map),r.set(t,n)}getBuffer(e,t){let n=this.map.get(e);return n&&n.get(t)}set(e,t){e instanceof nr?this.setBuffer(e.context.buffer,e.index,t):e instanceof _n&&this.map.set(e.tree,t)}get(e){return e instanceof nr?this.getBuffer(e.context.buffer,e.index):e instanceof _n?this.map.get(e.tree):void 0}cursorSet(e,t){e.buffer?this.setBuffer(e.buffer.buffer,e.index,t):this.map.set(e.tree,t)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class Cl{constructor(e,t,n,r,l=!1,o=!1){this.from=e,this.to=t,this.tree=n,this.offset=r,this.open=(l?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],n=!1){let r=[new Cl(0,e.length,e,0,!1,n)];for(let l of t)l.to>e.length&&r.push(l);return r}static applyChanges(e,t,n=128){if(!t.length)return e;let r=[],l=1,o=e.length?e[0]:null;for(let u=0,h=0,d=0;;u++){let p=u<t.length?t[u]:null,g=p?p.fromA:1e9;if(g-h>=n)for(;o&&o.from<g;){let O=o;if(h>=O.from||g<=O.to||d){let b=Math.max(O.from,h)-d,v=Math.min(O.to,g)-d;O=b>=v?null:new Cl(b,v,O.tree,O.offset+d,u>0,!!p)}if(O&&r.push(O),o.to>g)break;o=l<e.length?e[l++]:null}if(!p)break;h=p.toA,d=p.toA-p.toB}return r}}class zU{startParse(e,t,n){return typeof e=="string"&&(e=new PU(e)),n=n?n.length?n.map(r=>new u0(r.from,r.to)):[new u0(0,0)]:[new u0(0,e.length)],this.createParse(e,t||[],n)}parse(e,t,n){let r=this.startParse(e,t,n);for(;;){let l=r.advance();if(l)return l}}}class PU{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new gt({perNode:!0});let BU=0;class oi{constructor(e,t,n,r){this.name=e,this.set=t,this.base=n,this.modified=r,this.id=BU++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let n=typeof e=="string"?e:"?";if(e instanceof oi&&(t=e),t?.base)throw new Error("Can not derive from a modified tag");let r=new oi(n,[],null,[]);if(r.set.push(r),t)for(let l of t.set)r.set.push(l);return r}static defineModifier(e){let t=new Ad(e);return n=>n.modified.indexOf(t)>-1?n:Ad.get(n.base||n,n.modified.concat(t).sort((r,l)=>r.id-l.id))}}let _U=0;class Ad{constructor(e){this.name=e,this.instances=[],this.id=_U++}static get(e,t){if(!t.length)return e;let n=t[0].instances.find(u=>u.base==e&&$U(t,u.modified));if(n)return n;let r=[],l=new oi(e.name,r,e,t);for(let u of t)u.instances.push(l);let o=LU(t);for(let u of e.set)if(!u.modified.length)for(let h of o)r.push(Ad.get(u,h));return l}}function $U(i,e){return i.length==e.length&&i.every((t,n)=>t==e[n])}function LU(i){let e=[[]];for(let t=0;t<i.length;t++)for(let n=0,r=e.length;n<r;n++)e.push(e[n].concat(i[t]));return e.sort((t,n)=>n.length-t.length)}function qU(i){let e=Object.create(null);for(let t in i){let n=i[t];Array.isArray(n)||(n=[n]);for(let r of t.split(" "))if(r){let l=[],o=2,u=r;for(let g=0;;){if(u=="..."&&g>0&&g+3==r.length){o=1;break}let O=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(u);if(!O)throw new RangeError("Invalid path: "+r);if(l.push(O[0]=="*"?"":O[0][0]=='"'?JSON.parse(O[0]):O[0]),g+=O[0].length,g==r.length)break;let b=r[g++];if(g==r.length&&b=="!"){o=0;break}if(b!="/")throw new RangeError("Invalid path: "+r);u=r.slice(g)}let h=l.length-1,d=l[h];if(!d)throw new RangeError("Invalid path: "+r);let p=new tO(n,o,h>0?l.slice(0,h):null);e[d]=p.sort(e[d])}}return UU.add(e)}const UU=new gt;class tO{constructor(e,t,n,r){this.tags=e,this.mode=t,this.context=n,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}tO.empty=new tO([],2,null);function jU(i,e){let t=Object.create(null);for(let l of i)if(!Array.isArray(l.tag))t[l.tag.id]=l.class;else for(let o of l.tag)t[o.id]=l.class;let{scope:n,all:r=null}={};return{style:l=>{let o=r;for(let u of l)for(let h of u.set){let d=t[h.id];if(d){o=o?o+" "+d:d;break}}return o},scope:n}}const ve=oi.define,Of=ve(),Ns=ve(),Kk=ve(Ns),Jk=ve(Ns),Ms=ve(),bf=ve(Ms),c0=ve(Ms),Ii=ve(),Ol=ve(Ii),ji=ve(),Hi=ve(),nO=ve(),mu=ve(nO),vf=ve(),He={comment:Of,lineComment:ve(Of),blockComment:ve(Of),docComment:ve(Of),name:Ns,variableName:ve(Ns),typeName:Kk,tagName:ve(Kk),propertyName:Jk,attributeName:ve(Jk),className:ve(Ns),labelName:ve(Ns),namespace:ve(Ns),macroName:ve(Ns),literal:Ms,string:bf,docString:ve(bf),character:ve(bf),attributeValue:ve(bf),number:c0,integer:ve(c0),float:ve(c0),bool:ve(Ms),regexp:ve(Ms),escape:ve(Ms),color:ve(Ms),url:ve(Ms),keyword:ji,self:ve(ji),null:ve(ji),atom:ve(ji),unit:ve(ji),modifier:ve(ji),operatorKeyword:ve(ji),controlKeyword:ve(ji),definitionKeyword:ve(ji),moduleKeyword:ve(ji),operator:Hi,derefOperator:ve(Hi),arithmeticOperator:ve(Hi),logicOperator:ve(Hi),bitwiseOperator:ve(Hi),compareOperator:ve(Hi),updateOperator:ve(Hi),definitionOperator:ve(Hi),typeOperator:ve(Hi),controlOperator:ve(Hi),punctuation:nO,separator:ve(nO),bracket:mu,angleBracket:ve(mu),squareBracket:ve(mu),paren:ve(mu),brace:ve(mu),content:Ii,heading:Ol,heading1:ve(Ol),heading2:ve(Ol),heading3:ve(Ol),heading4:ve(Ol),heading5:ve(Ol),heading6:ve(Ol),contentSeparator:ve(Ii),list:ve(Ii),quote:ve(Ii),emphasis:ve(Ii),strong:ve(Ii),link:ve(Ii),monospace:ve(Ii),strikethrough:ve(Ii),inserted:ve(),deleted:ve(),changed:ve(),invalid:ve(),meta:vf,documentMeta:ve(vf),annotation:ve(vf),processingInstruction:ve(vf),definition:oi.defineModifier("definition"),constant:oi.defineModifier("constant"),function:oi.defineModifier("function"),standard:oi.defineModifier("standard"),local:oi.defineModifier("local"),special:oi.defineModifier("special")};for(let i in He){let e=He[i];e instanceof oi&&(e.name=i)}jU([{tag:He.link,class:"tok-link"},{tag:He.heading,class:"tok-heading"},{tag:He.emphasis,class:"tok-emphasis"},{tag:He.strong,class:"tok-strong"},{tag:He.keyword,class:"tok-keyword"},{tag:He.atom,class:"tok-atom"},{tag:He.bool,class:"tok-bool"},{tag:He.url,class:"tok-url"},{tag:He.labelName,class:"tok-labelName"},{tag:He.inserted,class:"tok-inserted"},{tag:He.deleted,class:"tok-deleted"},{tag:He.literal,class:"tok-literal"},{tag:He.string,class:"tok-string"},{tag:He.number,class:"tok-number"},{tag:[He.regexp,He.escape,He.special(He.string)],class:"tok-string2"},{tag:He.variableName,class:"tok-variableName"},{tag:He.local(He.variableName),class:"tok-variableName tok-local"},{tag:He.definition(He.variableName),class:"tok-variableName tok-definition"},{tag:He.special(He.variableName),class:"tok-variableName2"},{tag:He.definition(He.propertyName),class:"tok-propertyName tok-definition"},{tag:He.typeName,class:"tok-typeName"},{tag:He.namespace,class:"tok-namespace"},{tag:He.className,class:"tok-className"},{tag:He.macroName,class:"tok-macroName"},{tag:He.propertyName,class:"tok-propertyName"},{tag:He.operator,class:"tok-operator"},{tag:He.comment,class:"tok-comment"},{tag:He.meta,class:"tok-meta"},{tag:He.invalid,class:"tok-invalid"},{tag:He.punctuation,class:"tok-punctuation"}]);var h0;const Cu=new gt;function HU(i){return xe.define({combine:i?e=>e.concat(i):void 0})}const VU=new gt;class ir{constructor(e,t,n=[],r=""){this.data=e,this.name=r,qe.prototype.hasOwnProperty("tree")||Object.defineProperty(qe.prototype,"tree",{get(){return nc(this)}}),this.parser=t,this.extension=[Fa.of(this),qe.languageData.of((l,o,u)=>{let h=eT(l,o,u),d=h.type.prop(Cu);if(!d)return[];let p=l.facet(d),g=h.type.prop(VU);if(g){let O=h.resolve(o-h.from,u);for(let b of g)if(b.test(O,l)){let v=l.facet(b.facet);return b.type=="replace"?v:v.concat(p)}}return p})].concat(n)}isActiveAt(e,t,n=-1){return eT(e,t,n).type.prop(Cu)==this.data}findRegions(e){let t=e.facet(Fa);if(t?.data==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let n=[],r=(l,o)=>{if(l.prop(Cu)==this.data){n.push({from:o,to:o+l.length});return}let u=l.prop(gt.mounted);if(u){if(u.tree.prop(Cu)==this.data){if(u.overlay)for(let h of u.overlay)n.push({from:h.from+o,to:h.to+o});else n.push({from:o,to:o+l.length});return}else if(u.overlay){let h=n.length;if(r(u.tree,u.overlay[0].from+o),n.length>h)return}}for(let h=0;h<l.children.length;h++){let d=l.children[h];d instanceof bn&&r(d,l.positions[h]+o)}};return r(nc(e),0),n}get allowsNesting(){return!0}}ir.setState=Be.define();function eT(i,e,t){let n=i.facet(Fa),r=nc(i).topNode;if(!n||n.allowsNesting)for(let l=r;l;l=l.enter(e,t,It.ExcludeBuffers))l.type.isTop&&(r=l);return r}class Ed extends ir{constructor(e,t,n){super(e,t,[],n),this.parser=t}static define(e){let t=HU(e.languageData);return new Ed(t,e.parser.configure({props:[Cu.add(n=>n.isTop?t:void 0)]}),e.name)}configure(e,t){return new Ed(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function nc(i){let e=i.field(ir.state,!1);return e?e.tree:bn.empty}class XU{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let n=this.cursorPos-this.string.length;return e<n||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-n,t-n)}}let gu=null;class Rd{constructor(e,t,n=[],r,l,o,u,h){this.parser=e,this.state=t,this.fragments=n,this.tree=r,this.treeLen=l,this.viewport=o,this.skipped=u,this.scheduleOn=h,this.parse=null,this.tempSkipped=[]}static create(e,t,n){return new Rd(e,t,[],bn.empty,0,n,[],null)}startParse(){return this.parser.startParse(new XU(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=bn.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var n;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(Cl.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(n=this.parse.stoppedAt)!==null&&n!==void 0?n:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Cl.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=gu;gu=this;try{return e()}finally{gu=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=tT(e,t.from,t.to);return e}changes(e,t){let{fragments:n,tree:r,treeLen:l,viewport:o,skipped:u}=this;if(this.takeTree(),!e.empty){let h=[];if(e.iterChangedRanges((d,p,g,O)=>h.push({fromA:d,toA:p,fromB:g,toB:O})),n=Cl.applyChanges(n,h),r=bn.empty,l=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){u=[];for(let d of this.skipped){let p=e.mapPos(d.from,1),g=e.mapPos(d.to,-1);p<g&&u.push({from:p,to:g})}}}return new Rd(this.parser,t,n,r,l,o,u,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let n=0;n<this.skipped.length;n++){let{from:r,to:l}=this.skipped[n];r<e.to&&l>e.from&&(this.fragments=tT(this.fragments,r,l),this.skipped.splice(n--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends zU{createParse(t,n,r){let l=r[0].from,o=r[r.length-1].to;return{parsedPos:l,advance(){let h=gu;if(h){for(let d of r)h.tempSkipped.push(d);e&&(h.scheduleOn=h.scheduleOn?Promise.all([h.scheduleOn,e]):e)}return this.parsedPos=o,new bn(di.none,[],[],o-l)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return gu}}function tT(i,e,t){return Cl.applyChanges(i,[{fromA:e,toA:t,fromB:e,toB:t}])}class Ia{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,n)||t.takeTree(),new Ia(t)}static init(e){let t=Math.min(3e3,e.doc.length),n=Rd.create(e.facet(Fa).parser,e,{from:0,to:t});return n.work(20,t)||n.takeTree(),new Ia(n)}}ir.state=Lt.define({create:Ia.init,update(i,e){for(let t of e.effects)if(t.is(ir.setState))return t.value;return e.startState.facet(Fa)!=e.state.facet(Fa)?Ia.init(e.state):i.apply(e)}});let zE=i=>{let e=setTimeout(()=>i(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(zE=i=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(i,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const f0=typeof navigator<"u"&&(!((h0=navigator.scheduling)===null||h0===void 0)&&h0.isInputPending)?()=>navigator.scheduling.isInputPending():null,GU=wt.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(ir.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(ir.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=zE(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:r}}=this.view,l=n.field(ir.state);if(l.tree==l.context.tree&&l.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!f0?Math.max(25,e.timeRemaining()-5):1e9),u=l.context.treeLen<r&&n.doc.length>r+1e3,h=l.context.work(()=>f0&&f0()||Date.now()>o,r+(u?0:1e5));this.chunkBudget-=Date.now()-t,(h||this.chunkBudget<=0)&&(l.context.takeTree(),this.view.dispatch({effects:ir.setState.of(new Ia(l.context))})),this.chunkBudget>0&&!(h&&!u)&&this.scheduleWork(),this.checkAsyncSchedule(l.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>On(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Fa=xe.define({combine(i){return i.length?i[0]:null},enables:i=>[ir.state,GU,fe.contentAttributes.compute([i],e=>{let t=e.facet(i);return t&&t.name?{"data-language":t.name}:{}})]});class WU{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const IU=xe.define({combine:i=>{if(!i.length)return"  ";let e=i[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(i[0]));return e}}),FU=new gt;function YU(i){let e=i.node,t=e.childAfter(e.from),n=e.lastChild;if(!t)return null;let r=i.options.simulateBreak,l=i.state.doc.lineAt(t.from),o=r==null||r<=l.from?l.to:Math.min(l.to,r);for(let u=t.to;;){let h=e.childAfter(u);if(!h||h==n)return null;if(!h.type.isSkipped){if(h.from>=o)return null;let d=/^ */.exec(l.text.slice(t.to-l.from))[0].length;return{from:t.from,to:t.to+d}}u=h.to}}function d0({closing:i,align:e=!0,units:t=1}){return n=>ZU(n,e,t,i)}function ZU(i,e,t,n,r){let l=i.textAfter,o=l.match(/^\s*/)[0].length,u=n&&l.slice(o,o+n.length)==n||r==i.pos+o,h=e?YU(i):null;return h?u?i.column(h.from):i.column(h.to):i.baseIndent+(u?0:i.unit*t)}const KU=new gt;function JU(i){let e=i.firstChild,t=i.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?i.to:t.from}:null}const ej=Object.create(null),nT=[di.none],iT=[],rT=Object.create(null),tj=Object.create(null);for(let[i,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])tj[i]=nj(ej,e);function p0(i,e){iT.indexOf(i)>-1||(iT.push(i),console.warn(e))}function nj(i,e){let t=[];for(let u of e.split(" ")){let h=[];for(let d of u.split(".")){let p=i[d]||He[d];p?typeof p=="function"?h.length?h=h.map(p):p0(d,`Modifier ${d} used at start of tag`):h.length?p0(d,`Tag ${d} used as modifier`):h=Array.isArray(p)?p:[p]:p0(d,`Unknown highlighting tag ${d}`)}for(let d of h)t.push(d)}if(!t.length)return 0;let n=e.replace(/ /g,"_"),r=n+" "+t.map(u=>u.id),l=rT[r];if(l)return l.id;let o=rT[r]=di.define({id:nT.length,name:n,props:[qU({[n]:t})]});return nT.push(o),o.id}st.RTL,st.LTR;function sT(i){let e=Object.keys(i).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function ij(i){let e=Object.create(null),t=Object.create(null);for(let{label:r}of i){e[r[0]]=!0;for(let l=1;l<r.length;l++)t[r[l]]=!0}let n=sT(e)+sT(t)+"*$";return[new RegExp("^"+n),new RegExp(n)]}function rj(i){let e=i.map(r=>typeof r=="string"?{label:r}:r),[t,n]=e.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:ij(e);return r=>{let l=r.matchBefore(n);return l||r.explicit?{from:l?l.from:r.pos,options:e,validFor:t}:null}}function sj(i,e){return t=>{for(let n=nc(t.state).resolveInner(t.pos,-1);n;n=n.parent){if(i.indexOf(n.name)>-1)return null;if(n.type.isTop)break}return e(t)}}const lj=ki.define(),aj=fe.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class oj{constructor(e,t,n,r){this.field=e,this.line=t,this.from=n,this.to=r}}class tb{constructor(e,t,n){this.field=e,this.from=t,this.to=n}map(e){let t=e.mapPos(this.from,-1,un.TrackDel),n=e.mapPos(this.to,1,un.TrackDel);return t==null||n==null?null:new tb(this.field,t,n)}}class nb{constructor(e,t){this.lines=e,this.fieldPositions=t}instantiate(e,t){let n=[],r=[t],l=e.doc.lineAt(t),o=/^\s*/.exec(l.text)[0];for(let h of this.lines){if(n.length){let d=o,p=/^\t*/.exec(h)[0].length;for(let g=0;g<p;g++)d+=e.facet(IU);r.push(t+d.length-p),h=d+h.slice(p)}n.push(h),t+=h.length+1}let u=this.fieldPositions.map(h=>new tb(h.field,r[h.line]+h.from,r[h.line]+h.to));return{text:n,ranges:u}}static parse(e){let t=[],n=[],r=[],l;for(let o of e.split(/\r\n?|\n/)){for(;l=/[#$]\{(?:(\d+)(?::([^}]*))?|((?:\\[{}]|[^}])*))\}/.exec(o);){let u=l[1]?+l[1]:null,h=l[2]||l[3]||"",d=-1,p=h.replace(/\\[{}]/g,g=>g[1]);for(let g=0;g<t.length;g++)(u!=null?t[g].seq==u:p&&t[g].name==p)&&(d=g);if(d<0){let g=0;for(;g<t.length&&(u==null||t[g].seq!=null&&t[g].seq<u);)g++;t.splice(g,0,{seq:u,name:p}),d=g;for(let O of r)O.field>=d&&O.field++}r.push(new oj(d,n.length,l.index,l.index+p.length)),o=o.slice(0,l.index)+h+o.slice(l.index+l[0].length)}o=o.replace(/\\([{}])/g,(u,h,d)=>{for(let p of r)p.line==n.length&&p.from>d&&(p.from--,p.to--);return h}),n.push(o)}return new nb(n,r)}}let uj=Re.widget({widget:new class extends dr{toDOM(){let i=document.createElement("span");return i.className="cm-snippetFieldPosition",i}ignoreEvent(){return!1}}}),cj=Re.mark({class:"cm-snippetField"});class io{constructor(e,t){this.ranges=e,this.active=t,this.deco=Re.set(e.map(n=>(n.from==n.to?uj:cj).range(n.from,n.to)))}map(e){let t=[];for(let n of this.ranges){let r=n.map(e);if(!r)return null;t.push(r)}return new io(t,this.active)}selectionInsideField(e){return e.ranges.every(t=>this.ranges.some(n=>n.field==this.active&&n.from<=t.from&&n.to>=t.to))}}const bc=Be.define({map(i,e){return i&&i.map(e)}}),hj=Be.define(),ic=Lt.define({create(){return null},update(i,e){for(let t of e.effects){if(t.is(bc))return t.value;if(t.is(hj)&&i)return new io(i.ranges,t.value)}return i&&e.docChanged&&(i=i.map(e.changes)),i&&e.selection&&!i.selectionInsideField(e.selection)&&(i=null),i},provide:i=>fe.decorations.from(i,e=>e?e.deco:Re.none)});function ib(i,e){return re.create(i.filter(t=>t.field==e).map(t=>re.range(t.from,t.to)))}function fj(i){let e=nb.parse(i);return(t,n,r,l)=>{let{text:o,ranges:u}=e.instantiate(t.state,r),{main:h}=t.state.selection,d={changes:{from:r,to:l==h.from?h.to:l,insert:Ze.of(o)},scrollIntoView:!0,annotations:n?[lj.of(n),$t.userEvent.of("input.complete")]:void 0};if(u.length&&(d.selection=ib(u,0)),u.some(p=>p.field>0)){let p=new io(u,0),g=d.effects=[bc.of(p)];t.state.field(ic,!1)===void 0&&g.push(Be.appendConfig.of([ic,yj,Oj,aj]))}t.dispatch(t.state.update(d))}}function PE(i){return({state:e,dispatch:t})=>{let n=e.field(ic,!1);if(!n||i<0&&n.active==0)return!1;let r=n.active+i,l=i>0&&!n.ranges.some(o=>o.field==r+i);return t(e.update({selection:ib(n.ranges,r),effects:bc.of(l?null:new io(n.ranges,r)),scrollIntoView:!0})),!0}}const dj=({state:i,dispatch:e})=>i.field(ic,!1)?(e(i.update({effects:bc.of(null)})),!0):!1,pj=PE(1),mj=PE(-1),gj=[{key:"Tab",run:pj,shift:mj},{key:"Escape",run:dj}],lT=xe.define({combine(i){return i.length?i[0]:gj}}),yj=Fr.highest(pc.compute([lT],i=>i.facet(lT)));function Mr(i,e){return Object.assign(Object.assign({},e),{apply:fj(i)})}const Oj=fe.domEventHandlers({mousedown(i,e){let t=e.state.field(ic,!1),n;if(!t||(n=e.posAtCoords({x:i.clientX,y:i.clientY}))==null)return!1;let r=t.ranges.find(l=>l.from<=n&&l.to>=n);return!r||r.field==t.active?!1:(e.dispatch({selection:ib(t.ranges,r.field),effects:bc.of(t.ranges.some(l=>l.field>r.field)?new io(t.ranges,r.field):null),scrollIntoView:!0}),!0)}}),BE=new class extends _s{};BE.startSide=1;BE.endSide=-1;const aT=new QU,_E=new Set(["Script","Body","FunctionDefinition","ClassDefinition","LambdaExpression","ForStatement","MatchClause"]);function Sf(i){return(e,t,n)=>{if(n)return!1;let r=e.node.getChild("VariableName");return r&&t(r,i),!0}}const bj={FunctionDefinition:Sf("function"),ClassDefinition:Sf("class"),ForStatement(i,e,t){if(t){for(let n=i.node.firstChild;n;n=n.nextSibling)if(n.name=="VariableName")e(n,"variable");else if(n.name=="in")break}},ImportStatement(i,e){var t,n;let{node:r}=i,l=((t=r.firstChild)===null||t===void 0?void 0:t.name)=="from";for(let o=r.getChild("import");o;o=o.nextSibling)o.name=="VariableName"&&((n=o.nextSibling)===null||n===void 0?void 0:n.name)!="as"&&e(o,l?"variable":"namespace")},AssignStatement(i,e){for(let t=i.node.firstChild;t;t=t.nextSibling)if(t.name=="VariableName")e(t,"variable");else if(t.name==":"||t.name=="AssignOp")break},ParamList(i,e){for(let t=null,n=i.node.firstChild;n;n=n.nextSibling)n.name=="VariableName"&&(!t||!/\*|AssignOp/.test(t.name))&&e(n,"variable"),t=n},CapturePattern:Sf("variable"),AsPattern:Sf("variable"),__proto__:null};function $E(i,e){let t=aT.get(e);if(t)return t;let n=[],r=!0;function l(o,u){let h=i.sliceString(o.from,o.to);n.push({label:h,type:u})}return e.cursor(It.IncludeAnonymous).iterate(o=>{if(o.name){let u=bj[o.name];if(u&&u(o,l,r)||!r&&_E.has(o.name))return!1;r=!1}else if(o.to-o.from>8192){for(let u of $E(i,o.node))n.push(u);return!1}}),aT.set(e,n),n}const oT=/^[\w\xa1-\uffff][\w\d\xa1-\uffff]*$/,LE=["String","FormatString","Comment","PropertyName"];function vj(i){let e=nc(i.state).resolveInner(i.pos,-1);if(LE.indexOf(e.name)>-1)return null;let t=e.name=="VariableName"||e.to-e.from<20&&oT.test(i.state.sliceDoc(e.from,e.to));if(!t&&!i.explicit)return null;let n=[];for(let r=e;r;r=r.parent)_E.has(r.name)&&(n=n.concat($E(i.state.doc,r)));return{options:n,from:t?e.from:i.pos,validFor:oT}}const Sj=["__annotations__","__builtins__","__debug__","__doc__","__import__","__name__","__loader__","__package__","__spec__","False","None","True"].map(i=>({label:i,type:"constant"})).concat(["ArithmeticError","AssertionError","AttributeError","BaseException","BlockingIOError","BrokenPipeError","BufferError","BytesWarning","ChildProcessError","ConnectionAbortedError","ConnectionError","ConnectionRefusedError","ConnectionResetError","DeprecationWarning","EOFError","Ellipsis","EncodingWarning","EnvironmentError","Exception","FileExistsError","FileNotFoundError","FloatingPointError","FutureWarning","GeneratorExit","IOError","ImportError","ImportWarning","IndentationError","IndexError","InterruptedError","IsADirectoryError","KeyError","KeyboardInterrupt","LookupError","MemoryError","ModuleNotFoundError","NameError","NotADirectoryError","NotImplemented","NotImplementedError","OSError","OverflowError","PendingDeprecationWarning","PermissionError","ProcessLookupError","RecursionError","ReferenceError","ResourceWarning","RuntimeError","RuntimeWarning","StopAsyncIteration","StopIteration","SyntaxError","SyntaxWarning","SystemError","SystemExit","TabError","TimeoutError","TypeError","UnboundLocalError","UnicodeDecodeError","UnicodeEncodeError","UnicodeError","UnicodeTranslateError","UnicodeWarning","UserWarning","ValueError","Warning","ZeroDivisionError"].map(i=>({label:i,type:"type"}))).concat(["bool","bytearray","bytes","classmethod","complex","float","frozenset","int","list","map","memoryview","object","range","set","staticmethod","str","super","tuple","type"].map(i=>({label:i,type:"class"}))).concat(["abs","aiter","all","anext","any","ascii","bin","breakpoint","callable","chr","compile","delattr","dict","dir","divmod","enumerate","eval","exec","exit","filter","format","getattr","globals","hasattr","hash","help","hex","id","input","isinstance","issubclass","iter","len","license","locals","max","min","next","oct","open","ord","pow","print","property","quit","repr","reversed","round","setattr","slice","sorted","sum","vars","zip"].map(i=>({label:i,type:"function"}))),xj=[Mr("def ${name}(${params}):\n	${}",{label:"def",detail:"function",type:"keyword"}),Mr("for ${name} in ${collection}:\n	${}",{label:"for",detail:"loop",type:"keyword"}),Mr("while ${}:\n	${}",{label:"while",detail:"loop",type:"keyword"}),Mr("try:\n	${}\nexcept ${error}:\n	${}",{label:"try",detail:"/ except block",type:"keyword"}),Mr(`if \${}:
	
`,{label:"if",detail:"block",type:"keyword"}),Mr("if ${}:\n	${}\nelse:\n	${}",{label:"if",detail:"/ else block",type:"keyword"}),Mr("class ${name}:\n	def __init__(self, ${params}):\n			${}",{label:"class",detail:"definition",type:"keyword"}),Mr("import ${module}",{label:"import",detail:"statement",type:"keyword"}),Mr("from ${module} import ${names}",{label:"from",detail:"import",type:"keyword"})],wj=sj(LE,rj(Sj.concat(xj)));function m0(i){let{node:e,pos:t}=i,n=i.lineIndent(t,-1),r=null;for(;;){let l=e.childBefore(t);if(l)if(l.name=="Comment")t=l.from;else if(l.name=="Body"||l.name=="MatchBody")i.baseIndentFor(l)+i.unit<=n&&(r=l),e=l;else if(l.name=="MatchClause")e=l;else if(l.type.is("Statement"))e=l;else break;else break}return r}function g0(i,e){let t=i.baseIndentFor(e),n=i.lineAt(i.pos,-1),r=n.from+n.text.length;return/^\s*($|#)/.test(n.text)&&i.node.to<r+100&&!/\S/.test(i.state.sliceDoc(r,i.node.to))&&i.lineIndent(i.pos,-1)<=t||/^\s*(else:|elif |except |finally:|case\s+[^=:]+:)/.test(i.textAfter)&&i.lineIndent(i.pos,-1)>t?null:t+i.unit}const y0=Ed.define({name:"python",parser:TU.configure({props:[FU.add({Body:i=>{var e;let t=/^\s*(#|$)/.test(i.textAfter)&&m0(i)||i.node;return(e=g0(i,t))!==null&&e!==void 0?e:i.continue()},MatchBody:i=>{var e;let t=m0(i);return(e=g0(i,t||i.node))!==null&&e!==void 0?e:i.continue()},IfStatement:i=>/^\s*(else:|elif )/.test(i.textAfter)?i.baseIndent:i.continue(),"ForStatement WhileStatement":i=>/^\s*else:/.test(i.textAfter)?i.baseIndent:i.continue(),TryStatement:i=>/^\s*(except[ :]|finally:|else:)/.test(i.textAfter)?i.baseIndent:i.continue(),MatchStatement:i=>/^\s*case /.test(i.textAfter)?i.baseIndent+i.unit:i.continue(),"TupleExpression ComprehensionExpression ParamList ArgList ParenthesizedExpression":d0({closing:")"}),"DictionaryExpression DictionaryComprehensionExpression SetExpression SetComprehensionExpression":d0({closing:"}"}),"ArrayExpression ArrayComprehensionExpression":d0({closing:"]"}),MemberExpression:i=>i.baseIndent+i.unit,"String FormatString":()=>null,Script:i=>{var e;let t=m0(i);return(e=t&&g0(i,t))!==null&&e!==void 0?e:i.continue()}}),KU.add({"ArrayExpression DictionaryExpression SetExpression TupleExpression":JU,Body:(i,e)=>({from:i.from+1,to:i.to-(i.to==e.doc.length?0:1)}),"String FormatString":(i,e)=>({from:e.doc.lineAt(i.from).to,to:i.to})})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"'''",'"""'],stringPrefixes:["f","fr","rf","r","u","b","br","rb","F","FR","RF","R","U","B","BR","RB"]},commentTokens:{line:"#"},indentOnInput:/^\s*([\}\]\)]|else:|elif |except |finally:|case\s+[^:]*:?)$/}});function kj(){return new WU(y0,[y0.data.of({autocomplete:vj}),y0.data.of({autocomplete:wj})])}const Tj=({file:i,language:e="python",onChange:t,onSave:n})=>{const[r,l]=M.useState(""),[o,u]=M.useState(!1),[h,d]=M.useState(!1);M.useEffect(()=>{i?(l(i.contents),u(!1)):(l(""),u(!1))},[i]);const p=M.useCallback(b=>{l(b),u(b!==(i?.contents||"")),t?.(b)},[i?.contents,t]),g=M.useCallback(async()=>{if(!(!o||!n)){d(!0);try{await n(),u(!1)}catch(b){console.error("Failed to save file:",b)}finally{d(!1)}}},[o,n]);M.useEffect(()=>{const b=v=>{(v.ctrlKey||v.metaKey)&&v.key==="s"&&(v.preventDefault(),g())};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[g]);const O=[fe.theme({"&":{fontSize:"14px",fontFamily:'"Monaco", "Menlo", "Ubuntu Mono", monospace'},".cm-content":{padding:"16px",minHeight:"100%"},".cm-focused":{outline:"none"},".cm-editor":{height:"100%"},".cm-scroller":{height:"100%"}}),fe.lineWrapping];return e==="python"&&O.push(kj()),M.useEffect(()=>{const b=v=>{o&&(v.preventDefault(),v.returnValue="You have unsaved changes. Are you sure you want to leave?")};return window.addEventListener("beforeunload",b),()=>window.removeEventListener("beforeunload",b)},[o]),i?P.jsxs("div",{className:"code-editor",children:[P.jsxs("div",{className:"editor-header",children:[P.jsxs("div",{className:"editor-file-info",children:[P.jsx("span",{className:"file-name",children:i.name}),o&&P.jsx("span",{className:"unsaved-indicator",children:""}),h&&P.jsx("span",{className:"saving-indicator",children:"Saving..."})]}),P.jsx("div",{className:"editor-actions",children:P.jsx("button",{className:"save-button",onClick:g,disabled:!o||h,title:"Save (Ctrl+S)",children:"Save"})})]}),P.jsx("div",{className:"editor-content",children:P.jsx(mE,{value:r,onChange:p,extensions:O,basicSetup:{lineNumbers:!0,foldGutter:!0,dropCursor:!1,allowMultipleSelections:!1,indentOnInput:!0,bracketMatching:!0,closeBrackets:!0,autocompletion:!0,highlightSelectionMatches:!1,searchKeymap:!0}})}),o&&P.jsx("div",{className:"unsaved-changes-warning",children:P.jsx("span",{children:"You have unsaved changes"})})]}):P.jsx("div",{className:"code-editor",children:P.jsx("div",{className:"editor-placeholder",children:P.jsxs("div",{className:"placeholder-content",children:[P.jsx("h3",{children:"No file selected"}),P.jsx("p",{children:"Select a file from the file explorer to start editing"})]})})})},uT=()=>{const{state:i,dispatch:e}=Ka(),{selectedFile:t,currentGraph:n}=i,[r,l]=M.useState("select"),o=w=>w.endsWith(".py")?"python":"plaintext",u=M.useCallback(w=>{if(!t)return;const T={...t,contents:w};e({type:"SET_SELECTED_FILE",payload:T})},[t,e]),h=M.useCallback(async()=>{if(!(!t||!n))try{e({type:"SET_LOADING",payload:!0}),e({type:"CLEAR_ERROR"});let w,T=!1;for(const E of n.plans)if(E.files.find(_=>_.name===t.name)){w=await gx.updatePlanFile(E.name,t.name,t.contents),T=!0;break}if(!T){for(const E of n.tasks)if(E.files.find(_=>_.name===t.name)){w=await gx.updateTaskFile(E.name,t.name,t.contents),T=!0;break}}if(T&&w){e({type:"SET_SELECTED_FILE",payload:w});const E={...n};E.plans=E.plans.map(D=>({...D,files:D.files.map(_=>_.name===t.name?w:_)})),E.tasks=E.tasks.map(D=>({...D,files:D.files.map(_=>_.name===t.name?w:_)})),e({type:"SET_CURRENT_GRAPH",payload:E})}}catch(w){console.error("Failed to save file:",w),e({type:"SET_ERROR",payload:"Failed to save file. Please try again."})}finally{e({type:"SET_LOADING",payload:!1})}},[t,n,e]),d=M.useCallback(w=>{l(w)},[]),p=M.useCallback(w=>{console.log("Node creation requested:",w)},[]),g=M.useCallback(w=>{console.log("Edge creation requested:",w)},[]),O=M.useCallback(w=>{console.log("Node selected:",w)},[]),b=M.useCallback(w=>{console.log("Node deletion requested:",w)},[]),v=M.useCallback(w=>{console.log("Edge deletion requested:",w)},[]),x=M.useCallback((w,T,E)=>{console.log("Node moved:",w,T,E)},[]);return P.jsx(Oz,{header:P.jsx(RT,{}),leftPane:P.jsx(Cz,{}),centerTopPane:P.jsx(Nz,{graph:n||void 0,selectedTool:r,onToolChange:d,onNodeCreate:p,onEdgeCreate:g,onNodeSelect:O,onNodeDelete:b,onEdgeDelete:v,onNodeMove:x}),centerBottomPane:P.jsx(Tj,{file:t||void 0,language:t?o(t.name):"python",onChange:u,onSave:h})})};function Cj(){return P.jsx(DD,{children:P.jsx(ND,{children:P.jsx(ED,{children:P.jsx(gD,{children:P.jsx("div",{className:"app",children:P.jsxs(WM,{children:[P.jsx(xf,{path:"/",element:P.jsx(yz,{})}),P.jsx(xf,{path:"/editor",element:P.jsx(uT,{})}),P.jsx(xf,{path:"/editor/:graphId",element:P.jsx(uT,{})})]})})})})})})}iM.createRoot(document.getElementById("root")).render(P.jsx(M.StrictMode,{children:P.jsx(Cj,{})}));
